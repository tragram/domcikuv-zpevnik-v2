import{c as N,a as Ce,r as h,j as r,u as hn,b as Xe,d as S,e as fn,f as Je,g as ue,L as gn,h as pn,i as mn,k as xn}from"./main-BTjYcm9L.js";import{P as E,c as D,a as _e,R as vn,h as yn,u as bn,F as wn,D as jn,b as Sn,d as ee,e as te,f as ne,g as ge,i as ae,j as ie,k as ce,l as kn,m as Mn,n as se,o as Ae,p as Ze,q as Nn,T as Rn,M as Cn,r as _n,s as An}from"./useLocalStorageState-Ca9-2fkJ.js";import{u as B,S as En,B as I}from"./button-CDV216ts.js";import{I as Dn}from"./IllustrationPrompt-DqYMXL-3.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=N("ArrowDown01",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["rect",{x:"15",y:"4",width:"4",height:"6",ry:"2",key:"1bwicg"}],["path",{d:"M17 20v-6h-2",key:"1qp1so"}],["path",{d:"M15 20h4",key:"1j968p"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=N("ArrowDown10",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M17 10V4h-2",key:"zcsr5x"}],["path",{d:"M15 10h4",key:"id2lce"}],["rect",{x:"15",y:"14",width:"4",height:"6",ry:"2",key:"33xykx"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=N("ArrowDownAZ",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=N("ArrowDownUp",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=N("ArrowDownZA",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M15 4h5l-5 6h5",key:"8asdl1"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20",key:"r6l5cz"}],["path",{d:"M20 18h-5",key:"18j1r2"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=N("AudioLines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=N("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=N("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=N("FlagOff",[["path",{d:"M8 2c3 0 5 2 8 2s4-1 4-1v11",key:"9rwyz9"}],["path",{d:"M4 22V4",key:"1plyxx"}],["path",{d:"M4 15s1-1 4-1 5 2 8 2",key:"1myooe"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=N("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=N("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=N("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=N("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=N("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=N("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=N("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Ee="Avatar",[Gn,Yr]=Ce(Ee),[Un,tt]=Gn(Ee),nt=h.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[o,a]=h.useState("idle");return r.jsx(Un,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:r.jsx(E.span,{...s,ref:t})})});nt.displayName=Ee;var st="AvatarImage",rt=h.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:o=()=>{},...a}=e,i=tt(st,n),c=Yn(s,a.referrerPolicy),l=hn(u=>{o(u),i.onImageLoadingStatusChange(u)});return Xe(()=>{c!=="idle"&&l(c)},[c,l]),c==="loaded"?r.jsx(E.img,{...a,ref:t,src:s}):null});rt.displayName=st;var ot="AvatarFallback",at=h.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...o}=e,a=tt(ot,n),[i,c]=h.useState(s===void 0);return h.useEffect(()=>{if(s!==void 0){const l=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(l)}},[s]),i&&a.imageLoadingStatus!=="loaded"?r.jsx(E.span,{...o,ref:t}):null});at.displayName=ot;function Yn(e,t){const[n,s]=h.useState("idle");return Xe(()=>{if(!e){s("error");return}let o=!0;const a=new window.Image,i=c=>()=>{o&&s(c)};return s("loading"),a.onload=i("loaded"),a.onerror=i("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{o=!1}},[e,t]),n}var it=nt,ct=rt,lt=at;const De=h.forwardRef(({className:e,...t},n)=>r.jsx(it,{ref:n,className:S("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));De.displayName=it.displayName;const Ie=h.forwardRef(({className:e,...t},n)=>r.jsx(ct,{ref:n,className:S("aspect-square flex object-cover w-full h-full",e),...t}));Ie.displayName=ct.displayName;const dt=h.forwardRef(({className:e,...t},n)=>r.jsx(lt,{ref:n,className:S("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));dt.displayName=lt.displayName;var Le="Dialog",[ut,Qr]=Ce(Le),[Qn,L]=ut(Le),ht=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,c=h.useRef(null),l=h.useRef(null),[u=!1,f]=Je({prop:s,defaultProp:o,onChange:a});return r.jsx(Qn,{scope:t,triggerRef:c,contentRef:l,contentId:ue(),titleId:ue(),descriptionId:ue(),open:u,onOpenChange:f,onOpenToggle:h.useCallback(()=>f(d=>!d),[f]),modal:i,children:n})};ht.displayName=Le;var ft="DialogTrigger",Xn=h.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,o=L(ft,n),a=B(t,o.triggerRef);return r.jsx(E.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Te(o.open),...s,ref:a,onClick:D(e.onClick,o.onOpenToggle)})});Xn.displayName=ft;var Pe="DialogPortal",[Jn,gt]=ut(Pe,{forceMount:void 0}),pt=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:o}=e,a=L(Pe,t);return r.jsx(Jn,{scope:t,forceMount:n,children:h.Children.map(s,i=>r.jsx(_e,{present:n||a.open,children:r.jsx(Sn,{asChild:!0,container:o,children:i})}))})};pt.displayName=Pe;var re="DialogOverlay",mt=h.forwardRef((e,t)=>{const n=gt(re,e.__scopeDialog),{forceMount:s=n.forceMount,...o}=e,a=L(re,e.__scopeDialog);return a.modal?r.jsx(_e,{present:s||a.open,children:r.jsx(Zn,{...o,ref:t})}):null});mt.displayName=re;var Zn=h.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,o=L(re,n);return r.jsx(vn,{as:En,allowPinchZoom:!0,shards:[o.contentRef],children:r.jsx(E.div,{"data-state":Te(o.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Q="DialogContent",xt=h.forwardRef((e,t)=>{const n=gt(Q,e.__scopeDialog),{forceMount:s=n.forceMount,...o}=e,a=L(Q,e.__scopeDialog);return r.jsx(_e,{present:s||a.open,children:a.modal?r.jsx(qn,{...o,ref:t}):r.jsx(es,{...o,ref:t})})});xt.displayName=Q;var qn=h.forwardRef((e,t)=>{const n=L(Q,e.__scopeDialog),s=h.useRef(null),o=B(t,n.contentRef,s);return h.useEffect(()=>{const a=s.current;if(a)return yn(a)},[]),r.jsx(vt,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:D(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:D(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0;(i.button===2||c)&&a.preventDefault()}),onFocusOutside:D(e.onFocusOutside,a=>a.preventDefault())})}),es=h.forwardRef((e,t)=>{const n=L(Q,e.__scopeDialog),s=h.useRef(!1),o=h.useRef(!1);return r.jsx(vt,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,c;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(s.current||(c=n.triggerRef.current)==null||c.focus(),a.preventDefault()),s.current=!1,o.current=!1},onInteractOutside:a=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),vt=h.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,...i}=e,c=L(Q,n),l=h.useRef(null),u=B(t,l);return bn(),r.jsxs(r.Fragment,{children:[r.jsx(wn,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:o,onUnmountAutoFocus:a,children:r.jsx(jn,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Te(c.open),...i,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(ts,{titleId:c.titleId}),r.jsx(ss,{contentRef:l,descriptionId:c.descriptionId})]})]})}),Oe="DialogTitle",yt=h.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,o=L(Oe,n);return r.jsx(E.h2,{id:o.titleId,...s,ref:t})});yt.displayName=Oe;var bt="DialogDescription",wt=h.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,o=L(bt,n);return r.jsx(E.p,{id:o.descriptionId,...s,ref:t})});wt.displayName=bt;var jt="DialogClose",St=h.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,o=L(jt,n);return r.jsx(E.button,{type:"button",...s,ref:t,onClick:D(e.onClick,()=>o.onOpenChange(!1))})});St.displayName=jt;function Te(e){return e?"open":"closed"}var kt="DialogTitleWarning",[Xr,Mt]=fn(kt,{contentName:Q,titleName:Oe,docsSlug:"dialog"}),ts=({titleId:e})=>{const t=Mt(kt),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},ns="DialogDescriptionWarning",ss=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Mt(ns).contentName}}.`;return h.useEffect(()=>{var a;const o=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},rs=ht,os=pt,Nt=mt,Rt=xt,Ct=yt,_t=wt,as=St;const is=rs,cs=os,ls=as,At=h.forwardRef(({className:e,...t},n)=>r.jsx(Nt,{ref:n,className:S("fixed inset-0 z-30 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 backdrop-blur-sm",e),...t}));At.displayName=Nt.displayName;const Et=h.forwardRef(({className:e,close:t,children:n,...s},o)=>r.jsxs(cs,{children:[r.jsx(At,{onClick:a=>{t(),a.stopPropagation()}}),r.jsxs(Rt,{onClick:a=>a.stopPropagation(),ref:o,className:S("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[n,r.jsx(ls,{asChild:!0,children:r.jsx(I,{variant:"circular",size:"icon",onClick:a=>a.stopPropagation(),className:"absolute top-4 right-4 p-2","aria-label":"Close full screen image",children:r.jsx(et,{className:"h-6 w-6"})})})]})]}));Et.displayName=Rt.displayName;const Dt=h.forwardRef(({className:e,...t},n)=>r.jsx(Ct,{ref:n,className:S("text-lg font-semibold leading-none tracking-tight",e),...t}));Dt.displayName=Ct.displayName;const It=h.forwardRef(({className:e,...t},n)=>r.jsx(_t,{ref:n,className:S("text-sm text-muted-foreground",e),...t}));It.displayName=_t.displayName;function ds({avatarClassName:e,song:t}){const[n,s]=h.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx(De,{className:S("cursor-pointer",e),onClick:o=>{o.stopPropagation(),s(!0)},children:r.jsx(Ie,{src:t.thumbnailURL(),alt:"song illustration thumbnail"})}),r.jsxs(is,{open:n,onOpenChange:s,children:[r.jsx(Dt,{className:"hidden",children:"Illustration image view"}),r.jsx(It,{className:"hidden",children:"Illustration"}),r.jsx(Et,{className:"max-w-[512px] max-h-[calc(100vh)] h-fit rounded-lg backdrop-blur-sm p-0 avatar-modal-dialog overflow-clip content-radix bg-glass/50 gap-0 flex flex-col",close:()=>s(!1),children:r.jsxs("div",{className:"h-full w-full relative",children:[r.jsx("div",{className:"relative flex justify-center max-h-[512px] h-[70%] shadow-lg",children:r.jsx("img",{style:{backgroundImage:`url(${t.thumbnailURL()})`,backgroundRepeat:"no-repeat",backgroundSize:"cover"},src:t.illustrationURL(),loading:"lazy",width:512,height:512,className:"object-scale-down z-50"})}),r.jsx(Dn,{song:t,show:n,className:"text-center text-white font-bold !items-center  h-[256px] [@media(max-height:1000px)]:h-[150px] [@media(max-height:800px)]:h-[100px] [@media(max-height:700px)]:!hidden"})]})})]})]})}const Be={czech:"cz",english:"gb",german:"de",slovak:"sk",polish:"pl",spanish:"uy",romanian:"ro",finnish:"fi",estonian:"ee",french:"fr",italian:"it",portuguese:"br",icelandic:"is",all:"un",other:"eu"};function us(e){return e in Be?"https://flagcdn.com/"+Be[e]+".svg":e==="russian"?"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Flag_of_Mordor.svg/800px-Flag_of_Mordor.svg.png":""}function Lt({language:e}){return r.jsxs(De,{className:"w-6 h-6 shadow-black",children:[r.jsx(Ie,{alt:e,src:us(e)}),r.jsx(dt,{children:r.jsx(zn,{})})]})}function hs({value:e,maxValue:t,color:n="hsl(var(--primary))",strokeWidth:s=10}){return r.jsxs("div",{className:"block relative items-center justify-center h-10 w-10",children:[r.jsxs("svg",{className:"w-full h-full relative overflow-visible",viewBox:"0 0 100 100",children:[r.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"transparent",stroke:"#e5e7eb",strokeWidth:s}),r.jsx("circle",{cx:"50",cy:"50",r:"40",className:"transition-all !duration-500 progress",fill:"transparent",transform:"rotate(-90 50 50)",stroke:n,strokeWidth:s*1.2,strokeDasharray:"251.3",strokeDashoffset:251.3*(1-e/t),strokeLinecap:"round",role:"progressbar"})]}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-normal text-[0.65rem] text-muted-foreground",children:e})]})}const fs=70,gs=["January","February","March","April","May","June","July","August","September","October","November","December"],ps=h.memo(({songRangeSemitones:e,maxRange:t})=>e?r.jsx(hs,{value:e||t,maxValue:t}):r.jsx(r.Fragment,{})),ms=h.memo(({month:e,year:t})=>r.jsxs("div",{className:"basis-[13%] min-w-12 flex-col content-center justify-center hidden sm:flex text-center",children:[r.jsx("h3",{className:"text-xs opacity-70",children:gs[e-1]}),r.jsx("h2",{className:"text-sm opacity-70",children:t})]})),xs=h.memo(({capo:e})=>r.jsxs("div",{className:"basis-[13%] flex-shrink min-w-12 text-center content-center justify-center hidden lg:flex flex-col",children:[r.jsx("h2",{className:"text-xs opacity-70",children:"Capo"}),r.jsx("h3",{className:"text-sm opacity-70",children:e})]})),vs=h.memo(({title:e,artist:t})=>r.jsxs("div",{className:"flex-auto min-w-40 flex-col text-left content-center",children:[r.jsx("h2",{className:"text-sm font-bold truncate song-title",children:e}),r.jsx("h3",{className:"text-sm opacity-50 truncate song-artist",children:t})]})),ys=h.memo(({song:e,maxRange:t})=>e?r.jsx("div",{className:S(`h-[${fs}px]`,"flex items-center container max-w-2xl mx-auto px-2 sm:px-4 song-row-wrapper"),children:r.jsx("div",{className:"flex h-14 min-w-72 w-full rounded-full song-row-bg-image",style:{backgroundImage:`url(${e.thumbnailURL()})`},children:r.jsxs("div",{className:"flex relative h-full w-full items-center rounded-full p-1 backdrop-blur-md song-row-bg-image shadow-black row-text-shadow",children:[r.jsx(ds,{avatarClassName:"absolute -left-0 top-0 bottom-0 m-auto song-avatar z-10 w-16 h-16 text-large",song:e}),r.jsxs(gn,{to:e.url(),className:"flex relative h-12 song-row w-full backdrop-blur-lg bg-glass/60 hover:bg-glass/90 rounded-full",children:[r.jsx("div",{className:"flex basis-[12%] min-w-[72px] rounded-l-full content-center justify-center relative"}),r.jsx(vs,{title:e.title,artist:e.artist}),r.jsx(ms,{month:e.dateAdded.month,year:e.dateAdded.year}),r.jsx(xs,{capo:e.capo}),r.jsx("div",{className:"hidden basis-[13%] min-w-12 sm:flex content-center justify-center",children:r.jsx("div",{className:"flex items-center",children:r.jsx(ps,{songRangeSemitones:e.range.semitones,maxRange:t})})}),r.jsx("div",{className:"flex basis-1/12 min-w-12 items-center justify-end p-2",children:r.jsx(Lt,{language:e.language})})]})]})})}):(console.error("Invalid song provided to SongRow"),r.jsx("div",{className:"h-[70px] flex items-center container max-w-2xl mx-auto px-2 sm:px-4 bg-white text-foreground",children:"Invalid song"})));function bs(e){const t=h.useCallback(o=>{const a=window.matchMedia(e);return a.addEventListener("change",o),()=>{a.removeEventListener("change",o)}},[e]),n=()=>window.matchMedia(e).matches,s=()=>{throw Error("useMediaQuery is a client-only hook")};return h.useSyncExternalStore(t,n,s)}const pe=3,ws=e=>{if(!e)return"";const t=e.codePointAt(0);if(!t)return e;const n=t>65535?2:1;return String.fromCodePoint(t).toUpperCase()+e.slice(n)},Pt=(e,t,n)=>{const s=Object.entries(e).filter(([i,c])=>c>=pe).map(([i])=>({text:ws(i),value:i})),o=Object.entries(e).filter(([i,c])=>c<pe).map(([i])=>i),a=s;return a.sort((i,c)=>i.text.localeCompare(c.text)),a.unshift({text:"All",value:"all"}),o.length>0&&a.push({text:"Other",value:"other"}),a.map(i=>r.jsxs(ne,{onSelect:c=>c.preventDefault(),checked:t===i.value,onClick:()=>n(i.value),children:[r.jsx(ge,{icon:r.jsx(Lt,{language:i.value})}),i.text]},i.value))},js=({languages:e,selectedLanguage:t,setSelectedLanguage:n,iconOnly:s})=>{const o=t!=="all";return r.jsxs(ae,{children:[r.jsx(ie,{asChild:!0,children:r.jsxs(I,{variant:"circular",isActive:o,className:"outline-0 rounded-r-none font-bold",children:[r.jsx(Hn,{}),!s&&"Languages"]})}),r.jsx(ce,{"aria-label":"Language Choices",sideOffset:15,children:Pt(e,t,n)})]})},Ss=(e,t,n)=>r.jsxs(r.Fragment,{children:[r.jsx(ee,{children:"Select languages"}),r.jsx(te,{}),Pt(e,t,n)]});function Ot(e,[t,n]){return Math.min(n,Math.max(t,e))}function ks(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Tt=["PageUp","PageDown"],Ft=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$t={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},J="Slider",[me,Ms,Ns]=kn(J),[Vt,Jr]=Ce(J,[Ns]),[Rs,le]=Vt(J),zt=h.forwardRef((e,t)=>{const{name:n,min:s=0,max:o=100,step:a=1,orientation:i="horizontal",disabled:c=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[s],value:f,onValueChange:d=()=>{},onValueCommit:g=()=>{},inverted:m=!1,form:x,...v}=e,b=h.useRef(new Set),y=h.useRef(0),w=i==="horizontal"?Cs:_s,[j=[],H]=Je({prop:f,defaultProp:u,onChange:k=>{var G;(G=[...b.current][y.current])==null||G.focus(),d(k)}}),W=h.useRef(j);function M(k){const R=Ls(j,k);$(k,R)}function P(k){$(k,y.current)}function O(){const k=W.current[y.current];j[y.current]!==k&&g(j)}function $(k,R,{commit:G}={commit:!1}){const C=Fs(a),V=$s(Math.round((k-s)/a)*a+s,C),z=Ot(V,[s,o]);H((X=[])=>{const U=Ds(X,z,R);if(Ts(U,l*a)){y.current=U.indexOf(z);const ze=String(U)!==String(X);return ze&&G&&g(U),ze?U:X}else return X})}return r.jsx(Rs,{scope:e.__scopeSlider,name:n,disabled:c,min:s,max:o,valueIndexToChangeRef:y,thumbs:b.current,values:j,orientation:i,form:x,children:r.jsx(me.Provider,{scope:e.__scopeSlider,children:r.jsx(me.Slot,{scope:e.__scopeSlider,children:r.jsx(w,{"aria-disabled":c,"data-disabled":c?"":void 0,...v,ref:t,onPointerDown:D(v.onPointerDown,()=>{c||(W.current=j)}),min:s,max:o,inverted:m,onSlideStart:c?void 0:M,onSlideMove:c?void 0:P,onSlideEnd:c?void 0:O,onHomeKeyDown:()=>!c&&$(s,0,{commit:!0}),onEndKeyDown:()=>!c&&$(o,j.length-1,{commit:!0}),onStepKeyDown:({event:k,direction:R})=>{if(!c){const V=Tt.includes(k.key)||k.shiftKey&&Ft.includes(k.key)?10:1,z=y.current,X=j[z],U=a*V*R;$(X+U,z,{commit:!0})}}})})})})});zt.displayName=J;var[Bt,Kt]=Vt(J,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Cs=h.forwardRef((e,t)=>{const{min:n,max:s,dir:o,inverted:a,onSlideStart:i,onSlideMove:c,onSlideEnd:l,onStepKeyDown:u,...f}=e,[d,g]=h.useState(null),m=B(t,w=>g(w)),x=h.useRef(),v=pn(o),b=v==="ltr",y=b&&!a||!b&&a;function _(w){const j=x.current||d.getBoundingClientRect(),H=[0,j.width],M=Fe(H,y?[n,s]:[s,n]);return x.current=j,M(w-j.left)}return r.jsx(Bt,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:r.jsx(Ht,{dir:v,"data-orientation":"horizontal",...f,ref:m,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const j=_(w.clientX);i==null||i(j)},onSlideMove:w=>{const j=_(w.clientX);c==null||c(j)},onSlideEnd:()=>{x.current=void 0,l==null||l()},onStepKeyDown:w=>{const H=$t[y?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:H?-1:1})}})})}),_s=h.forwardRef((e,t)=>{const{min:n,max:s,inverted:o,onSlideStart:a,onSlideMove:i,onSlideEnd:c,onStepKeyDown:l,...u}=e,f=h.useRef(null),d=B(t,f),g=h.useRef(),m=!o;function x(v){const b=g.current||f.current.getBoundingClientRect(),y=[0,b.height],w=Fe(y,m?[s,n]:[n,s]);return g.current=b,w(v-b.top)}return r.jsx(Bt,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:r.jsx(Ht,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const b=x(v.clientY);a==null||a(b)},onSlideMove:v=>{const b=x(v.clientY);i==null||i(b)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:v=>{const y=$t[m?"from-bottom":"from-top"].includes(v.key);l==null||l({event:v,direction:y?-1:1})}})})}),Ht=h.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:c,onStepKeyDown:l,...u}=e,f=le(J,n);return r.jsx(E.span,{...u,ref:t,onKeyDown:D(e.onKeyDown,d=>{d.key==="Home"?(i(d),d.preventDefault()):d.key==="End"?(c(d),d.preventDefault()):Tt.concat(Ft).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:D(e.onPointerDown,d=>{const g=d.target;g.setPointerCapture(d.pointerId),d.preventDefault(),f.thumbs.has(g)?g.focus():s(d)}),onPointerMove:D(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&o(d)}),onPointerUp:D(e.onPointerUp,d=>{const g=d.target;g.hasPointerCapture(d.pointerId)&&(g.releasePointerCapture(d.pointerId),a(d))})})}),Wt="SliderTrack",Gt=h.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,o=le(Wt,n);return r.jsx(E.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...s,ref:t})});Gt.displayName=Wt;var xe="SliderRange",Ut=h.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,o=le(xe,n),a=Kt(xe,n),i=h.useRef(null),c=B(t,i),l=o.values.length,u=o.values.map(g=>Qt(g,o.min,o.max)),f=l>1?Math.min(...u):0,d=100-Math.max(...u);return r.jsx(E.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...s,ref:c,style:{...e.style,[a.startEdge]:f+"%",[a.endEdge]:d+"%"}})});Ut.displayName=xe;var ve="SliderThumb",Yt=h.forwardRef((e,t)=>{const n=Ms(e.__scopeSlider),[s,o]=h.useState(null),a=B(t,c=>o(c)),i=h.useMemo(()=>s?n().findIndex(c=>c.ref.current===s):-1,[n,s]);return r.jsx(As,{...e,ref:a,index:i})}),As=h.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:o,...a}=e,i=le(ve,n),c=Kt(ve,n),[l,u]=h.useState(null),f=B(t,_=>u(_)),d=l?i.form||!!l.closest("form"):!0,g=Mn(l),m=i.values[s],x=m===void 0?0:Qt(m,i.min,i.max),v=Is(s,i.values.length),b=g==null?void 0:g[c.size],y=b?Ps(b,x,c.direction):0;return h.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${x}% + ${y}px)`},children:[r.jsx(me.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(E.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":i.min,"aria-valuenow":m,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...a,ref:f,style:m===void 0?{display:"none"}:e.style,onFocus:D(e.onFocus,()=>{i.valueIndexToChangeRef.current=s})})}),d&&r.jsx(Es,{name:o??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:m},s)]})});Yt.displayName=ve;var Es=e=>{const{value:t,...n}=e,s=h.useRef(null),o=ks(t);return h.useEffect(()=>{const a=s.current,i=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(i,"value").set;if(o!==t&&l){const u=new Event("input",{bubbles:!0});l.call(a,t),a.dispatchEvent(u)}},[o,t]),r.jsx("input",{style:{display:"none"},...n,ref:s,defaultValue:t})};function Ds(e=[],t,n){const s=[...e];return s[n]=t,s.sort((o,a)=>o-a)}function Qt(e,t,n){const a=100/(n-t)*(e-t);return Ot(a,[0,100])}function Is(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Ls(e,t){if(e.length===1)return 0;const n=e.map(o=>Math.abs(o-t)),s=Math.min(...n);return n.indexOf(s)}function Ps(e,t,n){const s=e/2,a=Fe([0,50],[0,s]);return(s-a(t)*n)*n}function Os(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Ts(e,t){if(t>0){const n=Os(e);return Math.min(...n)>=t}return!0}function Fe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function Fs(e){return(String(e).split(".")[1]||"").length}function $s(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var de=zt,Xt=Gt,Jt=Ut,ye=Yt;const Vs=h.forwardRef(({className:e,...t},n)=>r.jsxs(de,{ref:n,className:S("relative flex w-full touch-none select-none items-center",e),...t,children:[r.jsx(Xt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(Jt,{className:"absolute h-full bg-primary"})}),r.jsx(ye,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Vs.displayName=de.displayName;const zs=(e,t)=>!e||!t?r.jsx(r.Fragment,{}):r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"mt-2 text-muted-foreground",children:e}),r.jsxs("div",{className:"mt-2 text-muted-foreground",children:[t[0],"-",t[1]]})]}),Zt=h.forwardRef(({className:e,...t},n)=>r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsxs(de,{minStepsBetweenThumbs:1,ref:n,className:S("relative flex w-full touch-none select-none items-center mt-2",e),...t,children:[r.jsx(Xt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(Jt,{className:"absolute h-full bg-primary"})}),r.jsx(ye,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}),r.jsx(ye,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}),zs(t.label,t.value)]}));Zt.displayName=de.displayName;const qt=({maxRange:e,vocalRangeFilter:t,setVocalRangeFilter:n})=>{const s=t==="all"?[0,e]:t;return r.jsx(Zt,{label:"Semitones",step:1,min:0,max:e,defaultValue:s,value:s,className:"max-w-md",onValueChange:o=>n(o)})},Bs=({maxRange:e,vocalRangeFilter:t,setVocalRangeFilter:n,iconOnly:s})=>r.jsxs(ae,{children:[r.jsx(ie,{asChild:!0,children:r.jsxs(I,{variant:"circular",className:"shadow-none outline-0 font-bold rounded-l-none",children:[r.jsx(qe,{}),!s&&"Range"]})}),r.jsxs(ce,{"aria-label":"Vocal range filter slider",className:"w-80",sideOffset:15,children:[r.jsx(se,{onSelect:o=>o.preventDefault(),children:r.jsx(qt,{maxRange:e,vocalRangeFilter:t,setVocalRangeFilter:n})},"slider"),r.jsx(se,{onClick:()=>n("all"),children:"Reset"},"reset")]})]}),Ks=(e,t,n)=>r.jsxs(r.Fragment,{children:[r.jsx(ee,{children:"Select song range"}),r.jsx(te,{}),r.jsx(se,{onSelect:s=>s.preventDefault(),children:r.jsx(qt,{maxRange:e,vocalRangeFilter:t,setVocalRangeFilter:n})},"slider"),r.jsx(se,{onClick:()=>n("all"),onSelect:s=>s.preventDefault(),children:"Reset"},"reset")]}),$e=Ae()(Ze(e=>({language:"all",vocalRange:"all",capo:!0,setLanguage:t=>e({language:t}),setVocalRange:t=>e({vocalRange:t}),setCapo:t=>e({capo:t}),toggleCapo:()=>e(t=>({capo:!t.capo}))}),{name:"filter-settings-store"})),Hs=({languages:e,maxRange:t,iconOnly:n})=>{const{language:s,vocalRange:o,capo:a,setLanguage:i,setVocalRange:c,toggleCapo:l}=$e();return r.jsxs("div",{className:"flex outline outline-primary dark:outline-primary/30 rounded-full outline-2",children:[r.jsx(js,{languages:e,selectedLanguage:s,setSelectedLanguage:i,iconOnly:n}),r.jsxs(I,{variant:"circular",isActive:a,className:"font-bold rounded-none outline-0 shadow-none",onClick:l,children:[r.jsx(Bn,{}),!n&&"Capo"]}),r.jsx(Bs,{maxRange:t,vocalRangeFilter:o,setVocalRangeFilter:c,iconOnly:n})]})},Ws=({languages:e,maxRange:t})=>{const{language:n,vocalRange:s,capo:o,setLanguage:a,setVocalRange:i,toggleCapo:c}=$e(),l=bs("only screen and (min-width : 1000px)"),u=n==="all"&&(s==="all"||Array.isArray(s)&&s[0]===0&&s[1]===t)&&o;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden lg:flex",children:r.jsx(Hs,{languages:e,maxRange:t,iconOnly:l})}),r.jsx("div",{className:"lg:hidden",children:r.jsxs(ae,{children:[r.jsx(ie,{asChild:!0,children:r.jsx(I,{size:"icon",variant:"circular",isActive:!u,children:r.jsx(Vn,{})})}),r.jsxs(ce,{"aria-label":"Filtering",className:"dropdown-scroll no-scrollbar w-52 max-h-[80dvh] overflow-y-scroll",sideOffset:15,children:[r.jsx(ne,{onClick:c,onSelect:f=>f.preventDefault(),checked:o,children:"Allow capo"}),Ks(t,s,i),Ss(e,n,a)]})]})})]})},be=h.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:S("flex h-full w-full rounded-md bg-background text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...n}));be.displayName="Input";const en=Ae()(e=>({query:"",setQuery:t=>e({query:t})}));function Gs(){const[e,t]=h.useState(!1),[n,s]=h.useState(248),o=h.useRef(null),{query:a,setQuery:i}=en(),c=d=>{const g=d.target.value;i(g)};h.useEffect(()=>{e&&o.current&&o.current.focus()},[e]);const l=()=>{const d=document.getElementById("navbar");d&&s(d.offsetWidth),t(!e)},u=()=>{i(""),t(!1)},f=()=>r.jsxs(I,{type:"button",variant:"ghost",size:"icon",className:S("absolute right-1 top-1/2 transition-all duration-300 ease-in-out -translate-y-1/2 h-7 w-7 !bg-transparent !hover:bg-transparent hover:scale-125 hover:text-primary",a?"scale-100":"scale-0"),onClick:u,children:[r.jsx(et,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Clear"})]});return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex xs:hidden items-center gap-2",children:r.jsxs("div",{className:S("relative flex transition-all duration-300 ease-in-out items-center z-50",e?"-translate-x-12":""),children:[r.jsx(I,{type:"button",variant:"circular",size:"icon",className:S("relative z-10 transition-all duration-300 ease-in-out",e?"bg-background rounded-r-none text-primary dark:outline-primary":"",a?"bg-primary text-white dark:bg-background dark:text-primary":""),onClick:l,"aria-label":e?"Close search":"Open search","aria-expanded":e,children:r.jsx(he,{className:S("h-4 w-4",e?"scale-110":"")})}),r.jsxs("div",{className:S("absolute left-0 top-0 flex h-full items-center overflow-hidden transition-all duration-300 ease-in-out outline-primary outline outline-2",e?"opacity-100 rounded-full":"opacity-0",a?" outline-primary":""),style:{width:e?`calc(${n}px - 1rem)`:"0"},children:[r.jsx(I,{type:"button",variant:"circular",size:"icon",className:"opacity-0",tabIndex:-1,"aria-hidden":"true",children:r.jsx(he,{className:"h-4 w-4"})}),r.jsx(be,{ref:o,onChange:c,value:a,placeholder:"Search...",className:S("pl-10 pr-4 text-sm font-medium placeholder:font-normal border-none rounded-full rounded-l-none peer bg-background text-primary placeholder:text-primary dark:placeholder:text-primary/30",a?"bg-background ":"")}),r.jsx(f,{})]})]})}),r.jsxs("div",{className:S("relative hidden xs:flex items-center h-full text-primary dark:text-primary/30 transition-all duration-300 ease-in-out shadow-md rounded-full flex-1 outline-primary dark:outline-primary/30 outline outline-2"),children:[r.jsx(be,{onChange:c,value:a,placeholder:"Search...",className:S("pl-10 pr-4 text-sm font-medium placeholder:font-normal border-none rounded-full peer hover:bg-background dark:bg-background focus:bg-background text-primary placeholder:text-primary dark:placeholder:text-primary/30",a?"bg-background dark:bg-primary/30":"bg-white dark:bg-background")}),r.jsx(f,{}),r.jsx("div",{className:S("absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none peer-focus:scale-110 peer-focus:text-primary duration-300 ease-in-out transform",a?"scale-110 text-primary":""),children:r.jsx(he,{className:"w-5 h-5"})})]})]})}const tn=Ae()(Ze(e=>({order:"ascending",field:"title",setSortOrder:t=>e({order:t}),setSortField:t=>e({field:t})}),{name:"sort-settings-store"})),Ke={ascending:r.jsx(Pn,{}),descending:r.jsx(Tn,{})},He={ascending:r.jsx(In,{}),descending:r.jsx(Ln,{})},we=[{field:"title",title:"Title",icon:r.jsx(Fn,{}),sorting_icons:Ke,sorting_labels:{ascending:"Ascending",descending:"Descending"}},{field:"artist",title:"Artist",icon:r.jsx(Wn,{}),sorting_icons:Ke,sorting_labels:{ascending:"Ascending",descending:"Descending"}},{field:"dateAdded",title:"Date Added",icon:r.jsx($n,{}),sorting_icons:He,sorting_labels:{ascending:"Vivaldi → Lucie Bílá",descending:"Lucie Bílá → Vivaldi"}},{field:"range",title:"Range",icon:r.jsx(qe,{}),sorting_icons:He,sorting_labels:{ascending:"Me → Freddie",descending:"Freddie → Me"}}],Us=(e,t)=>e===t,Ys=e=>e==="descending"?"ascending":"descending",Qs=e=>{const t=we.find(n=>n.field===e);if(!t)throw new Error(`Invalid sorting field: ${e}`);return t},Xs=()=>{const{field:e,order:t,setSortField:n,setSortOrder:s}=tn(),o=we.map(i=>({label:i.title,value:i.field})),a=Qs(e);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex md:hidden",children:r.jsxs(ae,{children:[r.jsx(ie,{asChild:!0,children:r.jsx(I,{size:"icon",variant:"circular",children:r.jsx(On,{size:32})})}),r.jsxs(ce,{className:"w-56",sideOffset:15,children:[r.jsx(ee,{children:"Sorting method"}),r.jsx(te,{}),we.map(i=>r.jsxs(ne,{onSelect:c=>c.preventDefault(),checked:Us(e,i.field),onCheckedChange:()=>n(i.field),children:[r.jsx(ge,{icon:i.icon}),i.title]},i.field)),r.jsx(ee,{children:"Direction"}),r.jsx(te,{}),["ascending","descending"].map(i=>r.jsxs(ne,{checked:t===i,onSelect:c=>c.preventDefault(),onCheckedChange:()=>s(i),children:[r.jsx(ge,{icon:a.sorting_icons[i]}),a.sorting_labels[i]]},`${i}_sort`))]})]})}),r.jsx("div",{className:"hidden md:flex h-full w-fit",children:r.jsx(Nn,{options:o,setSelectedOption:n,selectedOption:e,roundedClass:"rounded-l-full",children:r.jsx(I,{className:"rounded-r-full",onClick:()=>s(Ys(t)),children:a.sorting_icons[t]})})})]})};function Js({songs:e,showToolbar:t,scrollOffset:n,fakeScroll:s=!1,maxRange:o,languages:a}){const i=mn();return r.jsxs(Rn,{showToolbar:t,scrollOffset:n,fakeScroll:s,children:[r.jsx(Xs,{}),r.jsx(Gs,{}),r.jsx(Ws,{languages:a,maxRange:o}),r.jsx("div",{className:"hidden h-full w-fit sm:flex",children:r.jsx(Cn,{})}),r.jsx(I,{size:"icon",variant:"circular",onClick:()=>i("gallery"),children:r.jsx(Kn,{})}),r.jsx(_n,{songs:e})]})}function F(e){return Array.isArray?Array.isArray(e):rn(e)==="[object Array]"}const Zs=1/0;function qs(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Zs?"-0":t}function er(e){return e==null?"":qs(e)}function T(e){return typeof e=="string"}function nn(e){return typeof e=="number"}function tr(e){return e===!0||e===!1||nr(e)&&rn(e)=="[object Boolean]"}function sn(e){return typeof e=="object"}function nr(e){return sn(e)&&e!==null}function A(e){return e!=null}function fe(e){return!e.trim().length}function rn(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const sr="Incorrect 'index' type",rr=e=>`Invalid value for key ${e}`,or=e=>`Pattern length exceeds max of ${e}.`,ar=e=>`Missing ${e} property in key`,ir=e=>`Property 'weight' in key '${e}' must be a positive integer`,We=Object.prototype.hasOwnProperty;class cr{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(s=>{let o=on(s);this._keys.push(o),this._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(s=>{s.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function on(e){let t=null,n=null,s=null,o=1,a=null;if(T(e)||F(e))s=e,t=Ge(e),n=je(e);else{if(!We.call(e,"name"))throw new Error(ar("name"));const i=e.name;if(s=i,We.call(e,"weight")&&(o=e.weight,o<=0))throw new Error(ir(i));t=Ge(i),n=je(i),a=e.getFn}return{path:t,id:n,weight:o,src:s,getFn:a}}function Ge(e){return F(e)?e:e.split(".")}function je(e){return F(e)?e.join("."):e}function lr(e,t){let n=[],s=!1;const o=(a,i,c)=>{if(A(a))if(!i[c])n.push(a);else{let l=i[c];const u=a[l];if(!A(u))return;if(c===i.length-1&&(T(u)||nn(u)||tr(u)))n.push(er(u));else if(F(u)){s=!0;for(let f=0,d=u.length;f<d;f+=1)o(u[f],i,c+1)}else i.length&&o(u,i,c+1)}};return o(e,T(t)?t.split("."):t,0),s?n:n[0]}const dr={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ur={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},hr={location:0,threshold:.6,distance:100},fr={useExtendedSearch:!1,getFn:lr,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var p={...ur,...dr,...hr,...fr};const gr=/[^ ]+/g;function pr(e=1,t=3){const n=new Map,s=Math.pow(10,t);return{get(o){const a=o.match(gr).length;if(n.has(a))return n.get(a);const i=1/Math.pow(a,.5*e),c=parseFloat(Math.round(i*s)/s);return n.set(a,c),c},clear(){n.clear()}}}class Ve{constructor({getFn:t=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){this.norm=pr(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,T(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();T(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!A(t)||fe(t))return;let s={v:t,i:n,n:this.norm.get(t)};this.records.push(s)}_addObject(t,n){let s={i:n,$:{}};this.keys.forEach((o,a)=>{let i=o.getFn?o.getFn(t):this.getFn(t,o.path);if(A(i)){if(F(i)){let c=[];const l=[{nestedArrIndex:-1,value:i}];for(;l.length;){const{nestedArrIndex:u,value:f}=l.pop();if(A(f))if(T(f)&&!fe(f)){let d={v:f,i:u,n:this.norm.get(f)};c.push(d)}else F(f)&&f.forEach((d,g)=>{l.push({nestedArrIndex:g,value:d})})}s.$[a]=c}else if(T(i)&&!fe(i)){let c={v:i,n:this.norm.get(i)};s.$[a]=c}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function an(e,t,{getFn:n=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){const o=new Ve({getFn:n,fieldNormWeight:s});return o.setKeys(e.map(on)),o.setSources(t),o.create(),o}function mr(e,{getFn:t=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){const{keys:s,records:o}=e,a=new Ve({getFn:t,fieldNormWeight:n});return a.setKeys(s),a.setIndexRecords(o),a}function q(e,{errors:t=0,currentLocation:n=0,expectedLocation:s=0,distance:o=p.distance,ignoreLocation:a=p.ignoreLocation}={}){const i=t/e.length;if(a)return i;const c=Math.abs(s-n);return o?i+c/o:c?1:i}function xr(e=[],t=p.minMatchCharLength){let n=[],s=-1,o=-1,a=0;for(let i=e.length;a<i;a+=1){let c=e[a];c&&s===-1?s=a:!c&&s!==-1&&(o=a-1,o-s+1>=t&&n.push([s,o]),s=-1)}return e[a-1]&&a-s>=t&&n.push([s,a-1]),n}const Y=32;function vr(e,t,n,{location:s=p.location,distance:o=p.distance,threshold:a=p.threshold,findAllMatches:i=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,includeMatches:l=p.includeMatches,ignoreLocation:u=p.ignoreLocation}={}){if(t.length>Y)throw new Error(or(Y));const f=t.length,d=e.length,g=Math.max(0,Math.min(s,d));let m=a,x=g;const v=c>1||l,b=v?Array(d):[];let y;for(;(y=e.indexOf(t,x))>-1;){let M=q(t,{currentLocation:y,expectedLocation:g,distance:o,ignoreLocation:u});if(m=Math.min(M,m),x=y+f,v){let P=0;for(;P<f;)b[y+P]=1,P+=1}}x=-1;let _=[],w=1,j=f+d;const H=1<<f-1;for(let M=0;M<f;M+=1){let P=0,O=j;for(;P<O;)q(t,{errors:M,currentLocation:g+O,expectedLocation:g,distance:o,ignoreLocation:u})<=m?P=O:j=O,O=Math.floor((j-P)/2+P);j=O;let $=Math.max(1,g-O+1),k=i?d:Math.min(g+O,d)+f,R=Array(k+2);R[k+1]=(1<<M)-1;for(let C=k;C>=$;C-=1){let V=C-1,z=n[e.charAt(V)];if(v&&(b[V]=+!!z),R[C]=(R[C+1]<<1|1)&z,M&&(R[C]|=(_[C+1]|_[C])<<1|1|_[C+1]),R[C]&H&&(w=q(t,{errors:M,currentLocation:V,expectedLocation:g,distance:o,ignoreLocation:u}),w<=m)){if(m=w,x=V,x<=g)break;$=Math.max(1,2*g-x)}}if(q(t,{errors:M+1,currentLocation:g,expectedLocation:g,distance:o,ignoreLocation:u})>m)break;_=R}const W={isMatch:x>=0,score:Math.max(.001,w)};if(v){const M=xr(b,c);M.length?l&&(W.indices=M):W.isMatch=!1}return W}function yr(e){let t={};for(let n=0,s=e.length;n<s;n+=1){const o=e.charAt(n);t[o]=(t[o]||0)|1<<s-n-1}return t}class cn{constructor(t,{location:n=p.location,threshold:s=p.threshold,distance:o=p.distance,includeMatches:a=p.includeMatches,findAllMatches:i=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,isCaseSensitive:l=p.isCaseSensitive,ignoreLocation:u=p.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:o,includeMatches:a,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(g,m)=>{this.chunks.push({pattern:g,alphabet:yr(g),startIndex:m})},d=this.pattern.length;if(d>Y){let g=0;const m=d%Y,x=d-m;for(;g<x;)f(this.pattern.substr(g,Y),g),g+=Y;if(m){const v=d-Y;f(this.pattern.substr(v),v)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:s}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let x={isMatch:!0,score:0};return s&&(x.indices=[[0,t.length-1]]),x}const{location:o,distance:a,threshold:i,findAllMatches:c,minMatchCharLength:l,ignoreLocation:u}=this.options;let f=[],d=0,g=!1;this.chunks.forEach(({pattern:x,alphabet:v,startIndex:b})=>{const{isMatch:y,score:_,indices:w}=vr(t,x,v,{location:o+b,distance:a,threshold:i,findAllMatches:c,minMatchCharLength:l,includeMatches:s,ignoreLocation:u});y&&(g=!0),d+=_,y&&w&&(f=[...f,...w])});let m={isMatch:g,score:g?d/this.chunks.length:1};return g&&s&&(m.indices=f),m}}class K{constructor(t){this.pattern=t}static isMultiMatch(t){return Ue(t,this.multiRegex)}static isSingleMatch(t){return Ue(t,this.singleRegex)}search(){}}function Ue(e,t){const n=e.match(t);return n?n[1]:null}class br extends K{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class wr extends K{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class jr extends K{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Sr extends K{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class kr extends K{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Mr extends K{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class ln extends K{constructor(t,{location:n=p.location,threshold:s=p.threshold,distance:o=p.distance,includeMatches:a=p.includeMatches,findAllMatches:i=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,isCaseSensitive:l=p.isCaseSensitive,ignoreLocation:u=p.ignoreLocation}={}){super(t),this._bitapSearch=new cn(t,{location:n,threshold:s,distance:o,includeMatches:a,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class dn extends K{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,s;const o=[],a=this.pattern.length;for(;(s=t.indexOf(this.pattern,n))>-1;)n=s+a,o.push([s,n-1]);const i=!!o.length;return{isMatch:i,score:i?0:1,indices:o}}}const Se=[br,dn,jr,Sr,Mr,kr,wr,ln],Ye=Se.length,Nr=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Rr="|";function Cr(e,t={}){return e.split(Rr).map(n=>{let s=n.trim().split(Nr).filter(a=>a&&!!a.trim()),o=[];for(let a=0,i=s.length;a<i;a+=1){const c=s[a];let l=!1,u=-1;for(;!l&&++u<Ye;){const f=Se[u];let d=f.isMultiMatch(c);d&&(o.push(new f(d,t)),l=!0)}if(!l)for(u=-1;++u<Ye;){const f=Se[u];let d=f.isSingleMatch(c);if(d){o.push(new f(d,t));break}}}return o})}const _r=new Set([ln.type,dn.type]);class Ar{constructor(t,{isCaseSensitive:n=p.isCaseSensitive,includeMatches:s=p.includeMatches,minMatchCharLength:o=p.minMatchCharLength,ignoreLocation:a=p.ignoreLocation,findAllMatches:i=p.findAllMatches,location:c=p.location,threshold:l=p.threshold,distance:u=p.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:s,minMatchCharLength:o,findAllMatches:i,ignoreLocation:a,location:c,threshold:l,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=Cr(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:o}=this.options;t=o?t:t.toLowerCase();let a=0,i=[],c=0;for(let l=0,u=n.length;l<u;l+=1){const f=n[l];i.length=0,a=0;for(let d=0,g=f.length;d<g;d+=1){const m=f[d],{isMatch:x,indices:v,score:b}=m.search(t);if(x){if(a+=1,c+=b,s){const y=m.constructor.type;_r.has(y)?i=[...i,...v]:i.push(v)}}else{c=0,a=0,i.length=0;break}}if(a){let d={isMatch:!0,score:c/a};return s&&(d.indices=i),d}}return{isMatch:!1,score:1}}}const ke=[];function Er(...e){ke.push(...e)}function Me(e,t){for(let n=0,s=ke.length;n<s;n+=1){let o=ke[n];if(o.condition(e,t))return new o(e,t)}return new cn(e,t)}const oe={AND:"$and",OR:"$or"},Ne={PATH:"$path",PATTERN:"$val"},Re=e=>!!(e[oe.AND]||e[oe.OR]),Dr=e=>!!e[Ne.PATH],Ir=e=>!F(e)&&sn(e)&&!Re(e),Qe=e=>({[oe.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function un(e,t,{auto:n=!0}={}){const s=o=>{let a=Object.keys(o);const i=Dr(o);if(!i&&a.length>1&&!Re(o))return s(Qe(o));if(Ir(o)){const l=i?o[Ne.PATH]:a[0],u=i?o[Ne.PATTERN]:o[l];if(!T(u))throw new Error(rr(l));const f={keyId:je(l),pattern:u};return n&&(f.searcher=Me(u,t)),f}let c={children:[],operator:a[0]};return a.forEach(l=>{const u=o[l];F(u)&&u.forEach(f=>{c.children.push(s(f))})}),c};return Re(e)||(e=Qe(e)),s(e)}function Lr(e,{ignoreFieldNorm:t=p.ignoreFieldNorm}){e.forEach(n=>{let s=1;n.matches.forEach(({key:o,norm:a,score:i})=>{const c=o?o.weight:null;s*=Math.pow(i===0&&c?Number.EPSILON:i,(c||1)*(t?1:a))}),n.score=s})}function Pr(e,t){const n=e.matches;t.matches=[],A(n)&&n.forEach(s=>{if(!A(s.indices)||!s.indices.length)return;const{indices:o,value:a}=s;let i={indices:o,value:a};s.key&&(i.key=s.key.src),s.idx>-1&&(i.refIndex=s.idx),t.matches.push(i)})}function Or(e,t){t.score=e.score}function Tr(e,t,{includeMatches:n=p.includeMatches,includeScore:s=p.includeScore}={}){const o=[];return n&&o.push(Pr),s&&o.push(Or),e.map(a=>{const{idx:i}=a,c={item:t[i],refIndex:i};return o.length&&o.forEach(l=>{l(a,c)}),c})}class Z{constructor(t,n={},s){this.options={...p,...n},this.options.useExtendedSearch,this._keyStore=new cr(this.options.keys),this.setCollection(t,s)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof Ve))throw new Error(sr);this._myIndex=n||an(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){A(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let s=0,o=this._docs.length;s<o;s+=1){const a=this._docs[s];t(a,s)&&(this.removeAt(s),s-=1,o-=1,n.push(a))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:s,includeScore:o,shouldSort:a,sortFn:i,ignoreFieldNorm:c}=this.options;let l=T(t)?T(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Lr(l,{ignoreFieldNorm:c}),a&&l.sort(i),nn(n)&&n>-1&&(l=l.slice(0,n)),Tr(l,this._docs,{includeMatches:s,includeScore:o})}_searchStringList(t){const n=Me(t,this.options),{records:s}=this._myIndex,o=[];return s.forEach(({v:a,i,n:c})=>{if(!A(a))return;const{isMatch:l,score:u,indices:f}=n.searchIn(a);l&&o.push({item:a,idx:i,matches:[{score:u,value:a,norm:c,indices:f}]})}),o}_searchLogical(t){const n=un(t,this.options),s=(c,l,u)=>{if(!c.children){const{keyId:d,searcher:g}=c,m=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(l,d),searcher:g});return m&&m.length?[{idx:u,item:l,matches:m}]:[]}const f=[];for(let d=0,g=c.children.length;d<g;d+=1){const m=c.children[d],x=s(m,l,u);if(x.length)f.push(...x);else if(c.operator===oe.AND)return[]}return f},o=this._myIndex.records,a={},i=[];return o.forEach(({$:c,i:l})=>{if(A(c)){let u=s(n,c,l);u.length&&(a[l]||(a[l]={idx:l,item:c,matches:[]},i.push(a[l])),u.forEach(({matches:f})=>{a[l].matches.push(...f)}))}}),i}_searchObjectList(t){const n=Me(t,this.options),{keys:s,records:o}=this._myIndex,a=[];return o.forEach(({$:i,i:c})=>{if(!A(i))return;let l=[];s.forEach((u,f)=>{l.push(...this._findMatches({key:u,value:i[f],searcher:n}))}),l.length&&a.push({idx:c,item:i,matches:l})}),a}_findMatches({key:t,value:n,searcher:s}){if(!A(n))return[];let o=[];if(F(n))n.forEach(({v:a,i,n:c})=>{if(!A(a))return;const{isMatch:l,score:u,indices:f}=s.searchIn(a);l&&o.push({score:u,key:t,value:a,idx:i,norm:c,indices:f})});else{const{v:a,n:i}=n,{isMatch:c,score:l,indices:u}=s.searchIn(a);c&&o.push({score:l,key:t,value:a,norm:i,indices:u})}return o}}Z.version="7.0.0";Z.createIndex=an;Z.parseIndex=mr;Z.config=p;Z.parseQuery=un;Er(Ar);const Fr=(e,t,n)=>t==="all"?e:t==="other"?e.filter(s=>{const o=s.language||"other";return n[o]<pe}):e.filter(s=>s.language===t),$r=(e,t)=>t?e:e.filter(n=>n.capo===0),Vr=(e,t)=>t==="all"?e:e.filter(n=>{var s;return((s=n.range)==null?void 0:s.semitones)!==void 0&&n.range.semitones>=t[0]&&n.range.semitones<=t[1]}),zr=(e,t)=>(n,s)=>{var a,i,c,l,u,f;let o;if(e==="range"){const d=((a=n.range)==null?void 0:a.semitones)??-1/0,g=((i=s.range)==null?void 0:i.semitones)??-1/0;o=d===g?n.title.localeCompare(s.title):d-g}else if(e==="dateAdded"){const d=(((c=n.dateAdded)==null?void 0:c.year)??0)*12+(((l=n.dateAdded)==null?void 0:l.month)??0),g=(((u=s.dateAdded)==null?void 0:u.year)??0)*12+(((f=s.dateAdded)==null?void 0:f.month)??0);o=d===g?n.title.localeCompare(s.title):g-d}else o=(n[e]??"").localeCompare(s[e]??"");return t==="ascending"?o:-o};function Br(e,t){const{field:n,order:s}=tn(),{query:o,setQuery:a}=en(),{language:i,vocalRange:c,capo:l}=$e();h.useEffect(()=>{a("")},[n,s,a]);const u=h.useMemo(()=>{const g={includeScore:!0,keys:["artist","title","ascii_title","ascii_artist"],ignoreLocation:!0,threshold:.4};return new Z(e,g)},[e]),f=h.useMemo(()=>o===""?e:u.search(o).map(g=>g.item),[u,e,o]);let d=$r(f,l);return d=Vr(d,c),d=Fr(d,i,t),o||(d=[...d].sort(zr(n,s))),{songs:d}}const Kr="scrollOffset";function Zr(){const e=xn(),{songs:t}=Br(e.songs,e.languages),n=h.useRef(null),[s,o]=h.useState(!0),[a,i]=An(Kr,{defaultValue:0,storageSync:!1});h.useEffect(()=>{n.current&&requestAnimationFrame(()=>{n.current.scrollTop=a})},[a]);const c=()=>{if(!n.current)return;const l=n.current.scrollTop;i(l),o(l===0||l<a)};return r.jsxs("div",{className:"h-dvh w-full no-scrollbar block",children:[r.jsx(Js,{songs:t,showToolbar:s,scrollOffset:a,fakeScroll:!0,maxRange:e.maxRange,languages:e.languages}),r.jsx("div",{ref:n,className:"sm:pt-20 pt-[72px] pb-4 overflow-auto h-full",onScroll:c,children:t.map(l=>r.jsx(ys,{song:l,maxRange:e.maxRange},l.id))})]})}export{Zr as default};
//# sourceMappingURL=SongList-PZGOzENk.js.map
