import{c as M,a as Ce,r as h,j as r,u as un,b as Ye,d as S,e as hn,f as Qe,g as he,L as fn,h as gn,i as pn,k as mn}from"./main-TnPLAbvs.js";import{P as D,c as E,a as Re,R as xn,h as yn,u as vn,F as bn,D as wn,b as jn,d as ee,e as te,f as ne,g as pe,i as ie,j as ce,k as le,l as Sn,m as kn,n as se,o as _e,p as Je,q as Mn,T as Nn,M as An,r as Cn,s as Rn}from"./useLocalStorageState-D2FCaLs0.js";import{u as B,S as _n,B as I}from"./button-C3qVZnaF.js";import{I as Dn}from"./IllustrationPrompt-CANr30Pk.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=M("ArrowDown01",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["rect",{x:"15",y:"4",width:"4",height:"6",ry:"2",key:"1bwicg"}],["path",{d:"M17 20v-6h-2",key:"1qp1so"}],["path",{d:"M15 20h4",key:"1j968p"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=M("ArrowDown10",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M17 10V4h-2",key:"zcsr5x"}],["path",{d:"M15 10h4",key:"id2lce"}],["rect",{x:"15",y:"14",width:"4",height:"6",ry:"2",key:"33xykx"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=M("ArrowDownAZ",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=M("ArrowDownNarrowWide",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h4",key:"6d7r33"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h10",key:"1438ji"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=M("ArrowDownUp",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=M("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=M("ArrowDownZA",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M15 4h5l-5 6h5",key:"8asdl1"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20",key:"r6l5cz"}],["path",{d:"M20 18h-5",key:"18j1r2"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=M("AudioLines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=M("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=M("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=M("FlagOff",[["path",{d:"M8 2c3 0 5 2 8 2s4-1 4-1v11",key:"9rwyz9"}],["path",{d:"M4 22V4",key:"1plyxx"}],["path",{d:"M4 15s1-1 4-1 5 2 8 2",key:"1myooe"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=M("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=M("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=M("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=M("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=M("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=M("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=M("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var De="Avatar",[Un,Zr]=Ce(De),[Xn,et]=Un(De),tt=h.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[a,o]=h.useState("idle");return r.jsx(Xn,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:r.jsx(D.span,{...s,ref:t})})});tt.displayName=De;var nt="AvatarImage",st=h.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:a=()=>{},...o}=e,i=et(nt,n),c=Yn(s,o.referrerPolicy),l=un(u=>{a(u),i.onImageLoadingStatusChange(u)});return Ye(()=>{c!=="idle"&&l(c)},[c,l]),c==="loaded"?r.jsx(D.img,{...o,ref:t,src:s}):null});st.displayName=nt;var rt="AvatarFallback",ot=h.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...a}=e,o=et(rt,n),[i,c]=h.useState(s===void 0);return h.useEffect(()=>{if(s!==void 0){const l=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(l)}},[s]),i&&o.imageLoadingStatus!=="loaded"?r.jsx(D.span,{...a,ref:t}):null});ot.displayName=rt;function Yn(e,t){const[n,s]=h.useState("idle");return Ye(()=>{if(!e){s("error");return}let a=!0;const o=new window.Image,i=c=>()=>{a&&s(c)};return s("loading"),o.onload=i("loaded"),o.onerror=i("error"),o.src=e,t&&(o.referrerPolicy=t),()=>{a=!1}},[e,t]),n}var at=tt,it=st,ct=ot;const Ee=h.forwardRef(({className:e,...t},n)=>r.jsx(at,{ref:n,className:S("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Ee.displayName=at.displayName;const Ie=h.forwardRef(({className:e,...t},n)=>r.jsx(it,{ref:n,className:S("aspect-square flex object-cover w-full h-full",e),...t}));Ie.displayName=it.displayName;const lt=h.forwardRef(({className:e,...t},n)=>r.jsx(ct,{ref:n,className:S("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));lt.displayName=ct.displayName;var Le="Dialog",[dt,qr]=Ce(Le),[Qn,L]=dt(Le),ut=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:i=!0}=e,c=h.useRef(null),l=h.useRef(null),[u=!1,f]=Qe({prop:s,defaultProp:a,onChange:o});return r.jsx(Qn,{scope:t,triggerRef:c,contentRef:l,contentId:he(),titleId:he(),descriptionId:he(),open:u,onOpenChange:f,onOpenToggle:h.useCallback(()=>f(d=>!d),[f]),modal:i,children:n})};ut.displayName=Le;var ht="DialogTrigger",Jn=h.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=L(ht,n),o=B(t,a.triggerRef);return r.jsx(D.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Te(a.open),...s,ref:o,onClick:E(e.onClick,a.onOpenToggle)})});Jn.displayName=ht;var Oe="DialogPortal",[Zn,ft]=dt(Oe,{forceMount:void 0}),gt=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:a}=e,o=L(Oe,t);return r.jsx(Zn,{scope:t,forceMount:n,children:h.Children.map(s,i=>r.jsx(Re,{present:n||o.open,children:r.jsx(jn,{asChild:!0,container:a,children:i})}))})};gt.displayName=Oe;var re="DialogOverlay",pt=h.forwardRef((e,t)=>{const n=ft(re,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=L(re,e.__scopeDialog);return o.modal?r.jsx(Re,{present:s||o.open,children:r.jsx(qn,{...a,ref:t})}):null});pt.displayName=re;var qn=h.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=L(re,n);return r.jsx(xn,{as:_n,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(D.div,{"data-state":Te(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Y="DialogContent",mt=h.forwardRef((e,t)=>{const n=ft(Y,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=L(Y,e.__scopeDialog);return r.jsx(Re,{present:s||o.open,children:o.modal?r.jsx(es,{...a,ref:t}):r.jsx(ts,{...a,ref:t})})});mt.displayName=Y;var es=h.forwardRef((e,t)=>{const n=L(Y,e.__scopeDialog),s=h.useRef(null),a=B(t,n.contentRef,s);return h.useEffect(()=>{const o=s.current;if(o)return yn(o)},[]),r.jsx(xt,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:E(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:E(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0;(i.button===2||c)&&o.preventDefault()}),onFocusOutside:E(e.onFocusOutside,o=>o.preventDefault())})}),ts=h.forwardRef((e,t)=>{const n=L(Y,e.__scopeDialog),s=h.useRef(!1),a=h.useRef(!1);return r.jsx(xt,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,c;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(c=n.triggerRef.current)==null||c.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),xt=h.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=e,c=L(Y,n),l=h.useRef(null),u=B(t,l);return vn(),r.jsxs(r.Fragment,{children:[r.jsx(bn,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:r.jsx(wn,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Te(c.open),...i,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(ns,{titleId:c.titleId}),r.jsx(rs,{contentRef:l,descriptionId:c.descriptionId})]})]})}),Pe="DialogTitle",yt=h.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=L(Pe,n);return r.jsx(D.h2,{id:a.titleId,...s,ref:t})});yt.displayName=Pe;var vt="DialogDescription",bt=h.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=L(vt,n);return r.jsx(D.p,{id:a.descriptionId,...s,ref:t})});bt.displayName=vt;var wt="DialogClose",jt=h.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=L(wt,n);return r.jsx(D.button,{type:"button",...s,ref:t,onClick:E(e.onClick,()=>a.onOpenChange(!1))})});jt.displayName=wt;function Te(e){return e?"open":"closed"}var St="DialogTitleWarning",[eo,kt]=hn(St,{contentName:Y,titleName:Pe,docsSlug:"dialog"}),ns=({titleId:e})=>{const t=kt(St),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},ss="DialogDescriptionWarning",rs=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${kt(ss).contentName}}.`;return h.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},os=ut,as=gt,Mt=pt,Nt=mt,At=yt,Ct=bt,is=jt;const cs=os,ls=as,ds=is,Rt=h.forwardRef(({className:e,...t},n)=>r.jsx(Mt,{ref:n,className:S("fixed inset-0 z-30 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 backdrop-blur-sm",e),...t}));Rt.displayName=Mt.displayName;const _t=h.forwardRef(({className:e,close:t,children:n,...s},a)=>r.jsxs(ls,{children:[r.jsx(Rt,{onClick:o=>{t(),o.stopPropagation()}}),r.jsxs(Nt,{onClick:o=>o.stopPropagation(),ref:a,className:S("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[n,r.jsx(ds,{asChild:!0,children:r.jsx(I,{variant:"circular",size:"icon",onClick:o=>o.stopPropagation(),className:"absolute top-4 right-4 p-2","aria-label":"Close full screen image",children:r.jsx(qe,{className:"h-6 w-6"})})})]})]}));_t.displayName=Nt.displayName;const Dt=h.forwardRef(({className:e,...t},n)=>r.jsx(At,{ref:n,className:S("text-lg font-semibold leading-none tracking-tight",e),...t}));Dt.displayName=At.displayName;const Et=h.forwardRef(({className:e,...t},n)=>r.jsx(Ct,{ref:n,className:S("text-sm text-muted-foreground",e),...t}));Et.displayName=Ct.displayName;function us({avatarClassName:e,song:t}){const[n,s]=h.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx(Ee,{className:S("cursor-pointer",e),onClick:a=>{a.stopPropagation(),s(!0)},children:r.jsx(Ie,{src:t.thumbnailURL(),alt:"song illustration thumbnail"})}),r.jsxs(cs,{open:n,onOpenChange:s,children:[r.jsx(Dt,{className:"hidden",children:"Illustration image view"}),r.jsx(Et,{className:"hidden",children:"Illustration"}),r.jsx(_t,{className:"max-w-[512px] max-h-[calc(100vh)] h-fit rounded-lg backdrop-blur-sm p-0 avatar-modal-dialog overflow-clip content-radix bg-glass/50 gap-0 flex flex-col",close:()=>s(!1),children:r.jsxs("div",{className:"h-full w-full relative",children:[r.jsx("div",{className:"relative flex justify-center max-h-[512px] h-[70%] shadow-lg",children:r.jsx("img",{style:{backgroundImage:`url(${t.thumbnailURL()})`,backgroundRepeat:"no-repeat",backgroundSize:"cover"},src:t.illustrationURL(),loading:"lazy",width:512,height:512,className:"object-scale-down z-50"})}),r.jsx(Dn,{song:t,show:n,className:"text-center text-white font-bold !items-center  h-[256px] [@media(max-height:1000px)]:h-[150px] [@media(max-height:800px)]:h-[100px] [@media(max-height:700px)]:!hidden"})]})})]})]})}const Be={czech:"cz",english:"gb",german:"de",slovak:"sk",polish:"pl",spanish:"uy",romanian:"ro",finnish:"fi",estonian:"ee",french:"fr",italian:"it",portuguese:"br",icelandic:"is",all:"un",other:"eu"};function hs(e){return e in Be?"https://flagcdn.com/"+Be[e]+".svg":e==="russian"?"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Flag_of_Mordor.svg/800px-Flag_of_Mordor.svg.png":""}function It({language:e}){return r.jsxs(Ee,{className:"w-6 h-6 shadow-black",children:[r.jsx(Ie,{alt:e,src:hs(e)}),r.jsx(lt,{children:r.jsx(Bn,{})})]})}function fs({value:e,maxValue:t,color:n="hsl(var(--primary))",strokeWidth:s=10}){return r.jsxs("div",{className:"block relative items-center justify-center h-10 w-10",children:[r.jsxs("svg",{className:"w-full h-full relative overflow-visible",viewBox:"0 0 100 100",children:[r.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"transparent",stroke:"#e5e7eb",strokeWidth:s}),r.jsx("circle",{cx:"50",cy:"50",r:"40",className:"transition-all !duration-500 progress",fill:"transparent",transform:"rotate(-90 50 50)",stroke:n,strokeWidth:s*1.2,strokeDasharray:"251.3",strokeDashoffset:251.3*(1-e/t),strokeLinecap:"round",role:"progressbar"})]}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-normal text-[0.65rem] text-muted-foreground",children:e})]})}const gs=70,ps=["January","February","March","April","May","June","July","August","September","October","November","December"],ms=h.memo(({songRangeSemitones:e,maxRange:t})=>e?r.jsx(fs,{value:e||t,maxValue:t}):r.jsx(r.Fragment,{})),xs=h.memo(({month:e,year:t})=>r.jsxs("div",{className:"basis-[13%] min-w-12 flex-col content-center justify-center hidden sm:flex text-center",children:[r.jsx("h3",{className:"text-xs opacity-70",children:ps[e-1]}),r.jsx("h2",{className:"text-sm opacity-70",children:t})]})),ys=h.memo(({capo:e})=>r.jsxs("div",{className:"basis-[13%] flex-shrink min-w-12 text-center content-center justify-center hidden lg:flex flex-col",children:[r.jsx("h2",{className:"text-xs opacity-70",children:"Capo"}),r.jsx("h3",{className:"text-sm opacity-70",children:e})]})),vs=h.memo(({title:e,artist:t})=>r.jsxs("div",{className:"flex-auto basis-1/2 min-w-40 flex-col text-left content-center",children:[r.jsx("h2",{className:"text-sm font-bold truncate song-title",children:e}),r.jsx("h3",{className:"text-sm opacity-50 truncate song-artist",children:t})]})),bs=h.memo(({song:e,maxRange:t})=>e?r.jsx("div",{className:S(`h-[${gs}px]`,"flex items-center container max-w-2xl mx-auto px-2 sm:px-4 song-row-wrapper"),children:r.jsx("div",{className:"flex h-14 min-w-72 w-full rounded-full song-row-bg-image",style:{backgroundImage:`url(${e.thumbnailURL()})`},children:r.jsxs("div",{className:"flex relative h-full w-full items-center rounded-full p-1 backdrop-blur-md song-row-bg-image shadow-black row-text-shadow",children:[r.jsx(us,{avatarClassName:"absolute -left-0 top-0 bottom-0 m-auto song-avatar z-10 w-16 h-16 text-large",song:e}),r.jsxs(fn,{to:e.url(),className:"flex relative h-12 song-row w-full backdrop-blur-lg bg-glass/60 hover:bg-glass/90 rounded-full",children:[r.jsx("div",{className:"flex min-w-[72px] rounded-l-full content-center justify-center relative"}),r.jsx(vs,{title:e.title,artist:e.artist}),r.jsx(xs,{month:e.dateAdded.month,year:e.dateAdded.year}),r.jsx(ys,{capo:e.capo}),r.jsx("div",{className:"hidden basis-[13%] min-w-12 sm:flex content-center justify-center",children:r.jsx("div",{className:"flex items-center",children:r.jsx(ms,{songRangeSemitones:e.range.semitones,maxRange:t})})}),r.jsx("div",{className:"flex basis-1/12 min-w-12 items-center justify-end p-2",children:r.jsx(It,{language:e.language})})]})]})})}):(console.error("Invalid song provided to SongRow"),r.jsx("div",{className:"h-[70px] flex items-center container max-w-2xl mx-auto px-2 sm:px-4 bg-white text-foreground",children:"Invalid song"})));function ws(e){const t=h.useCallback(a=>{const o=window.matchMedia(e);return o.addEventListener("change",a),()=>{o.removeEventListener("change",a)}},[e]),n=()=>window.matchMedia(e).matches,s=()=>{throw Error("useMediaQuery is a client-only hook")};return h.useSyncExternalStore(t,n,s)}const me=3,js=e=>{if(!e)return"";const t=e.codePointAt(0);if(!t)return e;const n=t>65535?2:1;return String.fromCodePoint(t).toUpperCase()+e.slice(n)},Lt=(e,t,n)=>{const s=Object.entries(e).filter(([i,c])=>c>=me).map(([i])=>({text:js(i),value:i})),a=Object.entries(e).filter(([i,c])=>c<me).map(([i])=>i),o=s;return o.sort((i,c)=>i.text.localeCompare(c.text)),o.unshift({text:"All",value:"all"}),a.length>0&&o.push({text:"Other",value:"other"}),o.map(i=>r.jsxs(ne,{onSelect:c=>c.preventDefault(),checked:t===i.value,onClick:()=>n(i.value),children:[r.jsx(pe,{icon:r.jsx(It,{language:i.value})}),i.text]},i.value))},Ss=({languages:e,selectedLanguage:t,setSelectedLanguage:n,iconOnly:s})=>{const a=t!=="all";return r.jsxs(ie,{children:[r.jsx(ce,{asChild:!0,children:r.jsxs(I,{variant:"circular",isActive:a,className:"outline-0 rounded-r-none font-bold",children:[r.jsx(Hn,{}),!s&&"Languages"]})}),r.jsx(le,{"aria-label":"Language Choices",sideOffset:15,children:Lt(e,t,n)})]})},ks=(e,t,n)=>r.jsxs(r.Fragment,{children:[r.jsx(ee,{children:"Select languages"}),r.jsx(te,{}),Lt(e,t,n)]});function Ot(e,[t,n]){return Math.min(n,Math.max(t,e))}function Ms(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Pt=["PageUp","PageDown"],Tt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ft={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},J="Slider",[xe,Ns,As]=Sn(J),[$t,to]=Ce(J,[As]),[Cs,de]=$t(J),Vt=h.forwardRef((e,t)=>{const{name:n,min:s=0,max:a=100,step:o=1,orientation:i="horizontal",disabled:c=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[s],value:f,onValueChange:d=()=>{},onValueCommit:g=()=>{},inverted:m=!1,form:x,...y}=e,b=h.useRef(new Set),v=h.useRef(0),w=i==="horizontal"?Rs:_s,[j=[],W]=Qe({prop:f,defaultProp:u,onChange:k=>{var G;(G=[...b.current][v.current])==null||G.focus(),d(k)}}),H=h.useRef(j);function N(k){const A=Os(j,k);$(k,A)}function O(k){$(k,v.current)}function P(){const k=H.current[v.current];j[v.current]!==k&&g(j)}function $(k,A,{commit:G}={commit:!1}){const C=$s(o),V=Vs(Math.round((k-s)/o)*o+s,C),z=Ot(V,[s,a]);W((Q=[])=>{const U=Is(Q,z,A);if(Fs(U,l*o)){v.current=U.indexOf(z);const ze=String(U)!==String(Q);return ze&&G&&g(U),ze?U:Q}else return Q})}return r.jsx(Cs,{scope:e.__scopeSlider,name:n,disabled:c,min:s,max:a,valueIndexToChangeRef:v,thumbs:b.current,values:j,orientation:i,form:x,children:r.jsx(xe.Provider,{scope:e.__scopeSlider,children:r.jsx(xe.Slot,{scope:e.__scopeSlider,children:r.jsx(w,{"aria-disabled":c,"data-disabled":c?"":void 0,...y,ref:t,onPointerDown:E(y.onPointerDown,()=>{c||(H.current=j)}),min:s,max:a,inverted:m,onSlideStart:c?void 0:N,onSlideMove:c?void 0:O,onSlideEnd:c?void 0:P,onHomeKeyDown:()=>!c&&$(s,0,{commit:!0}),onEndKeyDown:()=>!c&&$(a,j.length-1,{commit:!0}),onStepKeyDown:({event:k,direction:A})=>{if(!c){const V=Pt.includes(k.key)||k.shiftKey&&Tt.includes(k.key)?10:1,z=v.current,Q=j[z],U=o*V*A;$(Q+U,z,{commit:!0})}}})})})})});Vt.displayName=J;var[zt,Bt]=$t(J,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Rs=h.forwardRef((e,t)=>{const{min:n,max:s,dir:a,inverted:o,onSlideStart:i,onSlideMove:c,onSlideEnd:l,onStepKeyDown:u,...f}=e,[d,g]=h.useState(null),m=B(t,w=>g(w)),x=h.useRef(),y=gn(a),b=y==="ltr",v=b&&!o||!b&&o;function R(w){const j=x.current||d.getBoundingClientRect(),W=[0,j.width],N=Fe(W,v?[n,s]:[s,n]);return x.current=j,N(w-j.left)}return r.jsx(zt,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:r.jsx(Kt,{dir:y,"data-orientation":"horizontal",...f,ref:m,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const j=R(w.clientX);i==null||i(j)},onSlideMove:w=>{const j=R(w.clientX);c==null||c(j)},onSlideEnd:()=>{x.current=void 0,l==null||l()},onStepKeyDown:w=>{const W=Ft[v?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:W?-1:1})}})})}),_s=h.forwardRef((e,t)=>{const{min:n,max:s,inverted:a,onSlideStart:o,onSlideMove:i,onSlideEnd:c,onStepKeyDown:l,...u}=e,f=h.useRef(null),d=B(t,f),g=h.useRef(),m=!a;function x(y){const b=g.current||f.current.getBoundingClientRect(),v=[0,b.height],w=Fe(v,m?[s,n]:[n,s]);return g.current=b,w(y-b.top)}return r.jsx(zt,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:r.jsx(Kt,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const b=x(y.clientY);o==null||o(b)},onSlideMove:y=>{const b=x(y.clientY);i==null||i(b)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:y=>{const v=Ft[m?"from-bottom":"from-top"].includes(y.key);l==null||l({event:y,direction:v?-1:1})}})})}),Kt=h.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onHomeKeyDown:i,onEndKeyDown:c,onStepKeyDown:l,...u}=e,f=de(J,n);return r.jsx(D.span,{...u,ref:t,onKeyDown:E(e.onKeyDown,d=>{d.key==="Home"?(i(d),d.preventDefault()):d.key==="End"?(c(d),d.preventDefault()):Pt.concat(Tt).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:E(e.onPointerDown,d=>{const g=d.target;g.setPointerCapture(d.pointerId),d.preventDefault(),f.thumbs.has(g)?g.focus():s(d)}),onPointerMove:E(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&a(d)}),onPointerUp:E(e.onPointerUp,d=>{const g=d.target;g.hasPointerCapture(d.pointerId)&&(g.releasePointerCapture(d.pointerId),o(d))})})}),Wt="SliderTrack",Ht=h.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=de(Wt,n);return r.jsx(D.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:t})});Ht.displayName=Wt;var ye="SliderRange",Gt=h.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=de(ye,n),o=Bt(ye,n),i=h.useRef(null),c=B(t,i),l=a.values.length,u=a.values.map(g=>Xt(g,a.min,a.max)),f=l>1?Math.min(...u):0,d=100-Math.max(...u);return r.jsx(D.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:c,style:{...e.style,[o.startEdge]:f+"%",[o.endEdge]:d+"%"}})});Gt.displayName=ye;var ve="SliderThumb",Ut=h.forwardRef((e,t)=>{const n=Ns(e.__scopeSlider),[s,a]=h.useState(null),o=B(t,c=>a(c)),i=h.useMemo(()=>s?n().findIndex(c=>c.ref.current===s):-1,[n,s]);return r.jsx(Ds,{...e,ref:o,index:i})}),Ds=h.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:a,...o}=e,i=de(ve,n),c=Bt(ve,n),[l,u]=h.useState(null),f=B(t,R=>u(R)),d=l?i.form||!!l.closest("form"):!0,g=kn(l),m=i.values[s],x=m===void 0?0:Xt(m,i.min,i.max),y=Ls(s,i.values.length),b=g==null?void 0:g[c.size],v=b?Ps(b,x,c.direction):0;return h.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${x}% + ${v}px)`},children:[r.jsx(xe.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(D.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":i.min,"aria-valuenow":m,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...o,ref:f,style:m===void 0?{display:"none"}:e.style,onFocus:E(e.onFocus,()=>{i.valueIndexToChangeRef.current=s})})}),d&&r.jsx(Es,{name:a??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:m},s)]})});Ut.displayName=ve;var Es=e=>{const{value:t,...n}=e,s=h.useRef(null),a=Ms(t);return h.useEffect(()=>{const o=s.current,i=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(i,"value").set;if(a!==t&&l){const u=new Event("input",{bubbles:!0});l.call(o,t),o.dispatchEvent(u)}},[a,t]),r.jsx("input",{style:{display:"none"},...n,ref:s,defaultValue:t})};function Is(e=[],t,n){const s=[...e];return s[n]=t,s.sort((a,o)=>a-o)}function Xt(e,t,n){const o=100/(n-t)*(e-t);return Ot(o,[0,100])}function Ls(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Os(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),s=Math.min(...n);return n.indexOf(s)}function Ps(e,t,n){const s=e/2,o=Fe([0,50],[0,s]);return(s-o(t)*n)*n}function Ts(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Fs(e,t){if(t>0){const n=Ts(e);return Math.min(...n)>=t}return!0}function Fe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function $s(e){return(String(e).split(".")[1]||"").length}function Vs(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var ue=Vt,Yt=Ht,Qt=Gt,be=Ut;const zs=h.forwardRef(({className:e,...t},n)=>r.jsxs(ue,{ref:n,className:S("relative flex w-full touch-none select-none items-center",e),...t,children:[r.jsx(Yt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(Qt,{className:"absolute h-full bg-primary"})}),r.jsx(be,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));zs.displayName=ue.displayName;const Bs=(e,t)=>!e||!t?r.jsx(r.Fragment,{}):r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"mt-2 text-muted-foreground",children:e}),r.jsxs("div",{className:"mt-2 text-muted-foreground",children:[t[0],"-",t[1]]})]}),Jt=h.forwardRef(({className:e,...t},n)=>r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsxs(ue,{minStepsBetweenThumbs:1,ref:n,className:S("relative flex w-full touch-none select-none items-center mt-2",e),...t,children:[r.jsx(Yt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(Qt,{className:"absolute h-full bg-primary"})}),r.jsx(be,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}),r.jsx(be,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}),Bs(t.label,t.value)]}));Jt.displayName=ue.displayName;const Zt=({maxRange:e,vocalRangeFilter:t,setVocalRangeFilter:n})=>{const s=t==="all"?[0,e]:t,a=o=>{console.log(o),o[0]===0&&o[1]===e?n("all"):n(o)};return r.jsx(Jt,{label:"Semitones",step:1,min:0,max:e,defaultValue:s,value:s,className:"max-w-md",onValueChange:o=>a(o)})},Ks=({maxRange:e,vocalRangeFilter:t,setVocalRangeFilter:n,iconOnly:s})=>r.jsxs(ie,{children:[r.jsx(ce,{asChild:!0,children:r.jsxs(I,{variant:"circular",isActive:t!=="all",className:"shadow-none outline-0 font-bold rounded-l-none",children:[r.jsx(Ze,{}),!s&&"Range"]})}),r.jsxs(le,{"aria-label":"Vocal range filter slider",className:"w-80",sideOffset:15,children:[r.jsx(se,{onSelect:a=>a.preventDefault(),children:r.jsx(Zt,{maxRange:e,vocalRangeFilter:t,setVocalRangeFilter:n})},"slider"),r.jsx(se,{onClick:()=>n("all"),children:"Reset"},"reset")]})]}),Ws=(e,t,n)=>r.jsxs(r.Fragment,{children:[r.jsx(ee,{children:"Select song range"}),r.jsx(te,{}),r.jsx(se,{onSelect:s=>s.preventDefault(),children:r.jsx(Zt,{maxRange:e,vocalRangeFilter:t,setVocalRangeFilter:n})},"slider"),r.jsx(se,{onClick:()=>n("all"),onSelect:s=>s.preventDefault(),children:"Reset"},"reset")]}),$e=_e()(Je(e=>({language:"all",vocalRange:"all",capo:!0,setLanguage:t=>e({language:t}),setVocalRange:t=>e({vocalRange:t}),setCapo:t=>e({capo:t}),toggleCapo:()=>e(t=>({capo:!t.capo}))}),{name:"filter-settings-store"})),Hs=({languages:e,maxRange:t,iconOnly:n})=>{const{language:s,vocalRange:a,capo:o,setLanguage:i,setVocalRange:c,toggleCapo:l}=$e();return r.jsxs("div",{className:"flex outline outline-primary dark:outline-primary/30 rounded-full outline-2",children:[r.jsx(Ss,{languages:e,selectedLanguage:s,setSelectedLanguage:i,iconOnly:n}),r.jsxs(I,{variant:"circular",isActive:o,className:"font-bold rounded-none outline-0 shadow-none",onClick:l,children:[r.jsx(Kn,{}),!n&&"Capo"]}),r.jsx(Ks,{maxRange:t,vocalRangeFilter:a,setVocalRangeFilter:c,iconOnly:n})]})},Gs=({languages:e,maxRange:t})=>{const{language:n,vocalRange:s,capo:a,setLanguage:o,setVocalRange:i,toggleCapo:c}=$e(),l=ws("only screen and (min-width : 1000px)"),u=n==="all"&&(s==="all"||Array.isArray(s)&&s[0]===0&&s[1]===t)&&a;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden lg:flex",children:r.jsx(Hs,{languages:e,maxRange:t,iconOnly:l})}),r.jsx("div",{className:"lg:hidden",children:r.jsxs(ie,{children:[r.jsx(ce,{asChild:!0,children:r.jsx(I,{size:"icon",variant:"circular",isActive:!u,children:r.jsx(zn,{})})}),r.jsxs(le,{"aria-label":"Filtering",className:"dropdown-scroll no-scrollbar w-52 max-h-[80dvh] overflow-y-scroll",sideOffset:15,children:[r.jsx(ne,{onClick:c,onSelect:f=>f.preventDefault(),checked:a,children:"Allow capo"}),Ws(t,s,i),ks(e,n,o)]})]})})]})},we=h.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:S("flex h-full w-full rounded-md bg-background text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...n}));we.displayName="Input";const qt=_e()(e=>({query:"",setQuery:t=>e({query:t})}));function Us(){const[e,t]=h.useState(!1),[n,s]=h.useState(248),a=h.useRef(null),{query:o,setQuery:i}=qt(),c=d=>{const g=d.target.value;i(g)};h.useEffect(()=>{e&&a.current&&a.current.focus()},[e]);const l=()=>{const d=document.getElementById("navbar");d&&s(d.offsetWidth),t(!e)},u=()=>{i(""),t(!1)},f=()=>r.jsxs(I,{type:"button",variant:"ghost",size:"icon",className:S("absolute right-1 top-1/2 transition-all duration-300 ease-in-out -translate-y-1/2 h-7 w-7 !bg-transparent !hover:bg-transparent hover:scale-125 hover:text-primary",o?"scale-100":"scale-0"),onClick:u,children:[r.jsx(qe,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Clear"})]});return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex xs:hidden items-center gap-2",children:r.jsxs("div",{className:S("relative flex transition-all duration-300 ease-in-out items-center z-50",e?"-translate-x-12":""),children:[r.jsx(I,{type:"button",variant:"circular",size:"icon",className:S("relative z-10 transition-all duration-300 ease-in-out",e?"bg-background rounded-r-none text-primary dark:outline-primary":"",o?"bg-primary text-white dark:bg-background dark:text-primary":""),onClick:l,"aria-label":e?"Close search":"Open search","aria-expanded":e,children:r.jsx(fe,{className:S("h-4 w-4",e?"scale-110":"")})}),r.jsxs("div",{className:S("absolute left-0 top-0 flex h-full items-center overflow-hidden transition-all duration-300 ease-in-out outline-primary outline outline-2",e?"opacity-100 rounded-full":"opacity-0",o?" outline-primary":""),style:{width:e?`calc(${n}px - 1rem)`:"0"},children:[r.jsx(I,{type:"button",variant:"circular",size:"icon",className:"opacity-0",tabIndex:-1,"aria-hidden":"true",children:r.jsx(fe,{className:"h-4 w-4"})}),r.jsx(we,{ref:a,onChange:c,value:o,placeholder:"Search...",className:S("pl-10 pr-4 text-sm font-medium placeholder:font-normal border-none rounded-full rounded-l-none peer bg-background text-primary placeholder:text-primary dark:placeholder:text-primary/30",o?"bg-background ":"")}),r.jsx(f,{})]})]})}),r.jsxs("div",{className:S("relative hidden xs:flex items-center h-full text-primary dark:text-primary/30 transition-all duration-300 ease-in-out shadow-md rounded-full flex-1 outline-primary dark:outline-primary/30 outline outline-2"),children:[r.jsx(we,{onChange:c,value:o,placeholder:"Search...",className:S("pl-10 pr-4 text-sm font-medium placeholder:font-normal border-none rounded-full peer hover:bg-background dark:bg-background focus:bg-background text-primary placeholder:text-primary dark:placeholder:text-primary/30",o?"bg-background dark:bg-primary/30":"bg-white dark:bg-background")}),r.jsx(f,{}),r.jsx("div",{className:S("absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none peer-focus:scale-110 peer-focus:text-primary duration-300 ease-in-out transform",o?"scale-110 text-primary":""),children:r.jsx(fe,{className:"w-5 h-5"})})]})]})}const en=_e()(Je(e=>({order:"descending",field:"dateAdded",setSortOrder:t=>e({order:t}),setSortField:t=>e({field:t})}),{name:"sort-settings-store"})),Ke={ascending:r.jsx(Ln,{}),descending:r.jsx(Fn,{})},Xs={ascending:r.jsx(En,{}),descending:r.jsx(In,{})},Ys={ascending:r.jsx(On,{}),descending:r.jsx(Tn,{})},oe=[{field:"title",title:"Title",icon:r.jsx($n,{}),sorting_icons:Ke,sorting_labels:{ascending:"Ascending",descending:"Descending"},defaultOrder:"ascending"},{field:"artist",title:"Artist",icon:r.jsx(Gn,{}),sorting_icons:Ke,sorting_labels:{ascending:"Ascending",descending:"Descending"},defaultOrder:"ascending"},{field:"dateAdded",title:"Date Added",icon:r.jsx(Vn,{}),sorting_icons:Xs,sorting_labels:{ascending:"Old → New",descending:"New → Old"},defaultOrder:"descending"},{field:"range",title:"Range",icon:r.jsx(Ze,{}),sorting_icons:Ys,sorting_labels:{ascending:"XS → XXL",descending:"XXL → XS"},defaultOrder:"ascending"}],Qs=(e,t)=>e===t,Js=e=>e==="descending"?"ascending":"descending",Zs=e=>{const t=oe.find(n=>n.field===e);if(!t)throw new Error(`Invalid sorting field: ${e}`);return t},qs=e=>{const t=oe.find(n=>n.field===e);return(t==null?void 0:t.defaultOrder)||"ascending"},er=()=>{const{field:e,order:t,setSortField:n,setSortOrder:s}=en(),a=oe.map(c=>({label:c.title,value:c.field})),o=Zs(e),i=c=>{c!==e&&(n(c),s(qs(c)))};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex md:hidden",children:r.jsxs(ie,{children:[r.jsx(ce,{asChild:!0,children:r.jsx(I,{size:"icon",variant:"circular",children:r.jsx(Pn,{size:32})})}),r.jsxs(le,{className:"w-56",sideOffset:15,children:[r.jsx(ee,{children:"Sorting method"}),r.jsx(te,{}),oe.map(c=>r.jsxs(ne,{onSelect:l=>l.preventDefault(),checked:Qs(e,c.field),onCheckedChange:()=>i(c.field),children:[r.jsx(pe,{icon:c.icon}),c.title]},c.field)),r.jsx(ee,{children:"Direction"}),r.jsx(te,{}),["ascending","descending"].map(c=>r.jsxs(ne,{checked:t===c,onSelect:l=>l.preventDefault(),onCheckedChange:()=>s(c),children:[r.jsx(pe,{icon:o.sorting_icons[c]}),o.sorting_labels[c]]},`${c}_sort`))]})]})}),r.jsx("div",{className:"hidden md:flex h-full w-fit",children:r.jsx(Mn,{options:a,setSelectedOption:i,selectedOption:e,roundedClass:"rounded-l-full",children:r.jsx(I,{className:"rounded-r-full",onClick:()=>s(Js(t)),children:o.sorting_icons[t]})})})]})};function tr({songs:e,showToolbar:t,scrollOffset:n,fakeScroll:s=!1,maxRange:a,languages:o}){const i=pn();return r.jsxs(Nn,{showToolbar:t,scrollOffset:n,fakeScroll:s,children:[r.jsx(er,{}),r.jsx(Us,{}),r.jsx(Gs,{languages:o,maxRange:a}),r.jsx("div",{className:"hidden h-full w-fit sm:flex",children:r.jsx(An,{})}),r.jsx(I,{size:"icon",variant:"circular",onClick:()=>i("gallery"),children:r.jsx(Wn,{})}),r.jsx(Cn,{songs:e})]})}function F(e){return Array.isArray?Array.isArray(e):sn(e)==="[object Array]"}const nr=1/0;function sr(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-nr?"-0":t}function rr(e){return e==null?"":sr(e)}function T(e){return typeof e=="string"}function tn(e){return typeof e=="number"}function or(e){return e===!0||e===!1||ar(e)&&sn(e)=="[object Boolean]"}function nn(e){return typeof e=="object"}function ar(e){return nn(e)&&e!==null}function _(e){return e!=null}function ge(e){return!e.trim().length}function sn(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const ir="Incorrect 'index' type",cr=e=>`Invalid value for key ${e}`,lr=e=>`Pattern length exceeds max of ${e}.`,dr=e=>`Missing ${e} property in key`,ur=e=>`Property 'weight' in key '${e}' must be a positive integer`,We=Object.prototype.hasOwnProperty;class hr{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(s=>{let a=rn(s);this._keys.push(a),this._keyMap[a.id]=a,n+=a.weight}),this._keys.forEach(s=>{s.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function rn(e){let t=null,n=null,s=null,a=1,o=null;if(T(e)||F(e))s=e,t=He(e),n=je(e);else{if(!We.call(e,"name"))throw new Error(dr("name"));const i=e.name;if(s=i,We.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(ur(i));t=He(i),n=je(i),o=e.getFn}return{path:t,id:n,weight:a,src:s,getFn:o}}function He(e){return F(e)?e:e.split(".")}function je(e){return F(e)?e.join("."):e}function fr(e,t){let n=[],s=!1;const a=(o,i,c)=>{if(_(o))if(!i[c])n.push(o);else{let l=i[c];const u=o[l];if(!_(u))return;if(c===i.length-1&&(T(u)||tn(u)||or(u)))n.push(rr(u));else if(F(u)){s=!0;for(let f=0,d=u.length;f<d;f+=1)a(u[f],i,c+1)}else i.length&&a(u,i,c+1)}};return a(e,T(t)?t.split("."):t,0),s?n:n[0]}const gr={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},pr={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},mr={location:0,threshold:.6,distance:100},xr={useExtendedSearch:!1,getFn:fr,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var p={...pr,...gr,...mr,...xr};const yr=/[^ ]+/g;function vr(e=1,t=3){const n=new Map,s=Math.pow(10,t);return{get(a){const o=a.match(yr).length;if(n.has(o))return n.get(o);const i=1/Math.pow(o,.5*e),c=parseFloat(Math.round(i*s)/s);return n.set(o,c),c},clear(){n.clear()}}}class Ve{constructor({getFn:t=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){this.norm=vr(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,T(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();T(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!_(t)||ge(t))return;let s={v:t,i:n,n:this.norm.get(t)};this.records.push(s)}_addObject(t,n){let s={i:n,$:{}};this.keys.forEach((a,o)=>{let i=a.getFn?a.getFn(t):this.getFn(t,a.path);if(_(i)){if(F(i)){let c=[];const l=[{nestedArrIndex:-1,value:i}];for(;l.length;){const{nestedArrIndex:u,value:f}=l.pop();if(_(f))if(T(f)&&!ge(f)){let d={v:f,i:u,n:this.norm.get(f)};c.push(d)}else F(f)&&f.forEach((d,g)=>{l.push({nestedArrIndex:g,value:d})})}s.$[o]=c}else if(T(i)&&!ge(i)){let c={v:i,n:this.norm.get(i)};s.$[o]=c}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function on(e,t,{getFn:n=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){const a=new Ve({getFn:n,fieldNormWeight:s});return a.setKeys(e.map(rn)),a.setSources(t),a.create(),a}function br(e,{getFn:t=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){const{keys:s,records:a}=e,o=new Ve({getFn:t,fieldNormWeight:n});return o.setKeys(s),o.setIndexRecords(a),o}function q(e,{errors:t=0,currentLocation:n=0,expectedLocation:s=0,distance:a=p.distance,ignoreLocation:o=p.ignoreLocation}={}){const i=t/e.length;if(o)return i;const c=Math.abs(s-n);return a?i+c/a:c?1:i}function wr(e=[],t=p.minMatchCharLength){let n=[],s=-1,a=-1,o=0;for(let i=e.length;o<i;o+=1){let c=e[o];c&&s===-1?s=o:!c&&s!==-1&&(a=o-1,a-s+1>=t&&n.push([s,a]),s=-1)}return e[o-1]&&o-s>=t&&n.push([s,o-1]),n}const X=32;function jr(e,t,n,{location:s=p.location,distance:a=p.distance,threshold:o=p.threshold,findAllMatches:i=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,includeMatches:l=p.includeMatches,ignoreLocation:u=p.ignoreLocation}={}){if(t.length>X)throw new Error(lr(X));const f=t.length,d=e.length,g=Math.max(0,Math.min(s,d));let m=o,x=g;const y=c>1||l,b=y?Array(d):[];let v;for(;(v=e.indexOf(t,x))>-1;){let N=q(t,{currentLocation:v,expectedLocation:g,distance:a,ignoreLocation:u});if(m=Math.min(N,m),x=v+f,y){let O=0;for(;O<f;)b[v+O]=1,O+=1}}x=-1;let R=[],w=1,j=f+d;const W=1<<f-1;for(let N=0;N<f;N+=1){let O=0,P=j;for(;O<P;)q(t,{errors:N,currentLocation:g+P,expectedLocation:g,distance:a,ignoreLocation:u})<=m?O=P:j=P,P=Math.floor((j-O)/2+O);j=P;let $=Math.max(1,g-P+1),k=i?d:Math.min(g+P,d)+f,A=Array(k+2);A[k+1]=(1<<N)-1;for(let C=k;C>=$;C-=1){let V=C-1,z=n[e.charAt(V)];if(y&&(b[V]=+!!z),A[C]=(A[C+1]<<1|1)&z,N&&(A[C]|=(R[C+1]|R[C])<<1|1|R[C+1]),A[C]&W&&(w=q(t,{errors:N,currentLocation:V,expectedLocation:g,distance:a,ignoreLocation:u}),w<=m)){if(m=w,x=V,x<=g)break;$=Math.max(1,2*g-x)}}if(q(t,{errors:N+1,currentLocation:g,expectedLocation:g,distance:a,ignoreLocation:u})>m)break;R=A}const H={isMatch:x>=0,score:Math.max(.001,w)};if(y){const N=wr(b,c);N.length?l&&(H.indices=N):H.isMatch=!1}return H}function Sr(e){let t={};for(let n=0,s=e.length;n<s;n+=1){const a=e.charAt(n);t[a]=(t[a]||0)|1<<s-n-1}return t}class an{constructor(t,{location:n=p.location,threshold:s=p.threshold,distance:a=p.distance,includeMatches:o=p.includeMatches,findAllMatches:i=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,isCaseSensitive:l=p.isCaseSensitive,ignoreLocation:u=p.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:a,includeMatches:o,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(g,m)=>{this.chunks.push({pattern:g,alphabet:Sr(g),startIndex:m})},d=this.pattern.length;if(d>X){let g=0;const m=d%X,x=d-m;for(;g<x;)f(this.pattern.substr(g,X),g),g+=X;if(m){const y=d-X;f(this.pattern.substr(y),y)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:s}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let x={isMatch:!0,score:0};return s&&(x.indices=[[0,t.length-1]]),x}const{location:a,distance:o,threshold:i,findAllMatches:c,minMatchCharLength:l,ignoreLocation:u}=this.options;let f=[],d=0,g=!1;this.chunks.forEach(({pattern:x,alphabet:y,startIndex:b})=>{const{isMatch:v,score:R,indices:w}=jr(t,x,y,{location:a+b,distance:o,threshold:i,findAllMatches:c,minMatchCharLength:l,includeMatches:s,ignoreLocation:u});v&&(g=!0),d+=R,v&&w&&(f=[...f,...w])});let m={isMatch:g,score:g?d/this.chunks.length:1};return g&&s&&(m.indices=f),m}}class K{constructor(t){this.pattern=t}static isMultiMatch(t){return Ge(t,this.multiRegex)}static isSingleMatch(t){return Ge(t,this.singleRegex)}search(){}}function Ge(e,t){const n=e.match(t);return n?n[1]:null}class kr extends K{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Mr extends K{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class Nr extends K{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Ar extends K{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Cr extends K{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Rr extends K{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class cn extends K{constructor(t,{location:n=p.location,threshold:s=p.threshold,distance:a=p.distance,includeMatches:o=p.includeMatches,findAllMatches:i=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,isCaseSensitive:l=p.isCaseSensitive,ignoreLocation:u=p.ignoreLocation}={}){super(t),this._bitapSearch=new an(t,{location:n,threshold:s,distance:a,includeMatches:o,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class ln extends K{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,s;const a=[],o=this.pattern.length;for(;(s=t.indexOf(this.pattern,n))>-1;)n=s+o,a.push([s,n-1]);const i=!!a.length;return{isMatch:i,score:i?0:1,indices:a}}}const Se=[kr,ln,Nr,Ar,Rr,Cr,Mr,cn],Ue=Se.length,_r=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Dr="|";function Er(e,t={}){return e.split(Dr).map(n=>{let s=n.trim().split(_r).filter(o=>o&&!!o.trim()),a=[];for(let o=0,i=s.length;o<i;o+=1){const c=s[o];let l=!1,u=-1;for(;!l&&++u<Ue;){const f=Se[u];let d=f.isMultiMatch(c);d&&(a.push(new f(d,t)),l=!0)}if(!l)for(u=-1;++u<Ue;){const f=Se[u];let d=f.isSingleMatch(c);if(d){a.push(new f(d,t));break}}}return a})}const Ir=new Set([cn.type,ln.type]);class Lr{constructor(t,{isCaseSensitive:n=p.isCaseSensitive,includeMatches:s=p.includeMatches,minMatchCharLength:a=p.minMatchCharLength,ignoreLocation:o=p.ignoreLocation,findAllMatches:i=p.findAllMatches,location:c=p.location,threshold:l=p.threshold,distance:u=p.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:s,minMatchCharLength:a,findAllMatches:i,ignoreLocation:o,location:c,threshold:l,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=Er(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:a}=this.options;t=a?t:t.toLowerCase();let o=0,i=[],c=0;for(let l=0,u=n.length;l<u;l+=1){const f=n[l];i.length=0,o=0;for(let d=0,g=f.length;d<g;d+=1){const m=f[d],{isMatch:x,indices:y,score:b}=m.search(t);if(x){if(o+=1,c+=b,s){const v=m.constructor.type;Ir.has(v)?i=[...i,...y]:i.push(y)}}else{c=0,o=0,i.length=0;break}}if(o){let d={isMatch:!0,score:c/o};return s&&(d.indices=i),d}}return{isMatch:!1,score:1}}}const ke=[];function Or(...e){ke.push(...e)}function Me(e,t){for(let n=0,s=ke.length;n<s;n+=1){let a=ke[n];if(a.condition(e,t))return new a(e,t)}return new an(e,t)}const ae={AND:"$and",OR:"$or"},Ne={PATH:"$path",PATTERN:"$val"},Ae=e=>!!(e[ae.AND]||e[ae.OR]),Pr=e=>!!e[Ne.PATH],Tr=e=>!F(e)&&nn(e)&&!Ae(e),Xe=e=>({[ae.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function dn(e,t,{auto:n=!0}={}){const s=a=>{let o=Object.keys(a);const i=Pr(a);if(!i&&o.length>1&&!Ae(a))return s(Xe(a));if(Tr(a)){const l=i?a[Ne.PATH]:o[0],u=i?a[Ne.PATTERN]:a[l];if(!T(u))throw new Error(cr(l));const f={keyId:je(l),pattern:u};return n&&(f.searcher=Me(u,t)),f}let c={children:[],operator:o[0]};return o.forEach(l=>{const u=a[l];F(u)&&u.forEach(f=>{c.children.push(s(f))})}),c};return Ae(e)||(e=Xe(e)),s(e)}function Fr(e,{ignoreFieldNorm:t=p.ignoreFieldNorm}){e.forEach(n=>{let s=1;n.matches.forEach(({key:a,norm:o,score:i})=>{const c=a?a.weight:null;s*=Math.pow(i===0&&c?Number.EPSILON:i,(c||1)*(t?1:o))}),n.score=s})}function $r(e,t){const n=e.matches;t.matches=[],_(n)&&n.forEach(s=>{if(!_(s.indices)||!s.indices.length)return;const{indices:a,value:o}=s;let i={indices:a,value:o};s.key&&(i.key=s.key.src),s.idx>-1&&(i.refIndex=s.idx),t.matches.push(i)})}function Vr(e,t){t.score=e.score}function zr(e,t,{includeMatches:n=p.includeMatches,includeScore:s=p.includeScore}={}){const a=[];return n&&a.push($r),s&&a.push(Vr),e.map(o=>{const{idx:i}=o,c={item:t[i],refIndex:i};return a.length&&a.forEach(l=>{l(o,c)}),c})}class Z{constructor(t,n={},s){this.options={...p,...n},this.options.useExtendedSearch,this._keyStore=new hr(this.options.keys),this.setCollection(t,s)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof Ve))throw new Error(ir);this._myIndex=n||on(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){_(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let s=0,a=this._docs.length;s<a;s+=1){const o=this._docs[s];t(o,s)&&(this.removeAt(s),s-=1,a-=1,n.push(o))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:s,includeScore:a,shouldSort:o,sortFn:i,ignoreFieldNorm:c}=this.options;let l=T(t)?T(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Fr(l,{ignoreFieldNorm:c}),o&&l.sort(i),tn(n)&&n>-1&&(l=l.slice(0,n)),zr(l,this._docs,{includeMatches:s,includeScore:a})}_searchStringList(t){const n=Me(t,this.options),{records:s}=this._myIndex,a=[];return s.forEach(({v:o,i,n:c})=>{if(!_(o))return;const{isMatch:l,score:u,indices:f}=n.searchIn(o);l&&a.push({item:o,idx:i,matches:[{score:u,value:o,norm:c,indices:f}]})}),a}_searchLogical(t){const n=dn(t,this.options),s=(c,l,u)=>{if(!c.children){const{keyId:d,searcher:g}=c,m=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(l,d),searcher:g});return m&&m.length?[{idx:u,item:l,matches:m}]:[]}const f=[];for(let d=0,g=c.children.length;d<g;d+=1){const m=c.children[d],x=s(m,l,u);if(x.length)f.push(...x);else if(c.operator===ae.AND)return[]}return f},a=this._myIndex.records,o={},i=[];return a.forEach(({$:c,i:l})=>{if(_(c)){let u=s(n,c,l);u.length&&(o[l]||(o[l]={idx:l,item:c,matches:[]},i.push(o[l])),u.forEach(({matches:f})=>{o[l].matches.push(...f)}))}}),i}_searchObjectList(t){const n=Me(t,this.options),{keys:s,records:a}=this._myIndex,o=[];return a.forEach(({$:i,i:c})=>{if(!_(i))return;let l=[];s.forEach((u,f)=>{l.push(...this._findMatches({key:u,value:i[f],searcher:n}))}),l.length&&o.push({idx:c,item:i,matches:l})}),o}_findMatches({key:t,value:n,searcher:s}){if(!_(n))return[];let a=[];if(F(n))n.forEach(({v:o,i,n:c})=>{if(!_(o))return;const{isMatch:l,score:u,indices:f}=s.searchIn(o);l&&a.push({score:u,key:t,value:o,idx:i,norm:c,indices:f})});else{const{v:o,n:i}=n,{isMatch:c,score:l,indices:u}=s.searchIn(o);c&&a.push({score:l,key:t,value:o,norm:i,indices:u})}return a}}Z.version="7.0.0";Z.createIndex=on;Z.parseIndex=br;Z.config=p;Z.parseQuery=dn;Or(Lr);const Br=(e,t,n)=>t==="all"?e:t==="other"?e.filter(s=>{const a=s.language||"other";return n[a]<me}):e.filter(s=>s.language===t),Kr=(e,t)=>t?e:e.filter(n=>n.capo===0),Wr=(e,t)=>t==="all"?e:e.filter(n=>{var s;return((s=n.range)==null?void 0:s.semitones)!==void 0&&n.range.semitones>=t[0]&&n.range.semitones<=t[1]}),Hr=(e,t)=>(n,s)=>{var o,i,c,l,u,f;let a;if(e==="range"){const d=((o=n.range)==null?void 0:o.semitones)??-1/0,g=((i=s.range)==null?void 0:i.semitones)??-1/0;a=d===g?n.title.localeCompare(s.title):d-g}else if(e==="dateAdded"){const d=(((c=n.dateAdded)==null?void 0:c.year)??0)*12+(((l=n.dateAdded)==null?void 0:l.month)??0),g=(((u=s.dateAdded)==null?void 0:u.year)??0)*12+(((f=s.dateAdded)==null?void 0:f.month)??0);a=d===g?n.title.localeCompare(s.title):d-g}else a=(n[e]??"").localeCompare(s[e]??"");return t==="ascending"?a:-a};function Gr(e,t){const{field:n,order:s}=en(),{query:a,setQuery:o}=qt(),{language:i,vocalRange:c,capo:l}=$e();h.useEffect(()=>{o("")},[n,s,o]);const u=h.useMemo(()=>{const g={includeScore:!0,keys:["artist","title","ascii_title","ascii_artist"],ignoreLocation:!0,threshold:.4};return new Z(e,g)},[e]),f=h.useMemo(()=>a===""?e:u.search(a).map(g=>g.item),[u,e,a]);let d=Kr(f,l);return d=Wr(d,c),d=Br(d,i,t),a||(d=[...d].sort(Hr(n,s))),{songs:d}}const Ur="scrollOffset";function no(){const e=mn(),{songs:t}=Gr(e.songs,e.languages),n=h.useRef(null),[s,a]=h.useState(!0),[o,i]=Rn(Ur,{defaultValue:0,storageSync:!1});h.useEffect(()=>{n.current&&requestAnimationFrame(()=>{n.current.scrollTop=o})},[o]);const c=()=>{if(!n.current)return;const l=n.current.scrollTop;i(l),a(l===0||l<o)};return r.jsxs("div",{className:"h-dvh w-full no-scrollbar block",children:[r.jsx(tr,{songs:t,showToolbar:s,scrollOffset:o,fakeScroll:!0,maxRange:e.maxRange,languages:e.languages}),r.jsx("div",{ref:n,className:"sm:pt-20 pt-[72px] pb-4 overflow-auto h-full",onScroll:c,children:t.map(l=>r.jsx(bs,{song:l,maxRange:e.maxRange},l.id))})]})}export{no as default};
//# sourceMappingURL=SongList-DOsmSdOL.js.map
