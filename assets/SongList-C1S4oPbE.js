import{c as S,a as $e,r as m,j as r,P as W,u as zt,b as ze,d as w,B as E,L as Bt,D as J,e as Z,f as q,g as ie,h as te,i as se,k as ne,l as Kt,m as Ht,n as X,o as re,p as Wt,q as Ut,s as ce,t as Ne,v as Be,I as Ie,F as Xt,w as Yt,x as Gt,y as Qt}from"./main-CBckiveA.js";import{O as Ke,C as He,T as We,D as Ue,P as Jt,a as Zt,R as qt,b as es,M as ts,c as ss,d as ns}from"./toolbar-base-BZol_f53.js";import{I as rs}from"./IllustrationPrompt-DnbOEvBJ.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=S("ArrowDown01",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["rect",{x:"15",y:"4",width:"4",height:"6",ry:"2",key:"1bwicg"}],["path",{d:"M17 20v-6h-2",key:"1qp1so"}],["path",{d:"M15 20h4",key:"1j968p"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=S("ArrowDown10",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M17 10V4h-2",key:"zcsr5x"}],["path",{d:"M15 10h4",key:"id2lce"}],["rect",{x:"15",y:"14",width:"4",height:"6",ry:"2",key:"33xykx"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=S("ArrowDownAZ",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=S("ArrowDownNarrowWide",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h4",key:"6d7r33"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h10",key:"1438ji"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=S("ArrowDownUp",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=S("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=S("ArrowDownZA",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M15 4h5l-5 6h5",key:"8asdl1"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20",key:"r6l5cz"}],["path",{d:"M20 18h-5",key:"18j1r2"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=S("AudioLines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=S("BookUser",[["path",{d:"M15 13a3 3 0 1 0-6 0",key:"10j68g"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=S("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=S("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=S("FlagOff",[["path",{d:"M8 2c3 0 5 2 8 2s4-1 4-1v11",key:"9rwyz9"}],["path",{d:"M4 22V4",key:"1plyxx"}],["path",{d:"M4 15s1-1 4-1 5 2 8 2",key:"1myooe"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=S("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=S("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=S("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=S("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=S("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=S("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=S("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Ae="Avatar",[ws,vr]=$e(Ae),[js,Ge]=ws(Ae),Qe=m.forwardRef((t,e)=>{const{__scopeAvatar:s,...n}=t,[a,o]=m.useState("idle");return r.jsx(js,{scope:s,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:r.jsx(W.span,{...n,ref:e})})});Qe.displayName=Ae;var Je="AvatarImage",Ze=m.forwardRef((t,e)=>{const{__scopeAvatar:s,src:n,onLoadingStatusChange:a=()=>{},...o}=t,i=Ge(Je,s),c=ks(n,o.referrerPolicy),l=zt(u=>{a(u),i.onImageLoadingStatusChange(u)});return ze(()=>{c!=="idle"&&l(c)},[c,l]),c==="loaded"?r.jsx(W.img,{...o,ref:e,src:n}):null});Ze.displayName=Je;var qe="AvatarFallback",et=m.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:n,...a}=t,o=Ge(qe,s),[i,c]=m.useState(n===void 0);return m.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(l)}},[n]),i&&o.imageLoadingStatus!=="loaded"?r.jsx(W.span,{...a,ref:e}):null});et.displayName=qe;function ks(t,e){const[s,n]=m.useState("idle");return ze(()=>{if(!t){n("error");return}let a=!0;const o=new window.Image,i=c=>()=>{a&&n(c)};return n("loading"),o.onload=i("loaded"),o.onerror=i("error"),o.src=t,e&&(o.referrerPolicy=e),()=>{a=!1}},[t,e]),s}var tt=Qe,st=Ze,nt=et;const Y=m.forwardRef(({className:t,...e},s)=>r.jsx(tt,{ref:s,className:w("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Y.displayName=tt.displayName;const ae=m.forwardRef(({className:t,...e},s)=>r.jsx(st,{ref:s,className:w("aspect-square flex object-cover w-full h-full",t),...e}));ae.displayName=st.displayName;const ee=m.forwardRef(({className:t,...e},s)=>r.jsx(nt,{ref:s,className:w("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));ee.displayName=nt.displayName;const Ss=qt,Ms=Jt,Ns=Zt,rt=m.forwardRef(({className:t,...e},s)=>r.jsx(Ke,{ref:s,className:w("fixed inset-0 z-30 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 backdrop-blur-sm",t),...e}));rt.displayName=Ke.displayName;const at=m.forwardRef(({className:t,close:e,children:s,...n},a)=>r.jsxs(Ms,{children:[r.jsx(rt,{onClick:o=>{e(),o.stopPropagation()}}),r.jsxs(He,{onClick:o=>o.stopPropagation(),ref:a,className:w("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[s,r.jsx(Ns,{asChild:!0,children:r.jsx(E,{variant:"circular",size:"icon",onClick:o=>o.stopPropagation(),className:"absolute top-4 right-4 p-2","aria-label":"Close full screen image",children:r.jsx(Ye,{className:"h-6 w-6"})})})]})]}));at.displayName=He.displayName;const ot=m.forwardRef(({className:t,...e},s)=>r.jsx(We,{ref:s,className:w("text-lg font-semibold leading-none tracking-tight",t),...e}));ot.displayName=We.displayName;const it=m.forwardRef(({className:t,...e},s)=>r.jsx(Ue,{ref:s,className:w("text-sm text-muted-foreground",t),...e}));it.displayName=Ue.displayName;function As({avatarClassName:t,song:e}){const[s,n]=m.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx(Y,{className:w("cursor-pointer",t),onClick:a=>{a.stopPropagation(),n(!0)},children:r.jsx(ae,{src:e.thumbnailURL(),alt:"song illustration thumbnail"})}),r.jsxs(Ss,{open:s,onOpenChange:n,children:[r.jsx(ot,{className:"hidden",children:"Illustration image view"}),r.jsx(it,{className:"hidden",children:"Illustration"}),r.jsx(at,{className:"max-w-[512px] max-h-[calc(100vh)] h-fit rounded-lg backdrop-blur-sm p-0 avatar-modal-dialog overflow-clip content-radix bg-glass/50 gap-0 flex flex-col",close:()=>n(!1),children:r.jsxs("div",{className:"h-full w-full relative",children:[r.jsx("div",{className:"relative flex justify-center max-h-[512px] h-[70%] shadow-lg",children:r.jsx("img",{style:{backgroundImage:`url(${e.thumbnailURL()})`,backgroundRepeat:"no-repeat",backgroundSize:"cover"},src:e.illustrationURL(),loading:"lazy",width:512,height:512,className:"object-scale-down z-50"})}),r.jsx(rs,{song:e,show:s,className:"text-center text-white font-bold !items-center  h-[256px] [@media(max-height:1000px)]:h-[150px] [@media(max-height:800px)]:h-[100px] [@media(max-height:700px)]:!hidden"})]})})]})]})}const De={czech:"cz",english:"gb",german:"de",slovak:"sk",polish:"pl",spanish:"uy",romanian:"ro",finnish:"fi",estonian:"ee",french:"fr",italian:"it",portuguese:"br",icelandic:"is",all:"un",other:"eu"};function Cs(t){return t in De?"https://flagcdn.com/"+De[t]+".svg":t==="russian"?"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Flag_of_Mordor.svg/800px-Flag_of_Mordor.svg.png":""}function ct({language:t}){return r.jsxs(Y,{className:"w-6 h-6 shadow-black",children:[r.jsx(ae,{alt:t,src:Cs(t)}),r.jsx(ee,{children:r.jsx(ps,{})})]})}function _s({value:t,maxValue:e,color:s="hsl(var(--primary))",strokeWidth:n=10}){return r.jsxs("div",{className:"block relative items-center justify-center h-10 w-10",children:[r.jsxs("svg",{className:"w-full h-full relative overflow-visible",viewBox:"0 0 100 100",children:[r.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"transparent",stroke:"#e5e7eb",strokeWidth:n}),r.jsx("circle",{cx:"50",cy:"50",r:"40",className:"transition-all !duration-500 progress",fill:"transparent",transform:"rotate(-90 50 50)",stroke:s,strokeWidth:n*1.2,strokeDasharray:"251.3",strokeDashoffset:251.3*(1-t/e),strokeLinecap:"round",role:"progressbar"})]}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-normal text-[0.65rem] text-muted-foreground",children:t})]})}const Rs=t=>{const e={Domčík:"avatars/domcik.png",Kvítek:"avatars/kvitek.jpeg"};return t in e?e[t]:"avatars/"+t+".png"},lt=t=>{const e=t.map(n=>({value:n,avatar:Rs(n),avatar_fallback:n.charAt(0).toUpperCase()})),s=(n,a)=>n.value==="Domčík"?-1:a.value==="Domčík"?1:n.value.localeCompare(a.value);return e.sort(s),e.unshift({value:"All",avatar:"avatars/all.png",avatar_fallback:"A"}),e},Es=m.memo(({title:t,artist:e,className:s=""})=>r.jsxs("div",{className:w("min-w-40 flex-col text-left content-center",s),children:[r.jsx("h2",{className:"text-sm font-bold truncate song-title",children:t}),r.jsx("h3",{className:"text-sm opacity-50 truncate song-artist",children:e})]})),Is=["January","February","March","April","May","June","July","August","September","October","November","December"],Ds=m.memo(({month:t,year:e,className:s=""})=>r.jsx("div",{className:w("min-w-20 flex-col content-center justify-center text-center",s),children:t&&e&&r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-xs opacity-70",children:Is[t-1]}),r.jsx("h2",{className:"text-sm opacity-70",children:e})]})})),Ls=m.memo(({capo:t,className:e=""})=>r.jsxs("div",{className:w("min-w-12 text-center content-center justify-center flex-col",e),children:[r.jsx("h2",{className:"text-xs opacity-70",children:"Capo"}),r.jsx("h3",{className:"text-sm opacity-70",children:t})]})),Ps=m.memo(({songRangeSemitones:t,maxRange:e,className:s=""})=>{const n=t?r.jsx(_s,{value:t||e,maxValue:e}):r.jsx(r.Fragment,{});return r.jsx("div",{className:w("min-w-12 content-center justify-center",s),children:r.jsx("div",{className:"flex items-center",children:n})})}),Os=m.memo(({songbooks:t,maxAvatars:e=3,className:s=""})=>{const n=lt(t).filter(i=>i.value!=="All"),a=n.slice(0,e),o=n.length-e;return r.jsx("div",{className:w("flex items-center justify-end",s),children:r.jsxs("div",{className:"flex items-center justify-end w-fit -space-x-5",children:[a.map((i,c)=>r.jsx("div",{className:w("h-10 w-10 rounded-full border-2 border-background hover:z-10"),children:r.jsxs(Y,{className:"h-full w-full",children:[r.jsx(ae,{src:i.avatar,alt:i.value+" avatar"}),r.jsx(ee,{children:i.avatar_fallback})]})},c)),o>0&&r.jsx("div",{className:"relative rounded-full border-2 border-background flex items-center justify-center bg-muted hover:z-10",children:r.jsx(Y,{className:"",children:r.jsxs(ee,{children:["+",o]})})})]})})}),Fs=m.memo(({song:t,maxRange:e})=>{var s,n,a;return t?r.jsx("div",{className:"h-[70px] flex items-center container max-w-3xl mx-auto px-2 sm:px-4 song-row-wrapper",children:r.jsx("div",{className:"flex h-14 min-w-72 w-full rounded-full song-row-bg-image",style:{backgroundImage:`url(${t.thumbnailURL()})`},children:r.jsxs("div",{className:"flex relative h-full w-full items-center rounded-full p-1 backdrop-blur-md song-row-bg-image shadow-black row-text-shadow",children:[r.jsx(As,{avatarClassName:"absolute -left-0 top-0 bottom-0 m-auto song-avatar z-10 w-16 h-16 text-large",song:t}),r.jsxs(Bt,{to:t.url(),className:"flex relative h-12 song-row w-full backdrop-blur-lg bg-glass/60 hover:bg-glass/90 rounded-full",children:[r.jsx("div",{className:"flex min-w-[72px] rounded-l-full content-center justify-center relative"}),r.jsx(Es,{title:t.title,artist:t.artist,className:"flex-auto"}),r.jsx(Os,{songbooks:t.songbooks,className:"hidden sm:flex ml-2"}),r.jsx(Ds,{month:(s=t.dateAdded)==null?void 0:s.month,year:(n=t.dateAdded)==null?void 0:n.year,className:"hidden xsm:flex md:basis-1/12 shrink-0 basis-[2/12]"}),r.jsx(Ls,{capo:t.capo,className:"hidden lg:flex basis-1/12 shrink-0"}),r.jsx(Ps,{songRangeSemitones:(a=t.range)==null?void 0:a.semitones,maxRange:e,className:"hidden md:flex basis-1/12 shrink-0"}),r.jsx("div",{className:"flex basis-[5%] min-w-10 shrink-0 items-center justify-end p-2",children:r.jsx(ct,{language:t.language})})]})]})})}):(console.error("Invalid song provided to SongRow"),r.jsx("div",{className:"h-[70px] flex items-center container max-w-3xl mx-auto px-2 sm:px-4 bg-white text-foreground",children:"Invalid song"}))});function Ts(t){const e=m.useCallback(a=>{const o=window.matchMedia(t);return o.addEventListener("change",a),()=>{o.removeEventListener("change",a)}},[t]),s=()=>window.matchMedia(t).matches,n=()=>{throw Error("useMediaQuery is a client-only hook")};return m.useSyncExternalStore(e,s,n)}const ge=3,Vs=t=>{if(!t)return"";const e=t.codePointAt(0);if(!e)return t;const s=e>65535?2:1;return String.fromCodePoint(e).toUpperCase()+t.slice(s)},dt=(t,e,s)=>{const n=Object.entries(t).filter(([i,c])=>c>=ge).map(([i])=>({text:Vs(i),value:i})),a=Object.entries(t).filter(([i,c])=>c<ge).map(([i])=>i),o=n;return o.sort((i,c)=>i.text.localeCompare(c.text)),o.unshift({text:"All",value:"all"}),a.length>0&&o.push({text:"Other",value:"other"}),o.map(i=>r.jsxs(q,{onSelect:c=>c.preventDefault(),checked:e===i.value,onClick:()=>s(i.value),children:[r.jsx(ie,{icon:r.jsx(ct,{language:i.value})}),i.text]},i.value))},$s=({languages:t,selectedLanguage:e,setSelectedLanguage:s,iconOnly:n})=>{const a=e!=="all";return r.jsxs(te,{children:[r.jsx(se,{asChild:!0,children:r.jsxs(E,{variant:"circular",isActive:a,className:"outline-0 rounded-r-none font-bold",children:[r.jsx(ys,{}),!n&&"Languages"]})}),r.jsx(ne,{"aria-label":"Language Choices",sideOffset:15,children:dt(t,e,s)})]})},zs=(t,e,s)=>r.jsxs(r.Fragment,{children:[r.jsx(J,{children:"Select languages"}),r.jsx(Z,{}),dt(t,e,s)]});function ut(t,[e,s]){return Math.min(s,Math.max(e,t))}function Bs(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var ht=["PageUp","PageDown"],ft=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],mt={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},G="Slider",[pe,Ks,Hs]=Kt(G),[gt,yr]=$e(G,[Hs]),[Ws,ue]=gt(G),pt=m.forwardRef((t,e)=>{const{name:s,min:n=0,max:a=100,step:o=1,orientation:i="horizontal",disabled:c=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[n],value:h,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:g=!1,form:x,...v}=t,b=m.useRef(new Set),y=m.useRef(0),j=i==="horizontal"?Us:Xs,[k=[],$]=Ht({prop:h,defaultProp:u,onChange:M=>{var B;(B=[...b.current][y.current])==null||B.focus(),d(M)}}),z=m.useRef(k);function N(M){const A=Zs(k,M);O(M,A)}function I(M){O(M,y.current)}function D(){const M=z.current[y.current];k[y.current]!==M&&f(k)}function O(M,A,{commit:B}={commit:!1}){const C=sn(o),F=nn(Math.round((M-n)/o)*o+n,C),T=ut(F,[n,a]);$((U=[])=>{const K=Qs(U,T,A);if(tn(K,l*o)){y.current=K.indexOf(T);const Ee=String(K)!==String(U);return Ee&&B&&f(K),Ee?K:U}else return U})}return r.jsx(Ws,{scope:t.__scopeSlider,name:s,disabled:c,min:n,max:a,valueIndexToChangeRef:y,thumbs:b.current,values:k,orientation:i,form:x,children:r.jsx(pe.Provider,{scope:t.__scopeSlider,children:r.jsx(pe.Slot,{scope:t.__scopeSlider,children:r.jsx(j,{"aria-disabled":c,"data-disabled":c?"":void 0,...v,ref:e,onPointerDown:X(v.onPointerDown,()=>{c||(z.current=k)}),min:n,max:a,inverted:g,onSlideStart:c?void 0:N,onSlideMove:c?void 0:I,onSlideEnd:c?void 0:D,onHomeKeyDown:()=>!c&&O(n,0,{commit:!0}),onEndKeyDown:()=>!c&&O(a,k.length-1,{commit:!0}),onStepKeyDown:({event:M,direction:A})=>{if(!c){const F=ht.includes(M.key)||M.shiftKey&&ft.includes(M.key)?10:1,T=y.current,U=k[T],K=o*F*A;O(U+K,T,{commit:!0})}}})})})})});pt.displayName=G;var[xt,vt]=gt(G,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Us=m.forwardRef((t,e)=>{const{min:s,max:n,dir:a,inverted:o,onSlideStart:i,onSlideMove:c,onSlideEnd:l,onStepKeyDown:u,...h}=t,[d,f]=m.useState(null),g=re(e,j=>f(j)),x=m.useRef(),v=Wt(a),b=v==="ltr",y=b&&!o||!b&&o;function _(j){const k=x.current||d.getBoundingClientRect(),$=[0,k.width],N=Ce($,y?[s,n]:[n,s]);return x.current=k,N(j-k.left)}return r.jsx(xt,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:r.jsx(yt,{dir:v,"data-orientation":"horizontal",...h,ref:g,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:j=>{const k=_(j.clientX);i==null||i(k)},onSlideMove:j=>{const k=_(j.clientX);c==null||c(k)},onSlideEnd:()=>{x.current=void 0,l==null||l()},onStepKeyDown:j=>{const $=mt[y?"from-left":"from-right"].includes(j.key);u==null||u({event:j,direction:$?-1:1})}})})}),Xs=m.forwardRef((t,e)=>{const{min:s,max:n,inverted:a,onSlideStart:o,onSlideMove:i,onSlideEnd:c,onStepKeyDown:l,...u}=t,h=m.useRef(null),d=re(e,h),f=m.useRef(),g=!a;function x(v){const b=f.current||h.current.getBoundingClientRect(),y=[0,b.height],j=Ce(y,g?[n,s]:[s,n]);return f.current=b,j(v-b.top)}return r.jsx(xt,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:r.jsx(yt,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const b=x(v.clientY);o==null||o(b)},onSlideMove:v=>{const b=x(v.clientY);i==null||i(b)},onSlideEnd:()=>{f.current=void 0,c==null||c()},onStepKeyDown:v=>{const y=mt[g?"from-bottom":"from-top"].includes(v.key);l==null||l({event:v,direction:y?-1:1})}})})}),yt=m.forwardRef((t,e)=>{const{__scopeSlider:s,onSlideStart:n,onSlideMove:a,onSlideEnd:o,onHomeKeyDown:i,onEndKeyDown:c,onStepKeyDown:l,...u}=t,h=ue(G,s);return r.jsx(W.span,{...u,ref:e,onKeyDown:X(t.onKeyDown,d=>{d.key==="Home"?(i(d),d.preventDefault()):d.key==="End"?(c(d),d.preventDefault()):ht.concat(ft).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:X(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),h.thumbs.has(f)?f.focus():n(d)}),onPointerMove:X(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&a(d)}),onPointerUp:X(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),o(d))})})}),bt="SliderTrack",wt=m.forwardRef((t,e)=>{const{__scopeSlider:s,...n}=t,a=ue(bt,s);return r.jsx(W.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:e})});wt.displayName=bt;var xe="SliderRange",jt=m.forwardRef((t,e)=>{const{__scopeSlider:s,...n}=t,a=ue(xe,s),o=vt(xe,s),i=m.useRef(null),c=re(e,i),l=a.values.length,u=a.values.map(f=>St(f,a.min,a.max)),h=l>1?Math.min(...u):0,d=100-Math.max(...u);return r.jsx(W.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:c,style:{...t.style,[o.startEdge]:h+"%",[o.endEdge]:d+"%"}})});jt.displayName=xe;var ve="SliderThumb",kt=m.forwardRef((t,e)=>{const s=Ks(t.__scopeSlider),[n,a]=m.useState(null),o=re(e,c=>a(c)),i=m.useMemo(()=>n?s().findIndex(c=>c.ref.current===n):-1,[s,n]);return r.jsx(Ys,{...t,ref:o,index:i})}),Ys=m.forwardRef((t,e)=>{const{__scopeSlider:s,index:n,name:a,...o}=t,i=ue(ve,s),c=vt(ve,s),[l,u]=m.useState(null),h=re(e,_=>u(_)),d=l?i.form||!!l.closest("form"):!0,f=Ut(l),g=i.values[n],x=g===void 0?0:St(g,i.min,i.max),v=Js(n,i.values.length),b=f==null?void 0:f[c.size],y=b?qs(b,x,c.direction):0;return m.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${x}% + ${y}px)`},children:[r.jsx(pe.ItemSlot,{scope:t.__scopeSlider,children:r.jsx(W.span,{role:"slider","aria-label":t["aria-label"]||v,"aria-valuemin":i.min,"aria-valuenow":g,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...o,ref:h,style:g===void 0?{display:"none"}:t.style,onFocus:X(t.onFocus,()=>{i.valueIndexToChangeRef.current=n})})}),d&&r.jsx(Gs,{name:a??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:g},n)]})});kt.displayName=ve;var Gs=t=>{const{value:e,...s}=t,n=m.useRef(null),a=Bs(e);return m.useEffect(()=>{const o=n.current,i=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(i,"value").set;if(a!==e&&l){const u=new Event("input",{bubbles:!0});l.call(o,e),o.dispatchEvent(u)}},[a,e]),r.jsx("input",{style:{display:"none"},...s,ref:n,defaultValue:e})};function Qs(t=[],e,s){const n=[...t];return n[s]=e,n.sort((a,o)=>a-o)}function St(t,e,s){const o=100/(s-e)*(t-e);return ut(o,[0,100])}function Js(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Zs(t,e){if(t.length===1)return 0;const s=t.map(a=>Math.abs(a-e)),n=Math.min(...s);return s.indexOf(n)}function qs(t,e,s){const n=t/2,o=Ce([0,50],[0,n]);return(n-o(e)*s)*s}function en(t){return t.slice(0,-1).map((e,s)=>t[s+1]-e)}function tn(t,e){if(e>0){const s=en(t);return Math.min(...s)>=e}return!0}function Ce(t,e){return s=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(s-t[0])}}function sn(t){return(String(t).split(".")[1]||"").length}function nn(t,e){const s=Math.pow(10,e);return Math.round(t*s)/s}var he=pt,Mt=wt,Nt=jt,ye=kt;const rn=m.forwardRef(({className:t,...e},s)=>r.jsxs(he,{ref:s,className:w("relative flex w-full touch-none select-none items-center",t),...e,children:[r.jsx(Mt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(Nt,{className:"absolute h-full bg-primary"})}),r.jsx(ye,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));rn.displayName=he.displayName;const an=(t,e)=>!t||!e?r.jsx(r.Fragment,{}):r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"mt-2 text-muted-foreground",children:t}),r.jsxs("div",{className:"mt-2 text-muted-foreground",children:[e[0],"-",e[1]]})]}),At=m.forwardRef(({className:t,...e},s)=>r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsxs(he,{minStepsBetweenThumbs:1,ref:s,className:w("relative flex w-full touch-none select-none items-center mt-2",t),...e,children:[r.jsx(Mt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(Nt,{className:"absolute h-full bg-primary"})}),r.jsx(ye,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}),r.jsx(ye,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}),an(e.label,e.value)]}));At.displayName=he.displayName;const Ct=({maxRange:t,vocalRangeFilter:e,setVocalRangeFilter:s})=>{const n=e==="all"?[0,t]:e,a=o=>{console.log(o),o[0]===0&&o[1]===t?s("all"):s(o)};return r.jsx(At,{label:"Semitones",step:1,min:0,max:t,defaultValue:n,value:n,className:"max-w-md",onValueChange:o=>a(o)})},on=({maxRange:t,vocalRangeFilter:e,setVocalRangeFilter:s,iconOnly:n})=>r.jsxs(te,{children:[r.jsx(se,{asChild:!0,children:r.jsxs(E,{variant:"circular",isActive:e!=="all",className:"shadow-none outline-0 font-bold rounded-l-none",children:[r.jsx(Xe,{}),!n&&"Range"]})}),r.jsxs(ne,{"aria-label":"Vocal range filter slider",className:"w-80",sideOffset:15,children:[r.jsx(ce,{onSelect:a=>a.preventDefault(),children:r.jsx(Ct,{maxRange:t,vocalRangeFilter:e,setVocalRangeFilter:s})},"slider"),r.jsx(ce,{onClick:()=>s("all"),children:"Reset"},"reset")]})]}),cn=(t,e,s)=>r.jsxs(r.Fragment,{children:[r.jsx(J,{children:"Select song range"}),r.jsx(Z,{}),r.jsx(ce,{onSelect:n=>n.preventDefault(),children:r.jsx(Ct,{maxRange:t,vocalRangeFilter:e,setVocalRangeFilter:s})},"slider"),r.jsx(ce,{onClick:()=>s("all"),onSelect:n=>n.preventDefault(),children:"Reset"},"reset")]}),_t=(t,e,s)=>lt(t).map(n=>r.jsxs(q,{onSelect:a=>a.preventDefault(),checked:e===n.value,onClick:()=>s(n.value),children:[r.jsx(ie,{icon:r.jsxs(Y,{className:"h-6 w-6",children:[r.jsx(ae,{src:n.avatar}),r.jsx(ee,{children:n.avatar_fallback})]})}),n.value]},n.value)),ln=({songbooks:t,selectedSongbook:e,setSelectedSongbook:s,iconOnly:n})=>{const a=e!=="All";return r.jsxs(te,{children:[r.jsx(se,{asChild:!0,children:r.jsxs(E,{isActive:a,className:"outline-0 rounded-r-none font-bold",children:[r.jsx(fs,{}),!n&&"Songbooks"]})}),r.jsx(ne,{"aria-label":"Songbook Choices",sideOffset:15,children:_t(t,e,s)})]})},dn=(t,e,s)=>r.jsxs(r.Fragment,{children:[r.jsx(J,{children:"Select songbooks"}),r.jsx(Z,{}),_t(t,e,s)]}),_e=Ne()(Be(t=>({language:"all",vocalRange:"all",songbook:"All",capo:!0,setLanguage:e=>t({language:e}),setSongbook:e=>t({songbook:e}),setVocalRange:e=>t({vocalRange:e}),setCapo:e=>t({capo:e}),toggleCapo:()=>t(e=>({capo:!e.capo}))}),{name:"filter-settings-store"})),un=({languages:t,maxRange:e,iconOnly:s,songbooks:n})=>{const{language:a,songbook:o,vocalRange:i,capo:c,setLanguage:l,setSongbook:u,setVocalRange:h,toggleCapo:d}=_e();return r.jsxs("div",{className:"flex outline outline-primary dark:outline-primary/30 rounded-full outline-2",children:[r.jsx($s,{languages:t,selectedLanguage:a,setSelectedLanguage:l,iconOnly:s}),r.jsx(ln,{songbooks:n,selectedSongbook:o,setSelectedSongbook:u,iconOnly:s}),r.jsxs(E,{variant:"circular",isActive:c,className:"font-bold rounded-none outline-0 shadow-none",onClick:d,children:[r.jsx(xs,{}),!s&&"Capo"]}),r.jsx(on,{maxRange:e,vocalRangeFilter:i,setVocalRangeFilter:h,iconOnly:s})]})},hn=({languages:t,maxRange:e,songbooks:s})=>{const{language:n,songbook:a,vocalRange:o,capo:i,setLanguage:c,setSongbook:l,setVocalRange:u,toggleCapo:h}=_e(),d=Ts("only screen and (min-width : 1000px)"),f=n==="all"&&(o==="all"||Array.isArray(o)&&o[0]===0&&o[1]===e)&&i;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden lg:flex",children:r.jsx(un,{languages:t,songbooks:s,maxRange:e,iconOnly:d})}),r.jsx("div",{className:"lg:hidden",children:r.jsxs(te,{children:[r.jsx(se,{asChild:!0,children:r.jsx(E,{size:"icon",variant:"circular",isActive:!f,children:r.jsx(gs,{})})}),r.jsxs(ne,{"aria-label":"Filtering",className:"dropdown-scroll no-scrollbar w-52 max-h-[80dvh] overflow-y-scroll",sideOffset:15,children:[r.jsx(q,{onClick:h,onSelect:g=>g.preventDefault(),checked:i,children:"Allow capo"}),cn(e,o,u),zs(t,n,c),dn(s,a,l)]})]})})]})},Rt=Ne()(t=>({query:"",setQuery:e=>t({query:e})}));function fn(){const[t,e]=m.useState(!1),[s,n]=m.useState(298),a=m.useRef(null),{query:o,setQuery:i}=Rt(),c=d=>{const f=d.target.value;i(f)};m.useEffect(()=>{t&&a.current&&a.current.focus()},[t]);const l=()=>{const d=document.getElementById("navbar");d&&n(d.offsetWidth),e(!t)},u=()=>{i(""),e(!1)},h=()=>r.jsxs(E,{type:"button",variant:"ghost",size:"icon",className:w("absolute right-1 top-1/2 transition-all duration-300 ease-in-out -translate-y-1/2 h-7 w-7 !bg-transparent !hover:bg-transparent hover:scale-125 hover:text-primary",o?"scale-100":"scale-0"),onClick:u,children:[r.jsx(Ye,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Clear"})]});return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex sm:hidden items-center gap-2",children:r.jsxs("div",{className:w("relative flex transition-all duration-300 ease-in-out items-center z-50",t?"-translate-x-12":""),children:[r.jsx(E,{type:"button",variant:"circular",size:"icon",className:w("relative z-10 transition-all duration-300 ease-in-out",t?"bg-background rounded-r-none text-primary dark:outline-primary":"",o?"bg-primary text-white dark:bg-background dark:text-primary":""),onClick:l,"aria-label":t?"Close search":"Open search","aria-expanded":t,children:r.jsx(fe,{className:w("h-4 w-4",t?"scale-110":"")})}),r.jsxs("div",{className:w("absolute left-0 top-0 flex h-full items-center overflow-hidden transition-all duration-300 ease-in-out outline-primary outline outline-2",t?"opacity-100 rounded-full":"opacity-0",o?" outline-primary":""),style:{width:t?`calc(${s}px - 1rem)`:"0"},children:[r.jsx(E,{type:"button",variant:"circular",size:"icon",className:"opacity-0",tabIndex:-1,"aria-hidden":"true",children:r.jsx(fe,{className:"h-4 w-4"})}),r.jsx(Ie,{ref:a,onChange:c,value:o,placeholder:"Search...",className:w("pl-10 pr-4 text-sm font-medium placeholder:font-normal border-none rounded-full rounded-l-none peer bg-background text-primary placeholder:text-primary dark:placeholder:text-primary/30",o?"bg-background ":"")}),r.jsx(h,{})]})]})}),r.jsxs("div",{className:w("relative hidden sm:flex items-center h-full text-primary dark:text-primary/30 transition-all duration-300 ease-in-out shadow-md rounded-full flex-1 outline-primary dark:outline-primary/30 outline outline-2"),children:[r.jsx(Ie,{onChange:c,value:o,placeholder:"Search...",className:w("pl-10 pr-4 text-sm font-medium placeholder:font-normal border-none rounded-full peer hover:bg-background dark:bg-background focus:bg-background text-primary placeholder:text-primary dark:placeholder:text-primary/30",o?"bg-background dark:bg-primary/30":"bg-white dark:bg-background")}),r.jsx(h,{}),r.jsx("div",{className:w("absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none peer-focus:scale-110 peer-focus:text-primary duration-300 ease-in-out transform",o?"scale-110 text-primary":""),children:r.jsx(fe,{className:"w-5 h-5"})})]})]})}const Et=Ne()(Be(t=>({order:"descending",field:"dateAdded",setSortOrder:e=>t({order:e}),setSortField:e=>t({field:e})}),{name:"sort-settings-store"})),Le={ascending:r.jsx(is,{}),descending:r.jsx(us,{})},mn={ascending:r.jsx(as,{}),descending:r.jsx(os,{})},gn={ascending:r.jsx(cs,{}),descending:r.jsx(ds,{})},le=[{field:"title",title:"Title",icon:r.jsx(hs,{}),sorting_icons:Le,sorting_labels:{ascending:"Ascending",descending:"Descending"},defaultOrder:"ascending"},{field:"artist",title:"Artist",icon:r.jsx(bs,{}),sorting_icons:Le,sorting_labels:{ascending:"Ascending",descending:"Descending"},defaultOrder:"ascending"},{field:"dateAdded",title:"Date Added",icon:r.jsx(ms,{}),sorting_icons:mn,sorting_labels:{ascending:"Old → New",descending:"New → Old"},defaultOrder:"descending"},{field:"range",title:"Range",icon:r.jsx(Xe,{}),sorting_icons:gn,sorting_labels:{ascending:"XS → XXL",descending:"XXL → XS"},defaultOrder:"ascending"}],pn=(t,e)=>t===e,xn=t=>t==="descending"?"ascending":"descending",vn=t=>{const e=le.find(s=>s.field===t);if(!e)throw new Error(`Invalid sorting field: ${t}`);return e},yn=t=>{const e=le.find(s=>s.field===t);return(e==null?void 0:e.defaultOrder)||"ascending"},bn=()=>{const{field:t,order:e,setSortField:s,setSortOrder:n}=Et(),a=le.map(c=>({label:c.title,value:c.field})),o=vn(t),i=c=>{c!==t&&(s(c),n(yn(c)))};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex md:hidden",children:r.jsxs(te,{children:[r.jsx(se,{asChild:!0,children:r.jsx(E,{size:"icon",variant:"circular",children:r.jsx(ls,{size:32})})}),r.jsxs(ne,{className:"w-56",sideOffset:15,children:[r.jsx(J,{children:"Sorting method"}),r.jsx(Z,{}),le.map(c=>r.jsxs(q,{onSelect:l=>l.preventDefault(),checked:pn(t,c.field),onCheckedChange:()=>i(c.field),children:[r.jsx(ie,{icon:c.icon}),c.title]},c.field)),r.jsx(J,{children:"Direction"}),r.jsx(Z,{}),["ascending","descending"].map(c=>r.jsxs(q,{checked:e===c,onSelect:l=>l.preventDefault(),onCheckedChange:()=>n(c),children:[r.jsx(ie,{icon:o.sorting_icons[c]}),o.sorting_labels[c]]},`${c}_sort`))]})]})}),r.jsx("div",{className:"hidden md:flex h-full w-fit",children:r.jsx(Xt,{options:a,setSelectedOption:i,selectedOption:t,roundedClass:"rounded-l-full",children:r.jsx(E,{className:"rounded-r-full",onClick:()=>n(xn(e)),children:o.sorting_icons[e]})})})]})};function wn({songs:t,showToolbar:e,scrollOffset:s,fakeScroll:n=!1,maxRange:a,languages:o,songbooks:i}){const c=Yt();return r.jsxs(es,{showToolbar:e,scrollOffset:s,fakeScroll:n,childContainerClassName:"max-sm:max-w-[310px] max-sm:justify-center",children:[r.jsx(bn,{}),r.jsx(fn,{}),r.jsx(hn,{languages:o,maxRange:a,songbooks:i}),r.jsx("div",{className:"hidden h-full w-fit sm:flex",children:r.jsx(ts,{})}),r.jsx("div",{className:"max:-md:hidden",children:r.jsx(E,{size:"icon",variant:"circular",onClick:()=>c("editor"),children:r.jsx(ss,{})})}),r.jsx(E,{size:"icon",variant:"circular",onClick:()=>c("gallery"),children:r.jsx(vs,{})}),r.jsx(ns,{songs:t})]})}function P(t){return Array.isArray?Array.isArray(t):Lt(t)==="[object Array]"}const jn=1/0;function kn(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-jn?"-0":e}function Sn(t){return t==null?"":kn(t)}function L(t){return typeof t=="string"}function It(t){return typeof t=="number"}function Mn(t){return t===!0||t===!1||Nn(t)&&Lt(t)=="[object Boolean]"}function Dt(t){return typeof t=="object"}function Nn(t){return Dt(t)&&t!==null}function R(t){return t!=null}function me(t){return!t.trim().length}function Lt(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const An="Incorrect 'index' type",Cn=t=>`Invalid value for key ${t}`,_n=t=>`Pattern length exceeds max of ${t}.`,Rn=t=>`Missing ${t} property in key`,En=t=>`Property 'weight' in key '${t}' must be a positive integer`,Pe=Object.prototype.hasOwnProperty;class In{constructor(e){this._keys=[],this._keyMap={};let s=0;e.forEach(n=>{let a=Pt(n);this._keys.push(a),this._keyMap[a.id]=a,s+=a.weight}),this._keys.forEach(n=>{n.weight/=s})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Pt(t){let e=null,s=null,n=null,a=1,o=null;if(L(t)||P(t))n=t,e=Oe(t),s=be(t);else{if(!Pe.call(t,"name"))throw new Error(Rn("name"));const i=t.name;if(n=i,Pe.call(t,"weight")&&(a=t.weight,a<=0))throw new Error(En(i));e=Oe(i),s=be(i),o=t.getFn}return{path:e,id:s,weight:a,src:n,getFn:o}}function Oe(t){return P(t)?t:t.split(".")}function be(t){return P(t)?t.join("."):t}function Dn(t,e){let s=[],n=!1;const a=(o,i,c)=>{if(R(o))if(!i[c])s.push(o);else{let l=i[c];const u=o[l];if(!R(u))return;if(c===i.length-1&&(L(u)||It(u)||Mn(u)))s.push(Sn(u));else if(P(u)){n=!0;for(let h=0,d=u.length;h<d;h+=1)a(u[h],i,c+1)}else i.length&&a(u,i,c+1)}};return a(t,L(e)?e.split("."):e,0),n?s:s[0]}const Ln={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Pn={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},On={location:0,threshold:.6,distance:100},Fn={useExtendedSearch:!1,getFn:Dn,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var p={...Pn,...Ln,...On,...Fn};const Tn=/[^ ]+/g;function Vn(t=1,e=3){const s=new Map,n=Math.pow(10,e);return{get(a){const o=a.match(Tn).length;if(s.has(o))return s.get(o);const i=1/Math.pow(o,.5*t),c=parseFloat(Math.round(i*n)/n);return s.set(o,c),c},clear(){s.clear()}}}class Re{constructor({getFn:e=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){this.norm=Vn(s,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((s,n)=>{this._keysMap[s.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,L(this.docs[0])?this.docs.forEach((e,s)=>{this._addString(e,s)}):this.docs.forEach((e,s)=>{this._addObject(e,s)}),this.norm.clear())}add(e){const s=this.size();L(e)?this._addString(e,s):this._addObject(e,s)}removeAt(e){this.records.splice(e,1);for(let s=e,n=this.size();s<n;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(e,s){return e[this._keysMap[s]]}size(){return this.records.length}_addString(e,s){if(!R(e)||me(e))return;let n={v:e,i:s,n:this.norm.get(e)};this.records.push(n)}_addObject(e,s){let n={i:s,$:{}};this.keys.forEach((a,o)=>{let i=a.getFn?a.getFn(e):this.getFn(e,a.path);if(R(i)){if(P(i)){let c=[];const l=[{nestedArrIndex:-1,value:i}];for(;l.length;){const{nestedArrIndex:u,value:h}=l.pop();if(R(h))if(L(h)&&!me(h)){let d={v:h,i:u,n:this.norm.get(h)};c.push(d)}else P(h)&&h.forEach((d,f)=>{l.push({nestedArrIndex:f,value:d})})}n.$[o]=c}else if(L(i)&&!me(i)){let c={v:i,n:this.norm.get(i)};n.$[o]=c}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ot(t,e,{getFn:s=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){const a=new Re({getFn:s,fieldNormWeight:n});return a.setKeys(t.map(Pt)),a.setSources(e),a.create(),a}function $n(t,{getFn:e=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){const{keys:n,records:a}=t,o=new Re({getFn:e,fieldNormWeight:s});return o.setKeys(n),o.setIndexRecords(a),o}function oe(t,{errors:e=0,currentLocation:s=0,expectedLocation:n=0,distance:a=p.distance,ignoreLocation:o=p.ignoreLocation}={}){const i=e/t.length;if(o)return i;const c=Math.abs(n-s);return a?i+c/a:c?1:i}function zn(t=[],e=p.minMatchCharLength){let s=[],n=-1,a=-1,o=0;for(let i=t.length;o<i;o+=1){let c=t[o];c&&n===-1?n=o:!c&&n!==-1&&(a=o-1,a-n+1>=e&&s.push([n,a]),n=-1)}return t[o-1]&&o-n>=e&&s.push([n,o-1]),s}const H=32;function Bn(t,e,s,{location:n=p.location,distance:a=p.distance,threshold:o=p.threshold,findAllMatches:i=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,includeMatches:l=p.includeMatches,ignoreLocation:u=p.ignoreLocation}={}){if(e.length>H)throw new Error(_n(H));const h=e.length,d=t.length,f=Math.max(0,Math.min(n,d));let g=o,x=f;const v=c>1||l,b=v?Array(d):[];let y;for(;(y=t.indexOf(e,x))>-1;){let N=oe(e,{currentLocation:y,expectedLocation:f,distance:a,ignoreLocation:u});if(g=Math.min(N,g),x=y+h,v){let I=0;for(;I<h;)b[y+I]=1,I+=1}}x=-1;let _=[],j=1,k=h+d;const $=1<<h-1;for(let N=0;N<h;N+=1){let I=0,D=k;for(;I<D;)oe(e,{errors:N,currentLocation:f+D,expectedLocation:f,distance:a,ignoreLocation:u})<=g?I=D:k=D,D=Math.floor((k-I)/2+I);k=D;let O=Math.max(1,f-D+1),M=i?d:Math.min(f+D,d)+h,A=Array(M+2);A[M+1]=(1<<N)-1;for(let C=M;C>=O;C-=1){let F=C-1,T=s[t.charAt(F)];if(v&&(b[F]=+!!T),A[C]=(A[C+1]<<1|1)&T,N&&(A[C]|=(_[C+1]|_[C])<<1|1|_[C+1]),A[C]&$&&(j=oe(e,{errors:N,currentLocation:F,expectedLocation:f,distance:a,ignoreLocation:u}),j<=g)){if(g=j,x=F,x<=f)break;O=Math.max(1,2*f-x)}}if(oe(e,{errors:N+1,currentLocation:f,expectedLocation:f,distance:a,ignoreLocation:u})>g)break;_=A}const z={isMatch:x>=0,score:Math.max(.001,j)};if(v){const N=zn(b,c);N.length?l&&(z.indices=N):z.isMatch=!1}return z}function Kn(t){let e={};for(let s=0,n=t.length;s<n;s+=1){const a=t.charAt(s);e[a]=(e[a]||0)|1<<n-s-1}return e}class Ft{constructor(e,{location:s=p.location,threshold:n=p.threshold,distance:a=p.distance,includeMatches:o=p.includeMatches,findAllMatches:i=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,isCaseSensitive:l=p.isCaseSensitive,ignoreLocation:u=p.ignoreLocation}={}){if(this.options={location:s,threshold:n,distance:a,includeMatches:o,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(f,g)=>{this.chunks.push({pattern:f,alphabet:Kn(f),startIndex:g})},d=this.pattern.length;if(d>H){let f=0;const g=d%H,x=d-g;for(;f<x;)h(this.pattern.substr(f,H),f),f+=H;if(g){const v=d-H;h(this.pattern.substr(v),v)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:s,includeMatches:n}=this.options;if(s||(e=e.toLowerCase()),this.pattern===e){let x={isMatch:!0,score:0};return n&&(x.indices=[[0,e.length-1]]),x}const{location:a,distance:o,threshold:i,findAllMatches:c,minMatchCharLength:l,ignoreLocation:u}=this.options;let h=[],d=0,f=!1;this.chunks.forEach(({pattern:x,alphabet:v,startIndex:b})=>{const{isMatch:y,score:_,indices:j}=Bn(e,x,v,{location:a+b,distance:o,threshold:i,findAllMatches:c,minMatchCharLength:l,includeMatches:n,ignoreLocation:u});y&&(f=!0),d+=_,y&&j&&(h=[...h,...j])});let g={isMatch:f,score:f?d/this.chunks.length:1};return f&&n&&(g.indices=h),g}}class V{constructor(e){this.pattern=e}static isMultiMatch(e){return Fe(e,this.multiRegex)}static isSingleMatch(e){return Fe(e,this.singleRegex)}search(){}}function Fe(t,e){const s=t.match(e);return s?s[1]:null}class Hn extends V{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const s=e===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Wn extends V{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Un extends V{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const s=e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Xn extends V{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const s=!e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Yn extends V{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const s=e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Gn extends V{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const s=!e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Tt extends V{constructor(e,{location:s=p.location,threshold:n=p.threshold,distance:a=p.distance,includeMatches:o=p.includeMatches,findAllMatches:i=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,isCaseSensitive:l=p.isCaseSensitive,ignoreLocation:u=p.ignoreLocation}={}){super(e),this._bitapSearch=new Ft(e,{location:s,threshold:n,distance:a,includeMatches:o,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Vt extends V{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let s=0,n;const a=[],o=this.pattern.length;for(;(n=e.indexOf(this.pattern,s))>-1;)s=n+o,a.push([n,s-1]);const i=!!a.length;return{isMatch:i,score:i?0:1,indices:a}}}const we=[Hn,Vt,Un,Xn,Gn,Yn,Wn,Tt],Te=we.length,Qn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Jn="|";function Zn(t,e={}){return t.split(Jn).map(s=>{let n=s.trim().split(Qn).filter(o=>o&&!!o.trim()),a=[];for(let o=0,i=n.length;o<i;o+=1){const c=n[o];let l=!1,u=-1;for(;!l&&++u<Te;){const h=we[u];let d=h.isMultiMatch(c);d&&(a.push(new h(d,e)),l=!0)}if(!l)for(u=-1;++u<Te;){const h=we[u];let d=h.isSingleMatch(c);if(d){a.push(new h(d,e));break}}}return a})}const qn=new Set([Tt.type,Vt.type]);class er{constructor(e,{isCaseSensitive:s=p.isCaseSensitive,includeMatches:n=p.includeMatches,minMatchCharLength:a=p.minMatchCharLength,ignoreLocation:o=p.ignoreLocation,findAllMatches:i=p.findAllMatches,location:c=p.location,threshold:l=p.threshold,distance:u=p.distance}={}){this.query=null,this.options={isCaseSensitive:s,includeMatches:n,minMatchCharLength:a,findAllMatches:i,ignoreLocation:o,location:c,threshold:l,distance:u},this.pattern=s?e:e.toLowerCase(),this.query=Zn(this.pattern,this.options)}static condition(e,s){return s.useExtendedSearch}searchIn(e){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:a}=this.options;e=a?e:e.toLowerCase();let o=0,i=[],c=0;for(let l=0,u=s.length;l<u;l+=1){const h=s[l];i.length=0,o=0;for(let d=0,f=h.length;d<f;d+=1){const g=h[d],{isMatch:x,indices:v,score:b}=g.search(e);if(x){if(o+=1,c+=b,n){const y=g.constructor.type;qn.has(y)?i=[...i,...v]:i.push(v)}}else{c=0,o=0,i.length=0;break}}if(o){let d={isMatch:!0,score:c/o};return n&&(d.indices=i),d}}return{isMatch:!1,score:1}}}const je=[];function tr(...t){je.push(...t)}function ke(t,e){for(let s=0,n=je.length;s<n;s+=1){let a=je[s];if(a.condition(t,e))return new a(t,e)}return new Ft(t,e)}const de={AND:"$and",OR:"$or"},Se={PATH:"$path",PATTERN:"$val"},Me=t=>!!(t[de.AND]||t[de.OR]),sr=t=>!!t[Se.PATH],nr=t=>!P(t)&&Dt(t)&&!Me(t),Ve=t=>({[de.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function $t(t,e,{auto:s=!0}={}){const n=a=>{let o=Object.keys(a);const i=sr(a);if(!i&&o.length>1&&!Me(a))return n(Ve(a));if(nr(a)){const l=i?a[Se.PATH]:o[0],u=i?a[Se.PATTERN]:a[l];if(!L(u))throw new Error(Cn(l));const h={keyId:be(l),pattern:u};return s&&(h.searcher=ke(u,e)),h}let c={children:[],operator:o[0]};return o.forEach(l=>{const u=a[l];P(u)&&u.forEach(h=>{c.children.push(n(h))})}),c};return Me(t)||(t=Ve(t)),n(t)}function rr(t,{ignoreFieldNorm:e=p.ignoreFieldNorm}){t.forEach(s=>{let n=1;s.matches.forEach(({key:a,norm:o,score:i})=>{const c=a?a.weight:null;n*=Math.pow(i===0&&c?Number.EPSILON:i,(c||1)*(e?1:o))}),s.score=n})}function ar(t,e){const s=t.matches;e.matches=[],R(s)&&s.forEach(n=>{if(!R(n.indices)||!n.indices.length)return;const{indices:a,value:o}=n;let i={indices:a,value:o};n.key&&(i.key=n.key.src),n.idx>-1&&(i.refIndex=n.idx),e.matches.push(i)})}function or(t,e){e.score=t.score}function ir(t,e,{includeMatches:s=p.includeMatches,includeScore:n=p.includeScore}={}){const a=[];return s&&a.push(ar),n&&a.push(or),t.map(o=>{const{idx:i}=o,c={item:e[i],refIndex:i};return a.length&&a.forEach(l=>{l(o,c)}),c})}class Q{constructor(e,s={},n){this.options={...p,...s},this.options.useExtendedSearch,this._keyStore=new In(this.options.keys),this.setCollection(e,n)}setCollection(e,s){if(this._docs=e,s&&!(s instanceof Re))throw new Error(An);this._myIndex=s||Ot(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){R(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const s=[];for(let n=0,a=this._docs.length;n<a;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,a-=1,s.push(o))}return s}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:s=-1}={}){const{includeMatches:n,includeScore:a,shouldSort:o,sortFn:i,ignoreFieldNorm:c}=this.options;let l=L(e)?L(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return rr(l,{ignoreFieldNorm:c}),o&&l.sort(i),It(s)&&s>-1&&(l=l.slice(0,s)),ir(l,this._docs,{includeMatches:n,includeScore:a})}_searchStringList(e){const s=ke(e,this.options),{records:n}=this._myIndex,a=[];return n.forEach(({v:o,i,n:c})=>{if(!R(o))return;const{isMatch:l,score:u,indices:h}=s.searchIn(o);l&&a.push({item:o,idx:i,matches:[{score:u,value:o,norm:c,indices:h}]})}),a}_searchLogical(e){const s=$t(e,this.options),n=(c,l,u)=>{if(!c.children){const{keyId:d,searcher:f}=c,g=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(l,d),searcher:f});return g&&g.length?[{idx:u,item:l,matches:g}]:[]}const h=[];for(let d=0,f=c.children.length;d<f;d+=1){const g=c.children[d],x=n(g,l,u);if(x.length)h.push(...x);else if(c.operator===de.AND)return[]}return h},a=this._myIndex.records,o={},i=[];return a.forEach(({$:c,i:l})=>{if(R(c)){let u=n(s,c,l);u.length&&(o[l]||(o[l]={idx:l,item:c,matches:[]},i.push(o[l])),u.forEach(({matches:h})=>{o[l].matches.push(...h)}))}}),i}_searchObjectList(e){const s=ke(e,this.options),{keys:n,records:a}=this._myIndex,o=[];return a.forEach(({$:i,i:c})=>{if(!R(i))return;let l=[];n.forEach((u,h)=>{l.push(...this._findMatches({key:u,value:i[h],searcher:s}))}),l.length&&o.push({idx:c,item:i,matches:l})}),o}_findMatches({key:e,value:s,searcher:n}){if(!R(s))return[];let a=[];if(P(s))s.forEach(({v:o,i,n:c})=>{if(!R(o))return;const{isMatch:l,score:u,indices:h}=n.searchIn(o);l&&a.push({score:u,key:e,value:o,idx:i,norm:c,indices:h})});else{const{v:o,n:i}=s,{isMatch:c,score:l,indices:u}=n.searchIn(o);c&&a.push({score:l,key:e,value:o,norm:i,indices:u})}return a}}Q.version="7.0.0";Q.createIndex=Ot;Q.parseIndex=$n;Q.config=p;Q.parseQuery=$t;tr(er);const cr=(t,e,s)=>e==="all"?t:e==="other"?t.filter(n=>{const a=n.language||"other";return s[a]<ge}):t.filter(n=>n.language===e),lr=(t,e)=>e?t:t.filter(s=>s.capo===0),dr=(t,e)=>e==="all"?t:t.filter(s=>{var n;return((n=s.range)==null?void 0:n.semitones)!==void 0&&s.range.semitones>=e[0]&&s.range.semitones<=e[1]}),ur=(t,e)=>e==="All"?t:t.filter(s=>s.songbooks.includes(e)),hr=(t,e)=>(s,n)=>{var o,i,c,l,u,h;let a;if(t==="range"){const d=((o=s.range)==null?void 0:o.semitones)??-1/0,f=((i=n.range)==null?void 0:i.semitones)??-1/0;a=d===f?s.title.localeCompare(n.title):d-f}else if(t==="dateAdded"){const d=(((c=s.dateAdded)==null?void 0:c.year)??0)*12+(((l=s.dateAdded)==null?void 0:l.month)??0),f=(((u=n.dateAdded)==null?void 0:u.year)??0)*12+(((h=n.dateAdded)==null?void 0:h.month)??0);a=d===f?s.title.localeCompare(n.title):d-f}else a=(s[t]??"").localeCompare(n[t]??"");return e==="ascending"?a:-a};function fr(t,e){const{field:s,order:n}=Et(),{query:a,setQuery:o}=Rt(),{language:i,songbook:c,vocalRange:l,capo:u}=_e();m.useEffect(()=>{o("")},[s,n,o]);const h=m.useMemo(()=>{const g={includeScore:!0,keys:["artist","title","ascii_title","ascii_artist"],ignoreLocation:!0,threshold:.4};return new Q(t,g)},[t]),d=m.useMemo(()=>a===""?t:h.search(a).map(g=>g.item),[h,t,a]);let f=lr(d,u);return f=dr(f,l),f=ur(f,c),f=cr(f,i,e),a||(f=[...f].sort(hr(s,n))),{songs:f}}const mr="scrollOffset";function br(){const t=Gt(),{songs:e}=fr(t.songs,t.languages),s=m.useRef(null),[n,a]=m.useState(!0),[o,i]=Qt(mr,{defaultValue:0,storageSync:!1});m.useEffect(()=>{s.current&&requestAnimationFrame(()=>{s.current.scrollTop=o})},[o]);const c=()=>{if(!s.current)return;const l=s.current.scrollTop;i(l),a(l===0||l<o)};return r.jsxs("div",{className:"h-dvh w-full no-scrollbar block",children:[r.jsx(wn,{songs:e,showToolbar:n,scrollOffset:o,fakeScroll:!0,maxRange:t.maxRange,languages:t.languages,songbooks:t.songbooks}),r.jsx("div",{ref:s,className:"sm:pt-20 pt-[72px] pb-4 overflow-auto h-full",onScroll:c,children:e.map(l=>r.jsx(Fs,{song:l,maxRange:t.maxRange},l.id))})]})}export{br as default};
//# sourceMappingURL=SongList-C1S4oPbE.js.map
