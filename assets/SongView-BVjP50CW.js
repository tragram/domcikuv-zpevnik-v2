import{c as x,r as h,R as K,j as a,N as Dn,L as Hn,n as zn,d as Y,p as Rn,q as ve,s as Nn,m as Bn,l as $n}from"./main-DM_djWSa.js";import{B as z,a as Fn}from"./index-B78R2h_9.js";import{o as Vn,p as Wn,d as ie,e as se,f as ne,g as B,q as Ve,n as re,T as Ut,i as Xt,j as qt,k as Kt,v as Yn,r as Un,t as Xn,s as qn}from"./index-7FmF1V6F.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=x("AArrowDown",[["path",{d:"M3.5 13h6",key:"p1my2r"}],["path",{d:"m2 16 4.5-9 4.5 9",key:"ndf0b3"}],["path",{d:"M18 7v9",key:"pknjwm"}],["path",{d:"m14 12 4 4 4-4",key:"buelq4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=x("AArrowUp",[["path",{d:"M3.5 13h6",key:"p1my2r"}],["path",{d:"m2 16 4.5-9 4.5 9",key:"ndf0b3"}],["path",{d:"M18 16V7",key:"ty0viw"}],["path",{d:"m14 11 4-4 4 4",key:"1pu57t"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=x("ArrowBigDown",[["path",{d:"M15 6v6h4l-7 7-7-7h4V6h6z",key:"1thax2"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=x("ArrowBigUpDash",[["path",{d:"M9 19h6",key:"456am0"}],["path",{d:"M9 15v-3H5l7-7 7 7h-4v3H9z",key:"1r2uve"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=x("ChevronsLeftRightEllipsis",[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=x("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=x("Fullscreen",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["rect",{width:"10",height:"8",x:"7",y:"8",rx:"1",key:"vys8me"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=x("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=x("Guitar",[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.2 9.9C8.7 8.8 9.8 8 11 8c2.8 0 5 2.2 5 5 0 1.2-.8 2.3-1.9 2.8l-.9.4A2 2 0 0 0 12 18a4 4 0 0 1-4 4c-3.3 0-6-2.7-6-6a4 4 0 0 1 4-4 2 2 0 0 0 1.8-1.2z",key:"1u8q3z"}],["circle",{cx:"11.5",cy:"12.5",r:".5",fill:"currentColor",key:"16onso"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=x("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=x("MoveDiagonal",[["path",{d:"M11 19H5v-6",key:"8awifj"}],["path",{d:"M13 5h6v6",key:"7voy1q"}],["path",{d:"M19 5 5 19",key:"wwaj1z"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=x("MoveHorizontal",[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=x("PencilRuler",[["path",{d:"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13",key:"orapub"}],["path",{d:"m8 6 2-2",key:"115y1s"}],["path",{d:"m18 16 2-2",key:"ee94s4"}],["path",{d:"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17",key:"cfq27r"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=x("Piano",[["path",{d:"M18.5 8c-1.4 0-2.6-.8-3.2-2A6.87 6.87 0 0 0 2 9v11a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-8.5C22 9.6 20.4 8 18.5 8",key:"lag0yf"}],["path",{d:"M2 14h20",key:"myj16y"}],["path",{d:"M6 14v4",key:"9ng0ue"}],["path",{d:"M10 14v4",key:"1v8uk5"}],["path",{d:"M14 14v4",key:"1tqops"}],["path",{d:"M18 14v4",key:"18uqwm"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=x("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=x("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=x("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=x("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);var P={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},ct=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],lt=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],ut=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],C=typeof window<"u"&&typeof window.document<"u"?window.document:{},I="fullscreenEnabled"in C&&Object.keys(P)||ct[0]in C&&ct||lt[0]in C&&lt||ut[0]in C&&ut||[],N={requestFullscreen:function(n){return n[I[P.requestFullscreen]]()},requestFullscreenFunction:function(n){return n[I[P.requestFullscreen]]},get exitFullscreen(){return C[I[P.exitFullscreen]].bind(C)},get fullscreenPseudoClass(){return":"+I[P.fullscreen]},addEventListener:function(n,e,t){return C.addEventListener(I[P[n]],e,t)},removeEventListener:function(n,e,t){return C.removeEventListener(I[P[n]],e,t)},get fullscreenEnabled(){return!!C[I[P.fullscreenEnabled]]},set fullscreenEnabled(n){},get fullscreenElement(){return C[I[P.fullscreenElement]]},set fullscreenElement(n){},get onfullscreenchange(){return C[("on"+I[P.fullscreenchange]).toLowerCase()]},set onfullscreenchange(n){return C[("on"+I[P.fullscreenchange]).toLowerCase()]=n},get onfullscreenerror(){return C[("on"+I[P.fullscreenerror]).toLowerCase()]},set onfullscreenerror(n){return C[("on"+I[P.fullscreenerror]).toLowerCase()]=n}};function lr(){var n=h.useState(!1),e=n[0],t=n[1],r=h.useRef(null);h.useEffect(function(){var o=function(){t(N.fullscreenElement===r.current)};return N.addEventListener("fullscreenchange",o),function(){return N.removeEventListener("fullscreenchange",o)}},[]);var i=h.useCallback(function(){if(N.fullscreenElement)return N.exitFullscreen().then(function(){return N.requestFullscreen(r.current)});if(r.current)return N.requestFullscreen(r.current)},[]),s=h.useCallback(function(){return N.fullscreenElement===r.current?N.exitFullscreen():Promise.resolve()},[]);return h.useMemo(function(){return{active:e,enter:i,exit:s,node:r}},[e,i,s])}var ur=function(e){var t=e.handle,r=e.onChange,i=e.children,s=e.className,o=[];return s&&o.push(s),o.push("fullscreen"),t.active&&o.push("fullscreen-enabled"),h.useEffect(function(){r&&r(t.active,t)},[t.active]),K.createElement("div",{className:o.join(" "),ref:t.node,style:t.active?{height:"100%",width:"100%"}:void 0},i)};function fr(n,e,t){return Math.max(e,Math.min(n,t))}const v={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function ft(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function dt(n,e,t,r=.15){return r===0?fr(n,e,t):n<e?-ft(e-n,t-e,r)+e:n>t?+ft(n-t,t-e,r)+t:n}function dr(n,[e,t],[r,i]){const[[s,o],[c,u]]=n;return[dt(e,s,o,r),dt(t,c,u,i)]}function hr(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pr(n){var e=hr(n,"string");return typeof e=="symbol"?e:String(e)}function S(n,e,t){return e=pr(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ht(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function b(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ht(Object(t),!0).forEach(function(r){S(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ht(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const en={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function pt(n){return n?n[0].toUpperCase()+n.slice(1):""}const mr=["enter","leave"];function vr(n=!1,e){return n&&!mr.includes(e)}function gr(n,e="",t=!1){const r=en[n],i=r&&r[e]||e;return"on"+pt(n)+pt(i)+(vr(t,i)?"Capture":"")}const yr=["gotpointercapture","lostpointercapture"];function _r(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=yr.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function br(n,e=""){const t=en[n],r=t&&t[e]||e;return n+r}function je(n){return"touches"in n}function tn(n){return je(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function wr(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function Sr(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function nn(n){return je(n)?Sr(n)[0]:n}function We(n,e){try{const t=e.clientX-n.clientX,r=e.clientY-n.clientY,i=(e.clientX+n.clientX)/2,s=(e.clientY+n.clientY)/2,o=Math.hypot(t,r);return{angle:-(Math.atan2(t,r)*180)/Math.PI,distance:o,origin:[i,s]}}catch{}return null}function Er(n){return wr(n).map(e=>e.identifier)}function mt(n,e){const[t,r]=Array.from(n.touches).filter(i=>e.includes(i.identifier));return We(t,r)}function ze(n){const e=nn(n);return je(n)?e.identifier:e.pointerId}function J(n){const e=nn(n);return[e.clientX,e.clientY]}const vt=40,gt=800;function rn(n){let{deltaX:e,deltaY:t,deltaMode:r}=n;return r===1?(e*=vt,t*=vt):r===2&&(e*=gt,t*=gt),[e,t]}function xr(n){var e,t;const{scrollX:r,scrollY:i,scrollLeft:s,scrollTop:o}=n.currentTarget;return[(e=r??s)!==null&&e!==void 0?e:0,(t=i??o)!==null&&t!==void 0?t:0]}function kr(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function Te(n,...e){return typeof n=="function"?n(...e):n}function Tr(){}function Cr(...n){return n.length===0?Tr:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function yt(n,e){return Object.assign({},e,n||{})}const Or=32;class sn{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?Te(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,kr(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const m=t._delta.map(Math.abs);v.addTo(t._distance,m)}this.axisIntent&&this.axisIntent(e);const[o,c]=t._movement,[u,l]=r.threshold,{_step:f,values:d}=t;if(r.hasCustomTransform?(f[0]===!1&&(f[0]=Math.abs(o)>=u&&d[0]),f[1]===!1&&(f[1]=Math.abs(c)>=l&&d[1])):(f[0]===!1&&(f[0]=Math.abs(o)>=u&&Math.sign(o)*u),f[1]===!1&&(f[1]=Math.abs(c)>=l&&Math.sign(c)*l)),t.intentional=f[0]!==!1||f[1]!==!1,!t.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[m,M]=d;p[0]=f[0]!==!1?m-f[0]:0,p[1]=f[1]!==!1?M-f[1]:0}else p[0]=f[0]!==!1?o-f[0]:0,p[1]=f[1]!==!1?c-f[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);const E=t.offset,O=t._active&&!t._blocked||t.active;O&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=Te(r.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));const[j,T]=t.offset,[[k,$],[F,A]]=t._bounds;t.overflow=[j<k?-1:j>$?1:0,T<F?-1:T>A?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const D=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=dr(t._bounds,t.offset,D),t.delta=v.sub(t.offset,E),this.computeMovement(),O&&(!t.last||s>Or)){t.delta=v.sub(t.offset,E);const m=t.delta.map(Math.abs);v.addTo(t.distance,m),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[m[0]/s,m[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(b(b(b({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function jr([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class oe extends sn{constructor(...e){super(...e),S(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=v.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=v.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[tn(e)]:r.axisThreshold;t.axis=jr(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Mr=n=>n,_t=.15,on={enabled(n=!0){return n},eventOptions(n,e,t){return b(b({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[_t,_t];case!1:return[0,0];default:return v.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return v.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||Mr},threshold(n){return v.toVector(n,0)}},Pr=0,G=b(b({},on),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=Pr){return n},bounds(n={}){if(typeof n=="function")return s=>G.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),bt={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class Ir extends oe{constructor(...e){super(...e),S(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=G.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=ze(e),r._pointerActive=!0,this.computeValues(J(e)),this.computeInitial(),t.preventScrollAxis&&tn(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=ze(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=J(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=v.sub(s,t._values),this.computeValues(s)),v.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=ze(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[c,u]=t._delta,[l,f]=t._movement,[d,p]=r.swipe.velocity,[E,O]=r.swipe.distance,j=r.swipe.duration;if(t.elapsedTime<j){const T=Math.abs(c/t.timeDelta),k=Math.abs(u/t.timeDelta);T>d&&Math.abs(l)>E&&(t.swipe[0]=Math.sign(c)),k>p&&Math.abs(f)>O&&(t.swipe[1]=Math.sign(u))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,Lr(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=bt[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,v.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in bt&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Lr(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const ae=typeof window<"u"&&window.document&&window.document.createElement;function an(){return ae&&"ontouchstart"in window}function Ar(){return an()||ae&&window.navigator.maxTouchPoints>1}function Dr(){return ae&&"onpointerdown"in window}function Hr(){return ae&&"exitPointerLock"in window.document}function zr(){try{return"constructor"in GestureEvent}catch{return!1}}const L={isBrowser:ae,gesture:zr(),touch:an(),touchscreen:Ar(),pointer:Dr(),pointerLock:Hr()},Rr=250,Nr=180,Br=.5,$r=50,Fr=250,Vr=10,wt={mouse:0,touch:0,pen:8},Wr=b(b({},G),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&L.pointerLock,L.touch&&t?"touch":this.pointerLock?"mouse":L.pointer&&!i?"pointer":L.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?Rr:void 0,!(!L.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=v.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=Br,distance:e=$r,duration:t=Fr}={}){return{velocity:this.transform(v.toVector(n)),distance:this.transform(v.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return Nr;case!1:return 0;default:return n}},axisThreshold(n){return n?b(b({},wt),n):wt},keyboardDisplacement(n=Vr){return n}});function cn(n){const[e,t]=n.overflow,[r,i]=n._delta,[s,o]=n._direction;(e<0&&r>0&&s<0||e>0&&r<0&&s>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&i>0&&o<0||t>0&&i<0&&o>0)&&(n._movement[1]=n._movementBound[1])}const Yr=30,Ur=100;class Xr extends sn{constructor(...e){super(...e),S(this,"ingKey","pinching"),S(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:r}=this.state;e==="wheel"?this.state.offset=v.add(t,r):this.state.offset=[(1+t[0])*r[0],t[1]+r[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,r]=e._movement;if(!e.axis){const i=Math.abs(t)*Yr-Math.abs(r);i<0?e.axis="angle":i>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,r=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>r.has(s))||r.size<2)return;this.start(e),t._touchIds=Array.from(r).slice(0,2);const i=mt(e,t._touchIds);i&&this.pinchStart(e,i)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,r=t._pointerEvents,i=this.ctrl.pointerIds;if(t._active&&Array.from(r.keys()).every(o=>i.has(o))||(r.size<2&&r.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=We(...Array.from(r.values()));s&&this.pinchStart(e,s)}pinchStart(e,t){const r=this.state;r.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=mt(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const r=We(...Array.from(t.values()));r&&this.pinchMove(e,r)}pinchMove(e,t){const r=this.state,i=r._values[1],s=t.angle-i;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*o]),r.origin=t.origin,r.turns=o,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const r=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=v.sub(t._movement,r),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(r=>e[r]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const r=this.state;r._delta=[-rn(e)[1]/Ur*r.offset[0],0],v.addTo(r._movement,r._delta),cn(r),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const qr=b(b({},on),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!L.touch&&L.gesture)return"gesture";if(L.touch&&r)return"touch";if(L.touchscreen){if(L.pointer)return"pointer";if(L.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const c=yt(Te(t,o),{min:-1/0,max:1/0});return[c.min,c.max]},s=o=>{const c=yt(Te(r,o),{min:-1/0,max:1/0});return[c.min,c.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",v.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class Kr extends oe{constructor(...e){super(...e),S(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(J(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=J(e),r=this.state;r._delta=v.sub(t,r._values),v.addTo(r._movement,r._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const Gr=b(b({},G),{},{mouseOnly:(n=!0)=>n});class Qr extends oe{constructor(...e){super(...e),S(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,r=xr(e);t._delta=v.sub(r,t._values),v.addTo(t._movement,t._delta),this.computeValues(r),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const Zr=G;class Jr extends oe{constructor(...e){super(...e),S(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=rn(e),v.addTo(t._movement,t._delta),cn(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const ei=G;class ti extends oe{constructor(...e){super(...e),S(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(J(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const r=J(e);t._movement=t._delta=v.sub(r,t._values),this.computeValues(r),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const ni=b(b({},G),{},{mouseOnly:(n=!0)=>n}),Ge=new Map,Ye=new Map;function ri(n){Ge.set(n.key,n.engine),Ye.set(n.key,n.resolver)}const ii={key:"drag",engine:Ir,resolver:Wr},si={key:"hover",engine:ti,resolver:ni},oi={key:"move",engine:Kr,resolver:Gr},ai={key:"pinch",engine:Xr,resolver:qr},ci={key:"scroll",engine:Qr,resolver:Zr},li={key:"wheel",engine:Jr,resolver:ei};function ui(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function fi(n,e){if(n==null)return{};var t=ui(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const di={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=L.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},hi=["target","eventOptions","window","enabled","transform"];function Ee(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=Ee(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function pi(n,e,t={}){const r=n,{target:i,eventOptions:s,window:o,enabled:c,transform:u}=r,l=fi(r,hi);if(t.shared=Ee({target:i,eventOptions:s,window:o,enabled:c,transform:u},di),e){const f=Ye.get(e);t[e]=Ee(b({shared:t.shared},l),f)}else for(const f in l){const d=Ye.get(f);d&&(t[f]=Ee(b({shared:t.shared},l[f]),d))}return t}class ln{constructor(e,t){S(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const o=this._listeners,c=br(t,r),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},l=b(b({},u),s);e.addEventListener(c,i,l);const f=()=>{e.removeEventListener(c,i,l),o.delete(f)};return o.add(f),f}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class mi{constructor(){S(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class vi{constructor(e){S(this,"gestures",new Set),S(this,"_targetEventStore",new ln(this)),S(this,"gestureEventStores",{}),S(this,"gestureTimeoutStores",{}),S(this,"handlers",{}),S(this,"config",{}),S(this,"pointerIds",new Set),S(this,"touchIds",new Set),S(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),gi(this,e)}setEventIds(e){if(je(e))return this.touchIds=new Set(Er(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=pi(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const c=this.config[o],u=St(r,c.eventOptions,!!i);if(c.enabled){const l=Ge.get(o);new l(this,e,o).bind(u)}}const s=St(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",c=>this.nativeHandlers[o](b(b({},this.state.shared),{},{event:c,args:e})),void 0,!0)}for(const s in r)r[s]=Cr(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:c,passive:u}=_r(s);this._targetEventStore.add(i,o,"",r[s],{capture:c,passive:u})}}}}function Q(n,e){n.gestures.add(e),n.gestureEventStores[e]=new ln(n,e),n.gestureTimeoutStores[e]=new mi}function gi(n,e){e.drag&&Q(n,"drag"),e.wheel&&Q(n,"wheel"),e.scroll&&Q(n,"scroll"),e.move&&Q(n,"move"),e.pinch&&Q(n,"pinch"),e.hover&&Q(n,"hover")}const St=(n,e,t)=>(r,i,s,o={},c=!1)=>{var u,l;const f=(u=o.capture)!==null&&u!==void 0?u:e.capture,d=(l=o.passive)!==null&&l!==void 0?l:e.passive;let p=c?r:gr(r,i,f);t&&d&&(p+="Passive"),n[p]=n[p]||[],n[p].push(s)},yi=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function _i(n){const e={},t={},r=new Set;for(let i in n)yi.test(i)?(r.add(RegExp.lastMatch),t[i]=n[i]):e[i]=n[i];return[t,e,r]}function Z(n,e,t,r,i,s){if(!n.has(t)||!Ge.has(r))return;const o=t+"Start",c=t+"End",u=l=>{let f;return l.first&&o in e&&e[o](l),t in e&&(f=e[t](l)),l.last&&c in e&&e[c](l),f};i[r]=u,s[r]=s[r]||{}}function bi(n,e){const[t,r,i]=_i(n),s={};return Z(i,t,"onDrag","drag",s,e),Z(i,t,"onWheel","wheel",s,e),Z(i,t,"onScroll","scroll",s,e),Z(i,t,"onPinch","pinch",s,e),Z(i,t,"onMove","move",s,e),Z(i,t,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:r}}function wi(n,e={},t,r){const i=K.useMemo(()=>new vi(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),K.useEffect(i.effect.bind(i)),K.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function Si(n){return n.forEach(ri),function(t,r){const{handlers:i,nativeHandlers:s,config:o}=bi(t,r||{});return wi(i,o,void 0,s)}}function Ei(n,e){return Si([ii,ai,ci,li,oi,si])(n,e||{})}const Ue=()=>window.matchMedia("(max-width: 768px)").matches,Et={compact:{fitScreenMode:"fitXY",repeatParts:!1,repeatPartsChords:!1,twoColumns:!1,fontSize:12},maximizeFontSize:{fitScreenMode:"fitX",repeatParts:!0,repeatPartsChords:!0,twoColumns:!1,fontSize:12}},xi=Ue()?{fitScreenMode:"fitX",fontSize:12,repeatParts:!0,repeatPartsChords:!0,twoColumns:!1,compactInFullScreen:!0}:{fitScreenMode:"fitXY",fontSize:12,repeatParts:!1,repeatPartsChords:!1,twoColumns:!0,compactInFullScreen:!1},ki=n=>Math.min(Math.max(4,n),160),U=Vn()(Wn((n,e)=>({layout:xi,customLayoutPreset:{...Et.compact,compactInFullScreen:!!Ue()},layoutPreset:Ue()?"maximizeFontSize":"compact",chords:{showChords:!0,czechChordNames:!0,inlineChords:!0},actions:{setLayoutSettings:t=>n(r=>({layout:{...r.layout,...t,fontSize:t.fontSize?ki(t.fontSize):r.layout.fontSize}})),setCustomLayoutPreset:t=>n(r=>({customLayoutPreset:{...r.customLayoutPreset,...t}})),setLayoutPreset:t=>n(()=>({layoutPreset:t})),setChordSettings:t=>n(r=>({chords:{...r.chords,...t}})),applyPreset:t=>{const{actions:r,customLayoutPreset:i}=e();t==="custom"?r.setLayoutSettings(i):r.setLayoutSettings({...Et[t],compactInFullScreen:i.compactInFullScreen}),r.setLayoutPreset(t)}}}),{name:"songview-settings-store",partialize:n=>({layout:n.layout,customLayoutPreset:n.customLayoutPreset,layoutPreset:n.layoutPreset,chords:n.chords})})),Ti=["showChords","czechChordNames","inlineChords"],Ce={showChords:{icon:a.jsx(tr,{}),label:"Show chords"},czechChordNames:{icon:a.jsx(ir,{}),label:"Czech notes (A-B-H-C)"},inlineChords:{icon:a.jsx(Jn,{}),label:"Chords inline"}},Ci=()=>{const{chords:n,actions:e}=U(),t=r=>{e.setChordSettings({[r]:!n[r]})};return a.jsxs(a.Fragment,{children:[a.jsx(ie,{children:"Chord settings"}),a.jsx(se,{}),Ti.map(r=>a.jsxs(ne,{checked:n[r],disabled:r!=="showChords"&&!n.showChords,onCheckedChange:()=>t(r),onSelect:i=>i.preventDefault(),children:[a.jsx(B,{icon:Ce[r].icon}),Ce[r].label]},r))]})},Oi=()=>{const{chords:n,actions:e}=U(),t=r=>{e.setChordSettings({[r]:!n[r]})};return a.jsxs(a.Fragment,{children:[a.jsx(z,{size:"icon",variant:"circular",isActive:n.showChords,className:"hidden sm:flex",onClick:()=>t("showChords"),children:Ce.showChords.icon}),a.jsx(z,{size:"icon",variant:"circular",className:"max-[620px]:hidden",isActive:n.inlineChords,disabled:!n.showChords,onClick:()=>t("inlineChords"),children:Ce.inlineChords.icon})]})},ji=()=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 531.12134 487.28763",fill:"none",stroke:"currentColor",children:a.jsxs("g",{transform:"matrix(0.1,0,0,-0.1,9.4062996,499.50655)",fill:"currentColor",stroke:"none",id:"g2",children:[a.jsx("path",{d:"M 2165,4890 C 1859,4864 1586,4788 1303,4649 688,4347 236,3787 70,3120 19,2918 6,2797 6,2560 6,2404 10,2314 23,2230 71,1922 175,1628 323,1381 564,979 896,671 1303,471 c 299,-147 559,-217 900,-242 128,-10 151,-9 171,4 29,19 37,48 22,79 -10,21 -20,24 -111,30 -388,28 -638,91 -925,234 -450,224 -799,574 -1016,1018 -296,609 -296,1323 0,1932 323,662 946,1115 1691,1229 151,24 470,24 620,1 814,-127 1465,-641 1764,-1393 70,-177 124,-401 137,-563 l 6,-85 -169,168 c -93,92 -177,167 -187,167 -22,0 -66,-44 -66,-67 0,-9 104,-122 232,-250 181,-182 238,-233 258,-233 20,0 76,51 258,233 223,224 245,251 224,283 -15,22 -50,34 -74,25 -13,-5 -95,-82 -183,-170 -107,-108 -162,-156 -167,-148 -4,7 -8,28 -8,47 0,61 -29,231 -60,357 -227,909 -998,1606 -1930,1743 -152,22 -390,31 -525,20 z",style:{display:"inline",stroke:"currentColor",strokeWidth:300.126,strokeOpacity:1},id:"path1"}),a.jsx("path",{d:"m 2411,3694 c -453,-156 -830,-289 -838,-295 -20,-17 -16,-50 32,-283 l 45,-217 v -518 -518 l -64,-7 c -223,-23 -387,-171 -388,-351 0,-90 24,-155 84,-220 91,-100 202,-146 348,-146 180,0 326,81 402,223 l 23,43 3,776 2,776 73,27 c 149,53 860,296 869,296 4,0 8,-231 8,-514 v -513 l -68,-6 c -126,-10 -245,-72 -314,-163 -175,-230 4,-531 327,-551 198,-13 370,79 443,235 l 27,57 3,815 3,815 -51,239 c -27,132 -50,243 -50,247 0,18 -34,39 -63,38 -18,0 -403,-129 -856,-285 z",id:"path21"}),a.jsx("path",{d:"m 2411,3694 c -453,-156 -830,-289 -838,-295 -20,-17 -16,-50 32,-283 l 45,-217 v -518 -518 l -64,-7 c -223,-23 -387,-171 -388,-351 0,-90 24,-155 84,-220 91,-100 202,-146 348,-146 180,0 326,81 402,223 l 23,43 3,776 2,776 73,27 c 149,53 860,296 869,296 4,0 8,-231 8,-514 v -513 l -68,-6 c -126,-10 -245,-72 -314,-163 -175,-230 4,-531 327,-551 198,-13 370,79 443,235 l 27,57 3,815 3,815 -51,239 c -27,132 -50,243 -50,247 0,18 -34,39 -63,38 -18,0 -403,-129 -856,-285 z m 819,139 c 0,-5 18,-93 40,-197 l 40,-189 v -649 c 0,-356 -3,-648 -6,-648 -3,0 -19,9 -34,20 -16,12 -54,32 -85,45 l -55,25 v 577 c 0,522 -2,578 -17,595 -9,10 -24,18 -34,18 -10,0 -262,-84 -561,-186 -362,-124 -549,-193 -560,-206 -17,-19 -18,-64 -18,-649 0,-346 -2,-629 -5,-629 -2,0 -25,13 -51,30 -26,16 -62,34 -81,41 l -33,11 v 535 536 l -42,199 c -22,109 -39,201 -35,204 3,3 254,91 559,196 304,104 641,220 748,258 192,67 230,77 230,63 z m -85,-1737 c 104,-47 154,-115 155,-209 1,-203 -305,-310 -512,-178 -144,92 -143,274 2,366 68,43 119,55 210,52 67,-2 98,-9 145,-31 z M 1777,1705 c 173,-79 215,-245 91,-361 -125,-119 -360,-117 -483,3 -136,132 -57,330 152,383 65,16 176,5 240,-25 z",id:"path2"})]})}),Mi=["twoColumns","repeatParts","repeatPartsChords","compactInFullScreen"],xt={twoColumns:{icon:a.jsx(Gt,{}),label:"View as two columns"},repeatParts:{icon:a.jsx(sr,{}),label:"Show repeated parts"},repeatPartsChords:{icon:a.jsx(ji,{}),label:"Show chords in repeated parts"},compactInFullScreen:{icon:a.jsx(nr,{}),label:"Auto fullscreen in compact view"}},Pi=({fullScreenHandle:n})=>{const{layout:e,layoutPreset:t,actions:r}=U(),i=[{icon:a.jsx(Zt,{}),label:"Compact",value:"compact"},{icon:a.jsx(rr,{}),label:"Custom",value:"custom"},{icon:a.jsx(Jt,{}),label:"Scroll",value:"maximizeFontSize"}];return a.jsxs(a.Fragment,{children:[a.jsx(z,{size:"icon",variant:"circular",className:"max-sm:hidden",isActive:e.twoColumns,onClick:()=>r.setLayoutSettings({twoColumns:!e.twoColumns}),children:a.jsx(Gt,{})}),a.jsx(z,{size:"icon",variant:"circular",className:"max-[620px]:hidden",onClick:n.enter,children:a.jsx(Qt,{})}),a.jsx("div",{className:"flex flex-grow h-full align-center justify-center max-xsm:hidden  max-md:hide-fancy-switch-label ",id:"preset-selector-large",children:a.jsx(Ve,{options:i,setSelectedOption:s=>{r.applyPreset(s),s==="compact"&&e.compactInFullScreen&&n.enter()},selectedOption:t,roundedClass:"rounded-full"})}),a.jsx("div",{className:"flex flex-grow h-full align-center justify-center hide-fancy-switch-label xsm:hidden",id:"preset-selector-small",children:a.jsx(Ve,{options:i.filter(s=>s.value!=="custom"),setSelectedOption:s=>{r.applyPreset(s),s==="compact"&&e.compactInFullScreen&&n.enter()},selectedOption:t,hiddenHighlightOnOther:!0,roundedClass:"rounded-full"})})]})},Ii=({fullScreenHandle:n})=>{const{layout:e,actions:t}=U();function r(s){t.setLayoutSettings({...s}),t.setCustomLayoutPreset({...s}),t.setLayoutPreset("custom")}const i=1.2;return a.jsxs(a.Fragment,{children:[a.jsx(ie,{children:"Font size"}),a.jsx(se,{}),a.jsxs(ne,{checked:e.fitScreenMode==="fitXY",onSelect:s=>s.preventDefault(),onCheckedChange:()=>r({fitScreenMode:"fitXY"}),children:[a.jsx(B,{icon:a.jsx(Zt,{})}),"Fit screen"]},"fitXY"),a.jsxs(ne,{checked:e.fitScreenMode==="fitX",onSelect:s=>s.preventDefault(),onCheckedChange:()=>r({fitScreenMode:"fitX"}),children:[a.jsx(B,{icon:a.jsx(Jt,{})}),"Fit screen width"]},"fitX"),a.jsxs(re,{onClick:()=>r({fitScreenMode:"none",fontSize:e.fontSize*i}),onSelect:s=>s.preventDefault(),children:[a.jsx(B,{icon:a.jsx(Gn,{})}),"Increase font size"]}),a.jsxs(re,{onClick:()=>r({fitScreenMode:"none",fontSize:e.fontSize/i}),onSelect:s=>s.preventDefault(),children:[a.jsx(B,{icon:a.jsx(Kn,{})}),"Decrease font size"]}),a.jsx(ie,{children:"Contents"}),a.jsx(se,{}),a.jsxs(re,{onClick:()=>{n.enter()},children:[a.jsx(B,{icon:a.jsx(Qt,{})}),"Enter fullscreen"]}),Mi.map(s=>a.jsxs(ne,{checked:e[s],onCheckedChange:()=>r({[s]:!e[s]}),onSelect:o=>o.preventDefault(),children:[a.jsx(B,{icon:xt[s].icon}),xt[s].label]},s))]})},kt=()=>a.jsxs("svg",{stroke:"currentColor",strokeWidth:"2",version:"1.1",strokeLinecap:"round",strokeLinejoin:"round",width:"24",height:"24",viewBox:"0 0 24 24",children:[a.jsxs("g",{id:"g5",transform:"translate(0.80523595)",children:[a.jsx("ellipse",{cx:"14.395982",cy:"17.280313",id:"circle1",rx:"3.5461161",ry:"3.5202065",transform:"translate(2.2005142)"}),a.jsx("path",{d:"M 17.923865,17.280314 V 3.1994884",id:"path1",transform:"translate(2.2005142)"})]}),a.jsx("g",{id:"g4",strokeWidth:"1.5",transform:"matrix(1.0564799,0,0,1.224205,2.4388328,-2.4634601)",children:a.jsxs("g",{transform:"translate(-2)",children:[a.jsx("path",{d:"M 6.084224,4.4653453 V 18.546171",id:"path1-1",strokeWidth:"2",transform:"matrix(0.94653954,0,0,0.81685665,-1.3744042,2.4160182)"}),a.jsx("path",{d:"M 4.3845544,17.565582 8.1707128,13.950747",id:"path8"}),a.jsx("path",{d:"M 0.59839599,9.6784002 4.3845544,6.0635652",id:"path8-7"}),a.jsx("path",{d:"M 8.1707128,9.6784002 4.3845543,6.0635652",id:"path8-7-9"}),a.jsx("path",{d:"M 4.3845544,17.565581 0.59839539,13.950746",id:"path8-7-9-5"})]})})]}),un=["C","C#","D","Es","E","F","F#","G","As","A","B","H"],Li=({originalKey:n,transposeSteps:e,setTransposeSteps:t})=>{const r=n!=null&&n.note?new Dn("C").semitonesBetween(n==null?void 0:n.note):0,i=h.useMemo(()=>[...Array(12).keys()].map(s=>s-r),[r]);return a.jsxs("div",{className:"flex items-center h-full",children:[a.jsx("div",{className:"hidden xl:block h-full",children:a.jsx(Xe,{values:i,selected:e,onChange:t})}),a.jsx("div",{className:"xl:hidden h-full",children:a.jsx(Di,{values:i,selected:e,onChange:t})})]})};function Ai(n){const[e,t]=h.useState(n),r=h.useRef(null),i=s=>{r.current&&!r.current.contains(s.target)&&t(!1)};return h.useEffect(()=>(document.addEventListener("click",i,!0),()=>{document.removeEventListener("click",i,!0)}),[]),{ref:r,isComponentVisible:e,setIsComponentVisible:t}}const Xe=({values:n,selected:e,onChange:t,vertical:r=!1})=>a.jsx(Ve,{options:un.map((i,s)=>({label:i,value:n[s]})),selectedOption:e,setSelectedOption:t,vertical:r,roundedClass:"rounded-full",full:!0}),Di=({values:n,selected:e,onChange:t})=>{const{ref:r,isComponentVisible:i,setIsComponentVisible:s}=Ai(!1);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden xl:flex h-full",children:a.jsx(Xe,{values:n,selected:e,onChange:t})}),a.jsxs("div",{className:"xl:hidden max-sm:hidden",children:[a.jsx(z,{size:"icon",variant:"circular",onClick:()=>s(!i),children:a.jsx(kt,{})}),a.jsx("div",{className:"absolute top-14 w-fit left-0",ref:r,children:i&&a.jsx(Ut,{showToolbar:i,className:"!px-0",children:a.jsx("div",{className:"w-full flex justify-center p-0 h-full",children:a.jsx(Xe,{values:n,selected:e,onChange:t})})})})]}),a.jsx("div",{className:"sm:hidden xl:hidden flex",children:a.jsxs(Xt,{modal:!1,children:[a.jsx(qt,{asChild:!0,children:a.jsx(z,{size:"icon",variant:"circular",onClick:()=>s(!i),children:a.jsx(kt,{})})}),a.jsx(Kt,{className:"w-12",children:un.map((o,c)=>a.jsx(ne,{checked:e===n[c],onSelect:u=>u.preventDefault(),onCheckedChange:()=>t(n[c]),children:o},o))})]})})]})},fn=n=>{const e=h.useRef(0),[t,r]=h.useState(!1),[i,s]=h.useState(!0),o=h.useCallback(()=>{const c=window.scrollY;if(c<0){s(!0);return}c>e.current?n!=="fitXY"&&s(!1):c<e.current-10&&(s(!0),r(!1)),e.current=c;const u=document.body.scrollHeight-window.scrollY-window.innerHeight;r(u<=10)},[n]);return h.useEffect(()=>(window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)),[o]),{atBottom:t,isToolbarVisible:i}};function Hi(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function c(f){try{l(r.next(f))}catch(d){o(d)}}function u(f){try{l(r.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(c,u)}l((r=r.apply(n,[])).next())})}function zi(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Ri=function(){function n(){var e=this;this.event=null,this.callbacks=[],this.install=function(){return Hi(e,void 0,void 0,function(){var t=this;return zi(this,function(r){switch(r.label){case 0:return this.event?(this.event.prompt(),[4,this.event.userChoice.then(function(i){var s=i.outcome;return t.updateEvent(null),s==="accepted"})]):[3,2];case 1:return[2,r.sent()];case 2:throw new Error("Not allowed to prompt.")}})})},!(typeof window>"u")&&(window.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),e.updateEvent(t)}),window.addEventListener("appinstalled",function(){e.updateEvent(null)}))}return n.prototype.getEvent=function(){return this.event},n.prototype.canInstall=function(){return this.event!==null},n.prototype.updateEvent=function(e){var t=this;e!==this.event&&(this.event=e,this.callbacks.forEach(function(r){return r(t.canInstall())}))},n.prototype.addListener=function(e){e(this.canInstall()),this.callbacks.push(e)},n.prototype.removeListener=function(e){this.callbacks=this.callbacks.filter(function(t){return e!==t})},n}(),ge=new Ri,Ni=function(){var n=h.useCallback(function(r){return ge.addListener(r),function(){ge.removeListener(r)}},[]),e=h.useCallback(function(){return ge.canInstall()?ge.install:null},[]),t=h.useCallback(function(){return null},[]);return h.useSyncExternalStore(n,e,t)};const Bi=({navigate:n,songDB:e,songData:t,fullScreenHandle:r,originalKey:i,transposeSteps:s,setTransposeSteps:o})=>{const{layout:c}=U(),{isToolbarVisible:u}=fn(c.fitScreenMode),[l,f]=h.useState(!1),d=Ni();return console.log(d),a.jsxs("div",{className:"absolute top-0 w-full",children:[a.jsxs(Ut,{showToolbar:u,scrollOffset:window.scrollY,children:[a.jsx(z,{size:"icon",variant:"circular",onClick:()=>n("/"),children:a.jsx(cr,{})}),a.jsx(Oi,{}),a.jsx(Pi,{fullScreenHandle:r}),a.jsx(Li,{originalKey:i,transposeSteps:s,setTransposeSteps:o}),a.jsxs(Xt,{modal:!1,children:[a.jsx(qt,{asChild:!0,children:a.jsx(z,{size:"icon",variant:"circular",children:a.jsx(ar,{size:32})})}),a.jsxs(Kt,{className:"w-56 max-h-[80vh] overflow-y-scroll",children:[K.Children.toArray(a.jsx(Ii,{fullScreenHandle:r})),K.Children.toArray(a.jsx(Ci,{})),a.jsx(ie,{children:"Theme"}),a.jsx(se,{}),K.Children.toArray(a.jsx(Yn,{})),a.jsx(ie,{children:"Misc"}),a.jsx(se,{}),a.jsxs(re,{children:[a.jsx(B,{icon:a.jsx(er,{})}),a.jsx(Hn,{to:"https://github.com/tragram/domcikuv-zpevnik-v2/tree/main/songs/chordpro/"+t.chordproFile,children:"Edit on GitHub"})]}),a.jsxs(re,{onClick:()=>{d?d():f(!0)},children:[a.jsx(B,{icon:a.jsx(or,{})}),"Install app"]})]})]}),a.jsx(Un,{songs:e.songs})]}),a.jsx("div",{className:"absolte h-screen w-screen",children:a.jsx(Xn,{appIconPath:zn("assets/icons/maskable_icon.png"),copySubtitle:"Domčíkův Zpěvník",isShown:l,onClose:()=>f(!1)})})]})},$i=({pdfFilenames:n})=>a.jsx("iframe",{src:n.slice(-1)[0],className:"w-screen h-screen"}),Fi=h.forwardRef(({children:n},e)=>{const{layout:t}=U();return a.jsx("div",{className:Y("flex flex-col sm:pt-[80px] pt-[72px] relative",t.fitScreenMode==="fitXY"?"h-dvh":"min-h-dvh"),ref:e,style:{touchAction:"pan-y",userSelect:"none"},children:n})});function Vi({fitMode:n,minFontSizePx:e,maxFontSizePx:t,fontSizePrecisionPx:r=.1,fontSize:i,setFontSize:s,children:o,...c}){const u=h.useRef(null),l=h.useCallback(()=>{const f=u.current,d=f==null?void 0:f.parentElement;if(!f||!d||n==="none")return;Fn({innerEl:f,containerEl:d,mode:n==="fitXY"?"boxoneline":"oneline",minFontSizePx:e,maxFontSizePx:t,fontSizePrecisionPx:r});const E=getComputedStyle(f).fontSize;s(parseFloat(E))},[n,r,t,e,s]);return h.useLayoutEffect(()=>{var p;l();const f=(p=u.current)==null?void 0:p.parentElement;if(!f)return;const d=new ResizeObserver(()=>{l()});return d.observe(f),()=>{d.disconnect()}},[l]),a.jsx("div",{ref:u,style:{fontSize:i},...c,children:o})}function Wi(n){return n.split(/(\d|[#b])/).map((e,t)=>/\d/.test(e)?a.jsx("sub",{children:e},t):/[#b]/.test(e)?a.jsx("sup",{children:e},t):e)}const Yi=({songData:n,layoutSettings:e,transposeSteps:t})=>{const r=h.useRef(null),[i,s]=h.useState([]),o=()=>{if(!r.current)return;const u=Array.from(r.current.children),l=[];u.forEach((f,d)=>{const p=f.offsetTop;d>0&&p>u[0].offsetTop&&l.push(d)}),s(l)};h.useEffect(()=>{o();const u=()=>o();return window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}},[]),h.useEffect(()=>{o()},[e]);const c=i.length>0;return a.jsxs("div",{className:Y("flex w-full justify-between flex-wrap gap-4"),ref:r,children:[e.fitScreenMode==="fitXY"||e.twoColumns?a.jsxs("h1",{className:"self-center font-bold text-wrap mb-2",children:[n.artist,": ",n.title]}):a.jsxs("div",{className:Y("flex flex-col flex-grow",c?"text-center":"justify-start mb-4"),children:[a.jsx("h2",{className:"font-semibold text-white/80 text-wrap uppercase",children:n.artist}),a.jsx("h2",{className:"font-bold text-wrap",children:n.title})]}),a.jsxs("div",{className:Y("flex flex-col flex-grow",c?"text-center mb-4":"text-right"),children:[a.jsxs("h2",{className:"text-[0.75em] text-white/70 text-nowrap",children:["Capo: ",(n.capo-t+12)%12]}),a.jsx("h2",{className:"text-[0.75em] text-white/70 sub-sup-container",children:Wi(n.range.toString(t))})]})]})},Ui=({songData:n,id:e,className:t})=>a.jsx("div",{className:Y("absolute top-0 left-0 min-h-lvh h-full w-full bg-image -z-20 blur-lg overflow-hidden transition-all duration-1000 ease-in-out",t),id:e,style:{backgroundImage:`url(${n.thumbnailURL()})`},children:a.jsx("div",{className:"w-full h-full bg-glass/60 dark:bg-glass/50"})}),Xi=h.forwardRef(({songData:n,transposeSteps:e},t)=>{const{layout:r,chords:i,actions:s}=U(),o=Rn(n,e,r.repeatParts,i.czechChordNames),c=h.useCallback(l=>{s.setLayoutSettings({fontSize:l})},[s]),u=h.useMemo(()=>({fitMode:r.fitScreenMode,minFontSizePx:4,maxFontSizePx:160,fontSize:r.fontSize,setFontSize:c}),[r.fitScreenMode,r.fontSize,c]);return a.jsxs(a.Fragment,{children:[a.jsx(Ui,{songData:n,className:"hidden",id:"inner-background-image"}),a.jsx("div",{id:"auto-text-size-wrapper",className:Y("w-full z-10 lg:px-16 p-4 sm:p-8",r.fitScreenMode=="fitXY"?"h-full ":"h-fit ",r.fitScreenMode!=="fitXY"?"mb-10":""),children:a.jsxs(Vi,{...u,children:[a.jsx(Yi,{songData:n,layoutSettings:r,transposeSteps:e}),a.jsx("div",{ref:t,id:"song-content-wrapper",className:Y("flex flex-col max-w-screen",i.inlineChords?"chords-inline":"",i.showChords?"":"chords-hidden",`fit-screen-${r.fitScreenMode}`,r.repeatPartsChords?"":"repeated-chords-hidden",r.twoColumns?"song-content-columns":""),dangerouslySetInnerHTML:{__html:o}})]})})]})});var w={},Qe={},ce={},le={},dn="Expected a function",Tt=NaN,qi="[object Symbol]",Ki=/^\s+|\s+$/g,Gi=/^[-+]0x[0-9a-f]+$/i,Qi=/^0b[01]+$/i,Zi=/^0o[0-7]+$/i,Ji=parseInt,es=typeof ve=="object"&&ve&&ve.Object===Object&&ve,ts=typeof self=="object"&&self&&self.Object===Object&&self,ns=es||ts||Function("return this")(),rs=Object.prototype,is=rs.toString,ss=Math.max,os=Math.min,Re=function(){return ns.Date.now()};function as(n,e,t){var r,i,s,o,c,u,l=0,f=!1,d=!1,p=!0;if(typeof n!="function")throw new TypeError(dn);e=Ct(e)||0,Oe(t)&&(f=!!t.leading,d="maxWait"in t,s=d?ss(Ct(t.maxWait)||0,e):s,p="trailing"in t?!!t.trailing:p);function E(m){var M=r,X=i;return r=i=void 0,l=m,o=n.apply(X,M),o}function O(m){return l=m,c=setTimeout(k,e),f?E(m):o}function j(m){var M=m-u,X=m-l,te=e-M;return d?os(te,s-X):te}function T(m){var M=m-u,X=m-l;return u===void 0||M>=e||M<0||d&&X>=s}function k(){var m=Re();if(T(m))return $(m);c=setTimeout(k,j(m))}function $(m){return c=void 0,p&&r?E(m):(r=i=void 0,o)}function F(){c!==void 0&&clearTimeout(c),l=0,r=u=i=c=void 0}function A(){return c===void 0?o:$(Re())}function D(){var m=Re(),M=T(m);if(r=arguments,i=this,u=m,M){if(c===void 0)return O(u);if(d)return c=setTimeout(k,e),E(u)}return c===void 0&&(c=setTimeout(k,e)),o}return D.cancel=F,D.flush=A,D}function cs(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(dn);return Oe(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),as(n,e,{leading:r,maxWait:e,trailing:i})}function Oe(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function ls(n){return!!n&&typeof n=="object"}function us(n){return typeof n=="symbol"||ls(n)&&is.call(n)==qi}function Ct(n){if(typeof n=="number")return n;if(us(n))return Tt;if(Oe(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Oe(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(Ki,"");var t=Qi.test(n);return t||Zi.test(n)?Ji(n.slice(2),t?2:8):Gi.test(n)?Tt:+n}var fs=cs,ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.addPassiveEventListener=function(e,t,r){var i=r.name;i||(i=t,console.warn("Listener must be a named function.")),xe.has(t)||xe.set(t,new Set);var s=xe.get(t);if(!s.has(i)){var o=function(){var c=!1;try{var u=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("test",null,u)}catch{}return c}();e.addEventListener(t,r,o?{passive:!0}:!1),s.add(i)}};ue.removePassiveEventListener=function(e,t,r){e.removeEventListener(t,r),xe.get(t).delete(r.name||t)};var xe=new Map;Object.defineProperty(le,"__esModule",{value:!0});var ds=fs,hs=ms(ds),ps=ue;function ms(n){return n&&n.__esModule?n:{default:n}}var vs=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66;return(0,hs.default)(e,t)},y={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(e,t){if(e){var r=vs(function(i){y.scrollHandler(e)},t);y.scrollSpyContainers.push(e),(0,ps.addPassiveEventListener)(e,"scroll",r)}},isMounted:function(e){return y.scrollSpyContainers.indexOf(e)!==-1},currentPositionX:function(e){if(e===document){var t=window.pageYOffset!==void 0,r=(document.compatMode||"")==="CSS1Compat";return t?window.pageXOffset:r?document.documentElement.scrollLeft:document.body.scrollLeft}else return e.scrollLeft},currentPositionY:function(e){if(e===document){var t=window.pageXOffset!==void 0,r=(document.compatMode||"")==="CSS1Compat";return t?window.pageYOffset:r?document.documentElement.scrollTop:document.body.scrollTop}else return e.scrollTop},scrollHandler:function(e){var t=y.scrollSpyContainers[y.scrollSpyContainers.indexOf(e)].spyCallbacks||[];t.forEach(function(r){return r(y.currentPositionX(e),y.currentPositionY(e))})},addStateHandler:function(e){y.spySetState.push(e)},addSpyHandler:function(e,t){var r=y.scrollSpyContainers[y.scrollSpyContainers.indexOf(t)];r.spyCallbacks||(r.spyCallbacks=[]),r.spyCallbacks.push(e),e(y.currentPositionX(t),y.currentPositionY(t))},updateStates:function(){y.spySetState.forEach(function(e){return e()})},unmount:function(e,t){y.scrollSpyContainers.forEach(function(r){return r.spyCallbacks&&r.spyCallbacks.length&&r.spyCallbacks.indexOf(t)>-1&&r.spyCallbacks.splice(r.spyCallbacks.indexOf(t),1)}),y.spySetState&&y.spySetState.length&&y.spySetState.indexOf(e)>-1&&y.spySetState.splice(y.spySetState.indexOf(e),1),document.removeEventListener("scroll",y.scrollHandler)},update:function(){return y.scrollSpyContainers.forEach(function(e){return y.scrollHandler(e)})}};le.default=y;var ee={},fe={};Object.defineProperty(fe,"__esModule",{value:!0});var gs=function(e,t){var r=e.indexOf("#")===0?e.substring(1):e,i=r?"#"+r:"",s=window&&window.location,o=i?s.pathname+s.search+i:s.pathname+s.search;t?history.pushState(history.state,"",o):history.replaceState(history.state,"",o)},ys=function(){return window.location.hash.replace(/^#/,"")},_s=function(e){return function(t){return e.contains?e!=t&&e.contains(t):!!(e.compareDocumentPosition(t)&16)}},bs=function(e){return getComputedStyle(e).position!=="static"},Ne=function(e,t){for(var r=e.offsetTop,i=e.offsetParent;i&&!t(i);)r+=i.offsetTop,i=i.offsetParent;return{offsetTop:r,offsetParent:i}},ws=function(e,t,r){if(r)return e===document?t.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):getComputedStyle(e).position!=="static"?t.offsetLeft:t.offsetLeft-e.offsetLeft;if(e===document)return t.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if(bs(e)){if(t.offsetParent!==e){var i=function(f){return f===e||f===document},s=Ne(t,i),o=s.offsetTop,c=s.offsetParent;if(c!==e)throw new Error("Seems containerElement is not an ancestor of the Element");return o}return t.offsetTop}if(t.offsetParent===e.offsetParent)return t.offsetTop-e.offsetTop;var u=function(f){return f===document};return Ne(t,u).offsetTop-Ne(e,u).offsetTop};fe.default={updateHash:gs,getHash:ys,filterElementInContainer:_s,scrollOffset:ws};var Me={},Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.default={defaultEasing:function(e){return e<.5?Math.pow(e*2,2)/2:1-Math.pow((1-e)*2,2)/2},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};var Je={};Object.defineProperty(Je,"__esModule",{value:!0});var Ss=ue,Es=["mousedown","mousewheel","touchmove","keydown"];Je.default={subscribe:function(e){return typeof document<"u"&&Es.forEach(function(t){return(0,Ss.addPassiveEventListener)(document,t,e)})}};var de={};Object.defineProperty(de,"__esModule",{value:!0});var qe={registered:{},scrollEvent:{register:function(e,t){qe.registered[e]=t},remove:function(e){qe.registered[e]=null}}};de.default=qe;Object.defineProperty(Me,"__esModule",{value:!0});var xs=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ks=fe;Pe(ks);var Ts=Ze,Ot=Pe(Ts),Cs=Je,Os=Pe(Cs),js=de,H=Pe(js);function Pe(n){return n&&n.__esModule?n:{default:n}}var hn=function(e){return Ot.default[e.smooth]||Ot.default.defaultEasing},Ms=function(e){return typeof e=="function"?e:function(){return e}},Ps=function(){if(typeof window<"u")return window.requestAnimationFrame||window.webkitRequestAnimationFrame},Ke=function(){return Ps()||function(n,e,t){window.setTimeout(n,t||1e3/60,new Date().getTime())}}(),pn=function(){return{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null}},mn=function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollLeft;var r=window.pageXOffset!==void 0,i=(document.compatMode||"")==="CSS1Compat";return r?window.pageXOffset:i?document.documentElement.scrollLeft:document.body.scrollLeft},vn=function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollTop;var r=window.pageXOffset!==void 0,i=(document.compatMode||"")==="CSS1Compat";return r?window.pageYOffset:i?document.documentElement.scrollTop:document.body.scrollTop},Is=function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollWidth-t.offsetWidth;var r=document.body,i=document.documentElement;return Math.max(r.scrollWidth,r.offsetWidth,i.clientWidth,i.scrollWidth,i.offsetWidth)},Ls=function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollHeight-t.offsetHeight;var r=document.body,i=document.documentElement;return Math.max(r.scrollHeight,r.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight)},As=function n(e,t,r){var i=t.data;if(!t.ignoreCancelEvents&&i.cancel){H.default.registered.end&&H.default.registered.end(i.to,i.target,i.currentPositionY);return}if(i.delta=Math.round(i.targetPosition-i.startPosition),i.start===null&&(i.start=r),i.progress=r-i.start,i.percent=i.progress>=i.duration?1:e(i.progress/i.duration),i.currentPosition=i.startPosition+Math.ceil(i.delta*i.percent),i.containerElement&&i.containerElement!==document&&i.containerElement!==document.body?t.horizontal?i.containerElement.scrollLeft=i.currentPosition:i.containerElement.scrollTop=i.currentPosition:t.horizontal?window.scrollTo(i.currentPosition,0):window.scrollTo(0,i.currentPosition),i.percent<1){var s=n.bind(null,e,t);Ke.call(window,s);return}H.default.registered.end&&H.default.registered.end(i.to,i.target,i.currentPosition)},et=function(e){e.data.containerElement=e?e.containerId?document.getElementById(e.containerId):e.container&&e.container.nodeType?e.container:document:null},he=function(e,t,r,i){t.data=t.data||pn(),window.clearTimeout(t.data.delayTimeout);var s=function(){t.data.cancel=!0};if(Os.default.subscribe(s),et(t),t.data.start=null,t.data.cancel=!1,t.data.startPosition=t.horizontal?mn(t):vn(t),t.data.targetPosition=t.absolute?e:e+t.data.startPosition,t.data.startPosition===t.data.targetPosition){H.default.registered.end&&H.default.registered.end(t.data.to,t.data.target,t.data.currentPosition);return}t.data.delta=Math.round(t.data.targetPosition-t.data.startPosition),t.data.duration=Ms(t.duration)(t.data.delta),t.data.duration=isNaN(parseFloat(t.data.duration))?1e3:parseFloat(t.data.duration),t.data.to=r,t.data.target=i;var o=hn(t),c=As.bind(null,o,t);if(t&&t.delay>0){t.data.delayTimeout=window.setTimeout(function(){H.default.registered.begin&&H.default.registered.begin(t.data.to,t.data.target),Ke.call(window,c)},t.delay);return}H.default.registered.begin&&H.default.registered.begin(t.data.to,t.data.target),Ke.call(window,c)},Ie=function(e){return e=xs({},e),e.data=e.data||pn(),e.absolute=!0,e},Ds=function(e){he(0,Ie(e))},Hs=function(e,t){he(e,Ie(t))},zs=function(e){e=Ie(e),et(e),he(e.horizontal?Is(e):Ls(e),e)},Rs=function(e,t){t=Ie(t),et(t);var r=t.horizontal?mn(t):vn(t);he(e+r,t)};Me.default={animateTopScroll:he,getAnimationType:hn,scrollToTop:Ds,scrollToBottom:zs,scrollTo:Hs,scrollMore:Rs};Object.defineProperty(ee,"__esModule",{value:!0});var Ns=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bs=fe,$s=tt(Bs),Fs=Me,Vs=tt(Fs),Ws=de,ye=tt(Ws);function tt(n){return n&&n.__esModule?n:{default:n}}var _e={},jt=void 0;ee.default={unmount:function(){_e={}},register:function(e,t){_e[e]=t},unregister:function(e){delete _e[e]},get:function(e){return _e[e]||document.getElementById(e)||document.getElementsByName(e)[0]||document.getElementsByClassName(e)[0]},setActiveLink:function(e){return jt=e},getActiveLink:function(){return jt},scrollTo:function(e,t){var r=this.get(e);if(!r){console.warn("target Element not found");return}t=Ns({},t,{absolute:!1});var i=t.containerId,s=t.container,o=void 0;i?o=document.getElementById(i):s&&s.nodeType?o=s:o=document,t.absolute=!0;var c=t.horizontal,u=$s.default.scrollOffset(o,r,c)+(t.offset||0);if(!t.smooth){ye.default.registered.begin&&ye.default.registered.begin(e,r),o===document?t.horizontal?window.scrollTo(u,0):window.scrollTo(0,u):o.scrollTop=u,ye.default.registered.end&&ye.default.registered.end(e,r);return}Vs.default.animateTopScroll(u,t,e,r)}};var gn={exports:{}},Ys="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Us=Ys,Xs=Us;function yn(){}function _n(){}_n.resetWarningCache=yn;var qs=function(){function n(r,i,s,o,c,u){if(u!==Xs){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:_n,resetWarningCache:yn};return t.PropTypes=t,t};gn.exports=qs();var Le=gn.exports,Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});var Ks=fe,Be=Gs(Ks);function Gs(n){return n&&n.__esModule?n:{default:n}}var Qs={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(e){this.scroller=e,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(e,t){this.containers[e]=t},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var e=this,t=this.getHash();t?window.setTimeout(function(){e.scrollTo(t,!0),e.initialized=!0},10):this.initialized=!0},scrollTo:function(e,t){var r=this.scroller,i=r.get(e);if(i&&(t||e!==r.getActiveLink())){var s=this.containers[e]||document;r.scrollTo(e,{container:s})}},getHash:function(){return Be.default.getHash()},changeHash:function(e,t){this.isInitialized()&&Be.default.getHash()!==e&&Be.default.updateHash(e,t)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};Ae.default=Qs;Object.defineProperty(ce,"__esModule",{value:!0});var be=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Zs=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Js=h,Mt=pe(Js),eo=le,we=pe(eo),to=ee,no=pe(to),ro=Le,g=pe(ro),io=Ae,V=pe(io);function pe(n){return n&&n.__esModule?n:{default:n}}function so(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function oo(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function ao(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Pt={to:g.default.string.isRequired,containerId:g.default.string,container:g.default.object,activeClass:g.default.string,activeStyle:g.default.object,spy:g.default.bool,horizontal:g.default.bool,smooth:g.default.oneOfType([g.default.bool,g.default.string]),offset:g.default.number,delay:g.default.number,isDynamic:g.default.bool,onClick:g.default.func,duration:g.default.oneOfType([g.default.number,g.default.func]),absolute:g.default.bool,onSetActive:g.default.func,onSetInactive:g.default.func,ignoreCancelEvents:g.default.bool,hashSpy:g.default.bool,saveHashHistory:g.default.bool,spyThrottle:g.default.number};ce.default=function(n,e){var t=e||no.default,r=function(s){ao(o,s);function o(c){so(this,o);var u=oo(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,c));return i.call(u),u.state={active:!1},u}return Zs(o,[{key:"getScrollSpyContainer",value:function(){var u=this.props.containerId,l=this.props.container;return u&&!l?document.getElementById(u):l&&l.nodeType?l:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var u=this.getScrollSpyContainer();we.default.isMounted(u)||we.default.mount(u,this.props.spyThrottle),this.props.hashSpy&&(V.default.isMounted()||V.default.mount(t),V.default.mapContainer(this.props.to,u)),we.default.addSpyHandler(this.spyHandler,u),this.setState({container:u})}}},{key:"componentWillUnmount",value:function(){we.default.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var u="";this.state&&this.state.active?u=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():u=this.props.className;var l={};this.state&&this.state.active?l=be({},this.props.style,this.props.activeStyle):l=be({},this.props.style);var f=be({},this.props);for(var d in Pt)f.hasOwnProperty(d)&&delete f[d];return f.className=u,f.style=l,f.onClick=this.handleClick,Mt.default.createElement(n,f)}}]),o}(Mt.default.PureComponent),i=function(){var o=this;this.scrollTo=function(c,u){t.scrollTo(c,be({},o.state,u))},this.handleClick=function(c){o.props.onClick&&o.props.onClick(c),c.stopPropagation&&c.stopPropagation(),c.preventDefault&&c.preventDefault(),o.scrollTo(o.props.to,o.props)},this.spyHandler=function(c,u){var l=o.getScrollSpyContainer();if(!(V.default.isMounted()&&!V.default.isInitialized())){var f=o.props.horizontal,d=o.props.to,p=null,E=void 0,O=void 0;if(f){var j=0,T=0,k=0;if(l.getBoundingClientRect){var $=l.getBoundingClientRect();k=$.left}if(!p||o.props.isDynamic){if(p=t.get(d),!p)return;var F=p.getBoundingClientRect();j=F.left-k+c,T=j+F.width}var A=c-o.props.offset;E=A>=Math.floor(j)&&A<Math.floor(T),O=A<Math.floor(j)||A>=Math.floor(T)}else{var D=0,m=0,M=0;if(l.getBoundingClientRect){var X=l.getBoundingClientRect();M=X.top}if(!p||o.props.isDynamic){if(p=t.get(d),!p)return;var te=p.getBoundingClientRect();D=te.top-M+u,m=D+te.height}var me=u-o.props.offset;E=me>=Math.floor(D)&&me<Math.floor(m),O=me<Math.floor(D)||me>=Math.floor(m)}var st=t.getActiveLink();if(O){if(d===st&&t.setActiveLink(void 0),o.props.hashSpy&&V.default.getHash()===d){var ot=o.props.saveHashHistory,Ln=ot===void 0?!1:ot;V.default.changeHash("",Ln)}o.props.spy&&o.state.active&&(o.setState({active:!1}),o.props.onSetInactive&&o.props.onSetInactive(d,p))}if(E&&(st!==d||o.state.active===!1)){t.setActiveLink(d);var at=o.props.saveHashHistory,An=at===void 0?!1:at;o.props.hashSpy&&V.default.changeHash(d,An),o.props.spy&&(o.setState({active:!0}),o.props.onSetActive&&o.props.onSetActive(d,p))}}}};return r.propTypes=Pt,r.defaultProps={offset:0},r};Object.defineProperty(Qe,"__esModule",{value:!0});var co=h,It=bn(co),lo=ce,uo=bn(lo);function bn(n){return n&&n.__esModule?n:{default:n}}function fo(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Lt(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function ho(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var po=function(n){ho(e,n);function e(){var t,r,i,s;fo(this,e);for(var o=arguments.length,c=Array(o),u=0;u<o;u++)c[u]=arguments[u];return s=(r=(i=Lt(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(c))),i),i.render=function(){return It.default.createElement("a",i.props,i.props.children)},r),Lt(i,s)}return e}(It.default.Component);Qe.default=(0,uo.default)(po);var nt={};Object.defineProperty(nt,"__esModule",{value:!0});var mo=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),vo=h,At=wn(vo),go=ce,yo=wn(go);function wn(n){return n&&n.__esModule?n:{default:n}}function _o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function bo(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function wo(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var So=function(n){wo(e,n);function e(){return _o(this,e),bo(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return mo(e,[{key:"render",value:function(){return At.default.createElement("button",this.props,this.props.children)}}]),e}(At.default.Component);nt.default=(0,yo.default)(So);var rt={},De={};Object.defineProperty(De,"__esModule",{value:!0});var Eo=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xo=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),ko=h,Dt=He(ko),To=Nn;He(To);var Co=ee,Ht=He(Co),Oo=Le,zt=He(Oo);function He(n){return n&&n.__esModule?n:{default:n}}function jo(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Mo(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Po(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}De.default=function(n){var e=function(t){Po(r,t);function r(i){jo(this,r);var s=Mo(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,i));return s.childBindings={domNode:null},s}return xo(r,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(s){this.props.name!==s.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;Ht.default.unregister(this.props.name)}},{key:"registerElems",value:function(s){Ht.default.register(s,this.childBindings.domNode)}},{key:"render",value:function(){return Dt.default.createElement(n,Eo({},this.props,{parentBindings:this.childBindings}))}}]),r}(Dt.default.Component);return e.propTypes={name:zt.default.string,id:zt.default.string},e};Object.defineProperty(rt,"__esModule",{value:!0});var Rt=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Io=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Lo=h,Nt=it(Lo),Ao=De,Do=it(Ao),Ho=Le,Bt=it(Ho);function it(n){return n&&n.__esModule?n:{default:n}}function zo(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ro(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function No(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Sn=function(n){No(e,n);function e(){return zo(this,e),Ro(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Io(e,[{key:"render",value:function(){var r=this,i=Rt({},this.props);return delete i.name,i.parentBindings&&delete i.parentBindings,Nt.default.createElement("div",Rt({},i,{ref:function(o){r.props.parentBindings.domNode=o}}),this.props.children)}}]),e}(Nt.default.Component);Sn.propTypes={name:Bt.default.string,id:Bt.default.string};rt.default=(0,Do.default)(Sn);var $e=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$t=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Ft(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Vt(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Wt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Se=h,q=le,Fe=ee,_=Le,W=Ae,Yt={to:_.string.isRequired,containerId:_.string,container:_.object,activeClass:_.string,spy:_.bool,smooth:_.oneOfType([_.bool,_.string]),offset:_.number,delay:_.number,isDynamic:_.bool,onClick:_.func,duration:_.oneOfType([_.number,_.func]),absolute:_.bool,onSetActive:_.func,onSetInactive:_.func,ignoreCancelEvents:_.bool,hashSpy:_.bool,spyThrottle:_.number},Bo={Scroll:function(e,t){console.warn("Helpers.Scroll is deprecated since v1.7.0");var r=t||Fe,i=function(o){Wt(c,o);function c(u){Ft(this,c);var l=Vt(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return s.call(l),l.state={active:!1},l}return $t(c,[{key:"getScrollSpyContainer",value:function(){var l=this.props.containerId,f=this.props.container;return l?document.getElementById(l):f&&f.nodeType?f:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var l=this.getScrollSpyContainer();q.isMounted(l)||q.mount(l,this.props.spyThrottle),this.props.hashSpy&&(W.isMounted()||W.mount(r),W.mapContainer(this.props.to,l)),this.props.spy&&q.addStateHandler(this.stateHandler),q.addSpyHandler(this.spyHandler,l),this.setState({container:l})}}},{key:"componentWillUnmount",value:function(){q.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var l="";this.state&&this.state.active?l=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():l=this.props.className;var f=$e({},this.props);for(var d in Yt)f.hasOwnProperty(d)&&delete f[d];return f.className=l,f.onClick=this.handleClick,Se.createElement(e,f)}}]),c}(Se.Component),s=function(){var c=this;this.scrollTo=function(u,l){r.scrollTo(u,$e({},c.state,l))},this.handleClick=function(u){c.props.onClick&&c.props.onClick(u),u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault(),c.scrollTo(c.props.to,c.props)},this.stateHandler=function(){r.getActiveLink()!==c.props.to&&(c.state!==null&&c.state.active&&c.props.onSetInactive&&c.props.onSetInactive(),c.setState({active:!1}))},this.spyHandler=function(u){var l=c.getScrollSpyContainer();if(!(W.isMounted()&&!W.isInitialized())){var f=c.props.to,d=null,p=0,E=0,O=0;if(l.getBoundingClientRect){var j=l.getBoundingClientRect();O=j.top}if(!d||c.props.isDynamic){if(d=r.get(f),!d)return;var T=d.getBoundingClientRect();p=T.top-O+u,E=p+T.height}var k=u-c.props.offset,$=k>=Math.floor(p)&&k<Math.floor(E),F=k<Math.floor(p)||k>=Math.floor(E),A=r.getActiveLink();if(F)return f===A&&r.setActiveLink(void 0),c.props.hashSpy&&W.getHash()===f&&W.changeHash(),c.props.spy&&c.state.active&&(c.setState({active:!1}),c.props.onSetInactive&&c.props.onSetInactive()),q.updateStates();if($&&A!==f)return r.setActiveLink(f),c.props.hashSpy&&W.changeHash(f),c.props.spy&&(c.setState({active:!0}),c.props.onSetActive&&c.props.onSetActive(f)),q.updateStates()}}};return i.propTypes=Yt,i.defaultProps={offset:0},i},Element:function(e){console.warn("Helpers.Element is deprecated since v1.7.0");var t=function(r){Wt(i,r);function i(s){Ft(this,i);var o=Vt(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,s));return o.childBindings={domNode:null},o}return $t(i,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(o){this.props.name!==o.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;Fe.unregister(this.props.name)}},{key:"registerElems",value:function(o){Fe.register(o,this.childBindings.domNode)}},{key:"render",value:function(){return Se.createElement(e,$e({},this.props,{parentBindings:this.childBindings}))}}]),i}(Se.Component);return t.propTypes={name:_.string,id:_.string},t}},$o=Bo;Object.defineProperty(w,"__esModule",{value:!0});w.Helpers=w.ScrollElement=w.ScrollLink=ke=w.animateScroll=w.scrollSpy=w.Events=w.scroller=w.Element=w.Button=w.Link=void 0;var Fo=Qe,En=R(Fo),Vo=nt,xn=R(Vo),Wo=rt,kn=R(Wo),Yo=ee,Tn=R(Yo),Uo=de,Cn=R(Uo),Xo=le,On=R(Xo),qo=Me,jn=R(qo),Ko=ce,Mn=R(Ko),Go=De,Pn=R(Go),Qo=$o,In=R(Qo);function R(n){return n&&n.__esModule?n:{default:n}}w.Link=En.default;w.Button=xn.default;w.Element=kn.default;w.scroller=Tn.default;w.Events=Cn.default;w.scrollSpy=On.default;var ke=w.animateScroll=jn.default;w.ScrollLink=Mn.default;w.ScrollElement=Pn.default;w.Helpers=In.default;w.default={Link:En.default,Button:xn.default,Element:kn.default,scroller:Tn.default,Events:Cn.default,scrollSpy:On.default,animateScroll:jn.default,ScrollLink:Mn.default,ScrollElement:Pn.default,Helpers:In.default};const Zo=h.memo(({fitScreenMode:n})=>{const[e,t]=h.useState(!1),{atBottom:r}=fn(n);h.useEffect(()=>{const o=new ResizeObserver(()=>{t(document.body.scrollHeight>screen.height&&n!="fitXY")});return o.observe(document.body),()=>o.disconnect()},[n]);const i=()=>{const o=document.body.scrollHeight-window.scrollY-screen.height,c=screen.height/2e3;if(o<0)return;if(o<.8*screen.height){ke.scrollToBottom({duration:o/c,onComplete:()=>{window.scrollBy(0,-1)}});return}const u=document.querySelectorAll(".section");for(const l of u){const f=l.getBoundingClientRect();if(f.bottom>=screen.height){const d=Math.max(100,.2*screen.height),p=f.top-d;ke.scrollTo(f.top+window.scrollY-d,{duration:p/c});break}}},s=()=>{ke.scrollTo(0,{duration:200})};return e?a.jsxs("div",{className:"fixed bottom-10 right-10 z-50 h-24 flex",children:[!r&&a.jsx(z,{size:"icon",variant:"circular",onClick:i,className:"absolute bottom-0 right-0",children:a.jsx(Qn,{})}),r&&a.jsx(z,{size:"icon",variant:"circular",onClick:s,className:"absolute top-0 right-0",children:a.jsx(Zn,{})})]}):null}),Jo=()=>{const[n,e]=h.useState(!0),t=h.useCallback(r=>{e(r)},[]);return{isVisible:n,updateVisibility:t}},ra=()=>{const{songDB:n,songData:e}=Bn(),t=$n(),r=lr(),i=h.useRef(null),{layout:s,actions:o}=U(),{updateVisibility:c}=Jo(),[u,l]=qn(`transposeSteps/${e.id}`,{defaultValue:0});return Ei({onPinch:({movement:[f],memo:d})=>{d||(d=s.fontSize);const p=Math.max(8,Math.min(d*f,50));return o.setLayoutSettings({fitScreenMode:"none",fontSize:p}),o.setCustomLayoutPreset({fitScreenMode:"none",fontSize:p}),o.applyPreset("custom"),screen.height>50+document.body.scrollHeight?c(!0):screen.height<document.body.scrollHeight&&window.scrollY>0&&c(!1),d}},{target:i}),h.useEffect(()=>{const f=d=>d.preventDefault();return document.addEventListener("gesturestart",f),document.addEventListener("gesturechange",f),()=>{document.removeEventListener("gesturestart",f),document.removeEventListener("gesturechange",f)}},[]),e.lyricsLength()<50?a.jsx($i,{pdfFilenames:e.pdfFilenames}):a.jsxs(Fi,{ref:i,children:[a.jsx(Bi,{navigate:t,songDB:n,songData:e,fullScreenHandle:r,originalKey:e.key,transposeSteps:u,setTransposeSteps:l}),a.jsxs(ur,{handle:r,className:Y("w-full overflow-x-clip",s.fitScreenMode=="fitXY"?" h-full ":" h-fit overflow-y-scroll"),children:[a.jsx(Zo,{fitScreenMode:s.fitScreenMode}),a.jsx(Xi,{songData:e,transposeSteps:u})]})]})};export{ra as SongView,ra as default};
//# sourceMappingURL=SongView-BVjP50CW.js.map
