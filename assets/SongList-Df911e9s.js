import{c as M,a as Ve,r as g,j as r,u as Vt,b as $e,d as S,L as $t,e as zt,f as Bt,g as Kt,h as Ht}from"./main-CMfZ1yFv.js";import{P as W,O as ze,C as Be,T as Ke,D as He,a as Wt,b as Ut,R as Xt,c as Z,d as q,e as ee,f as ue,g as re,h as ae,i as oe,j as Yt,k as X,u as Q,l as Gt,m as te,n as ke,p as We,F as Qt,o as Jt,M as Zt,q as qt,r as es}from"./fancy-switch-CDhkyxie.js";import{B as E}from"./button-DeKgS2hq.js";import{I as ts}from"./IllustrationPrompt-Ce4xxv3x.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=M("ArrowDown01",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["rect",{x:"15",y:"4",width:"4",height:"6",ry:"2",key:"1bwicg"}],["path",{d:"M17 20v-6h-2",key:"1qp1so"}],["path",{d:"M15 20h4",key:"1j968p"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=M("ArrowDown10",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M17 10V4h-2",key:"zcsr5x"}],["path",{d:"M15 10h4",key:"id2lce"}],["rect",{x:"15",y:"14",width:"4",height:"6",ry:"2",key:"33xykx"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=M("ArrowDownAZ",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=M("ArrowDownNarrowWide",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h4",key:"6d7r33"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h10",key:"1438ji"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=M("ArrowDownUp",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=M("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=M("ArrowDownZA",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M15 4h5l-5 6h5",key:"8asdl1"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20",key:"r6l5cz"}],["path",{d:"M20 18h-5",key:"18j1r2"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=M("AudioLines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=M("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=M("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=M("FlagOff",[["path",{d:"M8 2c3 0 5 2 8 2s4-1 4-1v11",key:"9rwyz9"}],["path",{d:"M4 22V4",key:"1plyxx"}],["path",{d:"M4 15s1-1 4-1 5 2 8 2",key:"1myooe"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=M("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=M("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=M("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=M("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=M("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=M("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=M("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Me="Avatar",[xs,ur]=Ve(Me),[ys,Ye]=xs(Me),Ge=g.forwardRef((t,e)=>{const{__scopeAvatar:s,...n}=t,[o,a]=g.useState("idle");return r.jsx(ys,{scope:s,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:r.jsx(W.span,{...n,ref:e})})});Ge.displayName=Me;var Qe="AvatarImage",Je=g.forwardRef((t,e)=>{const{__scopeAvatar:s,src:n,onLoadingStatusChange:o=()=>{},...a}=t,i=Ye(Qe,s),c=vs(n,a.referrerPolicy),l=Vt(u=>{o(u),i.onImageLoadingStatusChange(u)});return $e(()=>{c!=="idle"&&l(c)},[c,l]),c==="loaded"?r.jsx(W.img,{...a,ref:e,src:n}):null});Je.displayName=Qe;var Ze="AvatarFallback",qe=g.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:n,...o}=t,a=Ye(Ze,s),[i,c]=g.useState(n===void 0);return g.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(l)}},[n]),i&&a.imageLoadingStatus!=="loaded"?r.jsx(W.span,{...o,ref:e}):null});qe.displayName=Ze;function vs(t,e){const[s,n]=g.useState("idle");return $e(()=>{if(!t){n("error");return}let o=!0;const a=new window.Image,i=c=>()=>{o&&n(c)};return n("loading"),a.onload=i("loaded"),a.onerror=i("error"),a.src=t,e&&(a.referrerPolicy=e),()=>{o=!1}},[t,e]),s}var et=Ge,tt=Je,st=qe;const Ne=g.forwardRef(({className:t,...e},s)=>r.jsx(et,{ref:s,className:S("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Ne.displayName=et.displayName;const Ae=g.forwardRef(({className:t,...e},s)=>r.jsx(tt,{ref:s,className:S("aspect-square flex object-cover w-full h-full",t),...e}));Ae.displayName=tt.displayName;const nt=g.forwardRef(({className:t,...e},s)=>r.jsx(st,{ref:s,className:S("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));nt.displayName=st.displayName;const ws=Xt,bs=Wt,js=Ut,rt=g.forwardRef(({className:t,...e},s)=>r.jsx(ze,{ref:s,className:S("fixed inset-0 z-30 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 backdrop-blur-sm",t),...e}));rt.displayName=ze.displayName;const at=g.forwardRef(({className:t,close:e,children:s,...n},o)=>r.jsxs(bs,{children:[r.jsx(rt,{onClick:a=>{e(),a.stopPropagation()}}),r.jsxs(Be,{onClick:a=>a.stopPropagation(),ref:o,className:S("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[s,r.jsx(js,{asChild:!0,children:r.jsx(E,{variant:"circular",size:"icon",onClick:a=>a.stopPropagation(),className:"absolute top-4 right-4 p-2","aria-label":"Close full screen image",children:r.jsx(Xe,{className:"h-6 w-6"})})})]})]}));at.displayName=Be.displayName;const ot=g.forwardRef(({className:t,...e},s)=>r.jsx(Ke,{ref:s,className:S("text-lg font-semibold leading-none tracking-tight",t),...e}));ot.displayName=Ke.displayName;const it=g.forwardRef(({className:t,...e},s)=>r.jsx(He,{ref:s,className:S("text-sm text-muted-foreground",t),...e}));it.displayName=He.displayName;function Ss({avatarClassName:t,song:e}){const[s,n]=g.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx(Ne,{className:S("cursor-pointer",t),onClick:o=>{o.stopPropagation(),n(!0)},children:r.jsx(Ae,{src:e.thumbnailURL(),alt:"song illustration thumbnail"})}),r.jsxs(ws,{open:s,onOpenChange:n,children:[r.jsx(ot,{className:"hidden",children:"Illustration image view"}),r.jsx(it,{className:"hidden",children:"Illustration"}),r.jsx(at,{className:"max-w-[512px] max-h-[calc(100vh)] h-fit rounded-lg backdrop-blur-sm p-0 avatar-modal-dialog overflow-clip content-radix bg-glass/50 gap-0 flex flex-col",close:()=>n(!1),children:r.jsxs("div",{className:"h-full w-full relative",children:[r.jsx("div",{className:"relative flex justify-center max-h-[512px] h-[70%] shadow-lg",children:r.jsx("img",{style:{backgroundImage:`url(${e.thumbnailURL()})`,backgroundRepeat:"no-repeat",backgroundSize:"cover"},src:e.illustrationURL(),loading:"lazy",width:512,height:512,className:"object-scale-down z-50"})}),r.jsx(ts,{song:e,show:s,className:"text-center text-white font-bold !items-center  h-[256px] [@media(max-height:1000px)]:h-[150px] [@media(max-height:800px)]:h-[100px] [@media(max-height:700px)]:!hidden"})]})})]})]})}const Ie={czech:"cz",english:"gb",german:"de",slovak:"sk",polish:"pl",spanish:"uy",romanian:"ro",finnish:"fi",estonian:"ee",french:"fr",italian:"it",portuguese:"br",icelandic:"is",all:"un",other:"eu"};function ks(t){return t in Ie?"https://flagcdn.com/"+Ie[t]+".svg":t==="russian"?"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Flag_of_Mordor.svg/800px-Flag_of_Mordor.svg.png":""}function ct({language:t}){return r.jsxs(Ne,{className:"w-6 h-6 shadow-black",children:[r.jsx(Ae,{alt:t,src:ks(t)}),r.jsx(nt,{children:r.jsx(hs,{})})]})}function Ms({value:t,maxValue:e,color:s="hsl(var(--primary))",strokeWidth:n=10}){return r.jsxs("div",{className:"block relative items-center justify-center h-10 w-10",children:[r.jsxs("svg",{className:"w-full h-full relative overflow-visible",viewBox:"0 0 100 100",children:[r.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"transparent",stroke:"#e5e7eb",strokeWidth:n}),r.jsx("circle",{cx:"50",cy:"50",r:"40",className:"transition-all !duration-500 progress",fill:"transparent",transform:"rotate(-90 50 50)",stroke:s,strokeWidth:n*1.2,strokeDasharray:"251.3",strokeDashoffset:251.3*(1-t/e),strokeLinecap:"round",role:"progressbar"})]}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-normal text-[0.65rem] text-muted-foreground",children:t})]})}const Ns=70,As=["January","February","March","April","May","June","July","August","September","October","November","December"],Cs=g.memo(({songRangeSemitones:t,maxRange:e})=>t?r.jsx(Ms,{value:t||e,maxValue:e}):r.jsx(r.Fragment,{})),Rs=g.memo(({month:t,year:e})=>r.jsxs("div",{className:"basis-[13%] min-w-12 flex-col content-center justify-center hidden sm:flex text-center",children:[r.jsx("h3",{className:"text-xs opacity-70",children:As[t-1]}),r.jsx("h2",{className:"text-sm opacity-70",children:e})]})),_s=g.memo(({capo:t})=>r.jsxs("div",{className:"basis-[13%] flex-shrink min-w-12 text-center content-center justify-center hidden lg:flex flex-col",children:[r.jsx("h2",{className:"text-xs opacity-70",children:"Capo"}),r.jsx("h3",{className:"text-sm opacity-70",children:t})]})),Es=g.memo(({title:t,artist:e})=>r.jsxs("div",{className:"flex-auto basis-1/2 min-w-40 flex-col text-left content-center",children:[r.jsx("h2",{className:"text-sm font-bold truncate song-title",children:t}),r.jsx("h3",{className:"text-sm opacity-50 truncate song-artist",children:e})]})),Is=g.memo(({song:t,maxRange:e})=>t?r.jsx("div",{className:S(`h-[${Ns}px]`,"flex items-center container max-w-2xl mx-auto px-2 sm:px-4 song-row-wrapper"),children:r.jsx("div",{className:"flex h-14 min-w-72 w-full rounded-full song-row-bg-image",style:{backgroundImage:`url(${t.thumbnailURL()})`},children:r.jsxs("div",{className:"flex relative h-full w-full items-center rounded-full p-1 backdrop-blur-md song-row-bg-image shadow-black row-text-shadow",children:[r.jsx(Ss,{avatarClassName:"absolute -left-0 top-0 bottom-0 m-auto song-avatar z-10 w-16 h-16 text-large",song:t}),r.jsxs($t,{to:t.url(),className:"flex relative h-12 song-row w-full backdrop-blur-lg bg-glass/60 hover:bg-glass/90 rounded-full",children:[r.jsx("div",{className:"flex min-w-[72px] rounded-l-full content-center justify-center relative"}),r.jsx(Es,{title:t.title,artist:t.artist}),r.jsx(Rs,{month:t.dateAdded.month,year:t.dateAdded.year}),r.jsx(_s,{capo:t.capo}),r.jsx("div",{className:"hidden basis-[13%] min-w-12 sm:flex content-center justify-center",children:r.jsx("div",{className:"flex items-center",children:r.jsx(Cs,{songRangeSemitones:t.range.semitones,maxRange:e})})}),r.jsx("div",{className:"flex basis-1/12 min-w-12 items-center justify-end p-2",children:r.jsx(ct,{language:t.language})})]})]})})}):(console.error("Invalid song provided to SongRow"),r.jsx("div",{className:"h-[70px] flex items-center container max-w-2xl mx-auto px-2 sm:px-4 bg-white text-foreground",children:"Invalid song"})));function Ls(t){const e=g.useCallback(o=>{const a=window.matchMedia(t);return a.addEventListener("change",o),()=>{a.removeEventListener("change",o)}},[t]),s=()=>window.matchMedia(t).matches,n=()=>{throw Error("useMediaQuery is a client-only hook")};return g.useSyncExternalStore(e,s,n)}const he=3,Ds=t=>{if(!t)return"";const e=t.codePointAt(0);if(!e)return t;const s=e>65535?2:1;return String.fromCodePoint(e).toUpperCase()+t.slice(s)},lt=(t,e,s)=>{const n=Object.entries(t).filter(([i,c])=>c>=he).map(([i])=>({text:Ds(i),value:i})),o=Object.entries(t).filter(([i,c])=>c<he).map(([i])=>i),a=n;return a.sort((i,c)=>i.text.localeCompare(c.text)),a.unshift({text:"All",value:"all"}),o.length>0&&a.push({text:"Other",value:"other"}),a.map(i=>r.jsxs(ee,{onSelect:c=>c.preventDefault(),checked:e===i.value,onClick:()=>s(i.value),children:[r.jsx(ue,{icon:r.jsx(ct,{language:i.value})}),i.text]},i.value))},Os=({languages:t,selectedLanguage:e,setSelectedLanguage:s,iconOnly:n})=>{const o=e!=="all";return r.jsxs(re,{children:[r.jsx(ae,{asChild:!0,children:r.jsxs(E,{variant:"circular",isActive:o,className:"outline-0 rounded-r-none font-bold",children:[r.jsx(ms,{}),!n&&"Languages"]})}),r.jsx(oe,{"aria-label":"Language Choices",sideOffset:15,children:lt(t,e,s)})]})},Ps=(t,e,s)=>r.jsxs(r.Fragment,{children:[r.jsx(Z,{children:"Select languages"}),r.jsx(q,{}),lt(t,e,s)]});function dt(t,[e,s]){return Math.min(s,Math.max(e,t))}function Fs(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var ut=["PageUp","PageDown"],ht=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ft={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Y="Slider",[fe,Ts,Vs]=Yt(Y),[gt,hr]=Ve(Y,[Vs]),[$s,ie]=gt(Y),mt=g.forwardRef((t,e)=>{const{name:s,min:n=0,max:o=100,step:a=1,orientation:i="horizontal",disabled:c=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[n],value:h,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:x,...y}=t,w=g.useRef(new Set),v=g.useRef(0),b=i==="horizontal"?zs:Bs,[j=[],$]=zt({prop:h,defaultProp:u,onChange:k=>{var B;(B=[...w.current][v.current])==null||B.focus(),d(k)}}),z=g.useRef(j);function N(k){const A=Xs(j,k);P(k,A)}function I(k){P(k,v.current)}function L(){const k=z.current[v.current];j[v.current]!==k&&f(j)}function P(k,A,{commit:B}={commit:!1}){const C=Js(a),F=Zs(Math.round((k-n)/a)*a+n,C),T=dt(F,[n,o]);$((U=[])=>{const K=Ws(U,T,A);if(Qs(K,l*a)){v.current=K.indexOf(T);const Ee=String(K)!==String(U);return Ee&&B&&f(K),Ee?K:U}else return U})}return r.jsx($s,{scope:t.__scopeSlider,name:s,disabled:c,min:n,max:o,valueIndexToChangeRef:v,thumbs:w.current,values:j,orientation:i,form:x,children:r.jsx(fe.Provider,{scope:t.__scopeSlider,children:r.jsx(fe.Slot,{scope:t.__scopeSlider,children:r.jsx(b,{"aria-disabled":c,"data-disabled":c?"":void 0,...y,ref:e,onPointerDown:X(y.onPointerDown,()=>{c||(z.current=j)}),min:n,max:o,inverted:p,onSlideStart:c?void 0:N,onSlideMove:c?void 0:I,onSlideEnd:c?void 0:L,onHomeKeyDown:()=>!c&&P(n,0,{commit:!0}),onEndKeyDown:()=>!c&&P(o,j.length-1,{commit:!0}),onStepKeyDown:({event:k,direction:A})=>{if(!c){const F=ut.includes(k.key)||k.shiftKey&&ht.includes(k.key)?10:1,T=v.current,U=j[T],K=a*F*A;P(U+K,T,{commit:!0})}}})})})})});mt.displayName=Y;var[pt,xt]=gt(Y,{startEdge:"left",endEdge:"right",size:"width",direction:1}),zs=g.forwardRef((t,e)=>{const{min:s,max:n,dir:o,inverted:a,onSlideStart:i,onSlideMove:c,onSlideEnd:l,onStepKeyDown:u,...h}=t,[d,f]=g.useState(null),p=Q(e,b=>f(b)),x=g.useRef(),y=Bt(o),w=y==="ltr",v=w&&!a||!w&&a;function R(b){const j=x.current||d.getBoundingClientRect(),$=[0,j.width],N=Ce($,v?[s,n]:[n,s]);return x.current=j,N(b-j.left)}return r.jsx(pt,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:r.jsx(yt,{dir:y,"data-orientation":"horizontal",...h,ref:p,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const j=R(b.clientX);i==null||i(j)},onSlideMove:b=>{const j=R(b.clientX);c==null||c(j)},onSlideEnd:()=>{x.current=void 0,l==null||l()},onStepKeyDown:b=>{const $=ft[v?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:$?-1:1})}})})}),Bs=g.forwardRef((t,e)=>{const{min:s,max:n,inverted:o,onSlideStart:a,onSlideMove:i,onSlideEnd:c,onStepKeyDown:l,...u}=t,h=g.useRef(null),d=Q(e,h),f=g.useRef(),p=!o;function x(y){const w=f.current||h.current.getBoundingClientRect(),v=[0,w.height],b=Ce(v,p?[n,s]:[s,n]);return f.current=w,b(y-w.top)}return r.jsx(pt,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:r.jsx(yt,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const w=x(y.clientY);a==null||a(w)},onSlideMove:y=>{const w=x(y.clientY);i==null||i(w)},onSlideEnd:()=>{f.current=void 0,c==null||c()},onStepKeyDown:y=>{const v=ft[p?"from-bottom":"from-top"].includes(y.key);l==null||l({event:y,direction:v?-1:1})}})})}),yt=g.forwardRef((t,e)=>{const{__scopeSlider:s,onSlideStart:n,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:c,onStepKeyDown:l,...u}=t,h=ie(Y,s);return r.jsx(W.span,{...u,ref:e,onKeyDown:X(t.onKeyDown,d=>{d.key==="Home"?(i(d),d.preventDefault()):d.key==="End"?(c(d),d.preventDefault()):ut.concat(ht).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:X(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),h.thumbs.has(f)?f.focus():n(d)}),onPointerMove:X(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&o(d)}),onPointerUp:X(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),a(d))})})}),vt="SliderTrack",wt=g.forwardRef((t,e)=>{const{__scopeSlider:s,...n}=t,o=ie(vt,s);return r.jsx(W.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...n,ref:e})});wt.displayName=vt;var ge="SliderRange",bt=g.forwardRef((t,e)=>{const{__scopeSlider:s,...n}=t,o=ie(ge,s),a=xt(ge,s),i=g.useRef(null),c=Q(e,i),l=o.values.length,u=o.values.map(f=>St(f,o.min,o.max)),h=l>1?Math.min(...u):0,d=100-Math.max(...u);return r.jsx(W.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...n,ref:c,style:{...t.style,[a.startEdge]:h+"%",[a.endEdge]:d+"%"}})});bt.displayName=ge;var me="SliderThumb",jt=g.forwardRef((t,e)=>{const s=Ts(t.__scopeSlider),[n,o]=g.useState(null),a=Q(e,c=>o(c)),i=g.useMemo(()=>n?s().findIndex(c=>c.ref.current===n):-1,[s,n]);return r.jsx(Ks,{...t,ref:a,index:i})}),Ks=g.forwardRef((t,e)=>{const{__scopeSlider:s,index:n,name:o,...a}=t,i=ie(me,s),c=xt(me,s),[l,u]=g.useState(null),h=Q(e,R=>u(R)),d=l?i.form||!!l.closest("form"):!0,f=Gt(l),p=i.values[n],x=p===void 0?0:St(p,i.min,i.max),y=Us(n,i.values.length),w=f==null?void 0:f[c.size],v=w?Ys(w,x,c.direction):0;return g.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${x}% + ${v}px)`},children:[r.jsx(fe.ItemSlot,{scope:t.__scopeSlider,children:r.jsx(W.span,{role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":i.min,"aria-valuenow":p,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...a,ref:h,style:p===void 0?{display:"none"}:t.style,onFocus:X(t.onFocus,()=>{i.valueIndexToChangeRef.current=n})})}),d&&r.jsx(Hs,{name:o??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:p},n)]})});jt.displayName=me;var Hs=t=>{const{value:e,...s}=t,n=g.useRef(null),o=Fs(e);return g.useEffect(()=>{const a=n.current,i=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(i,"value").set;if(o!==e&&l){const u=new Event("input",{bubbles:!0});l.call(a,e),a.dispatchEvent(u)}},[o,e]),r.jsx("input",{style:{display:"none"},...s,ref:n,defaultValue:e})};function Ws(t=[],e,s){const n=[...t];return n[s]=e,n.sort((o,a)=>o-a)}function St(t,e,s){const a=100/(s-e)*(t-e);return dt(a,[0,100])}function Us(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Xs(t,e){if(t.length===1)return 0;const s=t.map(o=>Math.abs(o-e)),n=Math.min(...s);return s.indexOf(n)}function Ys(t,e,s){const n=t/2,a=Ce([0,50],[0,n]);return(n-a(e)*s)*s}function Gs(t){return t.slice(0,-1).map((e,s)=>t[s+1]-e)}function Qs(t,e){if(e>0){const s=Gs(t);return Math.min(...s)>=e}return!0}function Ce(t,e){return s=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(s-t[0])}}function Js(t){return(String(t).split(".")[1]||"").length}function Zs(t,e){const s=Math.pow(10,e);return Math.round(t*s)/s}var ce=mt,kt=wt,Mt=bt,pe=jt;const qs=g.forwardRef(({className:t,...e},s)=>r.jsxs(ce,{ref:s,className:S("relative flex w-full touch-none select-none items-center",t),...e,children:[r.jsx(kt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(Mt,{className:"absolute h-full bg-primary"})}),r.jsx(pe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));qs.displayName=ce.displayName;const en=(t,e)=>!t||!e?r.jsx(r.Fragment,{}):r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"mt-2 text-muted-foreground",children:t}),r.jsxs("div",{className:"mt-2 text-muted-foreground",children:[e[0],"-",e[1]]})]}),Nt=g.forwardRef(({className:t,...e},s)=>r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsxs(ce,{minStepsBetweenThumbs:1,ref:s,className:S("relative flex w-full touch-none select-none items-center mt-2",t),...e,children:[r.jsx(kt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(Mt,{className:"absolute h-full bg-primary"})}),r.jsx(pe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}),r.jsx(pe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}),en(e.label,e.value)]}));Nt.displayName=ce.displayName;const At=({maxRange:t,vocalRangeFilter:e,setVocalRangeFilter:s})=>{const n=e==="all"?[0,t]:e,o=a=>{console.log(a),a[0]===0&&a[1]===t?s("all"):s(a)};return r.jsx(Nt,{label:"Semitones",step:1,min:0,max:t,defaultValue:n,value:n,className:"max-w-md",onValueChange:a=>o(a)})},tn=({maxRange:t,vocalRangeFilter:e,setVocalRangeFilter:s,iconOnly:n})=>r.jsxs(re,{children:[r.jsx(ae,{asChild:!0,children:r.jsxs(E,{variant:"circular",isActive:e!=="all",className:"shadow-none outline-0 font-bold rounded-l-none",children:[r.jsx(Ue,{}),!n&&"Range"]})}),r.jsxs(oe,{"aria-label":"Vocal range filter slider",className:"w-80",sideOffset:15,children:[r.jsx(te,{onSelect:o=>o.preventDefault(),children:r.jsx(At,{maxRange:t,vocalRangeFilter:e,setVocalRangeFilter:s})},"slider"),r.jsx(te,{onClick:()=>s("all"),children:"Reset"},"reset")]})]}),sn=(t,e,s)=>r.jsxs(r.Fragment,{children:[r.jsx(Z,{children:"Select song range"}),r.jsx(q,{}),r.jsx(te,{onSelect:n=>n.preventDefault(),children:r.jsx(At,{maxRange:t,vocalRangeFilter:e,setVocalRangeFilter:s})},"slider"),r.jsx(te,{onClick:()=>s("all"),onSelect:n=>n.preventDefault(),children:"Reset"},"reset")]}),Re=ke()(We(t=>({language:"all",vocalRange:"all",capo:!0,setLanguage:e=>t({language:e}),setVocalRange:e=>t({vocalRange:e}),setCapo:e=>t({capo:e}),toggleCapo:()=>t(e=>({capo:!e.capo}))}),{name:"filter-settings-store"})),nn=({languages:t,maxRange:e,iconOnly:s})=>{const{language:n,vocalRange:o,capo:a,setLanguage:i,setVocalRange:c,toggleCapo:l}=Re();return r.jsxs("div",{className:"flex outline outline-primary dark:outline-primary/30 rounded-full outline-2",children:[r.jsx(Os,{languages:t,selectedLanguage:n,setSelectedLanguage:i,iconOnly:s}),r.jsxs(E,{variant:"circular",isActive:a,className:"font-bold rounded-none outline-0 shadow-none",onClick:l,children:[r.jsx(fs,{}),!s&&"Capo"]}),r.jsx(tn,{maxRange:e,vocalRangeFilter:o,setVocalRangeFilter:c,iconOnly:s})]})},rn=({languages:t,maxRange:e})=>{const{language:s,vocalRange:n,capo:o,setLanguage:a,setVocalRange:i,toggleCapo:c}=Re(),l=Ls("only screen and (min-width : 1000px)"),u=s==="all"&&(n==="all"||Array.isArray(n)&&n[0]===0&&n[1]===e)&&o;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden lg:flex",children:r.jsx(nn,{languages:t,maxRange:e,iconOnly:l})}),r.jsx("div",{className:"lg:hidden",children:r.jsxs(re,{children:[r.jsx(ae,{asChild:!0,children:r.jsx(E,{size:"icon",variant:"circular",isActive:!u,children:r.jsx(us,{})})}),r.jsxs(oe,{"aria-label":"Filtering",className:"dropdown-scroll no-scrollbar w-52 max-h-[80dvh] overflow-y-scroll",sideOffset:15,children:[r.jsx(ee,{onClick:c,onSelect:h=>h.preventDefault(),checked:o,children:"Allow capo"}),sn(e,n,i),Ps(t,s,a)]})]})})]})},xe=g.forwardRef(({className:t,type:e,...s},n)=>r.jsx("input",{type:e,className:S("flex h-full w-full rounded-md bg-background text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...s}));xe.displayName="Input";const Ct=ke()(t=>({query:"",setQuery:e=>t({query:e})}));function an(){const[t,e]=g.useState(!1),[s,n]=g.useState(248),o=g.useRef(null),{query:a,setQuery:i}=Ct(),c=d=>{const f=d.target.value;i(f)};g.useEffect(()=>{t&&o.current&&o.current.focus()},[t]);const l=()=>{const d=document.getElementById("navbar");d&&n(d.offsetWidth),e(!t)},u=()=>{i(""),e(!1)},h=()=>r.jsxs(E,{type:"button",variant:"ghost",size:"icon",className:S("absolute right-1 top-1/2 transition-all duration-300 ease-in-out -translate-y-1/2 h-7 w-7 !bg-transparent !hover:bg-transparent hover:scale-125 hover:text-primary",a?"scale-100":"scale-0"),onClick:u,children:[r.jsx(Xe,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Clear"})]});return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex xs:hidden items-center gap-2",children:r.jsxs("div",{className:S("relative flex transition-all duration-300 ease-in-out items-center z-50",t?"-translate-x-12":""),children:[r.jsx(E,{type:"button",variant:"circular",size:"icon",className:S("relative z-10 transition-all duration-300 ease-in-out",t?"bg-background rounded-r-none text-primary dark:outline-primary":"",a?"bg-primary text-white dark:bg-background dark:text-primary":""),onClick:l,"aria-label":t?"Close search":"Open search","aria-expanded":t,children:r.jsx(le,{className:S("h-4 w-4",t?"scale-110":"")})}),r.jsxs("div",{className:S("absolute left-0 top-0 flex h-full items-center overflow-hidden transition-all duration-300 ease-in-out outline-primary outline outline-2",t?"opacity-100 rounded-full":"opacity-0",a?" outline-primary":""),style:{width:t?`calc(${s}px - 1rem)`:"0"},children:[r.jsx(E,{type:"button",variant:"circular",size:"icon",className:"opacity-0",tabIndex:-1,"aria-hidden":"true",children:r.jsx(le,{className:"h-4 w-4"})}),r.jsx(xe,{ref:o,onChange:c,value:a,placeholder:"Search...",className:S("pl-10 pr-4 text-sm font-medium placeholder:font-normal border-none rounded-full rounded-l-none peer bg-background text-primary placeholder:text-primary dark:placeholder:text-primary/30",a?"bg-background ":"")}),r.jsx(h,{})]})]})}),r.jsxs("div",{className:S("relative hidden xs:flex items-center h-full text-primary dark:text-primary/30 transition-all duration-300 ease-in-out shadow-md rounded-full flex-1 outline-primary dark:outline-primary/30 outline outline-2"),children:[r.jsx(xe,{onChange:c,value:a,placeholder:"Search...",className:S("pl-10 pr-4 text-sm font-medium placeholder:font-normal border-none rounded-full peer hover:bg-background dark:bg-background focus:bg-background text-primary placeholder:text-primary dark:placeholder:text-primary/30",a?"bg-background dark:bg-primary/30":"bg-white dark:bg-background")}),r.jsx(h,{}),r.jsx("div",{className:S("absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none peer-focus:scale-110 peer-focus:text-primary duration-300 ease-in-out transform",a?"scale-110 text-primary":""),children:r.jsx(le,{className:"w-5 h-5"})})]})]})}const Rt=ke()(We(t=>({order:"descending",field:"dateAdded",setSortOrder:e=>t({order:e}),setSortField:e=>t({field:e})}),{name:"sort-settings-store"})),Le={ascending:r.jsx(rs,{}),descending:r.jsx(cs,{})},on={ascending:r.jsx(ss,{}),descending:r.jsx(ns,{})},cn={ascending:r.jsx(as,{}),descending:r.jsx(is,{})},se=[{field:"title",title:"Title",icon:r.jsx(ls,{}),sorting_icons:Le,sorting_labels:{ascending:"Ascending",descending:"Descending"},defaultOrder:"ascending"},{field:"artist",title:"Artist",icon:r.jsx(ps,{}),sorting_icons:Le,sorting_labels:{ascending:"Ascending",descending:"Descending"},defaultOrder:"ascending"},{field:"dateAdded",title:"Date Added",icon:r.jsx(ds,{}),sorting_icons:on,sorting_labels:{ascending:"Old → New",descending:"New → Old"},defaultOrder:"descending"},{field:"range",title:"Range",icon:r.jsx(Ue,{}),sorting_icons:cn,sorting_labels:{ascending:"XS → XXL",descending:"XXL → XS"},defaultOrder:"ascending"}],ln=(t,e)=>t===e,dn=t=>t==="descending"?"ascending":"descending",un=t=>{const e=se.find(s=>s.field===t);if(!e)throw new Error(`Invalid sorting field: ${t}`);return e},hn=t=>{const e=se.find(s=>s.field===t);return(e==null?void 0:e.defaultOrder)||"ascending"},fn=()=>{const{field:t,order:e,setSortField:s,setSortOrder:n}=Rt(),o=se.map(c=>({label:c.title,value:c.field})),a=un(t),i=c=>{c!==t&&(s(c),n(hn(c)))};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex md:hidden",children:r.jsxs(re,{children:[r.jsx(ae,{asChild:!0,children:r.jsx(E,{size:"icon",variant:"circular",children:r.jsx(os,{size:32})})}),r.jsxs(oe,{className:"w-56",sideOffset:15,children:[r.jsx(Z,{children:"Sorting method"}),r.jsx(q,{}),se.map(c=>r.jsxs(ee,{onSelect:l=>l.preventDefault(),checked:ln(t,c.field),onCheckedChange:()=>i(c.field),children:[r.jsx(ue,{icon:c.icon}),c.title]},c.field)),r.jsx(Z,{children:"Direction"}),r.jsx(q,{}),["ascending","descending"].map(c=>r.jsxs(ee,{checked:e===c,onSelect:l=>l.preventDefault(),onCheckedChange:()=>n(c),children:[r.jsx(ue,{icon:a.sorting_icons[c]}),a.sorting_labels[c]]},`${c}_sort`))]})]})}),r.jsx("div",{className:"hidden md:flex h-full w-fit",children:r.jsx(Qt,{options:o,setSelectedOption:i,selectedOption:t,roundedClass:"rounded-l-full",children:r.jsx(E,{className:"rounded-r-full",onClick:()=>n(dn(e)),children:a.sorting_icons[e]})})})]})};function gn({songs:t,showToolbar:e,scrollOffset:s,fakeScroll:n=!1,maxRange:o,languages:a}){const i=Kt();return r.jsxs(Jt,{showToolbar:e,scrollOffset:s,fakeScroll:n,children:[r.jsx(fn,{}),r.jsx(an,{}),r.jsx(rn,{languages:a,maxRange:o}),r.jsx("div",{className:"hidden h-full w-fit sm:flex",children:r.jsx(Zt,{})}),r.jsx(E,{size:"icon",variant:"circular",onClick:()=>i("gallery"),children:r.jsx(gs,{})}),r.jsx(qt,{songs:t})]})}function O(t){return Array.isArray?Array.isArray(t):It(t)==="[object Array]"}const mn=1/0;function pn(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-mn?"-0":e}function xn(t){return t==null?"":pn(t)}function D(t){return typeof t=="string"}function _t(t){return typeof t=="number"}function yn(t){return t===!0||t===!1||vn(t)&&It(t)=="[object Boolean]"}function Et(t){return typeof t=="object"}function vn(t){return Et(t)&&t!==null}function _(t){return t!=null}function de(t){return!t.trim().length}function It(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const wn="Incorrect 'index' type",bn=t=>`Invalid value for key ${t}`,jn=t=>`Pattern length exceeds max of ${t}.`,Sn=t=>`Missing ${t} property in key`,kn=t=>`Property 'weight' in key '${t}' must be a positive integer`,De=Object.prototype.hasOwnProperty;class Mn{constructor(e){this._keys=[],this._keyMap={};let s=0;e.forEach(n=>{let o=Lt(n);this._keys.push(o),this._keyMap[o.id]=o,s+=o.weight}),this._keys.forEach(n=>{n.weight/=s})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Lt(t){let e=null,s=null,n=null,o=1,a=null;if(D(t)||O(t))n=t,e=Oe(t),s=ye(t);else{if(!De.call(t,"name"))throw new Error(Sn("name"));const i=t.name;if(n=i,De.call(t,"weight")&&(o=t.weight,o<=0))throw new Error(kn(i));e=Oe(i),s=ye(i),a=t.getFn}return{path:e,id:s,weight:o,src:n,getFn:a}}function Oe(t){return O(t)?t:t.split(".")}function ye(t){return O(t)?t.join("."):t}function Nn(t,e){let s=[],n=!1;const o=(a,i,c)=>{if(_(a))if(!i[c])s.push(a);else{let l=i[c];const u=a[l];if(!_(u))return;if(c===i.length-1&&(D(u)||_t(u)||yn(u)))s.push(xn(u));else if(O(u)){n=!0;for(let h=0,d=u.length;h<d;h+=1)o(u[h],i,c+1)}else i.length&&o(u,i,c+1)}};return o(t,D(e)?e.split("."):e,0),n?s:s[0]}const An={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Cn={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Rn={location:0,threshold:.6,distance:100},_n={useExtendedSearch:!1,getFn:Nn,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var m={...Cn,...An,...Rn,..._n};const En=/[^ ]+/g;function In(t=1,e=3){const s=new Map,n=Math.pow(10,e);return{get(o){const a=o.match(En).length;if(s.has(a))return s.get(a);const i=1/Math.pow(a,.5*t),c=parseFloat(Math.round(i*n)/n);return s.set(a,c),c},clear(){s.clear()}}}class _e{constructor({getFn:e=m.getFn,fieldNormWeight:s=m.fieldNormWeight}={}){this.norm=In(s,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((s,n)=>{this._keysMap[s.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,D(this.docs[0])?this.docs.forEach((e,s)=>{this._addString(e,s)}):this.docs.forEach((e,s)=>{this._addObject(e,s)}),this.norm.clear())}add(e){const s=this.size();D(e)?this._addString(e,s):this._addObject(e,s)}removeAt(e){this.records.splice(e,1);for(let s=e,n=this.size();s<n;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(e,s){return e[this._keysMap[s]]}size(){return this.records.length}_addString(e,s){if(!_(e)||de(e))return;let n={v:e,i:s,n:this.norm.get(e)};this.records.push(n)}_addObject(e,s){let n={i:s,$:{}};this.keys.forEach((o,a)=>{let i=o.getFn?o.getFn(e):this.getFn(e,o.path);if(_(i)){if(O(i)){let c=[];const l=[{nestedArrIndex:-1,value:i}];for(;l.length;){const{nestedArrIndex:u,value:h}=l.pop();if(_(h))if(D(h)&&!de(h)){let d={v:h,i:u,n:this.norm.get(h)};c.push(d)}else O(h)&&h.forEach((d,f)=>{l.push({nestedArrIndex:f,value:d})})}n.$[a]=c}else if(D(i)&&!de(i)){let c={v:i,n:this.norm.get(i)};n.$[a]=c}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Dt(t,e,{getFn:s=m.getFn,fieldNormWeight:n=m.fieldNormWeight}={}){const o=new _e({getFn:s,fieldNormWeight:n});return o.setKeys(t.map(Lt)),o.setSources(e),o.create(),o}function Ln(t,{getFn:e=m.getFn,fieldNormWeight:s=m.fieldNormWeight}={}){const{keys:n,records:o}=t,a=new _e({getFn:e,fieldNormWeight:s});return a.setKeys(n),a.setIndexRecords(o),a}function J(t,{errors:e=0,currentLocation:s=0,expectedLocation:n=0,distance:o=m.distance,ignoreLocation:a=m.ignoreLocation}={}){const i=e/t.length;if(a)return i;const c=Math.abs(n-s);return o?i+c/o:c?1:i}function Dn(t=[],e=m.minMatchCharLength){let s=[],n=-1,o=-1,a=0;for(let i=t.length;a<i;a+=1){let c=t[a];c&&n===-1?n=a:!c&&n!==-1&&(o=a-1,o-n+1>=e&&s.push([n,o]),n=-1)}return t[a-1]&&a-n>=e&&s.push([n,a-1]),s}const H=32;function On(t,e,s,{location:n=m.location,distance:o=m.distance,threshold:a=m.threshold,findAllMatches:i=m.findAllMatches,minMatchCharLength:c=m.minMatchCharLength,includeMatches:l=m.includeMatches,ignoreLocation:u=m.ignoreLocation}={}){if(e.length>H)throw new Error(jn(H));const h=e.length,d=t.length,f=Math.max(0,Math.min(n,d));let p=a,x=f;const y=c>1||l,w=y?Array(d):[];let v;for(;(v=t.indexOf(e,x))>-1;){let N=J(e,{currentLocation:v,expectedLocation:f,distance:o,ignoreLocation:u});if(p=Math.min(N,p),x=v+h,y){let I=0;for(;I<h;)w[v+I]=1,I+=1}}x=-1;let R=[],b=1,j=h+d;const $=1<<h-1;for(let N=0;N<h;N+=1){let I=0,L=j;for(;I<L;)J(e,{errors:N,currentLocation:f+L,expectedLocation:f,distance:o,ignoreLocation:u})<=p?I=L:j=L,L=Math.floor((j-I)/2+I);j=L;let P=Math.max(1,f-L+1),k=i?d:Math.min(f+L,d)+h,A=Array(k+2);A[k+1]=(1<<N)-1;for(let C=k;C>=P;C-=1){let F=C-1,T=s[t.charAt(F)];if(y&&(w[F]=+!!T),A[C]=(A[C+1]<<1|1)&T,N&&(A[C]|=(R[C+1]|R[C])<<1|1|R[C+1]),A[C]&$&&(b=J(e,{errors:N,currentLocation:F,expectedLocation:f,distance:o,ignoreLocation:u}),b<=p)){if(p=b,x=F,x<=f)break;P=Math.max(1,2*f-x)}}if(J(e,{errors:N+1,currentLocation:f,expectedLocation:f,distance:o,ignoreLocation:u})>p)break;R=A}const z={isMatch:x>=0,score:Math.max(.001,b)};if(y){const N=Dn(w,c);N.length?l&&(z.indices=N):z.isMatch=!1}return z}function Pn(t){let e={};for(let s=0,n=t.length;s<n;s+=1){const o=t.charAt(s);e[o]=(e[o]||0)|1<<n-s-1}return e}class Ot{constructor(e,{location:s=m.location,threshold:n=m.threshold,distance:o=m.distance,includeMatches:a=m.includeMatches,findAllMatches:i=m.findAllMatches,minMatchCharLength:c=m.minMatchCharLength,isCaseSensitive:l=m.isCaseSensitive,ignoreLocation:u=m.ignoreLocation}={}){if(this.options={location:s,threshold:n,distance:o,includeMatches:a,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(f,p)=>{this.chunks.push({pattern:f,alphabet:Pn(f),startIndex:p})},d=this.pattern.length;if(d>H){let f=0;const p=d%H,x=d-p;for(;f<x;)h(this.pattern.substr(f,H),f),f+=H;if(p){const y=d-H;h(this.pattern.substr(y),y)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:s,includeMatches:n}=this.options;if(s||(e=e.toLowerCase()),this.pattern===e){let x={isMatch:!0,score:0};return n&&(x.indices=[[0,e.length-1]]),x}const{location:o,distance:a,threshold:i,findAllMatches:c,minMatchCharLength:l,ignoreLocation:u}=this.options;let h=[],d=0,f=!1;this.chunks.forEach(({pattern:x,alphabet:y,startIndex:w})=>{const{isMatch:v,score:R,indices:b}=On(e,x,y,{location:o+w,distance:a,threshold:i,findAllMatches:c,minMatchCharLength:l,includeMatches:n,ignoreLocation:u});v&&(f=!0),d+=R,v&&b&&(h=[...h,...b])});let p={isMatch:f,score:f?d/this.chunks.length:1};return f&&n&&(p.indices=h),p}}class V{constructor(e){this.pattern=e}static isMultiMatch(e){return Pe(e,this.multiRegex)}static isSingleMatch(e){return Pe(e,this.singleRegex)}search(){}}function Pe(t,e){const s=t.match(e);return s?s[1]:null}class Fn extends V{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const s=e===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Tn extends V{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Vn extends V{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const s=e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class $n extends V{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const s=!e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class zn extends V{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const s=e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Bn extends V{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const s=!e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Pt extends V{constructor(e,{location:s=m.location,threshold:n=m.threshold,distance:o=m.distance,includeMatches:a=m.includeMatches,findAllMatches:i=m.findAllMatches,minMatchCharLength:c=m.minMatchCharLength,isCaseSensitive:l=m.isCaseSensitive,ignoreLocation:u=m.ignoreLocation}={}){super(e),this._bitapSearch=new Ot(e,{location:s,threshold:n,distance:o,includeMatches:a,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ft extends V{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let s=0,n;const o=[],a=this.pattern.length;for(;(n=e.indexOf(this.pattern,s))>-1;)s=n+a,o.push([n,s-1]);const i=!!o.length;return{isMatch:i,score:i?0:1,indices:o}}}const ve=[Fn,Ft,Vn,$n,Bn,zn,Tn,Pt],Fe=ve.length,Kn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Hn="|";function Wn(t,e={}){return t.split(Hn).map(s=>{let n=s.trim().split(Kn).filter(a=>a&&!!a.trim()),o=[];for(let a=0,i=n.length;a<i;a+=1){const c=n[a];let l=!1,u=-1;for(;!l&&++u<Fe;){const h=ve[u];let d=h.isMultiMatch(c);d&&(o.push(new h(d,e)),l=!0)}if(!l)for(u=-1;++u<Fe;){const h=ve[u];let d=h.isSingleMatch(c);if(d){o.push(new h(d,e));break}}}return o})}const Un=new Set([Pt.type,Ft.type]);class Xn{constructor(e,{isCaseSensitive:s=m.isCaseSensitive,includeMatches:n=m.includeMatches,minMatchCharLength:o=m.minMatchCharLength,ignoreLocation:a=m.ignoreLocation,findAllMatches:i=m.findAllMatches,location:c=m.location,threshold:l=m.threshold,distance:u=m.distance}={}){this.query=null,this.options={isCaseSensitive:s,includeMatches:n,minMatchCharLength:o,findAllMatches:i,ignoreLocation:a,location:c,threshold:l,distance:u},this.pattern=s?e:e.toLowerCase(),this.query=Wn(this.pattern,this.options)}static condition(e,s){return s.useExtendedSearch}searchIn(e){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:o}=this.options;e=o?e:e.toLowerCase();let a=0,i=[],c=0;for(let l=0,u=s.length;l<u;l+=1){const h=s[l];i.length=0,a=0;for(let d=0,f=h.length;d<f;d+=1){const p=h[d],{isMatch:x,indices:y,score:w}=p.search(e);if(x){if(a+=1,c+=w,n){const v=p.constructor.type;Un.has(v)?i=[...i,...y]:i.push(y)}}else{c=0,a=0,i.length=0;break}}if(a){let d={isMatch:!0,score:c/a};return n&&(d.indices=i),d}}return{isMatch:!1,score:1}}}const we=[];function Yn(...t){we.push(...t)}function be(t,e){for(let s=0,n=we.length;s<n;s+=1){let o=we[s];if(o.condition(t,e))return new o(t,e)}return new Ot(t,e)}const ne={AND:"$and",OR:"$or"},je={PATH:"$path",PATTERN:"$val"},Se=t=>!!(t[ne.AND]||t[ne.OR]),Gn=t=>!!t[je.PATH],Qn=t=>!O(t)&&Et(t)&&!Se(t),Te=t=>({[ne.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Tt(t,e,{auto:s=!0}={}){const n=o=>{let a=Object.keys(o);const i=Gn(o);if(!i&&a.length>1&&!Se(o))return n(Te(o));if(Qn(o)){const l=i?o[je.PATH]:a[0],u=i?o[je.PATTERN]:o[l];if(!D(u))throw new Error(bn(l));const h={keyId:ye(l),pattern:u};return s&&(h.searcher=be(u,e)),h}let c={children:[],operator:a[0]};return a.forEach(l=>{const u=o[l];O(u)&&u.forEach(h=>{c.children.push(n(h))})}),c};return Se(t)||(t=Te(t)),n(t)}function Jn(t,{ignoreFieldNorm:e=m.ignoreFieldNorm}){t.forEach(s=>{let n=1;s.matches.forEach(({key:o,norm:a,score:i})=>{const c=o?o.weight:null;n*=Math.pow(i===0&&c?Number.EPSILON:i,(c||1)*(e?1:a))}),s.score=n})}function Zn(t,e){const s=t.matches;e.matches=[],_(s)&&s.forEach(n=>{if(!_(n.indices)||!n.indices.length)return;const{indices:o,value:a}=n;let i={indices:o,value:a};n.key&&(i.key=n.key.src),n.idx>-1&&(i.refIndex=n.idx),e.matches.push(i)})}function qn(t,e){e.score=t.score}function er(t,e,{includeMatches:s=m.includeMatches,includeScore:n=m.includeScore}={}){const o=[];return s&&o.push(Zn),n&&o.push(qn),t.map(a=>{const{idx:i}=a,c={item:e[i],refIndex:i};return o.length&&o.forEach(l=>{l(a,c)}),c})}class G{constructor(e,s={},n){this.options={...m,...s},this.options.useExtendedSearch,this._keyStore=new Mn(this.options.keys),this.setCollection(e,n)}setCollection(e,s){if(this._docs=e,s&&!(s instanceof _e))throw new Error(wn);this._myIndex=s||Dt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){_(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const s=[];for(let n=0,o=this._docs.length;n<o;n+=1){const a=this._docs[n];e(a,n)&&(this.removeAt(n),n-=1,o-=1,s.push(a))}return s}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:s=-1}={}){const{includeMatches:n,includeScore:o,shouldSort:a,sortFn:i,ignoreFieldNorm:c}=this.options;let l=D(e)?D(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Jn(l,{ignoreFieldNorm:c}),a&&l.sort(i),_t(s)&&s>-1&&(l=l.slice(0,s)),er(l,this._docs,{includeMatches:n,includeScore:o})}_searchStringList(e){const s=be(e,this.options),{records:n}=this._myIndex,o=[];return n.forEach(({v:a,i,n:c})=>{if(!_(a))return;const{isMatch:l,score:u,indices:h}=s.searchIn(a);l&&o.push({item:a,idx:i,matches:[{score:u,value:a,norm:c,indices:h}]})}),o}_searchLogical(e){const s=Tt(e,this.options),n=(c,l,u)=>{if(!c.children){const{keyId:d,searcher:f}=c,p=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(l,d),searcher:f});return p&&p.length?[{idx:u,item:l,matches:p}]:[]}const h=[];for(let d=0,f=c.children.length;d<f;d+=1){const p=c.children[d],x=n(p,l,u);if(x.length)h.push(...x);else if(c.operator===ne.AND)return[]}return h},o=this._myIndex.records,a={},i=[];return o.forEach(({$:c,i:l})=>{if(_(c)){let u=n(s,c,l);u.length&&(a[l]||(a[l]={idx:l,item:c,matches:[]},i.push(a[l])),u.forEach(({matches:h})=>{a[l].matches.push(...h)}))}}),i}_searchObjectList(e){const s=be(e,this.options),{keys:n,records:o}=this._myIndex,a=[];return o.forEach(({$:i,i:c})=>{if(!_(i))return;let l=[];n.forEach((u,h)=>{l.push(...this._findMatches({key:u,value:i[h],searcher:s}))}),l.length&&a.push({idx:c,item:i,matches:l})}),a}_findMatches({key:e,value:s,searcher:n}){if(!_(s))return[];let o=[];if(O(s))s.forEach(({v:a,i,n:c})=>{if(!_(a))return;const{isMatch:l,score:u,indices:h}=n.searchIn(a);l&&o.push({score:u,key:e,value:a,idx:i,norm:c,indices:h})});else{const{v:a,n:i}=s,{isMatch:c,score:l,indices:u}=n.searchIn(a);c&&o.push({score:l,key:e,value:a,norm:i,indices:u})}return o}}G.version="7.0.0";G.createIndex=Dt;G.parseIndex=Ln;G.config=m;G.parseQuery=Tt;Yn(Xn);const tr=(t,e,s)=>e==="all"?t:e==="other"?t.filter(n=>{const o=n.language||"other";return s[o]<he}):t.filter(n=>n.language===e),sr=(t,e)=>e?t:t.filter(s=>s.capo===0),nr=(t,e)=>e==="all"?t:t.filter(s=>{var n;return((n=s.range)==null?void 0:n.semitones)!==void 0&&s.range.semitones>=e[0]&&s.range.semitones<=e[1]}),rr=(t,e)=>(s,n)=>{var a,i,c,l,u,h;let o;if(t==="range"){const d=((a=s.range)==null?void 0:a.semitones)??-1/0,f=((i=n.range)==null?void 0:i.semitones)??-1/0;o=d===f?s.title.localeCompare(n.title):d-f}else if(t==="dateAdded"){const d=(((c=s.dateAdded)==null?void 0:c.year)??0)*12+(((l=s.dateAdded)==null?void 0:l.month)??0),f=(((u=n.dateAdded)==null?void 0:u.year)??0)*12+(((h=n.dateAdded)==null?void 0:h.month)??0);o=d===f?s.title.localeCompare(n.title):d-f}else o=(s[t]??"").localeCompare(n[t]??"");return e==="ascending"?o:-o};function ar(t,e){const{field:s,order:n}=Rt(),{query:o,setQuery:a}=Ct(),{language:i,vocalRange:c,capo:l}=Re();g.useEffect(()=>{a("")},[s,n,a]);const u=g.useMemo(()=>{const f={includeScore:!0,keys:["artist","title","ascii_title","ascii_artist"],ignoreLocation:!0,threshold:.4};return new G(t,f)},[t]),h=g.useMemo(()=>o===""?t:u.search(o).map(f=>f.item),[u,t,o]);let d=sr(h,l);return d=nr(d,c),d=tr(d,i,e),o||(d=[...d].sort(rr(s,n))),{songs:d}}const or="scrollOffset";function fr(){const t=Ht(),{songs:e}=ar(t.songs,t.languages),s=g.useRef(null),[n,o]=g.useState(!0),[a,i]=es(or,{defaultValue:0,storageSync:!1});g.useEffect(()=>{s.current&&requestAnimationFrame(()=>{s.current.scrollTop=a})},[a]);const c=()=>{if(!s.current)return;const l=s.current.scrollTop;i(l),o(l===0||l<a)};return r.jsxs("div",{className:"h-dvh w-full no-scrollbar block",children:[r.jsx(gn,{songs:e,showToolbar:n,scrollOffset:a,fakeScroll:!0,maxRange:t.maxRange,languages:t.languages}),r.jsx("div",{ref:s,className:"sm:pt-20 pt-[72px] pb-4 overflow-auto h-full",onScroll:c,children:e.map(l=>r.jsx(Is,{song:l,maxRange:t.maxRange},l.id))})]})}export{fr as default};
//# sourceMappingURL=SongList-Df911e9s.js.map
