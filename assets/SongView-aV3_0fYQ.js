import{c as xt,r as Q,R as qt,n as Jt,g as xs,K as Uu,j as A,N as Ku,L as Wu,d as te,o as Vu,m as Yu,l as Xu}from"./index-ykfEEmcA.js";import{q as Qu,d as Xe,e as Qe,f as Ye,g as fe,o as Sn,n as _r,T as Ts,i as Es,j as ws,k as Os,r as Zu,p as Ju}from"./fancy-switch-cHFegbUD.js";import{B as Wt,a as qu}from"./index-DMJIkKHT.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=xt("AArrowDown",[["path",{d:"M3.5 13h6",key:"p1my2r"}],["path",{d:"m2 16 4.5-9 4.5 9",key:"ndf0b3"}],["path",{d:"M18 7v9",key:"pknjwm"}],["path",{d:"m14 12 4 4 4-4",key:"buelq4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=xt("AArrowUp",[["path",{d:"M3.5 13h6",key:"p1my2r"}],["path",{d:"m2 16 4.5-9 4.5 9",key:"ndf0b3"}],["path",{d:"M18 16V7",key:"ty0viw"}],["path",{d:"m14 11 4-4 4 4",key:"1pu57t"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=xt("ArrowBigDown",[["path",{d:"M15 6v6h4l-7 7-7-7h4V6h6z",key:"1thax2"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=xt("ArrowBigUpDash",[["path",{d:"M9 19h6",key:"456am0"}],["path",{d:"M9 15v-3H5l7-7 7 7h-4v3H9z",key:"1r2uve"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=xt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=xt("ChevronsLeftRightEllipsis",[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=xt("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=xt("Fullscreen",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["rect",{width:"10",height:"8",x:"7",y:"8",rx:"1",key:"vys8me"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=xt("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=xt("Guitar",[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.2 9.9C8.7 8.8 9.8 8 11 8c2.8 0 5 2.2 5 5 0 1.2-.8 2.3-1.9 2.8l-.9.4A2 2 0 0 0 12 18a4 4 0 0 1-4 4c-3.3 0-6-2.7-6-6a4 4 0 0 1 4-4 2 2 0 0 0 1.8-1.2z",key:"1u8q3z"}],["circle",{cx:"11.5",cy:"12.5",r:".5",fill:"currentColor",key:"16onso"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=xt("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=xt("MoveDiagonal",[["path",{d:"M11 19H5v-6",key:"8awifj"}],["path",{d:"M13 5h6v6",key:"7voy1q"}],["path",{d:"M19 5 5 19",key:"wwaj1z"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=xt("MoveHorizontal",[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=xt("PencilRuler",[["path",{d:"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13",key:"orapub"}],["path",{d:"m8 6 2-2",key:"115y1s"}],["path",{d:"m18 16 2-2",key:"ee94s4"}],["path",{d:"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17",key:"cfq27r"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=xt("Piano",[["path",{d:"M18.5 8c-1.4 0-2.6-.8-3.2-2A6.87 6.87 0 0 0 2 9v11a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-8.5C22 9.6 20.4 8 18.5 8",key:"lag0yf"}],["path",{d:"M2 14h20",key:"myj16y"}],["path",{d:"M6 14v4",key:"9ng0ue"}],["path",{d:"M10 14v4",key:"1v8uk5"}],["path",{d:"M14 14v4",key:"1tqops"}],["path",{d:"M18 14v4",key:"18uqwm"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=xt("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=xt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=xt("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);var Lt={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},da=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],ha=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],pa=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],Pt=typeof window<"u"&&typeof window.document<"u"?window.document:{},$t="fullscreenEnabled"in Pt&&Object.keys(Lt)||da[0]in Pt&&da||ha[0]in Pt&&ha||pa[0]in Pt&&pa||[],Zt={requestFullscreen:function(e){return e[$t[Lt.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[$t[Lt.requestFullscreen]]},get exitFullscreen(){return Pt[$t[Lt.exitFullscreen]].bind(Pt)},get fullscreenPseudoClass(){return":"+$t[Lt.fullscreen]},addEventListener:function(e,t,r){return Pt.addEventListener($t[Lt[e]],t,r)},removeEventListener:function(e,t,r){return Pt.removeEventListener($t[Lt[e]],t,r)},get fullscreenEnabled(){return!!Pt[$t[Lt.fullscreenEnabled]]},set fullscreenEnabled(e){},get fullscreenElement(){return Pt[$t[Lt.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return Pt[("on"+$t[Lt.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return Pt[("on"+$t[Lt.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return Pt[("on"+$t[Lt.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return Pt[("on"+$t[Lt.fullscreenerror]).toLowerCase()]=e}};function hc(){var e=Q.useState(!1),t=e[0],r=e[1],i=Q.useRef(null);Q.useEffect(function(){var s=function(){r(Zt.fullscreenElement===i.current)};return Zt.addEventListener("fullscreenchange",s),function(){return Zt.removeEventListener("fullscreenchange",s)}},[]);var h=Q.useCallback(function(){if(Zt.fullscreenElement)return Zt.exitFullscreen().then(function(){return Zt.requestFullscreen(i.current)});if(i.current)return Zt.requestFullscreen(i.current)},[]),S=Q.useCallback(function(){return Zt.fullscreenElement===i.current?Zt.exitFullscreen():Promise.resolve()},[]);return Q.useMemo(function(){return{active:t,enter:h,exit:S,node:i}},[t,h,S])}var pc=function(t){var r=t.handle,i=t.onChange,h=t.children,S=t.className,s=[];return S&&s.push(S),s.push("fullscreen"),r.active&&s.push("fullscreen-enabled"),Q.useEffect(function(){i&&i(r.active,r)},[r.active]),qt.createElement("div",{className:s.join(" "),ref:r.node,style:r.active?{height:"100%",width:"100%"}:void 0},h)};function mc(e,t,r){return Math.max(t,Math.min(e,r))}const lt={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function ma(e,t,r){return t===0||Math.abs(t)===1/0?Math.pow(e,r*5):e*t*r/(t+r*e)}function va(e,t,r,i=.15){return i===0?mc(e,t,r):e<t?-ma(t-e,r-t,i)+t:e>r?+ma(e-r,r-t,i)+r:e}function vc(e,[t,r],[i,h]){const[[S,s],[l,n]]=e;return[va(t,S,s,i),va(r,l,n,h)]}function gc(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yc(e){var t=gc(e,"string");return typeof t=="symbol"?t:String(t)}function yt(e,t,r){return t=yc(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ga(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),r.push.apply(r,i)}return r}function vt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ga(Object(r),!0).forEach(function(i){yt(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ga(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}const Ms={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function ya(e){return e?e[0].toUpperCase()+e.slice(1):""}const bc=["enter","leave"];function Sc(e=!1,t){return e&&!bc.includes(t)}function _c(e,t="",r=!1){const i=Ms[e],h=i&&i[t]||t;return"on"+ya(e)+ya(h)+(Sc(r,h)?"Capture":"")}const xc=["gotpointercapture","lostpointercapture"];function Tc(e){let t=e.substring(2).toLowerCase();const r=!!~t.indexOf("passive");r&&(t=t.replace("passive",""));const i=xc.includes(t)?"capturecapture":"capture",h=!!~t.indexOf(i);return h&&(t=t.replace("capture","")),{device:t,capture:h,passive:r}}function Ec(e,t=""){const r=Ms[e],i=r&&r[t]||t;return e+i}function Mr(e){return"touches"in e}function js(e){return Mr(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function wc(e){return Array.from(e.touches).filter(t=>{var r,i;return t.target===e.currentTarget||((r=e.currentTarget)===null||r===void 0||(i=r.contains)===null||i===void 0?void 0:i.call(r,t.target))})}function Oc(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function Ds(e){return Mr(e)?Oc(e)[0]:e}function _n(e,t){try{const r=t.clientX-e.clientX,i=t.clientY-e.clientY,h=(t.clientX+e.clientX)/2,S=(t.clientY+e.clientY)/2,s=Math.hypot(r,i);return{angle:-(Math.atan2(r,i)*180)/Math.PI,distance:s,origin:[h,S]}}catch{}return null}function Ac(e){return wc(e).map(t=>t.identifier)}function ba(e,t){const[r,i]=Array.from(e.touches).filter(h=>t.includes(h.identifier));return _n(r,i)}function ln(e){const t=Ds(e);return Mr(e)?t.identifier:t.pointerId}function Pe(e){const t=Ds(e);return[t.clientX,t.clientY]}const Sa=40,_a=800;function Ls(e){let{deltaX:t,deltaY:r,deltaMode:i}=e;return i===1?(t*=Sa,r*=Sa):i===2&&(t*=_a,r*=_a),[t,r]}function Cc(e){var t,r;const{scrollX:i,scrollY:h,scrollLeft:S,scrollTop:s}=e.currentTarget;return[(t=i??S)!==null&&t!==void 0?t:0,(r=h??s)!==null&&r!==void 0?r:0]}function Ic(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:r,altKey:i,metaKey:h,ctrlKey:S}=e;Object.assign(t,{shiftKey:r,altKey:i,metaKey:h,ctrlKey:S})}return t}function wr(e,...t){return typeof e=="function"?e(...t):e}function Pc(){}function Mc(...e){return e.length===0?Pc:e.length===1?e[0]:function(){let t;for(const r of e)t=r.apply(this,arguments)||t;return t}}function xa(e,t){return Object.assign({},t,e||{})}const jc=32;class Ns{constructor(t,r,i){this.ctrl=t,this.args=r,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:r,ingKey:i,args:h}=this;r[i]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=h,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const r=this.state,i=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=t.target,r.currentTarget=t.currentTarget,r.lastOffset=i.from?wr(i.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=t.timeStamp)}computeValues(t){const r=this.state;r._values=t,r.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:r,config:i,shared:h}=this;r.args=this.args;let S=0;if(t&&(r.event=t,i.preventDefault&&t.cancelable&&r.event.preventDefault(),r.type=t.type,h.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,h.locked=!!document.pointerLockElement,Object.assign(h,Ic(t)),h.down=h.pressed=h.buttons%2===1||h.touches>0,S=t.timeStamp-r.timeStamp,r.timeStamp=t.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const j=r._delta.map(Math.abs);lt.addTo(r._distance,j)}this.axisIntent&&this.axisIntent(t);const[s,l]=r._movement,[n,o]=i.threshold,{_step:u,values:d}=r;if(i.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(s)>=n&&d[0]),u[1]===!1&&(u[1]=Math.abs(l)>=o&&d[1])):(u[0]===!1&&(u[0]=Math.abs(s)>=n&&Math.sign(s)*n),u[1]===!1&&(u[1]=Math.abs(l)>=o&&Math.sign(l)*o)),r.intentional=u[0]!==!1||u[1]!==!1,!r.intentional)return;const p=[0,0];if(i.hasCustomTransform){const[j,G]=d;p[0]=u[0]!==!1?j-u[0]:0,p[1]=u[1]!==!1?G-u[1]:0}else p[0]=u[0]!==!1?s-u[0]:0,p[1]=u[1]!==!1?l-u[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(p);const v=r.offset,g=r._active&&!r._blocked||r.active;g&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=h[this.ingKey]=r._active,t&&(r.first&&("bounds"in i&&(r._bounds=wr(i.bounds,r)),this.setup&&this.setup()),r.movement=p,this.computeOffset()));const[y,_]=r.offset,[[E,w],[I,M]]=r._bounds;r.overflow=[y<E?-1:y>w?1:0,_<I?-1:_>M?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const D=r._active?i.rubberband||[0,0]:[0,0];if(r.offset=vc(r._bounds,r.offset,D),r.delta=lt.sub(r.offset,v),this.computeMovement(),g&&(!r.last||S>jc)){r.delta=lt.sub(r.offset,v);const j=r.delta.map(Math.abs);lt.addTo(r.distance,j),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&S>0&&(r.velocity=[j[0]/S,j[1]/S],r.timeDelta=S)}}emit(){const t=this.state,r=this.shared,i=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!i.triggerAllEvents)return;const h=this.handler(vt(vt(vt({},r),t),{},{[this.aliasKey]:t.values}));h!==void 0&&(t.memo=h)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Dc([e,t],r){const i=Math.abs(e),h=Math.abs(t);if(i>h&&i>r)return"x";if(h>i&&h>r)return"y"}class Ze extends Ns{constructor(...t){super(...t),yt(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=lt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=lt.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const r=this.state,i=this.config;if(!r.axis&&t){const h=typeof i.axisThreshold=="object"?i.axisThreshold[js(t)]:i.axisThreshold;r.axis=Dc(r._movement,h)}r._blocked=(i.lockDirection||!!i.axis)&&!r.axis||!!i.axis&&i.axis!==r.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const Lc=e=>e,Ta=.15,Rs={enabled(e=!0){return e},eventOptions(e,t,r){return vt(vt({},r.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[Ta,Ta];case!1:return[0,0];default:return lt.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return lt.toVector(e)},transform(e,t,r){const i=e||r.shared.transform;return this.hasCustomTransform=!!i,i||Lc},threshold(e){return lt.toVector(e,0)}},Nc=0,be=vt(vt({},Rs),{},{axis(e,t,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(e=Nc){return e},bounds(e={}){if(typeof e=="function")return S=>be.bounds(e(S));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:r=1/0,top:i=-1/0,bottom:h=1/0}=e;return[[t,r],[i,h]]}}),Ea={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class Rc extends Ze{constructor(...t){super(...t),yt(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const r=t._bounds.getBoundingClientRect(),i=t.currentTarget.getBoundingClientRect(),h={left:r.left-i.left+t.offset[0],right:r.right-i.right+t.offset[0],top:r.top-i.top+t.offset[1],bottom:r.bottom-i.bottom+t.offset[1]};t._bounds=be.bounds(h)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const r=this.config,i=this.state;if(t.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(t.buttons):r.pointerButtons!==-1&&r.pointerButtons!==t.buttons))return;const h=this.ctrl.setEventIds(t);r.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(h&&h.size>1&&i._pointerActive)&&(this.start(t),this.setupPointer(t),i._pointerId=ln(t),i._pointerActive=!0,this.computeValues(Pe(t)),this.computeInitial(),r.preventScrollAxis&&js(t)!=="mouse"?(i._active=!1,this.setupScrollPrevention(t)):r.delay>0?(this.setupDelayTrigger(t),r.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const r=this.state,i=this.config;if(!r._pointerActive)return;const h=ln(t);if(r._pointerId!==void 0&&h!==r._pointerId)return;const S=Pe(t);if(document.pointerLockElement===t.target?r._delta=[t.movementX,t.movementY]:(r._delta=lt.sub(S,r._values),this.computeValues(S)),lt.addTo(r._movement,r._delta),this.compute(t),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(t);return}if(i.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const r=this.state,i=this.config;if(!r._active||!r._pointerActive)return;const h=ln(t);if(r._pointerId!==void 0&&h!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[S,s]=r._distance;if(r.tap=S<=i.tapsThreshold&&s<=i.tapsThreshold,r.tap&&i.filterTaps)r._force=!0;else{const[l,n]=r._delta,[o,u]=r._movement,[d,p]=i.swipe.velocity,[v,g]=i.swipe.distance,y=i.swipe.duration;if(r.elapsedTime<y){const _=Math.abs(l/r.timeDelta),E=Math.abs(n/r.timeDelta);_>d&&Math.abs(o)>v&&(r.swipe[0]=Math.sign(l)),E>p&&Math.abs(u)>g&&(r.swipe[1]=Math.sign(n))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const r=this.config,i=r.device;r.pointerLock&&t.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,$c(t);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const r=Ea[t.key];if(r){const i=this.state,h=t.shiftKey?10:t.altKey?.1:1;this.start(t),i._delta=r(this.config.keyboardDisplacement,h),i._keyboardActive=!0,lt.addTo(i._movement,i._delta),this.compute(t),this.emit()}}keyUp(t){t.key in Ea&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const r=this.config.device;t(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(r,"change",this.pointerMove.bind(this)),t(r,"end",this.pointerUp.bind(this)),t(r,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function $c(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const Je=typeof window<"u"&&window.document&&window.document.createElement;function $s(){return Je&&"ontouchstart"in window}function Fc(){return $s()||Je&&window.navigator.maxTouchPoints>1}function Hc(){return Je&&"onpointerdown"in window}function kc(){return Je&&"exitPointerLock"in window.document}function Bc(){try{return"constructor"in GestureEvent}catch{return!1}}const Ft={isBrowser:Je,gesture:Bc(),touch:$s(),touchscreen:Fc(),pointer:Hc(),pointerLock:kc()},zc=250,Gc=180,Uc=.5,Kc=50,Wc=250,Vc=10,wa={mouse:0,touch:0,pen:8},Yc=vt(vt({},be),{},{device(e,t,{pointer:{touch:r=!1,lock:i=!1,mouse:h=!1}={}}){return this.pointerLock=i&&Ft.pointerLock,Ft.touch&&r?"touch":this.pointerLock?"mouse":Ft.pointer&&!h?"pointer":Ft.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&e?zc:void 0,!(!Ft.touchscreen||r===!1))return e||(r!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:r=!0,buttons:i=1,keys:h=!0}={}}){return this.pointerButtons=i,this.keys=h,!this.pointerLock&&this.device==="pointer"&&r},threshold(e,t,{filterTaps:r=!1,tapsThreshold:i=3,axis:h=void 0}){const S=lt.toVector(e,r?i:h?1:0);return this.filterTaps=r,this.tapsThreshold=i,S},swipe({velocity:e=Uc,distance:t=Kc,duration:r=Wc}={}){return{velocity:this.transform(lt.toVector(e)),distance:this.transform(lt.toVector(t)),duration:r}},delay(e=0){switch(e){case!0:return Gc;case!1:return 0;default:return e}},axisThreshold(e){return e?vt(vt({},wa),e):wa},keyboardDisplacement(e=Vc){return e}});function Fs(e){const[t,r]=e.overflow,[i,h]=e._delta,[S,s]=e._direction;(t<0&&i>0&&S<0||t>0&&i<0&&S>0)&&(e._movement[0]=e._movementBound[0]),(r<0&&h>0&&s<0||r>0&&h<0&&s>0)&&(e._movement[1]=e._movementBound[1])}const Xc=30,Qc=100;class Zc extends Ns{constructor(...t){super(...t),yt(this,"ingKey","pinching"),yt(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:r,lastOffset:i}=this.state;t==="wheel"?this.state.offset=lt.add(r,i):this.state.offset=[(1+r[0])*i[0],r[1]+i[1]]}computeMovement(){const{offset:t,lastOffset:r}=this.state;this.state.movement=[t[0]/r[0],t[1]-r[1]]}axisIntent(){const t=this.state,[r,i]=t._movement;if(!t.axis){const h=Math.abs(r)*Xc-Math.abs(i);h<0?t.axis="angle":h>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const r=this.state,i=this.ctrl.touchIds;if(r._active&&r._touchIds.every(S=>i.has(S))||i.size<2)return;this.start(t),r._touchIds=Array.from(i).slice(0,2);const h=ba(t,r._touchIds);h&&this.pinchStart(t,h)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const r=this.state,i=r._pointerEvents,h=this.ctrl.pointerIds;if(r._active&&Array.from(i.keys()).every(s=>h.has(s))||(i.size<2&&i.set(t.pointerId,t),r._pointerEvents.size<2))return;this.start(t);const S=_n(...Array.from(i.values()));S&&this.pinchStart(t,S)}pinchStart(t,r){const i=this.state;i.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const r=ba(t,this.state._touchIds);r&&this.pinchMove(t,r)}pointerMove(t){const r=this.state._pointerEvents;if(r.has(t.pointerId)&&r.set(t.pointerId,t),!this.state._active)return;const i=_n(...Array.from(r.values()));i&&this.pinchMove(t,i)}pinchMove(t,r){const i=this.state,h=i._values[1],S=r.angle-h;let s=0;Math.abs(S)>270&&(s+=Math.sign(S)),this.computeValues([r.distance,r.angle-360*s]),i.origin=r.origin,i.turns=s,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const r=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}r._pointerEvents.has(t.pointerId)&&r._pointerEvents.delete(t.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const r=this.state;r._active||(this.start(t),this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY];const i=r._movement;r._movement=[t.scale-1,t.rotation],r._delta=lt.sub(r._movement,i),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const r=this.config.modifierKey;r&&(Array.isArray(r)?!r.find(i=>t[i]):!t[r])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const i=this.state;i._delta=[-Ls(t)[1]/Qc*i.offset[0],0],lt.addTo(i._movement,i._delta),Fs(i),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const r=this.config.device;r&&(t(r,"start",this[r+"Start"].bind(this)),t(r,"change",this[r+"Move"].bind(this)),t(r,"end",this[r+"End"].bind(this)),t(r,"cancel",this[r+"End"].bind(this)),t("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const Jc=vt(vt({},Rs),{},{device(e,t,{shared:r,pointer:{touch:i=!1}={}}){if(r.target&&!Ft.touch&&Ft.gesture)return"gesture";if(Ft.touch&&i)return"touch";if(Ft.touchscreen){if(Ft.pointer)return"pointer";if(Ft.touch)return"touch"}},bounds(e,t,{scaleBounds:r={},angleBounds:i={}}){const h=s=>{const l=xa(wr(r,s),{min:-1/0,max:1/0});return[l.min,l.max]},S=s=>{const l=xa(wr(i,s),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof r!="function"&&typeof i!="function"?[h(),S()]:s=>[h(s),S(s)]},threshold(e,t,r){return this.lockDirection=r.axis==="lock",lt.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});class qc extends Ze{constructor(...t){super(...t),yt(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(Pe(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const r=Pe(t),i=this.state;i._delta=lt.sub(r,i._values),lt.addTo(i._movement,i._delta),this.computeValues(r),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const tl=vt(vt({},be),{},{mouseOnly:(e=!0)=>e});class el extends Ze{constructor(...t){super(...t),yt(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const r=this.state,i=Cc(t);r._delta=lt.sub(i,r._values),lt.addTo(r._movement,r._delta),this.computeValues(i),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const rl=be;class nl extends Ze{constructor(...t){super(...t),yt(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const r=this.state;r._delta=Ls(t),lt.addTo(r._movement,r._delta),Fs(r),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const al=be;class sl extends Ze{constructor(...t){super(...t),yt(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(Pe(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const i=Pe(t);r._movement=r._delta=lt.sub(i,r._values),this.computeValues(i),this.compute(t),r.delta=r.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const il=vt(vt({},be),{},{mouseOnly:(e=!0)=>e}),Dn=new Map,xn=new Map;function ol(e){Dn.set(e.key,e.engine),xn.set(e.key,e.resolver)}const ul={key:"drag",engine:Rc,resolver:Yc},cl={key:"hover",engine:sl,resolver:il},ll={key:"move",engine:qc,resolver:tl},fl={key:"pinch",engine:Zc,resolver:Jc},dl={key:"scroll",engine:el,resolver:rl},hl={key:"wheel",engine:nl,resolver:al};function pl(e,t){if(e==null)return{};var r={},i=Object.keys(e),h,S;for(S=0;S<i.length;S++)h=i[S],!(t.indexOf(h)>=0)&&(r[h]=e[h]);return r}function ml(e,t){if(e==null)return{};var r=pl(e,t),i,h;if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);for(h=0;h<S.length;h++)i=S[h],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}const vl={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=Ft.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},gl=["target","eventOptions","window","enabled","transform"];function xr(e={},t){const r={};for(const[i,h]of Object.entries(t))switch(typeof h){case"function":r[i]=h.call(r,e[i],i,e);break;case"object":r[i]=xr(e[i],h);break;case"boolean":h&&(r[i]=e[i]);break}return r}function yl(e,t,r={}){const i=e,{target:h,eventOptions:S,window:s,enabled:l,transform:n}=i,o=ml(i,gl);if(r.shared=xr({target:h,eventOptions:S,window:s,enabled:l,transform:n},vl),t){const u=xn.get(t);r[t]=xr(vt({shared:r.shared},o),u)}else for(const u in o){const d=xn.get(u);d&&(r[u]=xr(vt({shared:r.shared},o[u]),d))}return r}class Hs{constructor(t,r){yt(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=r}add(t,r,i,h,S){const s=this._listeners,l=Ec(r,i),n=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},o=vt(vt({},n),S);t.addEventListener(l,h,o);const u=()=>{t.removeEventListener(l,h,o),s.delete(u)};return s.add(u),u}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class bl{constructor(){yt(this,"_timeouts",new Map)}add(t,r,i=140,...h){this.remove(t),this._timeouts.set(t,window.setTimeout(r,i,...h))}remove(t){const r=this._timeouts.get(t);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class Sl{constructor(t){yt(this,"gestures",new Set),yt(this,"_targetEventStore",new Hs(this)),yt(this,"gestureEventStores",{}),yt(this,"gestureTimeoutStores",{}),yt(this,"handlers",{}),yt(this,"config",{}),yt(this,"pointerIds",new Set),yt(this,"touchIds",new Set),yt(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),_l(this,t)}setEventIds(t){if(Mr(t))return this.touchIds=new Set(Ac(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,r){this.handlers=t,this.nativeHandlers=r}applyConfig(t,r){this.config=yl(t,r,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const r=this.config.shared,i={};let h;if(!(r.target&&(h=r.target(),!h))){if(r.enabled){for(const s of this.gestures){const l=this.config[s],n=Oa(i,l.eventOptions,!!h);if(l.enabled){const o=Dn.get(s);new o(this,t,s).bind(n)}}const S=Oa(i,r.eventOptions,!!h);for(const s in this.nativeHandlers)S(s,"",l=>this.nativeHandlers[s](vt(vt({},this.state.shared),{},{event:l,args:t})),void 0,!0)}for(const S in i)i[S]=Mc(...i[S]);if(!h)return i;for(const S in i){const{device:s,capture:l,passive:n}=Tc(S);this._targetEventStore.add(h,s,"",i[S],{capture:l,passive:n})}}}}function Ce(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Hs(e,t),e.gestureTimeoutStores[t]=new bl}function _l(e,t){t.drag&&Ce(e,"drag"),t.wheel&&Ce(e,"wheel"),t.scroll&&Ce(e,"scroll"),t.move&&Ce(e,"move"),t.pinch&&Ce(e,"pinch"),t.hover&&Ce(e,"hover")}const Oa=(e,t,r)=>(i,h,S,s={},l=!1)=>{var n,o;const u=(n=s.capture)!==null&&n!==void 0?n:t.capture,d=(o=s.passive)!==null&&o!==void 0?o:t.passive;let p=l?i:_c(i,h,u);r&&d&&(p+="Passive"),e[p]=e[p]||[],e[p].push(S)},xl=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function Tl(e){const t={},r={},i=new Set;for(let h in e)xl.test(h)?(i.add(RegExp.lastMatch),r[h]=e[h]):t[h]=e[h];return[r,t,i]}function Ie(e,t,r,i,h,S){if(!e.has(r)||!Dn.has(i))return;const s=r+"Start",l=r+"End",n=o=>{let u;return o.first&&s in t&&t[s](o),r in t&&(u=t[r](o)),o.last&&l in t&&t[l](o),u};h[i]=n,S[i]=S[i]||{}}function El(e,t){const[r,i,h]=Tl(e),S={};return Ie(h,r,"onDrag","drag",S,t),Ie(h,r,"onWheel","wheel",S,t),Ie(h,r,"onScroll","scroll",S,t),Ie(h,r,"onPinch","pinch",S,t),Ie(h,r,"onMove","move",S,t),Ie(h,r,"onHover","hover",S,t),{handlers:S,config:t,nativeHandlers:i}}function wl(e,t={},r,i){const h=qt.useMemo(()=>new Sl(e),[]);if(h.applyHandlers(e,i),h.applyConfig(t,r),qt.useEffect(h.effect.bind(h)),qt.useEffect(()=>h.clean.bind(h),[]),t.target===void 0)return h.bind.bind(h)}function Ol(e){return e.forEach(ol),function(r,i){const{handlers:h,nativeHandlers:S,config:s}=El(r,i||{});return wl(h,s,void 0,S)}}function Al(e,t){return Ol([ul,fl,dl,hl,ll,cl])(e,t||{})}var ks={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,function(){return(()=>{var r,i,h,S,s,l,n,o={d:(L,f)=>{for(var b in f)o.o(f,b)&&!o.o(L,b)&&Object.defineProperty(L,b,{enumerable:!0,get:f[b]})},o:(L,f)=>Object.prototype.hasOwnProperty.call(L,f),r:L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})}},u={};o.r(u),o.d(u,{Chord:()=>I,ChordDiagram:()=>H,ChordLyricsPair:()=>K,ChordProFormatter:()=>Fe,ChordProParser:()=>J,FormatterSettings:()=>Yt,HtmlFormatter:()=>He,Key:()=>w,MusicAccidental:()=>h,MusicLetter:()=>i,MusicNote:()=>E,ParserWarning:()=>W,Song:()=>U,TextFormatter:()=>pe,TimeSignature:()=>B,Transposer:()=>at}),function(L){L.Lyrics="lyrics",L.Comment="comment",L.Empty="empty",L.Custom="custom",L.Tabs="tabs",L.Unknown="unknown"}(r||(r={}));class d{constructor(f){this._lineType=r.Unknown,this._lineType=f}get lineType(){return this._lineType}}class p extends d{constructor(f){super(r.Comment),this._comment=f}clone(){return new p(this._comment)}get comment(){return this._comment}}class v extends d{clone(){return new v}constructor(){super(r.Empty)}}class g extends d{constructor(f=[]){super(r.Lyrics),this._pairs=[],this._pairs=f}clone(){let f=[];return this._pairs.forEach(b=>{f.push(b.clone())}),new g(f)}get pairs(){return this._pairs}addPair(f){this._pairs.push(f)}}class y extends d{constructor(f){super(r.Tabs),this._value=f}clone(){return new y(this.value)}get value(){return this._value}}class _ extends d{constructor(f,b){super(r.Custom),this._name=f,this._value=b}clone(){return new _(this.name,this.value)}get name(){return this._name}get value(){return this._value}}class E{constructor(f,b=h.none){this.letter=f,this.accidental=b}toString(){return this.accidental===h.none?i[this.letter]:i[this.letter]+h[this.accidental]}clone(){return new E(this.letter,this.accidental)}static parse(f){if(!f)return;const b=f.trim().match(/^(?<letter>[A-G])(?<symbol>(#{1,2}|b{1,2}|x))?$/);if(!b||!b.groups)return;const x=b.groups.letter,P=i[x];if(P==null)return;let $=b.groups.symbol;$=="x"&&($="##");const tt=h[$];return new E(P,tt)}equals(f){return!!f&&f.toString()===this.toString()}}(function(L){L[L.A=0]="A",L[L.B=1]="B",L[L.C=2]="C",L[L.D=3]="D",L[L.E=4]="E",L[L.F=5]="F",L[L.G=6]="G"})(i||(i={})),function(L){L[L.b=0]="b",L[L.bb=1]="bb",L[L["#"]=2]="#",L[L["##"]=3]="##",L[L.none=4]="none"}(h||(h={}));class w{constructor(f,b=S.Major){this.note=f,this.mode=b}clone(){return new w(this.note.clone(),this.mode)}static parse(f){if(!f)return;const b=f.trim().match(/^(?<note>[A-G](#{1,2}|b{1,2}|x)?)(?<mode>m?)$/);if(!b||!b.groups)return;const x=E.parse(b.groups.note);if(x==null)return;const P=b.groups.mode==="m"?S.Minor:S.Major;return new w(x,P)}toString(){return this.note.toString()+(this.mode==S.Major?"":"m")}equals(f){return this.toString()==f.toString()}}(function(L){L[L.Major=0]="Major",L[L.Minor=1]="Minor"})(S||(S={}));class I{constructor(f,b="",x=null){this.key=f,this.type=b,this.bass=x}clone(){var f;return new I(this.key.clone(),this.type,(f=this.bass)===null||f===void 0?void 0:f.clone())}static parse(f){if(!f)return;const b=(f=f.trim()).match(I.chordRegex);if(!b||!b.groups)return;const x=b.groups.note,P=w.parse(x);if(P==null)return;const $=b.groups.type,tt=b.groups.bass,q=E.parse(tt);return new I(P,$,q)}toString(f=!0,b=!0){var x=this.key.toString();return f&&(x+=this.type),b&&this.bass&&(x+="/"+this.bass.toString()),x}toSimpleString(){return this.toString(!1,!1)}equals(f){return!!f&&f.toString()===this.toString()}}I.chordRegex=/^(?<note>[A-G](#{1,2}|b{1,2}|x)?(min|m(?!aj)|-)?)(?<type>(?!\/).*?)?(?:$|(?:\/(?<bass>[A-G](#{1,2}|b{1,2}|x)?)))$/,function(L){L.Lyrics="lyrics",L.Tabs="tabs",L.None="none"}(s||(s={}));class M{constructor(f){this._sectionType=s.None,this._lines=[],this._sectionType=f}get lines(){return this._lines}get sectionType(){return this._sectionType}}(function(L){L.Chorus="chorus",L.Verse="verse",L.Bridge="bridge",L.Custom="custom",L.None="none"})(l||(l={}));class D extends M{constructor(f){super(s.Lyrics),this._type=f}get type(){return this._type}addLine(f){this._lines.push(f)}}class j extends D{constructor(f,b,x=null){super(f),this._name=b,this._value=x}clone(){let f=new j(this.type,this._name,this._value);return this._lines.forEach(b=>{f.addLine(b.clone())}),f}get name(){return this._name}get value(){return this._value}}class G extends D{clone(){let f=new G;return this._lines.forEach(b=>{f.addLine(b.clone())}),f}constructor(){super(l.None)}}class O extends M{constructor(f=null){super(s.Tabs),this._value=null,this._value=f}clone(){let f=new O(this._value);return this._lines.forEach(b=>{f.addLine(b.clone())}),f}get value(){return this._value}addLine(f){this.lines.push(f)}}class B{constructor(f,b){this.topNumber=f,this.bottomNumber=b}toString(){return`${this.topNumber.toString()}/${this.bottomNumber.toString()}`}}class U{constructor(){this.title=null,this.subtitle=null,this.albums=[],this.artists=[],this.composers=[],this.arrangers=[],this.lyricists=[],this.year=null,this.copyright=null,this.key=null,this.capo=0,this.duration=null,this.time=null,this.tempo=null,this.customMetadatas=[],this.userDiagrams=[],this.rawContent="",this.sections=[]}getLyrics(){let f=[];return this.sections.forEach(b=>{b instanceof D&&b.lines.forEach(x=>{let P="";x instanceof g&&x.pairs.forEach($=>{$.lyrics&&(P+=$.lyrics)}),P=P.trim(),P&&f.push(P)})}),f}getAllChords(){let f=[];return this.sections.forEach(b=>{b instanceof D&&b.lines.forEach(x=>{x instanceof g&&x.pairs.forEach(P=>{if(P.hasChord()){const $=P.chord;f.push($)}})})}),f}getUniqueChords(){const f=this.getAllChords();let b=[];return f.forEach(x=>{b.find(P=>P.equals(x))||b.push(x)}),b}getPossibleKey(){const f=this.getAllChords();if(f.length==0)return;const b=f[0].key,x=f[f.length-1].key;if(b.equals(x))return b.clone();let P=[];f.forEach(ot=>{let ut=P.find(Ot=>Ot.key.equals(ot.key));ut?ut.count++:P.push({count:0,key:ot.key.clone()})}),P.sort((ot,ut)=>ut.count-ot.count);let $=P[0],tt=P.find(ot=>ot.key.equals(b)).count,q=P.find(ot=>ot.key.equals(x)).count;return $.count>tt&&$.count>q?$.key.clone():tt>q?b.clone():x.clone()}clone(){let f=new U;return f.albums=this.albums,f.arrangers=this.arrangers,f.artists=this.artists,f.capo=this.capo,f.composers=this.composers,f.copyright=this.copyright,f.customMetadatas=this.customMetadatas,f.duration=this.duration,f.lyricists=this.lyricists,f.rawContent=this.rawContent,f.subtitle=this.subtitle,f.tempo=this.tempo,f.title=this.title,f.year=this.year,this.time&&(f.time=new B(this.time.bottomNumber,this.time.topNumber)),this.key&&(f.key=this.key.clone()),this.userDiagrams.forEach(b=>{f.userDiagrams.push(b.clone())}),this.sections.forEach(b=>{f.sections.push(b.clone())}),f}}class H{constructor(f,b,x=[],P=1){this._chord=f,this._frets=b,this._fingers=x,this._variation=P}get chord(){return this._chord}get frets(){return this._frets}get fingers(){return this._fingers}get variation(){return this._variation}clone(){return new H(this._chord.clone(),[...this._frets],[...this._fingers],this.variation)}static parse(f){var b,x;const P=f.match(/^\{define: (?<chord>([A-G][#bx]{0,2})(.*?)(?: |(?:\/([A-G][#bx]{0,2})))) *base-fret (?<basefret>[1-9][0-9]?) *frets(?<frets>( [0-9xNn]){6})( *fingers(?<fingers>( [0-5]){6}))?\}$/);if(!P||P.length<1||!P.groups)return;const $=P.groups.chord,tt=parseInt(P.groups.basefret,10),q=(b=P.groups.fingers)===null||b===void 0?void 0:b.trim().split(" ").map(Number),ot=(x=P.groups.frets)===null||x===void 0?void 0:x.trim().split(" "),ut=[];ot.forEach(Et=>{const bt=parseInt(Et,10);let Z=isNaN(bt)?-1:bt;tt>1&&Z>0&&(Z+=tt-1),ut.push(Z)});const Ot=I.parse($);return Ot&&ut&&!isNaN(tt)?new H(Ot,ut,q):void 0}hasBarre(){return this.barre()>0}barre(){const f=this.frets.filter(x=>x!=0),b=this.fingers.filter(x=>x===1);return f.length<this.frets.length||b.length<=1?0:this.fretsRange()[0]}fretsRange(f=!0){const b=f?-1:0,x=this._frets.filter(P=>P>b);return[Math.min(...x),Math.max(...x)]}getRelativeFrets(){let f=this.fretsRange(!1),b=f[0],x=f[1];(b<1||x<4)&&(b=1);const P=-(b-1);return[b,this.tryMovingFrets(P)[1]]}tryMovingFrets(f){return f===0?[!0,this._frets]:f>this.fretsRange()[0]?[!1,this._frets]:[!0,this._frets.map(b=>b<1?b:b+f)]}}class K{constructor(f,b=null,x=null){this.lyrics=f,this.chord=b,this.text=x}clone(){var f;return new K(this.lyrics,(f=this.chord)===null||f===void 0?void 0:f.clone(),this.text)}hasChord(){return this.chord!==null}hasText(){return this.text!==null}static parse(f){const b=f.match(/\[(?<value>.*?)\]/);if(!b||!b.groups)return[!0,new K(f)];const x=b.groups.value,P=f.substring(x.length+2,f.length);return this.createChordLyricsPair(P,x)}static parseLine(f){const b=[],x=/\[(?<value>.*?)\]/g;if(!x.test(f))return b.push([!0,new K(f)]),b;let P;x.lastIndex=0;let $=0,tt=null;for(;P=x.exec(f);){const ot=f.substring($,P.index);ot&&b.push(this.createChordLyricsPair(ot,tt)),tt=P.groups.value,$=x.lastIndex}const q=f.substring($,f.length);return q&&b.push(this.createChordLyricsPair(q,tt)),b}static createChordLyricsPair(f,b){let x=null,P=null;b!=null&&b.startsWith("*")?P=b.substring(1,b.length):x=b?I.parse(b):null;const $=new K(f,x,P),tt=x!==void 0;return tt||($.text=b),[tt,$]}}class W{constructor(f,b){this._message=f,this._lineNumber=b}toString(){return`Warning: ${this._message} on line ${this._lineNumber}`}}class C{}C.ALBUM="album",C.ARRANGER="arranger",C.ARTIST="artist",C.CAPO="capo",C.COMMENT="comment",C.DEFINE="define",C.COMPOSER="composer",C.COPYRIGHT="copyright",C.DURATION="duration",C.END_OF_BRIDGE="end_of_bridge",C.END_OF_CHORUS="end_of_chorus",C.END_OF_TAB="end_of_tab",C.END_OF_VERSE="end_of_verse",C.KEY="key",C.LYRICIST="lyricist",C.START_OF_BRIDGE="start_of_bridge",C.START_OF_CHORUS="start_of_chorus",C.START_OF_TAB="start_of_tab",C.START_OF_VERSE="start_of_verse",C.SUBTITLE="subtitle",C.TEMPO="tempo",C.TIME="time",C.TITLE="title",C.YEAR="year",C.TITLE_SHORT="t",C.SUBTITLE_SHORT="st",C.COMMENT_SHORT="c",C.START_OF_CHORUS_SHORT="soc",C.END_OF_CHORUS_SHORT="eoc",C.START_OF_VERSE_SHORT="sov",C.END_OF_VERSE_SHORT="eov",C.START_OF_BRIDGE_SHORT="sob",C.END_OF_BRIDGE_SHORT="eob",C.START_OF_TAB_SHORT="sot",C.END_OF_TAB_SHORT="eot",C.META_TAGS=[C.ALBUM,C.ARRANGER,C.ARTIST,C.CAPO,C.COMPOSER,C.COPYRIGHT,C.DURATION,C.KEY,C.LYRICIST,C.TEMPO,C.TIME,C.TITLE,C.SUBTITLE,C.YEAR],C.START_BLOCK_TAGS=[C.START_OF_BRIDGE,C.START_OF_CHORUS,C.START_OF_TAB,C.START_OF_VERSE],C.END_BLOCK_TAGS=[C.END_OF_BRIDGE,C.END_OF_CHORUS,C.END_OF_TAB,C.END_OF_VERSE],function(L){L[L.Metadata=0]="Metadata",L[L.CustomMetadata=1]="CustomMetadata",L[L.StartOfBlock=2]="StartOfBlock",L[L.EndOfBlock=3]="EndOfBlock",L[L.Comment=4]="Comment",L[L.Define=5]="Define",L[L.Custom=6]="Custom",L[L.None=7]="None"}(n||(n={}));class V{constructor(){this._originalName="",this._value=null,this._type=n.None}get value(){return this._value}get type(){return this._type}get shortName(){return V.getShortName(this._originalName)}get longName(){return V.getLongName(this._originalName)}static getLongName(f){if(!f)return f;const b=this.ALIASES.find(x=>x.shortName===f);return b?b.longName:f}static getShortName(f){if(!f)return f;const b=this.ALIASES.find(x=>x.longName===f);return b?b.shortName:f}static parse(f){const b=f.trim();if(this.CUSTOM_META_TAG_REGEX.test(b)){let x=this.parseRegex(b,this.CUSTOM_META_TAG_REGEX);return x&&(x._type=n.Custom),x}if(this.META_TAG_REGEX.test(b)){let x=this.parseRegex(b,this.META_TAG_REGEX);return x&&(x._type=C.META_TAGS.find(P=>P===x.longName)?x._type=n.Metadata:x._type=n.CustomMetadata),x}if(this.TAG_REGEX.test(b)){let x=this.parseRegex(b,this.TAG_REGEX);if(x){if(C.META_TAGS.find(P=>P===x.longName))x._type=n.Metadata;else if(x.longName.startsWith("start_of_"))x._type=n.StartOfBlock;else if(x.longName.startsWith("end_of_"))x._type=n.EndOfBlock;else if(x.longName===C.DEFINE)x._type=n.Define;else{if(x.longName!==C.COMMENT)return;x._type=n.Comment}return x}}}static parseRegex(f,b){let x=new V;const P=f.trim().match(b);if(P&&P.groups)return P.groups.name?(x._originalName=P.groups.name,P.groups.value&&(x._value=P.groups.value),x):void 0}}V.ALIASES=[{shortName:C.TITLE_SHORT,longName:C.TITLE},{shortName:C.SUBTITLE_SHORT,longName:C.SUBTITLE},{shortName:C.COMMENT_SHORT,longName:C.COMMENT},{shortName:C.START_OF_BRIDGE_SHORT,longName:C.START_OF_BRIDGE},{shortName:C.END_OF_BRIDGE_SHORT,longName:C.END_OF_BRIDGE},{shortName:C.START_OF_CHORUS_SHORT,longName:C.START_OF_CHORUS},{shortName:C.END_OF_CHORUS_SHORT,longName:C.END_OF_CHORUS},{shortName:C.START_OF_VERSE_SHORT,longName:C.START_OF_VERSE},{shortName:C.END_OF_VERSE_SHORT,longName:C.END_OF_VERSE},{shortName:C.START_OF_TAB_SHORT,longName:C.START_OF_TAB},{shortName:C.END_OF_TAB_SHORT,longName:C.END_OF_TAB}],V.META_TAG_REGEX=/^meta:\s*(?<name>[^:\s]+)(\s*(?<value>.+))?$/,V.TAG_REGEX=/^(?<name>[^:\s]+)(:?\s*(?<value>.+))?$/,V.CUSTOM_META_TAG_REGEX=/^(?<name>x_[^:]+)(:?\s*(?<value>.+))?$/;class J{constructor(){this._currentLineIndex=0,this.TAG_REGEX=/\{(?<value>.*)\}/,this.TAB_LINE_REGEX=/^[aA-zZ]\|[^ ]+$/,this.CHORD_REGEX=/\[(.*?)\]/g,this.SPLIT_CHORD_REGEX=/(?=\[.*?\])/g,this._song=new U,this._currentSection=new G,this._currentSectionTagName=null,this._warnings=[]}get warnings(){return this._warnings}parse(f){if(!f.trim())return this.addWarning("The song sheet is empty"),new U;this._song.rawContent=f;const b=f.split(/\r\n|\r|\n/);for(;!b[0].trim();)b.splice(0,1);return b.forEach(x=>{this.parseLine(x),this._currentLineIndex++}),this.completeCurrentSection(),this._song.key,this._song}parseLine(f){if(f=f.trim())if(this.TAG_REGEX.test(f))this.parseTag(f);else switch(this._currentSection.sectionType){case s.Tabs:this.parseTabLine(f);break;case s.Lyrics:this.parseLyricsLine(f)}else this.addLine(new v)}parseTabLine(f){this._currentSection instanceof O?(this.TAB_LINE_REGEX.test(f)||this.addWarning("This tabs line is invalid. It must starts with the string name and a pipe."),this.addLine(new y(f))):this.addWarning("Internal error: wrong section type")}parseLyricsLine(f){if(this._currentSection instanceof D){const b=f.replace(this.CHORD_REGEX,"");/[\[\]\{\}]/.test(b)&&this.addWarning("The lyrics line contains invalid characters or unclosed chords.");const x=f.split(this.SPLIT_CHORD_REGEX),P=[];x.forEach(tt=>{const q=K.parse(tt);q[0]||(q[1].lyrics.trim()?this.addWarning(`Cannot parse the chord '${q[1].text}' before the lyrics '${q[1].lyrics.trim()}'`):this.addWarning(`Cannot parse the chord '${q[1].text}'`)),P.push(q[1])});const $=new g(P);this.addLine($)}else this.addWarning("Internal error: wrong section type")}parseTag(f){const b=f.match(this.TAG_REGEX);if(!b||!b.groups||!b.groups.value)return void this.addWarning("Invalid tag.");const x=V.parse(b.groups.value.trim());if(x)switch(x.type){case n.Metadata:this.parseMetadataTag(x.longName,x.value);break;case n.Comment:this.parseCommentTag(x.value);break;case n.Define:this.parseDefineTag(x.value);break;case n.Custom:this.parseCustomTag(x.longName,x.value);break;case n.CustomMetadata:this.parseCustomMetadataTag(x.longName,x.value);case n.StartOfBlock:this.parseStartOfBlockTag(x.longName,x.value);break;case n.EndOfBlock:this.parseEndOfBlockTag(x.longName);break;default:this.addWarning("Unknown tag type.")}else this.addWarning("Unknown or mal-formatted tag.")}parseCommentTag(f){f?this.addLine(new p(f)):this.addWarning("The comment tag must have a value")}parseDefineTag(f){if(!f)return void this.addWarning("The define tag must have a value");const b=H.parse(f);b?this._song.userDiagrams.push(b):this.addWarning("The define tag is invalid")}parseCustomTag(f,b){this.addLine(new _(f,b))}parseStartOfBlockTag(f,b){this._currentSectionTagName!==null&&this.addWarning(`The section tag ${this._currentSectionTagName} must be closed before starting a new section`),this.completeCurrentSection();const x=f.replace("start_of_","");this._currentSectionTagName=x;const P=C.START_BLOCK_TAGS.find($=>$===f);if(P)switch(P){case C.START_OF_BRIDGE:return void(this._currentSection=new j(l.Bridge,x,b));case C.START_OF_CHORUS:return void(this._currentSection=new j(l.Chorus,x,b));case C.START_OF_VERSE:return void(this._currentSection=new j(l.Verse,x,b));case C.START_OF_TAB:return void(this._currentSection=new O(b))}else this._currentSection=new j(l.Custom,x,b)}parseEndOfBlockTag(f){this._currentSectionTagName?(f.replace("end_of_","")!==this._currentSectionTagName&&this.addWarning("The end of section tag does not match the start of section tag."),this.completeCurrentSection()):this.addWarning("This end of section tag is useless and will be ignore.")}completeCurrentSection(){this._currentSection.lines.length>0&&this._song.sections.push(this._currentSection),this._currentSection=new G,this._currentSectionTagName=null}addLine(f){this._currentSection.sectionType!==s.Tabs||f instanceof y?this._currentSection.addLine(f):this.addWarning("Tabs section can only contains tabs lines")}parseMetadataTag(f,b){if(b&&b.trim())switch(f){case C.ALBUM:this._song.albums.push(b);break;case C.ARRANGER:this._song.arrangers.push(b);break;case C.ARTIST:this._song.artists.push(b);break;case C.CAPO:this.parseCapoMetadata(b);break;case C.COMPOSER:this._song.composers.push(b);break;case C.COPYRIGHT:this._song.copyright=b;break;case C.DURATION:this.parseDurationMetadata(b);break;case C.KEY:this.parseKeyMetadata(b);break;case C.LYRICIST:this._song.lyricists.push(b);break;case C.TEMPO:this.parseTempoMetadata(b);break;case C.TIME:this.parseTimeMetadata(b);break;case C.TITLE:this._song.title=b;break;case C.SUBTITLE:this._song.subtitle=b;break;case C.YEAR:this.parseYearMetadata(b);break;default:this.addWarning("Unknown metadata tag")}else this.addWarning("The metadata must have a value")}parseYearMetadata(f){const b=parseInt(f,10);isNaN(b)||b.toString().length!=4?this.addWarning("The year metadata must be a 4 digits number"):this._song.year=b}parseCapoMetadata(f){const b=parseInt(f,10);isNaN(b)?this.addWarning("The capo metadata must be a number"):this._song.capo=b}parseDurationMetadata(f){const b=f.match(/^((?<time>[0-9]+)|(?<minutes>[0-5]?[0-9]):(?<seconds>[0-5][0-9]))$/);if(!b||!b.groups)return void this.addWarning("The duration metadata is invalid. Must be a number or a time (eg: 5:30)");if(b.groups.time){const $=parseInt(f,10);this._song.duration=$}const x=b.groups.minutes,P=b.groups.seconds;x&&P?this._song.duration=60*parseInt(x,10)+parseInt(P):this.addWarning("The duration metadata time format is invalid")}parseTempoMetadata(f){const b=parseInt(f,10);isNaN(b)?this.addWarning("The tempo metadata must be a number"):this._song.tempo=b}parseKeyMetadata(f){const b=w.parse(f);b?this._song.key=b:this.addWarning("The key metadata is not a valid key")}parseTimeMetadata(f){const b=f.match(/^(?<top>[0-9]{1,2})\/(?<bottom>[0-9]{1,2})$/);if(!(b&&b.groups&&b.groups.top&&b.groups.bottom))return void this.addWarning("The time metadata is invalid. Must be number/number (eg: 6/8)");const x=parseInt(b.groups.top),P=parseInt(b.groups.bottom);this._song.time=new B(x,P)}parseCustomMetadataTag(f,b){this._song.customMetadatas.push([f,b])}addWarning(f){const b=new W(f,this._currentLineIndex+1);this._warnings.push(b)}}class it{static semiTonesBetween(f,b){if(f.equals(b))return 0;const x=this.notes.find(q=>q.letter==f.letter).value,P=this.notes.find(q=>q.letter==b.letter).value,$=this.accidentals.find(q=>q.accidental==f.accidental).value,tt=P+this.accidentals.find(q=>q.accidental==b.accidental).value-(x+$);return this.positiveMod(tt,12)}static letterDiff(f,b){if(f==b)return 0;const x=this.notes.find($=>$.letter==f).index,P=this.notes.find($=>$.letter==b).index;return this.positiveMod(P-x,7)}static transpose(f,b,x){if(b==0&&x==0)return f;b=this.positiveMod(b,7),x=this.positiveMod(x,12);let P=(this.notes.find(ut=>ut.letter==f.letter).index+b)%7,$=this.notes[P],tt=this.semiTonesBetween(f,new E($.letter)),q=x-tt;Math.abs(q)>2&&(P=q<0?this.positiveMod(--P,7):this.positiveMod(++P,7),$=this.notes[P],tt=this.semiTonesBetween(f,new E($.letter)),q=x-tt);const ot=this.accidentals.find(ut=>ut.value==q).accidental;return new E($.letter,ot)}static positiveMod(f,b){return(f%b+b)%b}}it.notes=[{letter:i.A,index:0,value:0},{letter:i.B,index:1,value:2},{letter:i.C,index:2,value:3},{letter:i.D,index:3,value:5},{letter:i.E,index:4,value:7},{letter:i.F,index:5,value:8},{letter:i.G,index:6,value:10}],it.accidentals=[{accidental:h.none,value:0},{accidental:h["#"],value:1},{accidental:h["##"],value:2},{accidental:h.b,value:-1},{accidental:h.bb,value:-2}];class at{static transpose(f,b){let x=f.clone(),P=x.key?x.key:x.getPossibleKey();if(!P)return f;const $=it.letterDiff(P.note.letter,b.letter),tt=it.semiTonesBetween(P.note,b);return P.note=b,x.sections.forEach((q,ot)=>{q.sectionType==s.Lyrics&&q.lines.forEach((ut,Ot)=>{ut instanceof g&&ut.pairs.forEach((Et,bt)=>{if(Et.chord){const Z=it.transpose(Et.chord.key.note,$,tt),Nt=Et.chord;if(Nt.key.note=Z,Et.chord.bass){const rt=it.transpose(Et.chord.bass,$,tt);Nt.bass=rt}x.sections[ot].lines[Ot].pairs[bt].chord=Nt}})})}),x}}class ft{static toMinutesSeconds(f){const b=Math.floor(f/60),x=f-60*b;return`${b.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}:${x.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}`}static toProperCase(f){return f.length<1?f:f.charAt(0).toUpperCase()+f.substring(1).toLocaleLowerCase()}}class X{constructor(){this.useSimpleChord=!1,this.showChords=!0}}class dt{constructor(f=new X){this.settings=f}writeMetadata(f,b){return b?`${ft.toProperCase(f)}: ${b}`:ft.toProperCase(f)}buildMetadataArray(f,b,x){const P=f.length>1?x:b,$=f.join(", ");return`${ft.toProperCase(P)}: ${$}`}titleMetadata(f){return[f]}subtitleMetadata(f){return[f]}artistsMetadata(f){return[f.join(", ")]}composersMetadata(f){return[this.buildMetadataArray(f,"Composer","Composers")]}lyricistsMetadata(f){return[this.buildMetadataArray(f,"Lyricist","Lyricists")]}arrangersMetadata(f){return[this.buildMetadataArray(f,"Arranger","Arrangers")]}yearMetadata(f){return[this.writeMetadata("Year",f.toString())]}copyrightMetadata(f){return[this.writeMetadata("Copyright",f)]}timeMetadata(f){return[this.writeMetadata("Time",f)]}tempoMetadata(f){return[this.writeMetadata("Tempo",f.toString())]}durationMetadata(f){return[this.writeMetadata("Duration",ft.toMinutesSeconds(f))]}capoMetadata(f){return[this.writeMetadata("Capo",f.toString())]}keyMetadata(f){return[this.writeMetadata("Key",f)]}customMetadatas(f){let b=[];return f.forEach(x=>{b.push(this.writeMetadata(x[0],x[1]))}),b}emptyLine(){return[""]}lyricsLine(f){let b="",x="",P=[];return f.pairs.forEach($=>{let tt=1;if(this.settings.showChords)if($.chord){let q=this.settings.useSimpleChord?$.chord.toSimpleString():$.chord.toString();b+=q,tt=$.lyrics.length-q.length}else $.text?(b+=$.text,tt=$.lyrics.length-$.text.length):tt=$.lyrics.length;tt>0?(b+=" ".repeat(tt),x+=$.lyrics):(b+=" ",x+=$.lyrics+" ".repeat(Math.abs(tt)+1))}),b=b.trimEnd(),x=x.trimEnd(),b&&P.push(b),x&&P.push(x),P}commentLine(f){return["#"+f.comment]}tabLine(f){return[f.value]}customLine(f){return[]}sectionStart(f){return(f instanceof j||f instanceof O)&&f.value?[f.value]:[]}sectionEnd(f){return[]}metadataStart(){return["*".repeat(10)]}metadataEnd(){return["*".repeat(10)]}contentStart(){return[]}contentEnd(){return[]}}class Tt{constructor(f=new X){this.settings=f}buildMetadata(f,b){return b?`{${f}: ${b}}`:`{${f}}`}buildMetadatas(f,b){let x=[];return b.forEach(P=>{x.push(this.buildMetadata(f,P))}),x}titleMetadata(f){return[this.buildMetadata("title",f)]}subtitleMetadata(f){return[this.buildMetadata("subtitle",f)]}artistsMetadata(f){return this.buildMetadatas("artist",f)}composersMetadata(f){return this.buildMetadatas("composer",f)}lyricistsMetadata(f){return this.buildMetadatas("lyricist",f)}arrangersMetadata(f){return this.buildMetadatas("arranger",f)}yearMetadata(f){return[this.buildMetadata("year",f.toString())]}copyrightMetadata(f){return[this.buildMetadata("copyright",f)]}timeMetadata(f){return[this.buildMetadata("time",f)]}tempoMetadata(f){return[this.buildMetadata("tempo",f.toString())]}durationMetadata(f){return[this.buildMetadata("duration",ft.toMinutesSeconds(f))]}capoMetadata(f){return[this.buildMetadata("capo",f.toString())]}keyMetadata(f){return[this.buildMetadata("key",f)]}customMetadatas(f){let b=[];return f.forEach(x=>{b.push(this.buildMetadata(x[0].toLowerCase(),x[1]))}),b}emptyLine(){return[""]}lyricsLine(f){let b="";return f.pairs.forEach(x=>{if(this.settings.showChords)if(x.chord){let P=this.settings.useSimpleChord?x.chord.toSimpleString():x.chord.toString();b+=`[${P}]${x.lyrics}`}else x.text?b+=`[*${x.text}]${x.lyrics}`:b+=x.lyrics;else b+=x.lyrics}),[b.trim()]}commentLine(f){return[this.buildMetadata("comment",f.comment)]}tabLine(f){return[f.value]}customLine(f){return[this.buildMetadata(f.name,f.value)]}sectionStart(f){if(f instanceof j||f instanceof O){let b=f instanceof O?"tab":f.name;return[this.buildMetadata("start_of_"+b,f.value)]}return[]}sectionEnd(f){if(f instanceof j||f instanceof O){let b=f instanceof O?"tab":f.name;return[this.buildMetadata("end_of_"+b,null)]}return[]}metadataStart(){return[]}metadataEnd(){return[]}contentStart(){return[]}contentEnd(){return[]}}class Mt{constructor(f){this.value=f}toStringLines(){return[this.value]}}class St{constructor(f,b,...x){this.classNames=[],this.innerHtml=[],this.tag=f,this.innerHtml=x,this.classNames=b}toStringLines(){const f=[];return f.push(`<${this.tag} class="${this.classNames.join(" ")}">`),this.innerHtml.forEach(b=>{f.push(...b.toStringLines())}),f.push(`</${this.tag}>`),f}addElement(...f){this.innerHtml.push(...f)}addString(f){this.innerHtml.push(new Mt(f))}}class re{constructor(f=new X){this.settings=f}buildHtmlElement(f,b,x=[]){return`<${f} class="${x.join(" ")}">${b}</${f}>`}titleMetadata(f){return[this.buildHtmlElement("h1",f,["metadata","title-metadata"])]}subtitleMetadata(f){return[this.buildHtmlElement("h2",f,["metadata","subtitle-metadata"])]}artistsMetadata(f){return[this.buildHtmlElement("h3",f.join(", "),["metadata","artist-metadata"])]}composersMetadata(f){const b=f.length>1?"Composers":"Composer";return[this.buildHtmlElement("div",b+": "+f.join(", "),["metadata","composer-metadata"])]}lyricistsMetadata(f){const b=f.length>1?"Lyricists":"Lyricist";return[this.buildHtmlElement("div",b+": "+f.join(", "),["metadata","lyricist-metadata"])]}arrangersMetadata(f){const b=f.length>1?"Arrangers":"Arranger";return[this.buildHtmlElement("div",b+": "+f.join(", "),["metadata","arranger-metadata"])]}yearMetadata(f){return[this.buildHtmlElement("div","Year: "+f,["metadata","year-metadata"])]}copyrightMetadata(f){return[this.buildHtmlElement("div","Copyright: "+f,["metadata","copyright-metadata"])]}timeMetadata(f){return[this.buildHtmlElement("div","Time: "+f,["metadata","time-metadata"])]}tempoMetadata(f){return[this.buildHtmlElement("div","Tempo: "+f,["metadata","tempo-metadata"])]}durationMetadata(f){return[this.buildHtmlElement("div","Duration: "+ft.toMinutesSeconds(f),["metadata","duration-metadata"])]}capoMetadata(f){return[this.buildHtmlElement("div","Capo: "+f,["metadata","capo-metadata"])]}keyMetadata(f){return[this.buildHtmlElement("div","Key: "+f,["metadata","key-metadata"])]}customMetadatas(f){let b=[];const x=["metadata","custom-metadata"];return f.forEach(P=>{b.push(this.buildHtmlElement("div",ft.toProperCase(P[0])+": "+P[1],x))}),b}emptyLine(){return[this.buildHtmlElement("div","",["line","empty-line"])]}createWordElement(...f){return f.map(b=>b.toStringLines()).join("").trim()?new St("div",["word"],...f):new Mt("")}createChordElement(f,b){let x=["above-lyrics"];b?x.push("chord"):x.push("annotation");let P=new St("span",x);return P.addString(f),P}createLyricsElement(f){let b=new St("span",["lyrics"]);return b.addString(f),b}createChordLyricsElement(f,b,x){if(!this.settings.showChords&&x=="&nbsp;")return new Mt("");let P=new St("div",["chord-lyrics"]);return this.settings.showChords&&P.addElement(this.createChordElement(f,b)),x&&P.addElement(this.createLyricsElement(x)),P}lyricsLine(f){let b=f.pairs.map($=>$.lyrics).join("").trim();if(!this.settings.showChords&&!b)return[];let x=new St("div",["lyrics-line"]),P=[];if(f.pairs.forEach(($,tt)=>{let q=$.chord!=null||$.text!=null,ot=$.chord!=null,ut="";$.chord?ut=this.settings.useSimpleChord?$.chord.toSimpleString():$.chord.toString():$.text&&(ut=$.text);let Ot=q?$.lyrics:$.lyrics.trimStart();Ot=Ot.replace(/ +/g," ");let Et=Ot.split(" "),bt=Et.shift(),Z=Et.pop();if(bt==""){if(P.length>0){let It=this.createWordElement(...P);x.addElement(It),P=[]}bt="&nbsp;",Et.length>0&&(bt+=Et.shift())}b||(bt=void 0);var Nt=q?this.createChordLyricsElement(ut,ot,bt):this.createLyricsElement(bt);if(P.push(Nt),Z==null&&tt<f.pairs.length-1)return;let rt=this.createWordElement(...P);x.addElement(rt),P=[],Et.forEach(It=>{let Ht=this.createLyricsElement(It),ke=this.createWordElement(Ht);x.addElement(ke)}),Z!=""&&Z!=null&&(P.push(this.createLyricsElement(Z)),f.pairs.length)}),P.length>0){let $=this.createWordElement(...P);x.addElement($),P=[]}return x.toStringLines()}commentLine(f){return[this.buildHtmlElement("div",f.comment,["line","comment-line"])]}tabLine(f){return[this.buildHtmlElement("div",f.value,["line","tab-line"])]}customLine(f){const b=["metadata","custom-metadata",f.name];return[this.buildHtmlElement("div",f.value?f.value:"",b)]}sectionStart(f){let b=[];if(f instanceof j||f instanceof O){let x="tab";if(f instanceof j)switch(f.type){case l.Chorus:x="chorus";break;case l.Verse:x="verse";break;case l.Bridge:x="bridge";break;case l.Custom:x="custom"}if(b.push(`<div class="section ${x}-section">`),f.value){const P=["section-title"];b.push(this.buildHtmlElement("div",f.value,P))}}return b}sectionEnd(f){return f instanceof j||f instanceof O?["</div>"]:[]}metadataStart(){return[`<div class=${["song-metadata"].join(" ")}>`]}metadataEnd(){return["</div>"]}contentStart(){return[`<div class=${["song-content"].join(" ")}>`]}contentEnd(){return["</div>"]}}class he{constructor(f){this._lines=[],this._builder=f}format(f){return this.settings.showMetadata&&this.formatMetadata(f),this._lines.push(...this._builder.contentStart()),f.sections.forEach(b=>{(this.settings.showTabs||b.sectionType!=s.Tabs)&&(this._lines.push(...this._builder.sectionStart(b)),b.lines.forEach(x=>{x instanceof v?this._lines.push(...this._builder.emptyLine()):x instanceof g?this._lines.push(...this._builder.lyricsLine(x)):x instanceof y?this._lines.push(...this._builder.tabLine(x)):x instanceof p&&this._lines.push(...this._builder.commentLine(x))}),this._lines.push(...this._builder.sectionEnd(b)))}),this._lines.push(...this._builder.contentEnd()),this._lines}formatMetadata(f){var b,x,P;this._lines.push(...this._builder.metadataStart()),!((b=f.title)===null||b===void 0)&&b.trim()&&this._lines.push(...this._builder.titleMetadata(f.title)),!((x=f.subtitle)===null||x===void 0)&&x.trim()&&this._lines.push(...this._builder.subtitleMetadata(f.subtitle)),f.artists.length>0&&this._lines.push(...this._builder.artistsMetadata(f.artists)),f.composers.length>0&&this._lines.push(...this._builder.composersMetadata(f.composers)),f.lyricists.length>0&&this._lines.push(...this._builder.lyricistsMetadata(f.lyricists)),f.arrangers.length>0&&this._lines.push(...this._builder.arrangersMetadata(f.arrangers)),!((P=f.copyright)===null||P===void 0)&&P.trim()&&this._lines.push(...this._builder.copyrightMetadata(f.copyright)),f.time&&this._lines.push(...this._builder.timeMetadata(`${f.time.topNumber}/${f.time.bottomNumber}`)),f.tempo&&f.tempo>0&&this._lines.push(...this._builder.tempoMetadata(f.tempo)),f.year&&this._lines.push(...this._builder.yearMetadata(f.year)),f.duration&&f.duration>0&&this._lines.push(...this._builder.durationMetadata(f.duration)),f.key&&this._lines.push(...this._builder.keyMetadata(f.key.toString())),f.capo&&f.capo>0&&this._lines.push(...this._builder.capoMetadata(f.capo)),f.customMetadatas.length>0&&this._lines.push(...this._builder.customMetadatas(f.customMetadatas)),this._lines.push(...this._builder.metadataEnd())}}class Yt extends X{constructor(){super(...arguments),this.showMetadata=!0,this.showTabs=!0}}class Fe extends he{constructor(f=new Yt){super(new Tt(f)),this.settings=f}}class He extends he{constructor(f=new Yt){super(new re(f)),this.settings=f}}class pe extends he{constructor(f=new Yt){super(new dt(f)),this.settings=f}}return u})()})})(ks);var Tn=ks.exports,Bs={exports:{}};(function(e,t){(function(i,h){e.exports=h()})(typeof self<"u"?self:Jt,()=>(()=>{var r={8552:(s,l,n)=>{var o=n(852),u=n(5639),d=o(u,"DataView");s.exports=d},1989:(s,l,n)=>{var o=n(1789),u=n(401),d=n(7667),p=n(1327),v=n(1866);function g(y){var _=-1,E=y==null?0:y.length;for(this.clear();++_<E;){var w=y[_];this.set(w[0],w[1])}}g.prototype.clear=o,g.prototype.delete=u,g.prototype.get=d,g.prototype.has=p,g.prototype.set=v,s.exports=g},8407:(s,l,n)=>{var o=n(7040),u=n(4125),d=n(2117),p=n(7518),v=n(4705);function g(y){var _=-1,E=y==null?0:y.length;for(this.clear();++_<E;){var w=y[_];this.set(w[0],w[1])}}g.prototype.clear=o,g.prototype.delete=u,g.prototype.get=d,g.prototype.has=p,g.prototype.set=v,s.exports=g},7071:(s,l,n)=>{var o=n(852),u=n(5639),d=o(u,"Map");s.exports=d},3369:(s,l,n)=>{var o=n(4785),u=n(1285),d=n(6e3),p=n(9916),v=n(5265);function g(y){var _=-1,E=y==null?0:y.length;for(this.clear();++_<E;){var w=y[_];this.set(w[0],w[1])}}g.prototype.clear=o,g.prototype.delete=u,g.prototype.get=d,g.prototype.has=p,g.prototype.set=v,s.exports=g},3818:(s,l,n)=>{var o=n(852),u=n(5639),d=o(u,"Promise");s.exports=d},8525:(s,l,n)=>{var o=n(852),u=n(5639),d=o(u,"Set");s.exports=d},8668:(s,l,n)=>{var o=n(3369),u=n(619),d=n(2385);function p(v){var g=-1,y=v==null?0:v.length;for(this.__data__=new o;++g<y;)this.add(v[g])}p.prototype.add=p.prototype.push=u,p.prototype.has=d,s.exports=p},6384:(s,l,n)=>{var o=n(8407),u=n(7465),d=n(3779),p=n(7599),v=n(4758),g=n(4309);function y(_){var E=this.__data__=new o(_);this.size=E.size}y.prototype.clear=u,y.prototype.delete=d,y.prototype.get=p,y.prototype.has=v,y.prototype.set=g,s.exports=y},2705:(s,l,n)=>{var o=n(5639),u=o.Symbol;s.exports=u},1149:(s,l,n)=>{var o=n(5639),u=o.Uint8Array;s.exports=u},577:(s,l,n)=>{var o=n(852),u=n(5639),d=o(u,"WeakMap");s.exports=d},6874:s=>{function l(n,o,u){switch(u.length){case 0:return n.call(o);case 1:return n.call(o,u[0]);case 2:return n.call(o,u[0],u[1]);case 3:return n.call(o,u[0],u[1],u[2])}return n.apply(o,u)}s.exports=l},7412:s=>{function l(n,o){for(var u=-1,d=n==null?0:n.length;++u<d&&o(n[u],u,n)!==!1;);return n}s.exports=l},4963:s=>{function l(n,o){for(var u=-1,d=n==null?0:n.length,p=0,v=[];++u<d;){var g=n[u];o(g,u,n)&&(v[p++]=g)}return v}s.exports=l},7443:(s,l,n)=>{var o=n(2118);function u(d,p){var v=d==null?0:d.length;return!!v&&o(d,p,0)>-1}s.exports=u},1196:s=>{function l(n,o,u){for(var d=-1,p=n==null?0:n.length;++d<p;)if(u(o,n[d]))return!0;return!1}s.exports=l},4636:(s,l,n)=>{var o=n(2545),u=n(5694),d=n(1469),p=n(4144),v=n(5776),g=n(6719),y=Object.prototype,_=y.hasOwnProperty;function E(w,I){var M=d(w),D=!M&&u(w),j=!M&&!D&&p(w),G=!M&&!D&&!j&&g(w),O=M||D||j||G,B=O?o(w.length,String):[],U=B.length;for(var H in w)(I||_.call(w,H))&&!(O&&(H=="length"||j&&(H=="offset"||H=="parent")||G&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||v(H,U)))&&B.push(H);return B}s.exports=E},9932:s=>{function l(n,o){for(var u=-1,d=n==null?0:n.length,p=Array(d);++u<d;)p[u]=o(n[u],u,n);return p}s.exports=l},2488:s=>{function l(n,o){for(var u=-1,d=o.length,p=n.length;++u<d;)n[p+u]=o[u];return n}s.exports=l},2908:s=>{function l(n,o){for(var u=-1,d=n==null?0:n.length;++u<d;)if(o(n[u],u,n))return!0;return!1}s.exports=l},4865:(s,l,n)=>{var o=n(9465),u=n(7813),d=Object.prototype,p=d.hasOwnProperty;function v(g,y,_){var E=g[y];(!(p.call(g,y)&&u(E,_))||_===void 0&&!(y in g))&&o(g,y,_)}s.exports=v},8470:(s,l,n)=>{var o=n(7813);function u(d,p){for(var v=d.length;v--;)if(o(d[v][0],p))return v;return-1}s.exports=u},4037:(s,l,n)=>{var o=n(8363),u=n(3674);function d(p,v){return p&&o(v,u(v),p)}s.exports=d},3886:(s,l,n)=>{var o=n(8363),u=n(1704);function d(p,v){return p&&o(v,u(v),p)}s.exports=d},9465:(s,l,n)=>{var o=n(8777);function u(d,p,v){p=="__proto__"&&o?o(d,p,{configurable:!0,enumerable:!0,value:v,writable:!0}):d[p]=v}s.exports=u},5990:(s,l,n)=>{var o=n(6384),u=n(7412),d=n(4865),p=n(4037),v=n(3886),g=n(4626),y=n(278),_=n(8805),E=n(1911),w=n(8234),I=n(6904),M=n(4160),D=n(3824),j=n(9148),G=n(8517),O=n(1469),B=n(4144),U=n(6688),H=n(3218),K=n(2928),W=n(3674),C=n(1704),V=1,J=2,it=4,at="[object Arguments]",ft="[object Array]",X="[object Boolean]",dt="[object Date]",Tt="[object Error]",Mt="[object Function]",St="[object GeneratorFunction]",re="[object Map]",he="[object Number]",Yt="[object Object]",Fe="[object RegExp]",He="[object Set]",pe="[object String]",L="[object Symbol]",f="[object WeakMap]",b="[object ArrayBuffer]",x="[object DataView]",P="[object Float32Array]",$="[object Float64Array]",tt="[object Int8Array]",q="[object Int16Array]",ot="[object Int32Array]",ut="[object Uint8Array]",Ot="[object Uint8ClampedArray]",Et="[object Uint16Array]",bt="[object Uint32Array]",Z={};Z[at]=Z[ft]=Z[b]=Z[x]=Z[X]=Z[dt]=Z[P]=Z[$]=Z[tt]=Z[q]=Z[ot]=Z[re]=Z[he]=Z[Yt]=Z[Fe]=Z[He]=Z[pe]=Z[L]=Z[ut]=Z[Ot]=Z[Et]=Z[bt]=!0,Z[Tt]=Z[Mt]=Z[f]=!1;function Nt(rt,It,Ht,ke,Se,zt){var wt,_e=It&V,xe=It&J,me=It&it;if(Ht&&(wt=Se?Ht(rt,ke,Se,zt):Ht(rt)),wt!==void 0)return wt;if(!H(rt))return rt;var nt=O(rt);if(nt){if(wt=D(rt),!_e)return y(rt,wt)}else{var Gt=M(rt),kt=Gt==Mt||Gt==St;if(B(rt))return g(rt,_e);if(Gt==Yt||Gt==at||kt&&!Se){if(wt=xe||kt?{}:G(rt),!_e)return xe?E(rt,v(wt,rt)):_(rt,p(wt,rt))}else{if(!Z[Gt])return Se?rt:{};wt=j(rt,Gt,_e)}}zt||(zt=new o);var Te=zt.get(rt);if(Te)return Te;zt.set(rt,wt),K(rt)?rt.forEach(function(Bt){wt.add(Nt(Bt,It,Ht,Bt,rt,zt))}):U(rt)&&rt.forEach(function(Bt,F){wt.set(F,Nt(Bt,It,Ht,F,rt,zt))});var Wr=me?xe?I:w:xe?C:W,ir=nt?void 0:Wr(rt);return u(ir||rt,function(Bt,F){ir&&(F=Bt,Bt=rt[F]),d(wt,F,Nt(Bt,It,Ht,F,rt,zt))}),wt}s.exports=Nt},3118:(s,l,n)=>{var o=n(3218),u=Object.create,d=function(){function p(){}return function(v){if(!o(v))return{};if(u)return u(v);p.prototype=v;var g=new p;return p.prototype=void 0,g}}();s.exports=d},731:(s,l,n)=>{var o=n(8668),u=n(7443),d=n(1196),p=n(9932),v=n(1717),g=n(4757),y=200;function _(E,w,I,M){var D=-1,j=u,G=!0,O=E.length,B=[],U=w.length;if(!O)return B;I&&(w=p(w,v(I))),M?(j=d,G=!1):w.length>=y&&(j=g,G=!1,w=new o(w));t:for(;++D<O;){var H=E[D],K=I==null?H:I(H);if(H=M||H!==0?H:0,G&&K===K){for(var W=U;W--;)if(w[W]===K)continue t;B.push(H)}else j(w,K,M)||B.push(H)}return B}s.exports=_},1848:s=>{function l(n,o,u,d){for(var p=n.length,v=u+(d?1:-1);d?v--:++v<p;)if(o(n[v],v,n))return v;return-1}s.exports=l},1078:(s,l,n)=>{var o=n(2488),u=n(7285);function d(p,v,g,y,_){var E=-1,w=p.length;for(g||(g=u),_||(_=[]);++E<w;){var I=p[E];v>0&&g(I)?v>1?d(I,v-1,g,y,_):o(_,I):y||(_[_.length]=I)}return _}s.exports=d},8483:(s,l,n)=>{var o=n(5063),u=o();s.exports=u},7816:(s,l,n)=>{var o=n(8483),u=n(3674);function d(p,v){return p&&o(p,v,u)}s.exports=d},7786:(s,l,n)=>{var o=n(1811),u=n(327);function d(p,v){v=o(v,p);for(var g=0,y=v.length;p!=null&&g<y;)p=p[u(v[g++])];return g&&g==y?p:void 0}s.exports=d},8866:(s,l,n)=>{var o=n(2488),u=n(1469);function d(p,v,g){var y=v(p);return u(p)?y:o(y,g(p))}s.exports=d},4239:(s,l,n)=>{var o=n(2705),u=n(9607),d=n(2333),p="[object Null]",v="[object Undefined]",g=o?o.toStringTag:void 0;function y(_){return _==null?_===void 0?v:p:g&&g in Object(_)?u(_):d(_)}s.exports=y},13:s=>{function l(n,o){return n!=null&&o in Object(n)}s.exports=l},2118:(s,l,n)=>{var o=n(1848),u=n(2722),d=n(2351);function p(v,g,y){return g===g?d(v,g,y):o(v,u,y)}s.exports=p},8975:(s,l,n)=>{var o=n(7816);function u(d,p,v,g){return o(d,function(y,_,E){p(g,v(y),_,E)}),g}s.exports=u},9454:(s,l,n)=>{var o=n(4239),u=n(7005),d="[object Arguments]";function p(v){return u(v)&&o(v)==d}s.exports=p},939:(s,l,n)=>{var o=n(2492),u=n(7005);function d(p,v,g,y,_){return p===v?!0:p==null||v==null||!u(p)&&!u(v)?p!==p&&v!==v:o(p,v,g,y,d,_)}s.exports=d},2492:(s,l,n)=>{var o=n(6384),u=n(7114),d=n(8351),p=n(6096),v=n(4160),g=n(1469),y=n(4144),_=n(6719),E=1,w="[object Arguments]",I="[object Array]",M="[object Object]",D=Object.prototype,j=D.hasOwnProperty;function G(O,B,U,H,K,W){var C=g(O),V=g(B),J=C?I:v(O),it=V?I:v(B);J=J==w?M:J,it=it==w?M:it;var at=J==M,ft=it==M,X=J==it;if(X&&y(O)){if(!y(B))return!1;C=!0,at=!1}if(X&&!at)return W||(W=new o),C||_(O)?u(O,B,U,H,K,W):d(O,B,J,U,H,K,W);if(!(U&E)){var dt=at&&j.call(O,"__wrapped__"),Tt=ft&&j.call(B,"__wrapped__");if(dt||Tt){var Mt=dt?O.value():O,St=Tt?B.value():B;return W||(W=new o),K(Mt,St,U,H,W)}}return X?(W||(W=new o),p(O,B,U,H,K,W)):!1}s.exports=G},5588:(s,l,n)=>{var o=n(4160),u=n(7005),d="[object Map]";function p(v){return u(v)&&o(v)==d}s.exports=p},2958:(s,l,n)=>{var o=n(6384),u=n(939),d=1,p=2;function v(g,y,_,E){var w=_.length,I=w,M=!E;if(g==null)return!I;for(g=Object(g);w--;){var D=_[w];if(M&&D[2]?D[1]!==g[D[0]]:!(D[0]in g))return!1}for(;++w<I;){D=_[w];var j=D[0],G=g[j],O=D[1];if(M&&D[2]){if(G===void 0&&!(j in g))return!1}else{var B=new o;if(E)var U=E(G,O,j,g,y,B);if(!(U===void 0?u(O,G,d|p,E,B):U))return!1}}return!0}s.exports=v},2722:s=>{function l(n){return n!==n}s.exports=l},8458:(s,l,n)=>{var o=n(3560),u=n(5346),d=n(3218),p=n(346),v=/[\\^$.*+?()[\]{}|]/g,g=/^\[object .+?Constructor\]$/,y=Function.prototype,_=Object.prototype,E=y.toString,w=_.hasOwnProperty,I=RegExp("^"+E.call(w).replace(v,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function M(D){if(!d(D)||u(D))return!1;var j=o(D)?I:g;return j.test(p(D))}s.exports=M},9221:(s,l,n)=>{var o=n(4160),u=n(7005),d="[object Set]";function p(v){return u(v)&&o(v)==d}s.exports=p},8749:(s,l,n)=>{var o=n(4239),u=n(1780),d=n(7005),p="[object Arguments]",v="[object Array]",g="[object Boolean]",y="[object Date]",_="[object Error]",E="[object Function]",w="[object Map]",I="[object Number]",M="[object Object]",D="[object RegExp]",j="[object Set]",G="[object String]",O="[object WeakMap]",B="[object ArrayBuffer]",U="[object DataView]",H="[object Float32Array]",K="[object Float64Array]",W="[object Int8Array]",C="[object Int16Array]",V="[object Int32Array]",J="[object Uint8Array]",it="[object Uint8ClampedArray]",at="[object Uint16Array]",ft="[object Uint32Array]",X={};X[H]=X[K]=X[W]=X[C]=X[V]=X[J]=X[it]=X[at]=X[ft]=!0,X[p]=X[v]=X[B]=X[g]=X[U]=X[y]=X[_]=X[E]=X[w]=X[I]=X[M]=X[D]=X[j]=X[G]=X[O]=!1;function dt(Tt){return d(Tt)&&u(Tt.length)&&!!X[o(Tt)]}s.exports=dt},7206:(s,l,n)=>{var o=n(1573),u=n(6432),d=n(6557),p=n(1469),v=n(9601);function g(y){return typeof y=="function"?y:y==null?d:typeof y=="object"?p(y)?u(y[0],y[1]):o(y):v(y)}s.exports=g},280:(s,l,n)=>{var o=n(5726),u=n(6916),d=Object.prototype,p=d.hasOwnProperty;function v(g){if(!o(g))return u(g);var y=[];for(var _ in Object(g))p.call(g,_)&&_!="constructor"&&y.push(_);return y}s.exports=v},313:(s,l,n)=>{var o=n(3218),u=n(5726),d=n(3498),p=Object.prototype,v=p.hasOwnProperty;function g(y){if(!o(y))return d(y);var _=u(y),E=[];for(var w in y)w=="constructor"&&(_||!v.call(y,w))||E.push(w);return E}s.exports=g},1573:(s,l,n)=>{var o=n(2958),u=n(1499),d=n(2634);function p(v){var g=u(v);return g.length==1&&g[0][2]?d(g[0][0],g[0][1]):function(y){return y===v||o(y,v,g)}}s.exports=p},6432:(s,l,n)=>{var o=n(939),u=n(7361),d=n(9095),p=n(5403),v=n(9162),g=n(2634),y=n(327),_=1,E=2;function w(I,M){return p(I)&&v(M)?g(y(I),M):function(D){var j=u(D,I);return j===void 0&&j===M?d(D,I):o(M,j,_|E)}}s.exports=w},371:s=>{function l(n){return function(o){return o==null?void 0:o[n]}}s.exports=l},9152:(s,l,n)=>{var o=n(7786);function u(d){return function(p){return o(p,d)}}s.exports=u},5976:(s,l,n)=>{var o=n(6557),u=n(5357),d=n(61);function p(v,g){return d(u(v,g,o),v+"")}s.exports=p},6560:(s,l,n)=>{var o=n(5703),u=n(8777),d=n(6557),p=u?function(v,g){return u(v,"toString",{configurable:!0,enumerable:!1,value:o(g),writable:!0})}:d;s.exports=p},4259:s=>{function l(n,o,u){var d=-1,p=n.length;o<0&&(o=-o>p?0:p+o),u=u>p?p:u,u<0&&(u+=p),p=o>u?0:u-o>>>0,o>>>=0;for(var v=Array(p);++d<p;)v[d]=n[d+o];return v}s.exports=l},2545:s=>{function l(n,o){for(var u=-1,d=Array(n);++u<n;)d[u]=o(u);return d}s.exports=l},531:(s,l,n)=>{var o=n(2705),u=n(9932),d=n(1469),p=n(3448),v=1/0,g=o?o.prototype:void 0,y=g?g.toString:void 0;function _(E){if(typeof E=="string")return E;if(d(E))return u(E,_)+"";if(p(E))return y?y.call(E):"";var w=E+"";return w=="0"&&1/E==-v?"-0":w}s.exports=_},7561:(s,l,n)=>{var o=n(7990),u=/^\s+/;function d(p){return p&&p.slice(0,o(p)+1).replace(u,"")}s.exports=d},1717:s=>{function l(n){return function(o){return n(o)}}s.exports=l},5652:(s,l,n)=>{var o=n(8668),u=n(7443),d=n(1196),p=n(4757),v=n(3593),g=n(1814),y=200;function _(E,w,I){var M=-1,D=u,j=E.length,G=!0,O=[],B=O;if(I)G=!1,D=d;else if(j>=y){var U=w?null:v(E);if(U)return g(U);G=!1,D=p,B=new o}else B=w?[]:O;t:for(;++M<j;){var H=E[M],K=w?w(H):H;if(H=I||H!==0?H:0,G&&K===K){for(var W=B.length;W--;)if(B[W]===K)continue t;w&&B.push(K),O.push(H)}else D(B,K,I)||(B!==O&&B.push(K),O.push(H))}return O}s.exports=_},7406:(s,l,n)=>{var o=n(1811),u=n(928),d=n(292),p=n(327);function v(g,y){return y=o(y,g),g=d(g,y),g==null||delete g[p(u(y))]}s.exports=v},4757:s=>{function l(n,o){return n.has(o)}s.exports=l},1811:(s,l,n)=>{var o=n(1469),u=n(5403),d=n(5514),p=n(9833);function v(g,y){return o(g)?g:u(g,y)?[g]:d(p(g))}s.exports=v},4318:(s,l,n)=>{var o=n(1149);function u(d){var p=new d.constructor(d.byteLength);return new o(p).set(new o(d)),p}s.exports=u},4626:(s,l,n)=>{s=n.nmd(s);var o=n(5639),u=l&&!l.nodeType&&l,d=u&&!0&&s&&!s.nodeType&&s,p=d&&d.exports===u,v=p?o.Buffer:void 0,g=v?v.allocUnsafe:void 0;function y(_,E){if(E)return _.slice();var w=_.length,I=g?g(w):new _.constructor(w);return _.copy(I),I}s.exports=y},7157:(s,l,n)=>{var o=n(4318);function u(d,p){var v=p?o(d.buffer):d.buffer;return new d.constructor(v,d.byteOffset,d.byteLength)}s.exports=u},3147:s=>{var l=/\w*$/;function n(o){var u=new o.constructor(o.source,l.exec(o));return u.lastIndex=o.lastIndex,u}s.exports=n},419:(s,l,n)=>{var o=n(2705),u=o?o.prototype:void 0,d=u?u.valueOf:void 0;function p(v){return d?Object(d.call(v)):{}}s.exports=p},7133:(s,l,n)=>{var o=n(4318);function u(d,p){var v=p?o(d.buffer):d.buffer;return new d.constructor(v,d.byteOffset,d.length)}s.exports=u},278:s=>{function l(n,o){var u=-1,d=n.length;for(o||(o=Array(d));++u<d;)o[u]=n[u];return o}s.exports=l},8363:(s,l,n)=>{var o=n(4865),u=n(9465);function d(p,v,g,y){var _=!g;g||(g={});for(var E=-1,w=v.length;++E<w;){var I=v[E],M=y?y(g[I],p[I],I,g,p):void 0;M===void 0&&(M=p[I]),_?u(g,I,M):o(g,I,M)}return g}s.exports=d},8805:(s,l,n)=>{var o=n(8363),u=n(9551);function d(p,v){return o(p,u(p),v)}s.exports=d},1911:(s,l,n)=>{var o=n(8363),u=n(1442);function d(p,v){return o(p,u(p),v)}s.exports=d},4429:(s,l,n)=>{var o=n(5639),u=o["__core-js_shared__"];s.exports=u},5063:s=>{function l(n){return function(o,u,d){for(var p=-1,v=Object(o),g=d(o),y=g.length;y--;){var _=g[n?y:++p];if(u(v[_],_,v)===!1)break}return o}}s.exports=l},7740:(s,l,n)=>{var o=n(7206),u=n(8612),d=n(3674);function p(v){return function(g,y,_){var E=Object(g);if(!u(g)){var w=o(y,3);g=d(g),y=function(M){return w(E[M],M,E)}}var I=v(g,y,_);return I>-1?E[w?g[I]:I]:void 0}}s.exports=p},7779:(s,l,n)=>{var o=n(8975);function u(d,p){return function(v,g){return o(v,d,p(g),{})}}s.exports=u},3593:(s,l,n)=>{var o=n(8525),u=n(308),d=n(1814),p=1/0,v=o&&1/d(new o([,-0]))[1]==p?function(g){return new o(g)}:u;s.exports=v},696:(s,l,n)=>{var o=n(8630);function u(d){return o(d)?void 0:d}s.exports=u},8777:(s,l,n)=>{var o=n(852),u=function(){try{var d=o(Object,"defineProperty");return d({},"",{}),d}catch{}}();s.exports=u},7114:(s,l,n)=>{var o=n(8668),u=n(2908),d=n(4757),p=1,v=2;function g(y,_,E,w,I,M){var D=E&p,j=y.length,G=_.length;if(j!=G&&!(D&&G>j))return!1;var O=M.get(y),B=M.get(_);if(O&&B)return O==_&&B==y;var U=-1,H=!0,K=E&v?new o:void 0;for(M.set(y,_),M.set(_,y);++U<j;){var W=y[U],C=_[U];if(w)var V=D?w(C,W,U,_,y,M):w(W,C,U,y,_,M);if(V!==void 0){if(V)continue;H=!1;break}if(K){if(!u(_,function(J,it){if(!d(K,it)&&(W===J||I(W,J,E,w,M)))return K.push(it)})){H=!1;break}}else if(!(W===C||I(W,C,E,w,M))){H=!1;break}}return M.delete(y),M.delete(_),H}s.exports=g},8351:(s,l,n)=>{var o=n(2705),u=n(1149),d=n(7813),p=n(7114),v=n(8776),g=n(1814),y=1,_=2,E="[object Boolean]",w="[object Date]",I="[object Error]",M="[object Map]",D="[object Number]",j="[object RegExp]",G="[object Set]",O="[object String]",B="[object Symbol]",U="[object ArrayBuffer]",H="[object DataView]",K=o?o.prototype:void 0,W=K?K.valueOf:void 0;function C(V,J,it,at,ft,X,dt){switch(it){case H:if(V.byteLength!=J.byteLength||V.byteOffset!=J.byteOffset)return!1;V=V.buffer,J=J.buffer;case U:return!(V.byteLength!=J.byteLength||!X(new u(V),new u(J)));case E:case w:case D:return d(+V,+J);case I:return V.name==J.name&&V.message==J.message;case j:case O:return V==J+"";case M:var Tt=v;case G:var Mt=at&y;if(Tt||(Tt=g),V.size!=J.size&&!Mt)return!1;var St=dt.get(V);if(St)return St==J;at|=_,dt.set(V,J);var re=p(Tt(V),Tt(J),at,ft,X,dt);return dt.delete(V),re;case B:if(W)return W.call(V)==W.call(J)}return!1}s.exports=C},6096:(s,l,n)=>{var o=n(8234),u=1,d=Object.prototype,p=d.hasOwnProperty;function v(g,y,_,E,w,I){var M=_&u,D=o(g),j=D.length,G=o(y),O=G.length;if(j!=O&&!M)return!1;for(var B=j;B--;){var U=D[B];if(!(M?U in y:p.call(y,U)))return!1}var H=I.get(g),K=I.get(y);if(H&&K)return H==y&&K==g;var W=!0;I.set(g,y),I.set(y,g);for(var C=M;++B<j;){U=D[B];var V=g[U],J=y[U];if(E)var it=M?E(J,V,U,y,g,I):E(V,J,U,g,y,I);if(!(it===void 0?V===J||w(V,J,_,E,I):it)){W=!1;break}C||(C=U=="constructor")}if(W&&!C){var at=g.constructor,ft=y.constructor;at!=ft&&"constructor"in g&&"constructor"in y&&!(typeof at=="function"&&at instanceof at&&typeof ft=="function"&&ft instanceof ft)&&(W=!1)}return I.delete(g),I.delete(y),W}s.exports=v},9021:(s,l,n)=>{var o=n(5564),u=n(5357),d=n(61);function p(v){return d(u(v,void 0,o),v+"")}s.exports=p},1957:(s,l,n)=>{var o=typeof n.g=="object"&&n.g&&n.g.Object===Object&&n.g;s.exports=o},8234:(s,l,n)=>{var o=n(8866),u=n(9551),d=n(3674);function p(v){return o(v,d,u)}s.exports=p},6904:(s,l,n)=>{var o=n(8866),u=n(1442),d=n(1704);function p(v){return o(v,d,u)}s.exports=p},5050:(s,l,n)=>{var o=n(7019);function u(d,p){var v=d.__data__;return o(p)?v[typeof p=="string"?"string":"hash"]:v.map}s.exports=u},1499:(s,l,n)=>{var o=n(9162),u=n(3674);function d(p){for(var v=u(p),g=v.length;g--;){var y=v[g],_=p[y];v[g]=[y,_,o(_)]}return v}s.exports=d},852:(s,l,n)=>{var o=n(8458),u=n(7801);function d(p,v){var g=u(p,v);return o(g)?g:void 0}s.exports=d},5924:(s,l,n)=>{var o=n(5569),u=o(Object.getPrototypeOf,Object);s.exports=u},9607:(s,l,n)=>{var o=n(2705),u=Object.prototype,d=u.hasOwnProperty,p=u.toString,v=o?o.toStringTag:void 0;function g(y){var _=d.call(y,v),E=y[v];try{y[v]=void 0;var w=!0}catch{}var I=p.call(y);return w&&(_?y[v]=E:delete y[v]),I}s.exports=g},9551:(s,l,n)=>{var o=n(4963),u=n(479),d=Object.prototype,p=d.propertyIsEnumerable,v=Object.getOwnPropertySymbols,g=v?function(y){return y==null?[]:(y=Object(y),o(v(y),function(_){return p.call(y,_)}))}:u;s.exports=g},1442:(s,l,n)=>{var o=n(2488),u=n(5924),d=n(9551),p=n(479),v=Object.getOwnPropertySymbols,g=v?function(y){for(var _=[];y;)o(_,d(y)),y=u(y);return _}:p;s.exports=g},4160:(s,l,n)=>{var o=n(8552),u=n(7071),d=n(3818),p=n(8525),v=n(577),g=n(4239),y=n(346),_="[object Map]",E="[object Object]",w="[object Promise]",I="[object Set]",M="[object WeakMap]",D="[object DataView]",j=y(o),G=y(u),O=y(d),B=y(p),U=y(v),H=g;(o&&H(new o(new ArrayBuffer(1)))!=D||u&&H(new u)!=_||d&&H(d.resolve())!=w||p&&H(new p)!=I||v&&H(new v)!=M)&&(H=function(K){var W=g(K),C=W==E?K.constructor:void 0,V=C?y(C):"";if(V)switch(V){case j:return D;case G:return _;case O:return w;case B:return I;case U:return M}return W}),s.exports=H},7801:s=>{function l(n,o){return n==null?void 0:n[o]}s.exports=l},222:(s,l,n)=>{var o=n(1811),u=n(5694),d=n(1469),p=n(5776),v=n(1780),g=n(327);function y(_,E,w){E=o(E,_);for(var I=-1,M=E.length,D=!1;++I<M;){var j=g(E[I]);if(!(D=_!=null&&w(_,j)))break;_=_[j]}return D||++I!=M?D:(M=_==null?0:_.length,!!M&&v(M)&&p(j,M)&&(d(_)||u(_)))}s.exports=y},1789:(s,l,n)=>{var o=n(4536);function u(){this.__data__=o?o(null):{},this.size=0}s.exports=u},401:s=>{function l(n){var o=this.has(n)&&delete this.__data__[n];return this.size-=o?1:0,o}s.exports=l},7667:(s,l,n)=>{var o=n(4536),u="__lodash_hash_undefined__",d=Object.prototype,p=d.hasOwnProperty;function v(g){var y=this.__data__;if(o){var _=y[g];return _===u?void 0:_}return p.call(y,g)?y[g]:void 0}s.exports=v},1327:(s,l,n)=>{var o=n(4536),u=Object.prototype,d=u.hasOwnProperty;function p(v){var g=this.__data__;return o?g[v]!==void 0:d.call(g,v)}s.exports=p},1866:(s,l,n)=>{var o=n(4536),u="__lodash_hash_undefined__";function d(p,v){var g=this.__data__;return this.size+=this.has(p)?0:1,g[p]=o&&v===void 0?u:v,this}s.exports=d},3824:s=>{var l=Object.prototype,n=l.hasOwnProperty;function o(u){var d=u.length,p=new u.constructor(d);return d&&typeof u[0]=="string"&&n.call(u,"index")&&(p.index=u.index,p.input=u.input),p}s.exports=o},9148:(s,l,n)=>{var o=n(4318),u=n(7157),d=n(3147),p=n(419),v=n(7133),g="[object Boolean]",y="[object Date]",_="[object Map]",E="[object Number]",w="[object RegExp]",I="[object Set]",M="[object String]",D="[object Symbol]",j="[object ArrayBuffer]",G="[object DataView]",O="[object Float32Array]",B="[object Float64Array]",U="[object Int8Array]",H="[object Int16Array]",K="[object Int32Array]",W="[object Uint8Array]",C="[object Uint8ClampedArray]",V="[object Uint16Array]",J="[object Uint32Array]";function it(at,ft,X){var dt=at.constructor;switch(ft){case j:return o(at);case g:case y:return new dt(+at);case G:return u(at,X);case O:case B:case U:case H:case K:case W:case C:case V:case J:return v(at,X);case _:return new dt;case E:case M:return new dt(at);case w:return d(at);case I:return new dt;case D:return p(at)}}s.exports=it},8517:(s,l,n)=>{var o=n(3118),u=n(5924),d=n(5726);function p(v){return typeof v.constructor=="function"&&!d(v)?o(u(v)):{}}s.exports=p},7285:(s,l,n)=>{var o=n(2705),u=n(5694),d=n(1469),p=o?o.isConcatSpreadable:void 0;function v(g){return d(g)||u(g)||!!(p&&g&&g[p])}s.exports=v},5776:s=>{var l=9007199254740991,n=/^(?:0|[1-9]\d*)$/;function o(u,d){var p=typeof u;return d=d??l,!!d&&(p=="number"||p!="symbol"&&n.test(u))&&u>-1&&u%1==0&&u<d}s.exports=o},5403:(s,l,n)=>{var o=n(1469),u=n(3448),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,p=/^\w*$/;function v(g,y){if(o(g))return!1;var _=typeof g;return _=="number"||_=="symbol"||_=="boolean"||g==null||u(g)?!0:p.test(g)||!d.test(g)||y!=null&&g in Object(y)}s.exports=v},7019:s=>{function l(n){var o=typeof n;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null}s.exports=l},5346:(s,l,n)=>{var o=n(4429),u=function(){var p=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}();function d(p){return!!u&&u in p}s.exports=d},5726:s=>{var l=Object.prototype;function n(o){var u=o&&o.constructor,d=typeof u=="function"&&u.prototype||l;return o===d}s.exports=n},9162:(s,l,n)=>{var o=n(3218);function u(d){return d===d&&!o(d)}s.exports=u},7040:s=>{function l(){this.__data__=[],this.size=0}s.exports=l},4125:(s,l,n)=>{var o=n(8470),u=Array.prototype,d=u.splice;function p(v){var g=this.__data__,y=o(g,v);if(y<0)return!1;var _=g.length-1;return y==_?g.pop():d.call(g,y,1),--this.size,!0}s.exports=p},2117:(s,l,n)=>{var o=n(8470);function u(d){var p=this.__data__,v=o(p,d);return v<0?void 0:p[v][1]}s.exports=u},7518:(s,l,n)=>{var o=n(8470);function u(d){return o(this.__data__,d)>-1}s.exports=u},4705:(s,l,n)=>{var o=n(8470);function u(d,p){var v=this.__data__,g=o(v,d);return g<0?(++this.size,v.push([d,p])):v[g][1]=p,this}s.exports=u},4785:(s,l,n)=>{var o=n(1989),u=n(8407),d=n(7071);function p(){this.size=0,this.__data__={hash:new o,map:new(d||u),string:new o}}s.exports=p},1285:(s,l,n)=>{var o=n(5050);function u(d){var p=o(this,d).delete(d);return this.size-=p?1:0,p}s.exports=u},6e3:(s,l,n)=>{var o=n(5050);function u(d){return o(this,d).get(d)}s.exports=u},9916:(s,l,n)=>{var o=n(5050);function u(d){return o(this,d).has(d)}s.exports=u},5265:(s,l,n)=>{var o=n(5050);function u(d,p){var v=o(this,d),g=v.size;return v.set(d,p),this.size+=v.size==g?0:1,this}s.exports=u},8776:s=>{function l(n){var o=-1,u=Array(n.size);return n.forEach(function(d,p){u[++o]=[p,d]}),u}s.exports=l},2634:s=>{function l(n,o){return function(u){return u==null?!1:u[n]===o&&(o!==void 0||n in Object(u))}}s.exports=l},4523:(s,l,n)=>{var o=n(8306),u=500;function d(p){var v=o(p,function(y){return g.size===u&&g.clear(),y}),g=v.cache;return v}s.exports=d},4536:(s,l,n)=>{var o=n(852),u=o(Object,"create");s.exports=u},6916:(s,l,n)=>{var o=n(5569),u=o(Object.keys,Object);s.exports=u},3498:s=>{function l(n){var o=[];if(n!=null)for(var u in Object(n))o.push(u);return o}s.exports=l},1167:(s,l,n)=>{s=n.nmd(s);var o=n(1957),u=l&&!l.nodeType&&l,d=u&&!0&&s&&!s.nodeType&&s,p=d&&d.exports===u,v=p&&o.process,g=function(){try{var y=d&&d.require&&d.require("util").types;return y||v&&v.binding&&v.binding("util")}catch{}}();s.exports=g},2333:s=>{var l=Object.prototype,n=l.toString;function o(u){return n.call(u)}s.exports=o},5569:s=>{function l(n,o){return function(u){return n(o(u))}}s.exports=l},5357:(s,l,n)=>{var o=n(6874),u=Math.max;function d(p,v,g){return v=u(v===void 0?p.length-1:v,0),function(){for(var y=arguments,_=-1,E=u(y.length-v,0),w=Array(E);++_<E;)w[_]=y[v+_];_=-1;for(var I=Array(v+1);++_<v;)I[_]=y[_];return I[v]=g(w),o(p,this,I)}}s.exports=d},292:(s,l,n)=>{var o=n(7786),u=n(4259);function d(p,v){return v.length<2?p:o(p,u(v,0,-1))}s.exports=d},5639:(s,l,n)=>{var o=n(1957),u=typeof self=="object"&&self&&self.Object===Object&&self,d=o||u||Function("return this")();s.exports=d},619:s=>{var l="__lodash_hash_undefined__";function n(o){return this.__data__.set(o,l),this}s.exports=n},2385:s=>{function l(n){return this.__data__.has(n)}s.exports=l},1814:s=>{function l(n){var o=-1,u=Array(n.size);return n.forEach(function(d){u[++o]=d}),u}s.exports=l},61:(s,l,n)=>{var o=n(6560),u=n(1275),d=u(o);s.exports=d},1275:s=>{var l=800,n=16,o=Date.now;function u(d){var p=0,v=0;return function(){var g=o(),y=n-(g-v);if(v=g,y>0){if(++p>=l)return arguments[0]}else p=0;return d.apply(void 0,arguments)}}s.exports=u},7465:(s,l,n)=>{var o=n(8407);function u(){this.__data__=new o,this.size=0}s.exports=u},3779:s=>{function l(n){var o=this.__data__,u=o.delete(n);return this.size=o.size,u}s.exports=l},7599:s=>{function l(n){return this.__data__.get(n)}s.exports=l},4758:s=>{function l(n){return this.__data__.has(n)}s.exports=l},4309:(s,l,n)=>{var o=n(8407),u=n(7071),d=n(3369),p=200;function v(g,y){var _=this.__data__;if(_ instanceof o){var E=_.__data__;if(!u||E.length<p-1)return E.push([g,y]),this.size=++_.size,this;_=this.__data__=new d(E)}return _.set(g,y),this.size=_.size,this}s.exports=v},2351:s=>{function l(n,o,u){for(var d=u-1,p=n.length;++d<p;)if(n[d]===o)return d;return-1}s.exports=l},5514:(s,l,n)=>{var o=n(4523),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,p=o(function(v){var g=[];return v.charCodeAt(0)===46&&g.push(""),v.replace(u,function(y,_,E,w){g.push(E?w.replace(d,"$1"):_||y)}),g});s.exports=p},327:(s,l,n)=>{var o=n(3448),u=1/0;function d(p){if(typeof p=="string"||o(p))return p;var v=p+"";return v=="0"&&1/p==-u?"-0":v}s.exports=d},346:s=>{var l=Function.prototype,n=l.toString;function o(u){if(u!=null){try{return n.call(u)}catch{}try{return u+""}catch{}}return""}s.exports=o},7990:s=>{var l=/\s/;function n(o){for(var u=o.length;u--&&l.test(o.charAt(u)););return u}s.exports=n},6678:(s,l,n)=>{var o=n(5990),u=4;function d(p){return o(p,u)}s.exports=d},361:(s,l,n)=>{var o=n(5990),u=1,d=4;function p(v){return o(v,u|d)}s.exports=p},5703:s=>{function l(n){return function(){return n}}s.exports=l},1966:(s,l,n)=>{var o=n(731),u=n(1078),d=n(5976),p=n(9246),v=d(function(g,y){return p(g)?o(g,u(y,1,p,!0)):[]});s.exports=v},7813:s=>{function l(n,o){return n===o||n!==n&&o!==o}s.exports=l},3311:(s,l,n)=>{var o=n(7740),u=n(998),d=o(u);s.exports=d},998:(s,l,n)=>{var o=n(1848),u=n(7206),d=n(554),p=Math.max;function v(g,y,_){var E=g==null?0:g.length;if(!E)return-1;var w=_==null?0:d(_);return w<0&&(w=p(E+w,0)),o(g,u(y,3),w)}s.exports=v},5564:(s,l,n)=>{var o=n(1078);function u(d){var p=d==null?0:d.length;return p?o(d,1):[]}s.exports=u},7361:(s,l,n)=>{var o=n(7786);function u(d,p,v){var g=d==null?void 0:o(d,p);return g===void 0?v:g}s.exports=u},9095:(s,l,n)=>{var o=n(13),u=n(222);function d(p,v){return p!=null&&u(p,v,o)}s.exports=d},6557:s=>{function l(n){return n}s.exports=l},3137:(s,l,n)=>{var o=n(5703),u=n(7779),d=n(6557),p=Object.prototype,v=p.toString,g=u(function(y,_,E){_!=null&&typeof _.toString!="function"&&(_=v.call(_)),y[_]=E},o(d));s.exports=g},5694:(s,l,n)=>{var o=n(9454),u=n(7005),d=Object.prototype,p=d.hasOwnProperty,v=d.propertyIsEnumerable,g=o(function(){return arguments}())?o:function(y){return u(y)&&p.call(y,"callee")&&!v.call(y,"callee")};s.exports=g},1469:s=>{var l=Array.isArray;s.exports=l},8612:(s,l,n)=>{var o=n(3560),u=n(1780);function d(p){return p!=null&&u(p.length)&&!o(p)}s.exports=d},9246:(s,l,n)=>{var o=n(8612),u=n(7005);function d(p){return u(p)&&o(p)}s.exports=d},4144:(s,l,n)=>{s=n.nmd(s);var o=n(5639),u=n(5062),d=l&&!l.nodeType&&l,p=d&&!0&&s&&!s.nodeType&&s,v=p&&p.exports===d,g=v?o.Buffer:void 0,y=g?g.isBuffer:void 0,_=y||u;s.exports=_},8446:(s,l,n)=>{var o=n(939);function u(d,p){return o(d,p)}s.exports=u},3560:(s,l,n)=>{var o=n(4239),u=n(3218),d="[object AsyncFunction]",p="[object Function]",v="[object GeneratorFunction]",g="[object Proxy]";function y(_){if(!u(_))return!1;var E=o(_);return E==p||E==v||E==d||E==g}s.exports=y},1780:s=>{var l=9007199254740991;function n(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=l}s.exports=n},6688:(s,l,n)=>{var o=n(5588),u=n(1717),d=n(1167),p=d&&d.isMap,v=p?u(p):o;s.exports=v},3218:s=>{function l(n){var o=typeof n;return n!=null&&(o=="object"||o=="function")}s.exports=l},7005:s=>{function l(n){return n!=null&&typeof n=="object"}s.exports=l},8630:(s,l,n)=>{var o=n(4239),u=n(5924),d=n(7005),p="[object Object]",v=Function.prototype,g=Object.prototype,y=v.toString,_=g.hasOwnProperty,E=y.call(Object);function w(I){if(!d(I)||o(I)!=p)return!1;var M=u(I);if(M===null)return!0;var D=_.call(M,"constructor")&&M.constructor;return typeof D=="function"&&D instanceof D&&y.call(D)==E}s.exports=w},2928:(s,l,n)=>{var o=n(9221),u=n(1717),d=n(1167),p=d&&d.isSet,v=p?u(p):o;s.exports=v},7037:(s,l,n)=>{var o=n(4239),u=n(1469),d=n(7005),p="[object String]";function v(g){return typeof g=="string"||!u(g)&&d(g)&&o(g)==p}s.exports=v},3448:(s,l,n)=>{var o=n(4239),u=n(7005),d="[object Symbol]";function p(v){return typeof v=="symbol"||u(v)&&o(v)==d}s.exports=p},6719:(s,l,n)=>{var o=n(8749),u=n(1717),d=n(1167),p=d&&d.isTypedArray,v=p?u(p):o;s.exports=v},3674:(s,l,n)=>{var o=n(4636),u=n(280),d=n(8612);function p(v){return d(v)?o(v):u(v)}s.exports=p},1704:(s,l,n)=>{var o=n(4636),u=n(313),d=n(8612);function p(v){return d(v)?o(v,!0):u(v)}s.exports=p},928:s=>{function l(n){var o=n==null?0:n.length;return o?n[o-1]:void 0}s.exports=l},8306:(s,l,n)=>{var o=n(3369),u="Expected a function";function d(p,v){if(typeof p!="function"||v!=null&&typeof v!="function")throw new TypeError(u);var g=function(){var y=arguments,_=v?v.apply(this,y):y[0],E=g.cache;if(E.has(_))return E.get(_);var w=p.apply(this,y);return g.cache=E.set(_,w)||E,w};return g.cache=new(d.Cache||o),g}d.Cache=o,s.exports=d},308:s=>{function l(){}s.exports=l},7557:(s,l,n)=>{var o=n(9932),u=n(5990),d=n(7406),p=n(1811),v=n(8363),g=n(696),y=n(9021),_=n(6904),E=1,w=2,I=4,M=y(function(D,j){var G={};if(D==null)return G;var O=!1;j=o(j,function(U){return U=p(U,D),O||(O=U.length>1),U}),v(D,_(D),G),O&&(G=u(G,E|w|I,g));for(var B=j.length;B--;)d(G,j[B]);return G});s.exports=M},9601:(s,l,n)=>{var o=n(371),u=n(9152),d=n(5403),p=n(327);function v(g){return d(g)?o(p(g)):u(g)}s.exports=v},479:s=>{function l(){return[]}s.exports=l},5062:s=>{function l(){return!1}s.exports=l},8601:(s,l,n)=>{var o=n(4841),u=1/0,d=17976931348623157e292;function p(v){if(!v)return v===0?v:0;if(v=o(v),v===u||v===-u){var g=v<0?-1:1;return g*d}return v===v?v:0}s.exports=p},554:(s,l,n)=>{var o=n(8601);function u(d){var p=o(d),v=p%1;return p===p?v?p-v:p:0}s.exports=u},4841:(s,l,n)=>{var o=n(7561),u=n(3218),d=n(3448),p=NaN,v=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,y=/^0o[0-7]+$/i,_=parseInt;function E(w){if(typeof w=="number")return w;if(d(w))return p;if(u(w)){var I=typeof w.valueOf=="function"?w.valueOf():w;w=u(I)?I+"":I}if(typeof w!="string")return w===0?w:+w;w=o(w);var M=g.test(w);return M||y.test(w)?_(w.slice(2),M?2:8):v.test(w)?p:+w}s.exports=E},9833:(s,l,n)=>{var o=n(531);function u(d){return d==null?"":o(d)}s.exports=u},4908:(s,l,n)=>{var o=n(5652);function u(d){return d&&d.length?o(d):[]}s.exports=u},2569:(s,l,n)=>{var o=n(731),u=n(5976),d=n(9246),p=u(function(v,g){return d(v)?o(v,g):[]});s.exports=p}},i={};function h(s){var l=i[s];if(l!==void 0)return l.exports;var n=i[s]={id:s,loaded:!1,exports:{}};return r[s](n,n.exports,h),n.loaded=!0,n.exports}h.n=s=>{var l=s&&s.__esModule?()=>s.default:()=>s;return h.d(l,{a:l}),l},h.d=(s,l)=>{for(var n in l)h.o(l,n)&&!h.o(s,n)&&Object.defineProperty(s,n,{enumerable:!0,get:l[n]})},h.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),h.o=(s,l)=>Object.prototype.hasOwnProperty.call(s,l),h.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},h.nmd=s=>(s.paths=[],s.children||(s.children=[]),s);var S={};return(()=>{h.r(S),h.d(S,{chordParserFactory:()=>ia,chordRendererFactory:()=>Gu});function s(a,c){return a.reduce(function(m,T){return m?T(m):null},c)}var l=h(361),n=h.n(l),o=h(7037),u=h.n(o),d=function(c){if(!Array.isArray(c))throw new TypeError("customFilters should be given as an array");if(c.some(function(m){return typeof m!="function"}))throw new TypeError("The given filter is not a function");return!0};const p=d;var v=h(3137),g=h.n(v),y=h(7557),_=h.n(y),E;function w(a){"@babel/helpers - typeof";return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},w(a)}function I(a,c){var m=Object.keys(a);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(a);c&&(T=T.filter(function(N){return Object.getOwnPropertyDescriptor(a,N).enumerable})),m.push.apply(m,T)}return m}function M(a){for(var c=1;c<arguments.length;c++){var m=arguments[c]!=null?arguments[c]:{};c%2?I(Object(m),!0).forEach(function(T){D(a,T,m[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(m)):I(Object(m)).forEach(function(T){Object.defineProperty(a,T,Object.getOwnPropertyDescriptor(m,T))})}return a}function D(a,c,m){return c=j(c),c in a?Object.defineProperty(a,c,{value:m,enumerable:!0,configurable:!0,writable:!0}):a[c]=m,a}function j(a){var c=G(a,"string");return w(c)==="symbol"?c:String(c)}function G(a,c){if(w(a)!=="object"||a===null)return a;var m=a[Symbol.toPrimitive];if(m!==void 0){var T=m.call(a,c||"default");if(w(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(a)}var O={AFlat:"Ab",A:"A",ASharp:"A#",BFlat:"Bb",B:"B",C:"C",CSharp:"C#",DFlat:"Db",D:"D",DSharp:"D#",EFlat:"Eb",E:"E",F:"F",FSharp:"F#",GFlat:"Gb",G:"G",GSharp:"G#"},B={Ab:O.AFlat,A:O.A,"A#":O.ASharp,Bb:O.BFlat,B:O.B,"B#":O.C,Cb:O.B,C:O.C,"C#":O.CSharp,Db:O.DFlat,D:O.D,"D#":O.DSharp,Eb:O.EFlat,E:O.E,"E#":O.F,Fb:O.E,F:O.F,"F#":O.FSharp,Gb:O.GFlat,G:O.G,"G#":O.GSharp},U={Lab:O.AFlat,La:O.A,"La#":O.ASharp,Sib:O.BFlat,Si:O.B,"Si#":O.C,Dob:O.B,Do:O.C,"Do#":O.CSharp,Reb:O.DFlat,Rb:O.DFlat,Re:O.D,R:O.D,"Re#":O.DSharp,"R#":O.DSharp,Mib:O.EFlat,Mi:O.E,"Mi#":O.F,Fab:O.E,Fa:O.F,"Fa#":O.FSharp,Solb:O.GFlat,Sol:O.G,"Sol#":O.GSharp},H=M(M({},_()(B,["Bb","B","B#"])),{},{As:O.AFlat,Ais:O.ASharp,Hb:O.BFlat,Hes:O.BFlat,H:O.B,His:O.C,"H#":O.C,Ces:O.B,Cis:O.CSharp,Des:O.DFlat,Dis:O.DSharp,Es:O.EFlat,Eis:O.F,Fes:O.E,Fis:O.FSharp,Ges:O.GFlat,Gis:O.GSharp});function K(a){var c;return Object.keys(a).reduce(function(m,T){return T.match(/.[b|#]$/)&&(c=T.replace("#","").replace("b",""),m[c]=a[T]),m},{})}var W=M(M({},B),K(B)),C=M(M({},U),K(U)),V=M(M({},H),K(H)),J=M(M(M({},W),C),V);Object.keys(J).sort(function(a,c){return c.length-a.length});var it=Object.keys(W).sort(function(a,c){return c.length-a.length}),at=Object.keys(C).sort(function(a,c){return c.length-a.length}),ft=Object.keys(V).sort(function(a,c){return c.length-a.length}),X=[{name:"english",notes:it},{name:"german",notes:ft},{name:"latin",notes:at}],dt=[O.A,O.ASharp,O.B,O.C,O.CSharp,O.D,O.DSharp,O.E,O.F,O.FSharp,O.G,O.GSharp],Tt=[O.A,O.BFlat,O.B,O.C,O.DFlat,O.D,O.EFlat,O.E,O.F,O.GFlat,O.G,O.AFlat],Mt=(E={},D(E,O.CSharp,O.DFlat),D(E,O.DSharp,O.EFlat),D(E,O.FSharp,O.GFlat),D(E,O.GSharp,O.AFlat),D(E,O.ASharp,O.BFlat),E),St=g()(Mt);function re(a){return He(a)||Fe(a)||Yt(a)||he()}function he(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yt(a,c){if(a){if(typeof a=="string")return pe(a,c);var m=Object.prototype.toString.call(a).slice(8,-1);if(m==="Object"&&a.constructor&&(m=a.constructor.name),m==="Map"||m==="Set")return Array.from(a);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return pe(a,c)}}function Fe(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function He(a){if(Array.isArray(a))return pe(a)}function pe(a,c){(c==null||c>a.length)&&(c=a.length);for(var m=0,T=new Array(c);m<c;m++)T[m]=a[m];return T}var L=[].concat(re(Object.values(O)),re(Object.values(O).map(function(a){return a+"m"})));function f(a){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},f(a)}function b(a,c,m){return Object.defineProperty(a,"prototype",{writable:!1}),a}function x(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")}function P(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),c&&bt(a,c)}function $(a){var c=Ot();return function(){var T=Z(a),N;if(c){var k=Z(this).constructor;N=Reflect.construct(T,arguments,k)}else N=T.apply(this,arguments);return tt(this,N)}}function tt(a,c){if(c&&(f(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q(a)}function q(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ot(a){var c=typeof Map=="function"?new Map:void 0;return ot=function(T){if(T===null||!Et(T))return T;if(typeof T!="function")throw new TypeError("Super expression must either be null or a function");if(typeof c<"u"){if(c.has(T))return c.get(T);c.set(T,N)}function N(){return ut(T,arguments,Z(this).constructor)}return N.prototype=Object.create(T.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),bt(N,T)},ot(a)}function ut(a,c,m){return Ot()?ut=Reflect.construct.bind():ut=function(N,k,Y){var st=[null];st.push.apply(st,k);var _t=Function.bind.apply(N,st),Ut=new _t;return Y&&bt(Ut,Y.prototype),Ut},ut.apply(null,arguments)}function Ot(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Et(a){return Function.toString.call(a).indexOf("[native code]")!==-1}function bt(a,c){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,N){return T.__proto__=N,T},bt(a,c)}function Z(a){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},Z(a)}var Nt=function(a){P(m,a);var c=$(m);function m(){var T;return x(this,m),T=c.call(this,"The given symbol is not a valid string"),T.name="InvalidInput",T}return b(m)}(ot(Error)),rt=function(a){P(m,a);var c=$(m);function m(){var T;x(this,m);var N="An unexpected error happened. Maybe a custom filter returned null instead of throwing an exception?";return T=c.call(this,N),T.name="UnexpectedError",T}return b(m)}(ot(Error)),It=function(a){P(m,a);var c=$(m);function m(T,N,k){var Y;return x(this,m),Y=c.call(this,T),Y.name=k,Y.chord=N,Y}return b(m)}(ot(Error)),Ht=function(a){P(m,a);var c=$(m);function m(T){x(this,m);var N='"'.concat(T.input.symbol,'" does not seems to be a chord');return c.call(this,N,T,"NoSymbolFound")}return b(m)}(It),ke=function(a){P(m,a);var c=$(m);function m(T,N){x(this,m);var k='The chord descriptor "'.concat(T.input.descriptor,'" contains unknown or duplicated modifiers: "').concat(N,'"');return c.call(this,k,T,"InvalidModifier")}return b(m)}(It),Se=function(a){P(m,a);var c=$(m);function m(T,N){x(this,m);var k='"'.concat(T.input.symbol,'" describes a chord with an invalid intervals combo: ')+N.join(" and ");return c.call(this,k,T,"InvalidIntervals")}return b(m)}(It),zt=h(1469),wt=h.n(zt),_e=h(8446),xe=h.n(_e);function me(a,c){var m=wt()(c)?c:[c];return xe()(a,m)}function nt(a,c){return Te(a,c,"oneOf")}function Gt(a,c){return Te(a,c,"all")}function kt(a,c){return Te(a,c,"none")}function Te(a,c,m){var T=wt()(c)?c:[c],N=m==="oneOf"?"some":"every";return T[N](function(k){return m==="none"?!a.includes(k):a.includes(k)})}var Wr=[["2","3"],["2","9"],["3","b3"],["4","11"],["5","b5"],["5","#5"],["b6","#5"],["b6","6"],["b6","13"],["6","13"],["b7","bb7"],["7","b7"],["9","b9"],["9","#9"],["11","#11"],["13","b13"]];function ir(a){var c=a.normalized.intervals,m=Wr.find(function(T){return Gt(c,T)});if(m)throw new Se(a,m);return a}function Bt(a){var c=a.formatted,m=c.rootNote,T=c.bassNote,N=c.descriptor,k=c.chordChanges,Y=m;return N&&(Y+=N),k&&k.length&&(Y+="("+k.join(",")+")"),T&&(Y+="/"+T),a.formatted.symbol=Y,a}var F={ma:"major",ma6:"major6",ma7:"major7",dom7:"dominant7",mi:"minor",mi6:"minor6",mi7:"minor7",miMa7:"minorMajor7",aug:"augmented",dim:"diminished",dim7:"diminished7",power:"power",bass:"bass"},Un=[F.mi,F.mi6,F.mi7,F.miMa7,F.dim,F.dim7],At;function Be(a){"@babel/helpers - typeof";return Be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},Be(a)}function Vr(a){return Ci(a)||Ai(a)||Oi(a)||wi()}function wi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oi(a,c){if(a){if(typeof a=="string")return Yr(a,c);var m=Object.prototype.toString.call(a).slice(8,-1);if(m==="Object"&&a.constructor&&(m=a.constructor.name),m==="Map"||m==="Set")return Array.from(a);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return Yr(a,c)}}function Ai(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Ci(a){if(Array.isArray(a))return Yr(a)}function Yr(a,c){(c==null||c>a.length)&&(c=a.length);for(var m=0,T=new Array(c);m<c;m++)T[m]=a[m];return T}function jt(a,c,m){return c=Ii(c),c in a?Object.defineProperty(a,c,{value:m,enumerable:!0,configurable:!0,writable:!0}):a[c]=m,a}function Ii(a){var c=Pi(a,"string");return Be(c)==="symbol"?c:String(c)}function Pi(a,c){if(Be(a)!=="object"||a===null)return a;var m=a[Symbol.toPrimitive];if(m!==void 0){var T=m.call(a,c||"default");if(Be(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(a)}var Mi=(At={},jt(At,F.ma,function(){return""}),jt(At,F.ma6,function(a){return a.normalized.intervals.includes("9")?"69":"6"}),jt(At,F.ma7,function(a){return"ma"+ur(a)}),jt(At,F.dom7,function(a){return a.normalized.intents.alt?"7alt":ur(a)}),jt(At,F.mi,function(){return"mi"}),jt(At,F.mi6,function(a){return a.normalized.intervals.includes("9")?"mi69":"mi6"}),jt(At,F.mi7,function(a){return"mi"+ur(a)}),jt(At,F.miMa7,function(a){return"miMa"+ur(a)}),jt(At,F.aug,function(){return"+"}),jt(At,F.dim,function(){return"dim"}),jt(At,F.dim7,function(){return"dim7"}),jt(At,F.power,function(){return"5"}),jt(At,F.bass,function(){return" bass"}),At),or={add:"add",add7:"Ma7",omit:"omit",sus:"sus"};function Kn(a){return a.formatted={rootNote:a.normalized.rootNote,bassNote:a.normalized.bassNote,descriptor:ji(a),chordChanges:Di(a)},a}function ji(a){var c=Mi[a.normalized.quality](a);return a.normalized.isSuspended&&(c+=or.sus),c}function ur(a){var c=a.normalized.extensions,m=c[c.length-1];return m==="11"&&a.normalized.intents.major&&(m=kt(a.normalized.alterations,["b9","#9"])?"9":"7"),m||"7"}function Di(a){var c=Ri(a.normalized.omits);if(Li(a))return c;var m=Ni(a.normalized.quality,a.normalized.adds);return[].concat(Vr(a.normalized.alterations),Vr(m),Vr(c))}function Li(a){return a.normalized.intents.alt&&a.normalized.quality===F.dom7}function Ni(a,c){return c.filter(function(m){return!([F.ma6,F.mi6].includes(a)&&m==="9")}).map(function(m,T){var N="";return T===0&&(N+=or.add,["b","#"].includes(m[0])&&(N+=" ")),N+=m==="7"?or.add7:m,N})}function Ri(a){return a.map(function(c,m){var T="";return m===0&&(T+=or.omit),T+=c==="b3"?"3":c,T})}var Ee={flat:"",sharp:""},$i={major:{0:"I",2:"II",3:"".concat(Ee.flat,"III"),4:"III",5:"IV",7:"V",8:"".concat(Ee.flat,"VI"),9:"VI",10:"".concat(Ee.flat,"VII"),11:"VII"},minor:{0:"I",2:"II",3:"III",4:"".concat(Ee.sharp,"III"),5:"IV",7:"V",8:"VI",9:"".concat(Ee.sharp,"VI"),10:"VII",11:"".concat(Ee.sharp,"VII")}},Ct;function ze(a){"@babel/helpers - typeof";return ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},ze(a)}function Dt(a,c,m){return c=Fi(c),c in a?Object.defineProperty(a,c,{value:m,enumerable:!0,configurable:!0,writable:!0}):a[c]=m,a}function Fi(a){var c=Hi(a,"string");return ze(c)==="symbol"?c:String(c)}function Hi(a,c){if(ze(a)!=="object"||a===null)return a;var m=a[Symbol.toPrimitive];if(m!==void 0){var T=m.call(a,c||"default");if(ze(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(a)}var et={sup2:"",sup4:"",sup5:"",sup6:"",sup7:"",sub3:"",sub4:"",sub5:"",flat:"",sharp:""},cr={major:["I","ii","iii","IV","V","vi","vii"],dom7:["I","ii".concat(et.sup7),"iii".concat(et.sup7),"IV","V".concat(et.sup7),"vi".concat(et.sup7),"vii"],minor:["i","ii","III","iv","v","VI","VII"],minor7:["i".concat(et.sup7),"ii","III","iv".concat(et.sup7),"v".concat(et.sup7),"VI","VII"]},lr={borrowedFromMinor:["i","ii","".concat(et.flat,"III"),"iv","v","".concat(et.flat,"VI"),"".concat(et.flat,"VII")],borrowedFromMinor7:["i".concat(et.sup7),"ii","".concat(et.flat,"III"),"iv".concat(et.sup7),"v".concat(et.sup7),"".concat(et.flat,"VI"),"".concat(et.flat,"VII")],borrowedFromMajor:["I","ii","".concat(et.sharp,"iii"),"IV","V","".concat(et.sharp,"vi"),"".concat(et.sharp,"vii")],borrowedFromDom7:["I","ii".concat(et.sup7),"".concat(et.sharp,"iii").concat(et.sup7),"IV","V".concat(et.sup7),"".concat(et.sharp,"vi").concat(et.sup7),"".concat(et.sharp,"vii")]};function ki(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",c=arguments.length>1?arguments[1]:void 0,m,T,N;a||(a=c.normalized.rootNote);var k=a.indexOf("m")>-1?"minor":"major",Y=Un.includes(c.normalized.quality)?"minor":"major";m=Bi(a,k,c,Y);var st=Wi(c),_t=Gi[c.normalized.quality](c,st);return T="".concat(m).concat(_t),Ui(k,T)?N="diatonic":Ki(k,T)?N="borrowed":(N="unknown",m="?",T="".concat(m).concat(_t)),T+=st,c.numeral={symbol:T,degree:m,descriptor:_t,inversion:st,type:N,thirdQuality:Y},c}function Bi(a,c,m,T){var N=a.replace("m",""),k=zi(N,m.normalized.rootNote),Y=$i[c][k]||"?";return T==="minor"?Y.toLowerCase():Y}function zi(a,c){var m=dt.indexOf(St[a]||a),T=dt.indexOf(St[c]||c);return(T-m+12)%12}var Gi=(Ct={},Dt(Ct,F.ma,function(){return""}),Dt(Ct,F.ma6,function(){return""}),Dt(Ct,F.ma7,function(){return""}),Dt(Ct,F.dom7,function(a,c){return c===""?"".concat(et.sup7):""}),Dt(Ct,F.mi,function(){return""}),Dt(Ct,F.mi6,function(){return""}),Dt(Ct,F.mi7,function(a,c){return a.normalized.intervals.includes("b5")?"":c===""?"".concat(et.sup7):""}),Dt(Ct,F.miMa7,function(){return"m"}),Dt(Ct,F.aug,function(){return"+"}),Dt(Ct,F.dim,function(){return""}),Dt(Ct,F.dim7,function(a,c){return c===""?"".concat(et.sup7):""}),Dt(Ct,F.power,function(){return""}),Dt(Ct,F.bass,function(){return""}),Ct);function Ui(a,c){return a==="major"?cr.major.includes(c)||cr.dom7.includes(c):cr.minor.includes(c)||cr.minor7.includes(c)}function Ki(a,c){return a==="major"?lr.borrowedFromMinor.includes(c)||lr.borrowedFromMinor7.includes(c):lr.borrowedFromMajor.includes(c)||lr.borrowedFromDom7.includes(c)}function Wi(a){var c="";return a.normalized.bassNote&&(Vi(a)?c=Wn(a)?"".concat(et.sup6).concat(et.sub5):"".concat(et.sup6):Yi(a)?c=Wn(a)?"".concat(et.sup4).concat(et.sub3):"".concat(et.sup6).concat(et.sub4):Xi(a)&&(c="")),c}function Wn(a){return[F.ma7,F.mi7,F.miMa7,F.dom7,F.dim7].includes(a.normalized.quality)}function Vi(a){return ne(a,"b3")||ne(a,"3")}function Yi(a){return ne(a,"b5")||ne(a,"5")||ne(a,"#5")}function Xi(a){return ne(a,"bb7")||ne(a,"b7")||ne(a,"7")}function ne(a,c){var m=a.normalized.intervals.indexOf(c);if(m===-1)return!1;var T=St[a.normalized.bassNote]||a.normalized.bassNote,N=St[a.normalized.notes[m]]||a.normalized.notes[m];return T===N}function Qi(a){var c=[Zi,Ji,qi,to];return a.input.descriptor&&(a.input.parsableDescriptor=s(c,a.input.descriptor)),a}function Zi(a){return a.replace(/[A-LN-Za-z]+/g,function(c){return c.toLowerCase()}).replace("oMit","omit").replace("diM","dim").replace("augMented","augmented")}function Ji(a){return a.replace(/ /g,"")}function qi(a){return a.replace(/(7?dim)(alt|add)/g,"$1 $2").replace(/([m|M])(alt|add)/g,"$1 $2").replace(/i(no[35])/g,"i $1").replace(/([b#]9)6/g,"$1 6").replace(/(9\/?6)/g," $1").replaceAll("+5","#5").replaceAll("-5","b5")}function to(a){var c,m,T;return a.replace(/\((.*?)\)/g,function(N,k){return c=[],m="",k.split(",").forEach(function(Y){T=!0,Y.startsWith("add")?m="add":Y.startsWith("omit")?m="omit":Y.startsWith("no")?m="no":T=!1,T?c.push(Y):c.push(m+Y)})," "+c.join(" ")+" "})}function eo(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;return{input:{symbol:c},normalized:{},formatted:{},parserConfiguration:n()(a)}}var ro={C:"flat",D:"sharp",E:"sharp",F:"flat",G:"sharp",A:"sharp",B:"sharp",Cm:"flat",Dm:"flat",Em:"sharp",Fm:"flat",Gm:"flat",Am:"flat",Bm:"sharp"};function no(a){return a.indexOf("#")>-1?"sharp":a.indexOf("b")>-1?"flat":ro[a]}function fr(a){return oo(a)||io(a)||so(a)||ao()}function ao(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function so(a,c){if(a){if(typeof a=="string")return Xr(a,c);var m=Object.prototype.toString.call(a).slice(8,-1);if(m==="Object"&&a.constructor&&(m=a.constructor.name),m==="Map"||m==="Set")return Array.from(a);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return Xr(a,c)}}function io(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function oo(a){if(Array.isArray(a))return Xr(a)}function Xr(a,c){(c==null||c>a.length)&&(c=a.length);for(var m=0,T=new Array(c);m<c;m++)T[m]=a[m];return T}function Qr(a){var c=a.normalized.rootNote,m=a.normalized.semitones,T=a.normalized.quality,N=c;Un.includes(T)&&(N+="m");var k=no(N)==="sharp"?dt:Tt,Y=k.indexOf(c),st=[].concat(fr(k.slice(Y)),fr(k.slice(0,Y)),fr(k.slice(Y)),fr(k.slice(0,Y)));return a.normalized.notes=m.map(function(_t){return st[_t]}),a}function uo(a){return a.normalized.rootNote=J[a.input.rootNote],a.input.bassNote&&(a.normalized.bassNote=J[a.input.bassNote]),a}var co=h(6678),Zr=h.n(co),lo=h(3311),fo=h.n(lo),ho=h(4908),Vn=h.n(ho),po=h(2569),Yn=h.n(po);function Ge(a){"@babel/helpers - typeof";return Ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},Ge(a)}function Xn(a,c){var m=Object.keys(a);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(a);c&&(T=T.filter(function(N){return Object.getOwnPropertyDescriptor(a,N).enumerable})),m.push.apply(m,T)}return m}function we(a){for(var c=1;c<arguments.length;c++){var m=arguments[c]!=null?arguments[c]:{};c%2?Xn(Object(m),!0).forEach(function(T){Rt(a,T,m[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(m)):Xn(Object(m)).forEach(function(T){Object.defineProperty(a,T,Object.getOwnPropertyDescriptor(m,T))})}return a}function Rt(a,c,m){return c=mo(c),c in a?Object.defineProperty(a,c,{value:m,enumerable:!0,configurable:!0,writable:!0}):a[c]=m,a}function mo(a){var c=vo(a,"string");return Ge(c)==="symbol"?c:String(c)}function vo(a,c){if(Ge(a)!=="object"||a===null)return a;var m=a[Symbol.toPrimitive];if(m!==void 0){var T=m.call(a,c||"default");if(Ge(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(a)}function Qn(a){return So(a)||bo(a)||yo(a)||go()}function go(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yo(a,c){if(a){if(typeof a=="string")return Jr(a,c);var m=Object.prototype.toString.call(a).slice(8,-1);if(m==="Object"&&a.constructor&&(m=a.constructor.name),m==="Map"||m==="Set")return Array.from(a);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return Jr(a,c)}}function bo(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function So(a){if(Array.isArray(a))return Jr(a)}function Jr(a,c){(c==null||c>a.length)&&(c=a.length);for(var m=0,T=new Array(c);m<c;m++)T[m]=a[m];return T}function Zn(a){var c=Zr()(a.normalized.intervals),m={quality:"",isSuspended:!1,extensions:[],alterations:[],adds:[],omits:[]};if(_o(c))m.quality=F.power;else if(xo(c))m.quality=F.bass;else{var T=Eo(c,a.normalized.intents.major),N=To(c,a.normalized.intents.major),k=wo(c,a,N,T),Y=k.qualityIntervals,st=k.quality,_t=Po(c,st),Ut=["1"].concat(Qn(Y),Qn(_t)),se=Ro(c,Ut,st),Ae=se.adds,ve=se.alterations;m=we(we({},m),{},{quality:st,isSuspended:N,extensions:_t,alterations:ve,adds:Ae,omits:T})}return we(we({},a),{},{normalized:we(we({},a.normalized),m)})}function _o(a){return me(a,["1","5"])}function xo(a){return me(a,["1"])}function To(a,c){return a.includes("4")||a.includes("11")&&c&&!a.includes("3")}function Eo(a,c){var m=[];return(kt(a,["b3","3","4","11"])||!c&&kt(a,["b3","4"]))&&m.push(c?"3":"b3"),kt(a,["b5","5","#5","b13"])&&m.push("5"),m}function wo(a,c,m,T){var N=Oo(a,c,m,T),k=[{qualityIntervals:["b3"],quality:F.mi},{qualityIntervals:["b3","6"],quality:F.mi6},{qualityIntervals:["b3","7"],quality:F.miMa7},{qualityIntervals:["b3","b7"],quality:F.mi7},{qualityIntervals:["3"],quality:F.ma},{qualityIntervals:["3","6"],quality:F.ma6},{qualityIntervals:["3","7"],quality:F.ma7},{qualityIntervals:["3","b7"],quality:F.dom7},{qualityIntervals:["3","#5"],quality:F.aug},{qualityIntervals:["b3","b5"],quality:F.dim},{qualityIntervals:["b3","b5","bb7"],quality:F.dim7}].sort(function(Y,st){return st.qualityIntervals.length-Y.qualityIntervals.length});return fo()(k,function(Y){return Gt(N,Y.qualityIntervals)})}function Oo(a,c,m,T){var N=[Ao.bind(null,T),Co.bind(null,m,c.normalized.intents.major),Io.bind(null,c.normalized.intents.alt),Vn()];return s(N,Zr()(a))}function Ao(a,c){var m=Zr()(c);return a.includes("3")?m.push("3"):a.includes("b3")&&m.push("b3"),m}function Co(a,c,m){if(a){var T=Yn()(m,"4");return T.push(c?"3":"b3"),T}return m}function Io(a,c){if(a){var m=Yn()(c,"b5","#5");return m.push("5"),m}return c}function Po(a,c){var m=[];return Mo(c)&&(jo(a,c)?m.push("9","11","13"):Do(a,c)?m.push("9","13"):Lo(a)?m.push("9","11"):No(a)&&m.push("9")),m}function Mo(a){return[F.ma7,F.dom7,F.mi7,F.miMa7].includes(a)}function Jn(a){return[F.mi7,F.miMa7].includes(a)}function jo(a,c){return Jn(c)&&nt(a,"13")&&nt(a,["11","#11"])&&nt(a,["b9","9","#9"])}function Do(a,c){return!Jn(c)&&nt(a,"13")&&nt(a,["b9","9","#9"])}function Lo(a){return nt(a,"11")&&nt(a,["b9","9","#9"])}function No(a){return a.includes("9")}function Ro(a,c,m){var T=[],N=[];return a.filter(function(k){return k!=="5"&&k!=="4"}).forEach(function(k){c.includes(k)||($o(m,k)?N.push(k):T.push(k))}),Fo(a)&&T.push("3"),{adds:qn(T),alterations:qn(N)}}function $o(a,c){var m,T=(m={},Rt(m,F.ma,["b5","#5","#11","b13"]),Rt(m,F.ma6,["b5","#5","#11","b13"]),Rt(m,F.ma7,["b5","#5","#11","b13"]),Rt(m,F.dom7,["b5","#5","b9","#9","#11","b13"]),Rt(m,F.mi,["b5","#5","#11","b13"]),Rt(m,F.mi6,["b5","#5","#11","b13"]),Rt(m,F.mi7,["b5","#5","#11","b13"]),Rt(m,F.miMa7,["b5","#5","#11","b13"]),Rt(m,F.aug,[]),Rt(m,F.dim,[]),Rt(m,F.dim7,[]),m);return T[a].includes(c)}function Fo(a){return Gt(a,["3","4"])}function qn(a){return a.sort(function(c,m){var T=Number.parseInt(c.replace(/[b#]/,"")),N=Number.parseInt(m.replace(/[b#]/,""));return T-N})}function Ho(a,c){var m=c.input.symbol,T=a.join("|"),N=new RegExp("^("+T+")(.*?)(/("+T+"))?$"),k=m.match(N);if(k&&k[1])return c.input.rootNote=k[1],k[2]&&(c.input.descriptor=k[2]),k[4]&&(c.input.bassNote=k[4]),c;throw new Ht(c)}function Ue(a){"@babel/helpers - typeof";return Ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},Ue(a)}function ta(a,c){var m=Object.keys(a);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(a);c&&(T=T.filter(function(N){return Object.getOwnPropertyDescriptor(a,N).enumerable})),m.push.apply(m,T)}return m}function dr(a){for(var c=1;c<arguments.length;c++){var m=arguments[c]!=null?arguments[c]:{};c%2?ta(Object(m),!0).forEach(function(T){ko(a,T,m[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(m)):ta(Object(m)).forEach(function(T){Object.defineProperty(a,T,Object.getOwnPropertyDescriptor(m,T))})}return a}function ko(a,c,m){return c=Bo(c),c in a?Object.defineProperty(a,c,{value:m,enumerable:!0,configurable:!0,writable:!0}):a[c]=m,a}function Bo(a){var c=zo(a,"string");return Ue(c)==="symbol"?c:String(c)}function zo(a,c){if(Ue(a)!=="object"||a===null)return a;var m=a[Symbol.toPrimitive];if(m!==void 0){var T=m.call(a,c||"default");if(Ue(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(a)}var R={ma:"ma",mi:"mi",dim:"dim",halfDim:"halfDim",aug:"aug",seventh:"seventh",sus:"sus",sus2:"sus2",ninth:"ninth",eleventh:"eleventh",thirteenth:"thirteenth",fifthFlat:"b5",fifthSharp:"#5",ninthFlat:"b9",ninthSharp:"#9",eleventhSharp:"#11",thirteenthFlat:"b13",add3:"add3",add4:"add4",addb6:"addb6",add6:"add6",add69:"add69",add7:"add7",add9:"add9",add11:"add11",add13:"add13",bass:"bass",omit3:"omit3",omit5:"omit5",power:"power",alt:"alt"},qr={"^":[R.ma,R.add7],:[R.ma,R.add7],M:R.ma,Ma:R.ma,Maj:R.ma,Major:R.ma,ma:R.ma,maj:R.ma,major:R.ma},Go=ra(qr,R.add7,function(a){return a+"7"}),Uo=ra(qr,R.add7,function(a){return"add"+a+"7"}),ea=dr(dr(dr(dr({},qr),Go),{},{"-":R.mi,m:R.mi,Mi:R.mi,Min:R.mi,Minor:R.mi,mi:R.mi,min:R.mi,minor:R.mi,"":R.dim,o:R.dim,0:R.dim,dim:R.dim,"dim.":R.dim,diminished:R.dim,:R.halfDim,:R.halfDim,h:R.halfDim,"+":R.aug,aug:R.aug,augmented:R.aug,7:R.seventh,4:R.sus,sus:R.sus,sus4:R.sus,suspended:R.sus,suspended4:R.sus,sus2:R.sus2,suspended2:R.sus2,9:R.ninth,11:R.eleventh,13:R.thirteenth,b3:R.mi,b5:R.fifthFlat,"5":R.fifthFlat,"#5":R.fifthSharp,"5":R.fifthSharp,b9:R.ninthFlat,"9":R.ninthFlat,addb9:R.ninthFlat,"add9":R.ninthFlat,"#9":R.ninthSharp,"9":R.ninthSharp,"add#9":R.ninthSharp,"add9":R.ninthSharp,"#11":R.eleventhSharp,"11":R.eleventhSharp,"add#11":R.eleventhSharp,b13:R.thirteenthFlat,"13":R.thirteenthFlat,addb13:R.thirteenthFlat,"add13":R.thirteenthFlat},Uo),{},{2:R.add9,add2:R.add9,add3:R.add3,add4:R.add4,addb6:R.addb6,b6:R.addb6,6:R.add6,add6:R.add6,"6/9":R.add69,69:R.add69,96:R.add69,"9/6":R.add69,add9:R.add9,add11:R.add11,add13:R.add13,bass:R.bass,omit3:R.omit3,no3:R.omit3,omit5:R.omit5,no5:R.omit5,5:R.power,alt:R.alt,"alt.":R.alt,altered:R.alt});function ra(a,c,m){return Object.keys(a).map(m).reduce(function(T,N){return T[N]=c,T},{})}var Ko=Object.keys(ea).sort(function(a,c){return c.length-a.length});const z=R,hr={1:0,2:2,b3:3,3:4,4:5,b5:6,5:7,"#5":8,b6:8,6:9,bb7:9,b7:10,7:11,b9:13,9:14,"#9":15,11:17,"#11":18,b13:20,13:21};function ae(a){return Xo(a)||Yo(a)||Vo(a)||Wo()}function Wo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vo(a,c){if(a){if(typeof a=="string")return tn(a,c);var m=Object.prototype.toString.call(a).slice(8,-1);if(m==="Object"&&a.constructor&&(m=a.constructor.name),m==="Map"||m==="Set")return Array.from(a);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return tn(a,c)}}function Yo(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Xo(a){if(Array.isArray(a))return tn(a)}function tn(a,c){(c==null||c>a.length)&&(c=a.length);for(var m=0,T=new Array(c);m<c;m++)T[m]=a[m];return T}function Qo(a,c){var m=[];return c.input.parsableDescriptor&&(m=Zo(c)),c.input.modifiers=m,c.normalized.intervals=Jo(m,a),c.normalized.semitones=uu(c.normalized.intervals),c.normalized.intents=cu(m),c}function Zo(a){var c=a.input.parsableDescriptor,m=[],T=new RegExp(Ko.map(ou).join("|"),"g"),N=c.match(T),k=c,Y;if(N&&N.forEach(function(st){Y=ea[st],Array.isArray(Y)||(Y=[Y]),Y.forEach(function(_t){m.includes(_t)||(m.push(_t),k=k.replace(st,""))})}),m.length===0)throw new Ht(a);if(k.trim().length>0)throw new ke(a,k);return m}function Jo(a,c){return a.includes(z.power)?["1","5"]:a.includes(z.bass)?["1"]:Vn()(["1"].concat(ae(qo(a)),ae(tu(a)),ae(eu(a,c)),ae(ru(a)),ae(nu(a)),ae(au(a,c)),ae(su(a,c)),ae(iu(a,c)))).sort(function(m,T){return hr[m]-hr[T]})}function qo(a){var c=[];return a.includes(z.omit3)?[]:(nt(a,[z.sus,z.sus2])||(en(a)?a.includes(z.eleventh)||c.push("3"):c.push("b3")),a.includes(z.add3)&&c.push("3"),c)}function tu(a){var c=[];return nt(a,[z.sus,z.add4])&&c.push("4"),c}function eu(a,c){var m=[];return a.includes(z.omit5)?[]:((nt(a,[z.dim,z.halfDim,z.fifthFlat])||Oe(a,c,"b5"))&&m.push("b5"),(nt(a,[z.aug,z.fifthSharp])||Oe(a,c,"#5"))&&m.push("#5"),!m.length&&!a.includes(z.thirteenthFlat)&&m.push("5"),m)}function ru(a){var c=[];return nt(a,[z.addb6])&&c.push("b6"),nt(a,[z.add6,z.add69])&&!aa(a)&&!nt(a,[z.halfDim])&&c.push("6"),c}function nu(a){var c=[];return nt(a,[z.alt])&&c.push("b7"),nt(a,[z.seventh,z.halfDim])?a.includes(z.dim)?c.push("bb7"):a.includes(z.halfDim)?c.push("b7"):c.push(na(a)):nt(a,[z.ninth,z.eleventh,z.thirteenth])&&c.push(na(a)),a.includes(z.add7)&&c.push("7"),c}function na(a){return a.includes(z.ma)?"7":"b7"}function au(a,c){var m=[];return nt(a,[z.add69,z.ninth,z.eleventh,z.thirteenth])&&kt(a,[z.ninthFlat,z.ninthSharp])&&m.push("9"),nt(a,[z.sus2,z.add9])&&m.push("9"),(nt(a,[z.ninthFlat])||Oe(a,c,"b9"))&&m.push("b9"),(nt(a,[z.ninthSharp])||Oe(a,c,"#9"))&&m.push("#9"),m}function su(a,c){var m=[];return(nt(a,[z.thirteenth])&&!en(a)||nt(a,[z.eleventh,z.add11]))&&m.push("11"),(nt(a,[z.eleventhSharp])||Oe(a,c,"#11"))&&m.push("#11"),m}function iu(a,c){var m=[];return(nt(a,[z.add13,z.thirteenth])||nt(a,[z.add6,z.add69])&&aa(a)||nt(a,[z.add6,z.add69])&&nt(a,[z.halfDim]))&&m.push("13"),(nt(a,[z.thirteenthFlat])||Oe(a,c,"b13"))&&m.push("b13"),m}function Oe(a,c,m){return a.includes(z.alt)&&c.includes(m)}function en(a){return kt(a,[z.mi,z.dim,z.dim7,z.halfDim])}function aa(a){return nt(a,[z.seventh,z.ninth,z.eleventh,z.thirteenth])}function ou(a){return a.replace(/[.\-*+?^${}()|[\]\\]/g,"\\$&")}function uu(a){return a.map(function(c){return hr[c]}).sort(function(c,m){return c-m})}function cu(a){return{major:en(a),eleventh:a.includes(z.eleventh),alt:a.includes(z.alt)}}function lu(a){return pu(a)||hu(a)||du(a)||fu()}function fu(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function du(a,c){if(a){if(typeof a=="string")return rn(a,c);var m=Object.prototype.toString.call(a).slice(8,-1);if(m==="Object"&&a.constructor&&(m=a.constructor.name),m==="Map"||m==="Set")return Array.from(a);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return rn(a,c)}}function hu(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function pu(a){if(Array.isArray(a))return rn(a)}function rn(a,c){(c==null||c>a.length)&&(c=a.length);for(var m=0,T=new Array(c);m<c;m++)T[m]=a[m];return T}function mu(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=["b5","#5","b9","#9","#11","b13"],m=["english","german","latin"],T=a.notationSystems,N=T===void 0?n()(m):T,k=a.altIntervals,Y=k===void 0?n()(c):k,st=a.customFilters,_t=st===void 0?[]:st,Ut=a.key,se=Ut===void 0?"":Ut;return vu(Y,c),gu(N,m),p(_t),yu(se),Ae;function Ae(ve){var ie=[];if(!bu(ve)){var un=new Nt;ie.push(nn(un))}var Qt=n()(X).filter(function(cn){return N.includes(cn.name)}),oe,We,ue;if(!ie.length)for(;Qt.length&&!oe;){ue=Qt.shift(),We=[eo.bind(null,a),Ho.bind(null,ue.notes),Qi,Qo.bind(null,Y),ir,uo,Zn,Kn,Bt,Qr,ki.bind(null,se)].concat(lu(_t));try{oe=s(We,ve),oe?oe.input.notationSystem=ue.name:ie.push(Su(ue.name))}catch(cn){ie.push(nn(cn,ue.name))}}return oe||{error:ie}}}function vu(a,c){sa("altIntervals",a,c,!0)}function gu(a,c){sa("notationSystems",a,c)}function sa(a,c,m,T){if(!Array.isArray(c))throw new TypeError("'".concat(a,"' should be an array"));if(!T&&c.length===0)throw new TypeError("'".concat(a,"' cannot be empty"));c.forEach(function(N){if(!m.includes(N))throw new TypeError("'".concat(N,"' is not a valid value for ").concat(a))})}function yu(a){if(a!==""&&(!u()(a)||!L.includes(a)))throw new TypeError("'".concat(a,"' is not a valid value for key"))}function bu(a){return typeof a=="string"&&a.length>0}function Su(a){var c=new rt;return nn(c,a)}function nn(a,c){return{type:a.name,chord:a.chord,message:a.message,notationSystem:c}}const ia=mu;function Ke(a){"@babel/helpers - typeof";return Ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},Ke(a)}function oa(a,c){var m=Object.keys(a);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(a);c&&(T=T.filter(function(N){return Object.getOwnPropertyDescriptor(a,N).enumerable})),m.push.apply(m,T)}return m}function pr(a){for(var c=1;c<arguments.length;c++){var m=arguments[c]!=null?arguments[c]:{};c%2?oa(Object(m),!0).forEach(function(T){_u(a,T,m[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(m)):oa(Object(m)).forEach(function(T){Object.defineProperty(a,T,Object.getOwnPropertyDescriptor(m,T))})}return a}function _u(a,c,m){return c=xu(c),c in a?Object.defineProperty(a,c,{value:m,enumerable:!0,configurable:!0,writable:!0}):a[c]=m,a}function xu(a){var c=Tu(a,"string");return Ke(c)==="symbol"?c:String(c)}function Tu(a,c){if(Ke(a)!=="object"||a===null)return a;var m=a[Symbol.toPrimitive];if(m!==void 0){var T=m.call(a,c||"default");if(Ke(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(a)}var Xt={sus2:"sus2",add2:"2",omit:"no",ma:"M",mi:"m",dim:"",aug7:"7+",eleventh:"11"};function Eu(a){var c,m=a.formatted.chordChanges;return wu(a)?(c=Xt.sus2,m=[]):Ou(a)?(c=Xt.add2,m=[]):Au(a)?(c=Xt.aug7,m=[]):(c=a.formatted.descriptor.replace("mi",Xt.mi).replace(/[m|M]a/,Xt.ma).replace("dim",Xt.dim),Cu(a)&&(c=c.replace(/7sus|9sus/,Xt.eleventh))),m=m.map(function(T){return T.replace(/[m|M]a/,Xt.ma).replace("omit",Xt.omit)}),pr(pr({},a),{},{formatted:pr(pr({},a.formatted),{},{descriptor:c,chordChanges:m})})}function wu(a){return me(a.normalized.intervals,["1","5","9"])}function Ou(a){return me(a.normalized.intervals,["1","3","5","9"])}function Au(a){return me(a.normalized.intervals,["1","3","#5","b7"])}function Cu(a){return a.normalized.intents.eleventh}var Iu=h(1966),Pu=h.n(Iu);function Mu(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"none",c=arguments.length>1?arguments[1]:void 0;if(a==="none")return c;var m={max:["4","b5","#5","6","bb7","b7","7","b9","9","#9","11","#11","b13","13"],core:["4","b9","9","#9","11","#11","b13","13"]},T=Pu()(c.normalized.intervals,m[a]);kt(T,["b3","3"])&&T.push(c.normalized.intents.major?"3":"b3"),kt(T,["b5","5","#5"])&&T.push("5"),c.normalized.intervals=T,c.normalized.semitones=T.map(function(k){return hr[k]}),c.normalized.intents.eleventh=!1,c.normalized.intents.alt=!1,a==="max"&&delete c.normalized.bassNote;var N=[Zn,Kn,Qr];return s(N,c)}function ju(a,c,m){var T=m.normalized,N=T.rootNote,k=T.bassNote,Y=ca(N);if(m.normalized.rootNote=ua(Y,a,c),m.formatted.rootNote=m.normalized.rootNote,k){var st=ca(k);m.normalized.bassNote=ua(st,a,c),m.formatted.bassNote=m.normalized.bassNote}return Qr(m)}function ua(a,c,m){var T=dt.indexOf(a),N=T+c,k=Math.floor(N/12),Y=N-k*12,st=dt[Y];return m==="flat"&&Mt[st]||st}function ca(a){return St[a]||a}var an={german:{Ab:"As",A:"A","A#":"Ais",Bb:"Hes",B:"H",C:"C","C#":"Cis",Db:"Des",D:"D","D#":"Dis",Eb:"Es",E:"E",F:"F","F#":"Fis",Gb:"Ges",G:"G","G#":"Gis"},latin:{Ab:"Lab",A:"La","A#":"La#",Bb:"Sib",B:"Si",C:"Do","C#":"Do#",Db:"Reb",D:"Re","D#":"Re#",Eb:"Mib",E:"Mi",F:"Fa","F#":"Fa#",Gb:"Solb",G:"Sol","G#":"Sol#"}},Du=Object.keys(an);function Lu(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"english",c=arguments.length>1?arguments[1]:void 0,m=a==="auto"?c.input.notationSystem:a;return m==="english"?c:Du.includes(m)?(c.formatted.rootNote=an[m][c.formatted.rootNote],c.formatted.bassNote&&(c.formatted.bassNote=an[m][c.formatted.bassNote]),c):null}function la(a){return a&&a.formatted&&a.formatted.symbol?a.formatted.symbol:null}function Nu(a){delete a.parserConfiguration.notationSystems;var c=n()(a),m=la(a),T=ia(a.parserConfiguration),N=T(m);return c.input=N.input,c}function sn(a){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},sn(a)}function Ru(a){return ku(a)||Hu(a)||Fu(a)||$u()}function $u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fu(a,c){if(a){if(typeof a=="string")return on(a,c);var m=Object.prototype.toString.call(a).slice(8,-1);if(m==="Object"&&a.constructor&&(m=a.constructor.name),m==="Map"||m==="Set")return Array.from(a);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return on(a,c)}}function Hu(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function ku(a){if(Array.isArray(a))return on(a)}function on(a,c){(c==null||c>a.length)&&(c=a.length);for(var m=0,T=new Array(c);m<c;m++)T[m]=a[m];return T}function Bu(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=a.accidental,m=c===void 0?"original":c,T=a.customFilters,N=T===void 0?[]:T,k=a.notationSystem,Y=k===void 0?"english":k,st=a.printer,_t=st===void 0?"text":st,Ut=a.simplify,se=Ut===void 0?"none":Ut,Ae=a.transposeValue,ve=Ae===void 0?0:Ae,ie=a.useShortNamings,un=ie===void 0?!1:ie;p(N);var Qt=[];return["max","core"].includes(se)&&Qt.push(Mu.bind(null,se)),(m!=="original"||ve!==0)&&Qt.push(ju.bind(null,ve,m)),un&&Qt.push(Eu),Qt.push.apply(Qt,[Lu.bind(null,Y),Bt].concat(Ru(N))),oe;function oe(We){if(!zu(We))return null;var ue=s(Qt,n()(We));return _t==="raw"?Nu(ue):la(ue)}}var zu=function(c){return c&&sn(c)==="object"&&!c.error&&c.input};const Gu=Bu})(),S})())})(Bs);var Aa=Bs.exports,Cl=Array.isArray,jr=Cl;const Il=xs(jr);function Pl(){this.__data__=[],this.size=0}var Ml=Pl;function jl(e,t){return e===t||e!==e&&t!==t}var zs=jl,Dl=zs;function Ll(e,t){for(var r=e.length;r--;)if(Dl(e[r][0],t))return r;return-1}var Dr=Ll,Nl=Dr,Rl=Array.prototype,$l=Rl.splice;function Fl(e){var t=this.__data__,r=Nl(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():$l.call(t,r,1),--this.size,!0}var Hl=Fl,kl=Dr;function Bl(e){var t=this.__data__,r=kl(t,e);return r<0?void 0:t[r][1]}var zl=Bl,Gl=Dr;function Ul(e){return Gl(this.__data__,e)>-1}var Kl=Ul,Wl=Dr;function Vl(e,t){var r=this.__data__,i=Wl(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var Yl=Vl,Xl=Ml,Ql=Hl,Zl=zl,Jl=Kl,ql=Yl;function Me(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Me.prototype.clear=Xl;Me.prototype.delete=Ql;Me.prototype.get=Zl;Me.prototype.has=Jl;Me.prototype.set=ql;var Lr=Me,tf=Lr;function ef(){this.__data__=new tf,this.size=0}var rf=ef;function nf(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var af=nf;function sf(e){return this.__data__.get(e)}var of=sf;function uf(e){return this.__data__.has(e)}var cf=uf,lf=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,Gs=lf,ff=Gs,df=typeof self=="object"&&self&&self.Object===Object&&self,hf=ff||df||Function("return this")(),ee=hf,pf=ee,mf=pf.Symbol,Ln=mf,Ca=Ln,Us=Object.prototype,vf=Us.hasOwnProperty,gf=Us.toString,Ve=Ca?Ca.toStringTag:void 0;function yf(e){var t=vf.call(e,Ve),r=e[Ve];try{e[Ve]=void 0;var i=!0}catch{}var h=gf.call(e);return i&&(t?e[Ve]=r:delete e[Ve]),h}var bf=yf,Sf=Object.prototype,_f=Sf.toString;function xf(e){return _f.call(e)}var Tf=xf,Ia=Ln,Ef=bf,wf=Tf,Of="[object Null]",Af="[object Undefined]",Pa=Ia?Ia.toStringTag:void 0;function Cf(e){return e==null?e===void 0?Af:Of:Pa&&Pa in Object(e)?Ef(e):wf(e)}var Nr=Cf;function If(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ks=If,Pf=Nr,Mf=Ks,jf="[object AsyncFunction]",Df="[object Function]",Lf="[object GeneratorFunction]",Nf="[object Proxy]";function Rf(e){if(!Mf(e))return!1;var t=Pf(e);return t==Df||t==Lf||t==jf||t==Nf}var Ws=Rf,$f=ee,Ff=$f["__core-js_shared__"],Hf=Ff,fn=Hf,Ma=function(){var e=/[^.]+$/.exec(fn&&fn.keys&&fn.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function kf(e){return!!Ma&&Ma in e}var Bf=kf,zf=Function.prototype,Gf=zf.toString;function Uf(e){if(e!=null){try{return Gf.call(e)}catch{}try{return e+""}catch{}}return""}var Vs=Uf,Kf=Ws,Wf=Bf,Vf=Ks,Yf=Vs,Xf=/[\\^$.*+?()[\]{}|]/g,Qf=/^\[object .+?Constructor\]$/,Zf=Function.prototype,Jf=Object.prototype,qf=Zf.toString,td=Jf.hasOwnProperty,ed=RegExp("^"+qf.call(td).replace(Xf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rd(e){if(!Vf(e)||Wf(e))return!1;var t=Kf(e)?ed:Qf;return t.test(Yf(e))}var nd=rd;function ad(e,t){return e==null?void 0:e[t]}var sd=ad,id=nd,od=sd;function ud(e,t){var r=od(e,t);return id(r)?r:void 0}var je=ud,cd=je,ld=ee,fd=cd(ld,"Map"),Nn=fd,dd=je,hd=dd(Object,"create"),Rr=hd,ja=Rr;function pd(){this.__data__=ja?ja(null):{},this.size=0}var md=pd;function vd(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var gd=vd,yd=Rr,bd="__lodash_hash_undefined__",Sd=Object.prototype,_d=Sd.hasOwnProperty;function xd(e){var t=this.__data__;if(yd){var r=t[e];return r===bd?void 0:r}return _d.call(t,e)?t[e]:void 0}var Td=xd,Ed=Rr,wd=Object.prototype,Od=wd.hasOwnProperty;function Ad(e){var t=this.__data__;return Ed?t[e]!==void 0:Od.call(t,e)}var Cd=Ad,Id=Rr,Pd="__lodash_hash_undefined__";function Md(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Id&&t===void 0?Pd:t,this}var jd=Md,Dd=md,Ld=gd,Nd=Td,Rd=Cd,$d=jd;function De(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}De.prototype.clear=Dd;De.prototype.delete=Ld;De.prototype.get=Nd;De.prototype.has=Rd;De.prototype.set=$d;var Fd=De,Da=Fd,Hd=Lr,kd=Nn;function Bd(){this.size=0,this.__data__={hash:new Da,map:new(kd||Hd),string:new Da}}var zd=Bd;function Gd(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Ud=Gd,Kd=Ud;function Wd(e,t){var r=e.__data__;return Kd(t)?r[typeof t=="string"?"string":"hash"]:r.map}var $r=Wd,Vd=$r;function Yd(e){var t=Vd(this,e).delete(e);return this.size-=t?1:0,t}var Xd=Yd,Qd=$r;function Zd(e){return Qd(this,e).get(e)}var Jd=Zd,qd=$r;function th(e){return qd(this,e).has(e)}var eh=th,rh=$r;function nh(e,t){var r=rh(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var ah=nh,sh=zd,ih=Xd,oh=Jd,uh=eh,ch=ah;function Le(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Le.prototype.clear=sh;Le.prototype.delete=ih;Le.prototype.get=oh;Le.prototype.has=uh;Le.prototype.set=ch;var Ys=Le,lh=Lr,fh=Nn,dh=Ys,hh=200;function ph(e,t){var r=this.__data__;if(r instanceof lh){var i=r.__data__;if(!fh||i.length<hh-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new dh(i)}return r.set(e,t),this.size=r.size,this}var mh=ph,vh=Lr,gh=rf,yh=af,bh=of,Sh=cf,_h=mh;function Ne(e){var t=this.__data__=new vh(e);this.size=t.size}Ne.prototype.clear=gh;Ne.prototype.delete=yh;Ne.prototype.get=bh;Ne.prototype.has=Sh;Ne.prototype.set=_h;var xh=Ne,Th="__lodash_hash_undefined__";function Eh(e){return this.__data__.set(e,Th),this}var wh=Eh;function Oh(e){return this.__data__.has(e)}var Ah=Oh,Ch=Ys,Ih=wh,Ph=Ah;function Or(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Ch;++t<r;)this.add(e[t])}Or.prototype.add=Or.prototype.push=Ih;Or.prototype.has=Ph;var Mh=Or;function jh(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var Dh=jh;function Lh(e,t){return e.has(t)}var Nh=Lh,Rh=Mh,$h=Dh,Fh=Nh,Hh=1,kh=2;function Bh(e,t,r,i,h,S){var s=r&Hh,l=e.length,n=t.length;if(l!=n&&!(s&&n>l))return!1;var o=S.get(e),u=S.get(t);if(o&&u)return o==t&&u==e;var d=-1,p=!0,v=r&kh?new Rh:void 0;for(S.set(e,t),S.set(t,e);++d<l;){var g=e[d],y=t[d];if(i)var _=s?i(y,g,d,t,e,S):i(g,y,d,e,t,S);if(_!==void 0){if(_)continue;p=!1;break}if(v){if(!$h(t,function(E,w){if(!Fh(v,w)&&(g===E||h(g,E,r,i,S)))return v.push(w)})){p=!1;break}}else if(!(g===y||h(g,y,r,i,S))){p=!1;break}}return S.delete(e),S.delete(t),p}var Xs=Bh,zh=ee,Gh=zh.Uint8Array,Uh=Gh;function Kh(e){var t=-1,r=Array(e.size);return e.forEach(function(i,h){r[++t]=[h,i]}),r}var Wh=Kh;function Vh(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}var Yh=Vh,La=Ln,Na=Uh,Xh=zs,Qh=Xs,Zh=Wh,Jh=Yh,qh=1,tp=2,ep="[object Boolean]",rp="[object Date]",np="[object Error]",ap="[object Map]",sp="[object Number]",ip="[object RegExp]",op="[object Set]",up="[object String]",cp="[object Symbol]",lp="[object ArrayBuffer]",fp="[object DataView]",Ra=La?La.prototype:void 0,dn=Ra?Ra.valueOf:void 0;function dp(e,t,r,i,h,S,s){switch(r){case fp:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case lp:return!(e.byteLength!=t.byteLength||!S(new Na(e),new Na(t)));case ep:case rp:case sp:return Xh(+e,+t);case np:return e.name==t.name&&e.message==t.message;case ip:case up:return e==t+"";case ap:var l=Zh;case op:var n=i&qh;if(l||(l=Jh),e.size!=t.size&&!n)return!1;var o=s.get(e);if(o)return o==t;i|=tp,s.set(e,t);var u=Qh(l(e),l(t),i,h,S,s);return s.delete(e),u;case cp:if(dn)return dn.call(e)==dn.call(t)}return!1}var hp=dp;function pp(e,t){for(var r=-1,i=t.length,h=e.length;++r<i;)e[h+r]=t[r];return e}var mp=pp,vp=mp,gp=jr;function yp(e,t,r){var i=t(e);return gp(e)?i:vp(i,r(e))}var bp=yp;function Sp(e,t){for(var r=-1,i=e==null?0:e.length,h=0,S=[];++r<i;){var s=e[r];t(s,r,e)&&(S[h++]=s)}return S}var _p=Sp;function xp(){return[]}var Tp=xp,Ep=_p,wp=Tp,Op=Object.prototype,Ap=Op.propertyIsEnumerable,$a=Object.getOwnPropertySymbols,Cp=$a?function(e){return e==null?[]:(e=Object(e),Ep($a(e),function(t){return Ap.call(e,t)}))}:wp,Ip=Cp;function Pp(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var Mp=Pp;function jp(e){return e!=null&&typeof e=="object"}var Fr=jp,Dp=Nr,Lp=Fr,Np="[object Arguments]";function Rp(e){return Lp(e)&&Dp(e)==Np}var $p=Rp,Fa=$p,Fp=Fr,Qs=Object.prototype,Hp=Qs.hasOwnProperty,kp=Qs.propertyIsEnumerable,Bp=Fa(function(){return arguments}())?Fa:function(e){return Fp(e)&&Hp.call(e,"callee")&&!kp.call(e,"callee")},zp=Bp,Ar={exports:{}};function Gp(){return!1}var Up=Gp;Ar.exports;(function(e,t){var r=ee,i=Up,h=t&&!t.nodeType&&t,S=h&&!0&&e&&!e.nodeType&&e,s=S&&S.exports===h,l=s?r.Buffer:void 0,n=l?l.isBuffer:void 0,o=n||i;e.exports=o})(Ar,Ar.exports);var Zs=Ar.exports,Kp=9007199254740991,Wp=/^(?:0|[1-9]\d*)$/;function Vp(e,t){var r=typeof e;return t=t??Kp,!!t&&(r=="number"||r!="symbol"&&Wp.test(e))&&e>-1&&e%1==0&&e<t}var Yp=Vp,Xp=9007199254740991;function Qp(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Xp}var Js=Qp,Zp=Nr,Jp=Js,qp=Fr,tm="[object Arguments]",em="[object Array]",rm="[object Boolean]",nm="[object Date]",am="[object Error]",sm="[object Function]",im="[object Map]",om="[object Number]",um="[object Object]",cm="[object RegExp]",lm="[object Set]",fm="[object String]",dm="[object WeakMap]",hm="[object ArrayBuffer]",pm="[object DataView]",mm="[object Float32Array]",vm="[object Float64Array]",gm="[object Int8Array]",ym="[object Int16Array]",bm="[object Int32Array]",Sm="[object Uint8Array]",_m="[object Uint8ClampedArray]",xm="[object Uint16Array]",Tm="[object Uint32Array]",ct={};ct[mm]=ct[vm]=ct[gm]=ct[ym]=ct[bm]=ct[Sm]=ct[_m]=ct[xm]=ct[Tm]=!0;ct[tm]=ct[em]=ct[hm]=ct[rm]=ct[pm]=ct[nm]=ct[am]=ct[sm]=ct[im]=ct[om]=ct[um]=ct[cm]=ct[lm]=ct[fm]=ct[dm]=!1;function Em(e){return qp(e)&&Jp(e.length)&&!!ct[Zp(e)]}var wm=Em;function Om(e){return function(t){return e(t)}}var Am=Om,Cr={exports:{}};Cr.exports;(function(e,t){var r=Gs,i=t&&!t.nodeType&&t,h=i&&!0&&e&&!e.nodeType&&e,S=h&&h.exports===i,s=S&&r.process,l=function(){try{var n=h&&h.require&&h.require("util").types;return n||s&&s.binding&&s.binding("util")}catch{}}();e.exports=l})(Cr,Cr.exports);var Cm=Cr.exports,Im=wm,Pm=Am,Ha=Cm,ka=Ha&&Ha.isTypedArray,Mm=ka?Pm(ka):Im,qs=Mm,jm=Mp,Dm=zp,Lm=jr,Nm=Zs,Rm=Yp,$m=qs,Fm=Object.prototype,Hm=Fm.hasOwnProperty;function km(e,t){var r=Lm(e),i=!r&&Dm(e),h=!r&&!i&&Nm(e),S=!r&&!i&&!h&&$m(e),s=r||i||h||S,l=s?jm(e.length,String):[],n=l.length;for(var o in e)(t||Hm.call(e,o))&&!(s&&(o=="length"||h&&(o=="offset"||o=="parent")||S&&(o=="buffer"||o=="byteLength"||o=="byteOffset")||Rm(o,n)))&&l.push(o);return l}var Bm=km,zm=Object.prototype;function Gm(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||zm;return e===r}var Um=Gm;function Km(e,t){return function(r){return e(t(r))}}var Wm=Km,Vm=Wm,Ym=Vm(Object.keys,Object),Xm=Ym,Qm=Um,Zm=Xm,Jm=Object.prototype,qm=Jm.hasOwnProperty;function tv(e){if(!Qm(e))return Zm(e);var t=[];for(var r in Object(e))qm.call(e,r)&&r!="constructor"&&t.push(r);return t}var ev=tv,rv=Ws,nv=Js;function av(e){return e!=null&&nv(e.length)&&!rv(e)}var sv=av,iv=Bm,ov=ev,uv=sv;function cv(e){return uv(e)?iv(e):ov(e)}var lv=cv,fv=bp,dv=Ip,hv=lv;function pv(e){return fv(e,hv,dv)}var mv=pv,Ba=mv,vv=1,gv=Object.prototype,yv=gv.hasOwnProperty;function bv(e,t,r,i,h,S){var s=r&vv,l=Ba(e),n=l.length,o=Ba(t),u=o.length;if(n!=u&&!s)return!1;for(var d=n;d--;){var p=l[d];if(!(s?p in t:yv.call(t,p)))return!1}var v=S.get(e),g=S.get(t);if(v&&g)return v==t&&g==e;var y=!0;S.set(e,t),S.set(t,e);for(var _=s;++d<n;){p=l[d];var E=e[p],w=t[p];if(i)var I=s?i(w,E,p,t,e,S):i(E,w,p,e,t,S);if(!(I===void 0?E===w||h(E,w,r,i,S):I)){y=!1;break}_||(_=p=="constructor")}if(y&&!_){var M=e.constructor,D=t.constructor;M!=D&&"constructor"in e&&"constructor"in t&&!(typeof M=="function"&&M instanceof M&&typeof D=="function"&&D instanceof D)&&(y=!1)}return S.delete(e),S.delete(t),y}var Sv=bv,_v=je,xv=ee,Tv=_v(xv,"DataView"),Ev=Tv,wv=je,Ov=ee,Av=wv(Ov,"Promise"),Cv=Av,Iv=je,Pv=ee,Mv=Iv(Pv,"Set"),jv=Mv,Dv=je,Lv=ee,Nv=Dv(Lv,"WeakMap"),Rv=Nv,En=Ev,wn=Nn,On=Cv,An=jv,Cn=Rv,ti=Nr,Re=Vs,za="[object Map]",$v="[object Object]",Ga="[object Promise]",Ua="[object Set]",Ka="[object WeakMap]",Wa="[object DataView]",Fv=Re(En),Hv=Re(wn),kv=Re(On),Bv=Re(An),zv=Re(Cn),ye=ti;(En&&ye(new En(new ArrayBuffer(1)))!=Wa||wn&&ye(new wn)!=za||On&&ye(On.resolve())!=Ga||An&&ye(new An)!=Ua||Cn&&ye(new Cn)!=Ka)&&(ye=function(e){var t=ti(e),r=t==$v?e.constructor:void 0,i=r?Re(r):"";if(i)switch(i){case Fv:return Wa;case Hv:return za;case kv:return Ga;case Bv:return Ua;case zv:return Ka}return t});var Gv=ye,hn=xh,Uv=Xs,Kv=hp,Wv=Sv,Va=Gv,Ya=jr,Xa=Zs,Vv=qs,Yv=1,Qa="[object Arguments]",Za="[object Array]",mr="[object Object]",Xv=Object.prototype,Ja=Xv.hasOwnProperty;function Qv(e,t,r,i,h,S){var s=Ya(e),l=Ya(t),n=s?Za:Va(e),o=l?Za:Va(t);n=n==Qa?mr:n,o=o==Qa?mr:o;var u=n==mr,d=o==mr,p=n==o;if(p&&Xa(e)){if(!Xa(t))return!1;s=!0,u=!1}if(p&&!u)return S||(S=new hn),s||Vv(e)?Uv(e,t,r,i,h,S):Kv(e,t,n,r,i,h,S);if(!(r&Yv)){var v=u&&Ja.call(e,"__wrapped__"),g=d&&Ja.call(t,"__wrapped__");if(v||g){var y=v?e.value():e,_=g?t.value():t;return S||(S=new hn),h(y,_,r,i,S)}}return p?(S||(S=new hn),Wv(e,t,r,i,h,S)):!1}var Zv=Qv,Jv=Zv,qa=Fr;function ei(e,t,r,i,h){return e===t?!0:e==null||t==null||!qa(e)&&!qa(t)?e!==e&&t!==t:Jv(e,t,r,i,ei,h)}var qv=ei,tg=qv;function eg(e,t){return tg(e,t)}var rg=eg;const ng=xs(rg);function ag(e,t){const r=Il(t)?t:[t];return ng(e,r)}const sg=["replace_last_line","replace_last_lines","append_content","replace_first_line","prepend_content"];function ig(e,t,r,i,h){if(r.length>1&&(r=[r.join(`
`).trim()]),e.length<3)return console.log("Ignoring part variant ",t," on ",e," - originalLines content too short!"),e;if(t==="replace_last_line")return i?[...e.slice(0,-2),...r,...e.slice(-1)]:[e[0],h+" ..."+r,...e.slice(-1)];if(t==="replace_last_lines")throw new Error("Replace last lines not yet supported!");if(t==="append_content")return i?[...e.slice(0,-1),...r,...e.slice(-1)]:[e[0],h+" + "+r,...e.slice(-1)];if(t==="replace_first_line")return i?[...e.slice(0,1),h+" "+r[0],...e.slice(2,-1)]:[e[0],h+" "+r[0]+"...",...e.slice(-1)];if(t==="prepend_content"){console.log(r[0]+"...",e.slice(-1));const S=new RegExp("^"+h,"g");if(i){const s=[...e.slice(0,1),h+" "+r[0],...e.slice(1,-1).map(l=>l.replace(S,""))];return console.log(s),s}else{const s=[e[0],h+" "+r[0]+"...",e[1].replace(S,""),...e.slice(-1)];return console.log(s,S),s}}}function og(e,t=["chorus"],r=["R"],i=!0){if(t.length!==r.length)throw new Error("Directives and shortHands must be the same length.");const h={},S=t.map((_,E)=>({directive:_,shortHand:r[E],startRegex:new RegExp(`^\\{start_of_${_}(?::\\s*([\\w\\-_+ ]+))?\\}`),endRegex:new RegExp(`^\\{end_of_${_}\\}`),callRegex:new RegExp(`^\\{${_}(?::\\s*([\\w\\-_+ ]+))?\\}`)}));let s=null,l=null,n=null,o=null,u=null,d=!1;const p=new RegExp("^\\{start_of_variant: ([\\w\\-_+]+)\\}"),v=new RegExp("^\\{end_of_variant\\}"),g="a4c0d35c95a63a805915367dcfe6b751";return e.split(`
`).map(_=>{const E=_.match(p);if(E){if(!sg.includes(E[1])){console.log("Invalid variant type: ",o," --> Skipping...");return}o=E[1],u=[],d=!0;return}if(_.match(v)){d=!1;return}if(d){u.push(_);return}for(const{directive:I,shortHand:M,startRegex:D,endRegex:j,callRegex:G}of S){const O=_.match(D);if(O){s=I,n=O[1]||M||g,l=[_],h[I]=h[I]||{};return}if(_.match(j)&&l&&s===I){l.push(_),h[I][n]=l,n!==g&&(l[1]=n+": "+l[1]);const H=l;return s=null,l=null,n=null,H.join(`
`)}const U=_.match(G);if(U){const H=U[1]||M||g;let K=h[I][H];const W=`${H===g?"":`${H}:`}`;if(u?(K=ig(K,o,u,i,W),o=null,u=null):i||(K=[`{start_of_${I}}`,W,`{end_of_${I}}`]),K)return K.join(`
`)}}if(l!==null){l.push(_);return}return _}).map(_=>_?_.trim():null).filter(_=>_).join(`
`).trim()}function ug(e){return e=e.replace(/\{key: B([ieasm#b]){0,5}\}/g,"{key: Bb$1}"),e=e.replace(/\{key: H([ieasm#b]){0,5}\}/g,"{key: B$1}"),e=e.replace(/\[([A-Za-z\d#b,\s/]{0,10})\/B\]/g,"[$1/Bb]"),e=e.replace(/\[([A-Za-z\d#b,\s/]{0,10})\/H\]/g,"[$1/B]"),e=e.replace(/\[B([A-Za-z\d#b,\s/]{0,10})\]/g,"[Bb$1]"),e=e.replace(/\[H([A-Za-z\d#b,\s/]{0,10})\]/g,"[B$1]"),e}function cg(e,t,r){if(!(t&&r))return e;const h=t.transposed(r),S=Aa.chordParserFactory({key:t.note.toString()}),s=u=>{function d(p,v){const{rootNote:g,bassNote:y}=p.formatted;let _=g+v;return y&&(_+="/"+y),p.formatted.symbol=_,p}return ag(u.normalized.intervals,["1","5","9"])?u=d(u,"sus2"):u.formatted.descriptor=="ma7"?u=d(u,"maj7"):u.formatted.descriptor=="sus"&&(u=d(u,"sus4")),u},l=u=>(u.formatted.symbol.includes(",")||(u.formatted.symbol=u.formatted.symbol.replace("(","").replace(")","")),u),n=Aa.chordRendererFactory({notationSystem:"english",transposeValue:r,accidental:h.isFlat()?"flat":"sharp",customFilters:[s,l]}),o=(u,d)=>`[${n(S(d))}]`;return e=e.replace(/\[([A-Ha-h][A-Za-z\d#b,\s/]{0,10})\]/g,o),e}function lg(e,t=["verse","chorus","bridge"],r=!1){const i="a4c0d35c95a63a805915367dcfe6b751",S=new DOMParser().parseFromString(e,"text/html"),s={};return t.forEach(l=>{s[l]={defaultKey:!1}}),S.querySelectorAll(t.map(l=>`.${l}`).join(",")).forEach(l=>{const n=t.find(o=>l.classList.contains(o));if(n){const o=l.querySelector(".section-title"),u=o&&r?o.textContent.trim():i,d=Array.from(l.querySelectorAll(".chord")).map(_=>({element:_,chord:_.textContent.trim()})).filter(_=>_.chord),p=d.map(_=>_.chord);s[n][u]||(s[n][u]=[]);const v=(_,E)=>{const I=((D,j)=>Array.from(Array(Math.max(j.length,D.length)),(G,O)=>[D[O],j[O]]))(_,E).map(D=>D[0]===D[1]),M=I.reduce((D,j)=>D+(j?0:1),0);return{matches:I,distance:M}},g=s[n][u].map(_=>v(_,p)),y=g.reduce((_,E,w)=>E.distance<g[_].distance?w:_,0);s[n][u].length===0||g[y].distance>3?s[n][u].push(p):(g[y].distance>0&&s[n][u].push(p),l.classList.add("repeated-chords"),g[y].matches.forEach((_,E)=>{E>=d.length||_||d[E].element.classList.add("force-shown")}),g[y].matches.length<d.length&&d.slice(-(d.length-g[y].matches.length)).forEach(_=>_.element.classList.add("force-shown")))}}),S.body.innerHTML}function fg(e){const t=e.trim();return t.startsWith("Bb")?"B"+t.slice(2):t.startsWith("B")?"H"+t.slice(1):t.endsWith("Bb")?t.slice(0,-2)+"B":t.endsWith("B")?t.slice(0,-1)+"H":e}function dg(e){let r=new DOMParser().parseFromString(e,"text/html");return r=hg(r),r.querySelectorAll(".chord").forEach(h=>{h.textContent=fg(h.textContent),h.innerHTML=h.textContent.replace("b","").replace("#","").replace(/([67])/,"<sup>$1</sup>")}),r.body.innerHTML}function hg(e){return e.querySelectorAll("div.section").forEach(r=>{r.querySelectorAll("span.lyrics").forEach(h=>{var S,s;if((S=h.textContent)!=null&&S.includes("")||(s=h.textContent)!=null&&s.includes("")){const l=document.createElement("div");l.className="repetition",h.replaceWith(l),l.appendChild(h)}})}),e}function ri(e,t,r,i){const S=Qu(ug)(e),s=og(S,["chorus","bridge","verse"],["R","B",""],t),l=cg(s,r,i);return new Tn.ChordProParser().parse(l)}function pg(e){var r;const t=ri(e,!1,null,null);return Uu.parse(((r=t.getPossibleKey())==null?void 0:r.toString())||"")}function mg(e,t,r,i){const h=ri(e.content,r,e.key,t),S=new Tn.FormatterSettings;S.showMetadata=!1;let l=new Tn.HtmlFormatter(S).format(h).join(`
`);return i&&(l=dg(l)),lg(l,["verse-section","chorus-section","bridge-section"])}const ts=e=>{let t;const r=new Set,i=(o,u)=>{const d=typeof o=="function"?o(t):o;if(!Object.is(d,t)){const p=t;t=u??(typeof d!="object"||d===null)?d:Object.assign({},t,d),r.forEach(v=>v(t,p))}},h=()=>t,l={setState:i,getState:h,getInitialState:()=>n,subscribe:o=>(r.add(o),()=>r.delete(o))},n=t=e(i,h,l);return l},vg=e=>e?ts(e):ts,gg=e=>e;function yg(e,t=gg){const r=qt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return qt.useDebugValue(r),r}const bg=e=>{const t=vg(e),r=i=>yg(t,i);return Object.assign(r,t),r},Sg=e=>bg;function _g(e,t){let r;try{r=e()}catch{return}return{getItem:h=>{var S;const s=n=>n===null?null:JSON.parse(n,void 0),l=(S=r.getItem(h))!=null?S:null;return l instanceof Promise?l.then(s):s(l)},setItem:(h,S)=>r.setItem(h,JSON.stringify(S,void 0)),removeItem:h=>r.removeItem(h)}}const In=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(i){return In(i)(r)},catch(i){return this}}}catch(r){return{then(i){return this},catch(i){return In(i)(r)}}}},xg=(e,t)=>(r,i,h)=>{let S={storage:_g(()=>localStorage),partialize:y=>y,version:0,merge:(y,_)=>({..._,...y}),...t},s=!1;const l=new Set,n=new Set;let o=S.storage;if(!o)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${S.name}', the given storage is currently unavailable.`),r(...y)},i,h);const u=()=>{const y=S.partialize({...i()});return o.setItem(S.name,{state:y,version:S.version})},d=h.setState;h.setState=(y,_)=>{d(y,_),u()};const p=e((...y)=>{r(...y),u()},i,h);h.getInitialState=()=>p;let v;const g=()=>{var y,_;if(!o)return;s=!1,l.forEach(w=>{var I;return w((I=i())!=null?I:p)});const E=((_=S.onRehydrateStorage)==null?void 0:_.call(S,(y=i())!=null?y:p))||void 0;return In(o.getItem.bind(o))(S.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==S.version){if(S.migrate){const I=S.migrate(w.state,w.version);return I instanceof Promise?I.then(M=>[!0,M]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var I;const[M,D]=w;if(v=S.merge(D,(I=i())!=null?I:p),r(v,!0),M)return u()}).then(()=>{E==null||E(v,void 0),v=i(),s=!0,n.forEach(w=>w(v))}).catch(w=>{E==null||E(void 0,w)})};return h.persist={setOptions:y=>{S={...S,...y},y.storage&&(o=y.storage)},clearStorage:()=>{o==null||o.removeItem(S.name)},getOptions:()=>S,rehydrate:()=>g(),hasHydrated:()=>s,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(n.add(y),()=>{n.delete(y)})},S.skipHydration||g(),v||p},Tg=xg,pn={compact:{fitScreenMode:"fitXY",repeatParts:!1,repeatPartsChords:!1,twoColumns:!1,compactInFullScreen:!0,fontSize:12},maximizeFontSize:{fitScreenMode:"fitX",repeatParts:!0,repeatPartsChords:!0,twoColumns:!1,compactInFullScreen:!1,fontSize:12}},Eg=e=>Math.min(Math.max(4,e),160),de=Sg()(Tg((e,t)=>({layout:{...pn.compact,fontSize:12},customLayoutPreset:{...pn.compact,fontSize:12},layoutPreset:"compact",chords:{showChords:!0,czechChordNames:!0,inlineChords:!0},transpose:{steps:0,originalKey:void 0},actions:{setLayoutSettings:r=>e(i=>({layout:{...i.layout,...r,fontSize:r.fontSize?Eg(r.fontSize):i.layout.fontSize}})),setCustomLayoutPreset:r=>e(i=>({customLayoutPreset:{...i.customLayoutPreset,...r}})),setLayoutPreset:r=>e(()=>({layoutPreset:r})),setChordSettings:r=>e(i=>({chords:{...i.chords,...r}})),setTransposeSteps:r=>e(i=>({transpose:{...i.transpose,steps:r}})),setOriginalKey:r=>e(i=>({transpose:{...i.transpose,originalKey:r||void 0}})),applyPreset:r=>{const{actions:i,customLayoutPreset:h}=t();r==="custom"?i.setLayoutSettings(h):i.setLayoutSettings({...pn[r],compactInFullScreen:h.compactInFullScreen}),i.setLayoutPreset(r)},resetTranspose:()=>e(r=>({transpose:{...r.transpose,steps:0}}))}}),{name:"songview-settings-store",partialize:e=>{var t;return{layout:e.layout,customLayoutPreset:e.customLayoutPreset,layoutPreset:e.layoutPreset,chords:e.chords,transpose:{originalKey:(t=e.transpose.originalKey)==null?void 0:t.toString(),steps:0}}}})),wg=["showChords","czechChordNames","inlineChords"],Ir={showChords:{icon:A.jsx(ic,{}),label:"Show chords"},czechChordNames:{icon:A.jsx(cc,{}),label:"Czech notes (A-B-H-C)"},inlineChords:{icon:A.jsx(ac,{}),label:"Chords inline"}},Og=()=>{const{chords:e,actions:t}=de(),r=i=>{t.setChordSettings({[i]:!e[i]})};return A.jsxs(A.Fragment,{children:[A.jsx(Xe,{children:"Chord settings"}),A.jsx(Qe,{}),wg.map(i=>A.jsxs(Ye,{checked:e[i],disabled:i!=="showChords"&&!e.showChords,onCheckedChange:()=>r(i),onSelect:h=>h.preventDefault(),children:[A.jsx(fe,{icon:Ir[i].icon}),Ir[i].label]},i))]})},Ag=()=>{const{chords:e,actions:t}=de(),r=i=>{t.setChordSettings({[i]:!e[i]})};return A.jsxs(A.Fragment,{children:[A.jsx(Wt,{size:"icon",variant:"circular",isActive:e.showChords,className:"hidden sm:flex",onClick:()=>r("showChords"),children:Ir.showChords.icon}),A.jsx(Wt,{size:"icon",variant:"circular",className:"max-[620px]:hidden",isActive:e.inlineChords,disabled:!e.showChords,onClick:()=>r("inlineChords"),children:Ir.inlineChords.icon})]})},Cg=({})=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 531.12134 487.28763",fill:"none",stroke:"currentColor",children:A.jsxs("g",{transform:"matrix(0.1,0,0,-0.1,9.4062996,499.50655)",fill:"currentColor",stroke:"none",id:"g2",children:[A.jsx("path",{d:"M 2165,4890 C 1859,4864 1586,4788 1303,4649 688,4347 236,3787 70,3120 19,2918 6,2797 6,2560 6,2404 10,2314 23,2230 71,1922 175,1628 323,1381 564,979 896,671 1303,471 c 299,-147 559,-217 900,-242 128,-10 151,-9 171,4 29,19 37,48 22,79 -10,21 -20,24 -111,30 -388,28 -638,91 -925,234 -450,224 -799,574 -1016,1018 -296,609 -296,1323 0,1932 323,662 946,1115 1691,1229 151,24 470,24 620,1 814,-127 1465,-641 1764,-1393 70,-177 124,-401 137,-563 l 6,-85 -169,168 c -93,92 -177,167 -187,167 -22,0 -66,-44 -66,-67 0,-9 104,-122 232,-250 181,-182 238,-233 258,-233 20,0 76,51 258,233 223,224 245,251 224,283 -15,22 -50,34 -74,25 -13,-5 -95,-82 -183,-170 -107,-108 -162,-156 -167,-148 -4,7 -8,28 -8,47 0,61 -29,231 -60,357 -227,909 -998,1606 -1930,1743 -152,22 -390,31 -525,20 z",style:{display:"inline",stroke:"currentColor",strokeWidth:300.126,strokeOpacity:1},id:"path1"}),A.jsx("path",{d:"m 2411,3694 c -453,-156 -830,-289 -838,-295 -20,-17 -16,-50 32,-283 l 45,-217 v -518 -518 l -64,-7 c -223,-23 -387,-171 -388,-351 0,-90 24,-155 84,-220 91,-100 202,-146 348,-146 180,0 326,81 402,223 l 23,43 3,776 2,776 73,27 c 149,53 860,296 869,296 4,0 8,-231 8,-514 v -513 l -68,-6 c -126,-10 -245,-72 -314,-163 -175,-230 4,-531 327,-551 198,-13 370,79 443,235 l 27,57 3,815 3,815 -51,239 c -27,132 -50,243 -50,247 0,18 -34,39 -63,38 -18,0 -403,-129 -856,-285 z",id:"path21"}),A.jsx("path",{d:"m 2411,3694 c -453,-156 -830,-289 -838,-295 -20,-17 -16,-50 32,-283 l 45,-217 v -518 -518 l -64,-7 c -223,-23 -387,-171 -388,-351 0,-90 24,-155 84,-220 91,-100 202,-146 348,-146 180,0 326,81 402,223 l 23,43 3,776 2,776 73,27 c 149,53 860,296 869,296 4,0 8,-231 8,-514 v -513 l -68,-6 c -126,-10 -245,-72 -314,-163 -175,-230 4,-531 327,-551 198,-13 370,79 443,235 l 27,57 3,815 3,815 -51,239 c -27,132 -50,243 -50,247 0,18 -34,39 -63,38 -18,0 -403,-129 -856,-285 z m 819,139 c 0,-5 18,-93 40,-197 l 40,-189 v -649 c 0,-356 -3,-648 -6,-648 -3,0 -19,9 -34,20 -16,12 -54,32 -85,45 l -55,25 v 577 c 0,522 -2,578 -17,595 -9,10 -24,18 -34,18 -10,0 -262,-84 -561,-186 -362,-124 -549,-193 -560,-206 -17,-19 -18,-64 -18,-649 0,-346 -2,-629 -5,-629 -2,0 -25,13 -51,30 -26,16 -62,34 -81,41 l -33,11 v 535 536 l -42,199 c -22,109 -39,201 -35,204 3,3 254,91 559,196 304,104 641,220 748,258 192,67 230,77 230,63 z m -85,-1737 c 104,-47 154,-115 155,-209 1,-203 -305,-310 -512,-178 -144,92 -143,274 2,366 68,43 119,55 210,52 67,-2 98,-9 145,-31 z M 1777,1705 c 173,-79 215,-245 91,-361 -125,-119 -360,-117 -483,3 -136,132 -57,330 152,383 65,16 176,5 240,-25 z",id:"path2"})]})}),Ig=["twoColumns","repeatParts","repeatPartsChords","compactInFullScreen"],es={twoColumns:{icon:A.jsx(As,{}),label:"View as two columns"},repeatParts:{icon:A.jsx(lc,{}),label:"Show repeated parts"},repeatPartsChords:{icon:A.jsx(Cg,{}),label:"Show chords in repeated parts"},compactInFullScreen:{icon:A.jsx(oc,{}),label:"Auto fullscreen in compact view"}},Pg=({fullScreenHandle:e})=>{const{layout:t,layoutPreset:r,actions:i}=de(),h=[{icon:A.jsx(Is,{}),label:"Compact",value:"compact"},{icon:A.jsx(uc,{}),label:"Custom",value:"custom"},{icon:A.jsx(Ps,{}),label:"Scroll",value:"maximizeFontSize"}];return A.jsxs(A.Fragment,{children:[A.jsx(Wt,{size:"icon",variant:"circular",className:"max-sm:hidden",isActive:t.twoColumns,onClick:()=>i.setLayoutSettings({twoColumns:!t.twoColumns}),children:A.jsx(As,{})}),A.jsx(Wt,{size:"icon",variant:"circular",className:"max-[620px]:hidden",onClick:e.enter,children:A.jsx(Cs,{})}),A.jsx("div",{className:"flex flex-grow h-full align-center justify-center max-xsm:hidden  max-md:hide-fancy-switch-label ",id:"preset-selector-large",children:A.jsx(Sn,{options:h,setSelectedOption:S=>{i.applyPreset(S),S==="compact"&&t.compactInFullScreen&&e.enter()},selectedOption:r,roundedClass:"rounded-full"})}),A.jsx("div",{className:"flex flex-grow h-full align-center justify-center hide-fancy-switch-label xsm:hidden",id:"preset-selector-small",children:A.jsx(Sn,{options:h.filter(S=>S.value!=="custom"),setSelectedOption:S=>{i.applyPreset(S),S==="compact"&&t.compactInFullScreen&&e.enter()},selectedOption:r,hiddenHighlightOnOther:!0,roundedClass:"rounded-full"})})]})},Mg=({fullScreenHandle:e})=>{const{layout:t,actions:r}=de();function i(S){r.setLayoutSettings({...S}),r.setCustomLayoutPreset({...S}),r.setLayoutPreset("custom")}const h=1.2;return A.jsxs(A.Fragment,{children:[A.jsx(Xe,{children:"Font size"}),A.jsx(Qe,{}),A.jsxs(Ye,{checked:t.fitScreenMode==="fitXY",onSelect:S=>S.preventDefault(),onCheckedChange:()=>i({fitScreenMode:"fitXY"}),children:[A.jsx(fe,{icon:A.jsx(Is,{})}),"Fit screen"]},"fitXY"),A.jsxs(Ye,{checked:t.fitScreenMode==="fitX",onSelect:S=>S.preventDefault(),onCheckedChange:()=>i({fitScreenMode:"fitX"}),children:[A.jsx(fe,{icon:A.jsx(Ps,{})}),"Fit screen width"]},"fitX"),A.jsxs(_r,{onClick:()=>i({fitScreenMode:"none",fontSize:t.fontSize*h}),onSelect:S=>S.preventDefault(),children:[A.jsx(fe,{icon:A.jsx(ec,{})}),"Increase font size"]}),A.jsxs(_r,{onClick:()=>i({fitScreenMode:"none",fontSize:t.fontSize/h}),onSelect:S=>S.preventDefault(),children:[A.jsx(fe,{icon:A.jsx(tc,{})}),"Decrease font size"]}),A.jsx(Xe,{children:"Contents"}),A.jsx(Qe,{}),A.jsxs(_r,{onClick:()=>{e.enter()},children:[A.jsx(fe,{icon:A.jsx(Cs,{})}),"Enter fullscreen"]}),Ig.map(S=>A.jsxs(Ye,{checked:t[S],onCheckedChange:()=>i({[S]:!t[S]}),onSelect:s=>s.preventDefault(),children:[A.jsx(fe,{icon:es[S].icon}),es[S].label]},S))]})},ni=["C","C#","D","Es","E","F","F#","G","As","A","B","H"],jg=()=>{var h,S;const{transpose:e,actions:t}=de(),r=(h=e.originalKey)!=null&&h.note?new Ku("C").semitonesBetween((S=e.originalKey)==null?void 0:S.note):0,i=Q.useMemo(()=>[...Array(12).keys()].map(s=>s-r),[r]);return A.jsxs("div",{className:"flex items-center h-full",children:[A.jsx("div",{className:"hidden xl:block h-full",children:A.jsx(Pn,{values:i,selected:e.steps,onChange:t.setTransposeSteps})}),A.jsx("div",{className:"xl:hidden h-full",children:A.jsx(Lg,{values:i,selected:e.steps,onChange:t.setTransposeSteps})})]})};function Dg(e){const[t,r]=Q.useState(e),i=Q.useRef(null),h=S=>{i.current&&!i.current.contains(S.target)&&r(!1)};return Q.useEffect(()=>(document.addEventListener("click",h,!0),()=>{document.removeEventListener("click",h,!0)}),[]),{ref:i,isComponentVisible:t,setIsComponentVisible:r}}const Pn=({values:e,selected:t,onChange:r,vertical:i=!1})=>A.jsx(Sn,{options:ni.map((h,S)=>({label:h,value:e[S]})),selectedOption:t,setSelectedOption:r,vertical:i,roundedClass:"rounded-full",full:!0}),Lg=({values:e,selected:t,onChange:r})=>{const{ref:i,isComponentVisible:h,setIsComponentVisible:S}=Dg(!1);return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"hidden xl:flex h-full",children:A.jsx(Pn,{values:e,selected:t,onChange:r})}),A.jsxs("div",{className:"xl:hidden max-sm:hidden",children:[A.jsx(Wt,{size:"icon",variant:"circular",onClick:()=>S(!h),children:A.jsx(fa,{})}),A.jsx("div",{className:"absolute top-14 w-fit left-0",ref:i,children:h&&A.jsx(Ts,{showToolbar:h,className:"!px-0",children:A.jsx("div",{className:"w-full flex justify-center p-0 h-full",children:A.jsx(Pn,{values:e,selected:t,onChange:r})})})})]}),A.jsx("div",{className:"sm:hidden xl:hidden flex",children:A.jsxs(Es,{children:[A.jsx(ws,{asChild:!0,children:A.jsx(Wt,{size:"icon",variant:"circular",onClick:()=>S(!h),children:A.jsx(fa,{})})}),A.jsx(Os,{className:"w-12",children:ni.map((s,l)=>A.jsx(Ye,{checked:t===e[l],onSelect:n=>n.preventDefault(),onCheckedChange:()=>r(e[l]),children:s},s))})]})})]})},Ng=({visible:e,navigate:t,songDB:r,songData:i,fullScreenHandle:h})=>A.jsx("div",{className:"absolute top-0 w-full",children:A.jsxs(Ts,{showToolbar:e,scrollOffset:window.scrollY,children:[A.jsx(Wt,{size:"icon",variant:"circular",onClick:()=>t("/"),children:A.jsx(dc,{})}),A.jsx(Ag,{}),A.jsx(Pg,{fullScreenHandle:h}),A.jsx(jg,{}),A.jsxs(Es,{modal:!1,children:[A.jsx(ws,{asChild:!0,children:A.jsx(Wt,{size:"icon",variant:"circular",children:A.jsx(fc,{size:32})})}),A.jsxs(Os,{className:"w-56 max-h-[80vh] overflow-y-scroll",children:[qt.Children.toArray(A.jsx(Mg,{fullScreenHandle:h})),qt.Children.toArray(A.jsx(Og,{})),A.jsx(Xe,{children:"Theme"}),A.jsx(Qe,{}),qt.Children.toArray(A.jsx(Zu,{})),A.jsx(Xe,{children:"Misc"}),A.jsx(Qe,{}),A.jsxs(_r,{children:[A.jsx(fe,{icon:A.jsx(sc,{})}),A.jsx(Wu,{to:"https://github.com/tragram/domcikuv-zpevnik-v2/tree/main/songs/chordpro/"+i.chordproFile,children:"Edit on GitHub"})]})]})]}),A.jsx(Ju,{songs:r.songs})]})}),Rg=({pdfFilenames:e})=>A.jsx("iframe",{src:e.slice(-1)[0],className:"w-screen h-screen"}),$g=Q.forwardRef(({children:e},t)=>{const{layout:r}=de();return A.jsx("div",{className:te("flex flex-col sm:pt-[80px] pt-[72px] relative",r.fitScreenMode==="fitXY"?"h-dvh":"min-h-dvh"),ref:t,style:{touchAction:"pan-y",userSelect:"none"},children:e})});function Fg({fitMode:e,minFontSizePx:t,maxFontSizePx:r,fontSizePrecisionPx:i=.1,fontSize:h,setFontSize:S,children:s,...l}){const n=Q.useRef(),o=Q.useRef(null);return Q.useEffect(()=>{var u;return(u=n.current)==null?void 0:u.call(n)},[s]),Q.useEffect(()=>{var u;(u=n.current)==null||u.disconnect(),n.current=void 0},[]),Q.useEffect(function(){var y;async function d(_){await new Promise(w=>setTimeout(w,10));const E=getComputedStyle(_).fontSize;S(parseFloat(E))}const p=o.current,v=p==null?void 0:p.parentElement;if(!p||!v||e==="none")return;(y=n.current)==null||y.disconnect();const g=e==="fitXY"?"boxoneline":"oneline";return n.current=qu({innerEl:p,containerEl:v,mode:g,minFontSizePx:t,maxFontSizePx:r,fontSizePrecisionPx:i}),d(p),()=>{var _;return(_=n.current)==null?void 0:_.disconnect()}},[o,e,t,r,i,S]),Q.useEffect(function(){var p;!o.current||e!=="none"||((p=n.current)==null||p.disconnect(),n.current=void 0)},[e]),Q.useEffect(function(){async function d(v,g){await new Promise(y=>setTimeout(y,0)),g!=null&&v.style.setProperty("font-size",`${g.toFixed(1)}px`)}const p=o.current;!p||e!=="none"||d(p,h)},[h,e]),A.jsx("div",{ref:o,...l,children:s})}function Hg(e){return e.split(/(\d|[#b])/).map((t,r)=>/\d/.test(t)?A.jsx("sub",{children:t},r):/[#b]/.test(t)?A.jsx("sup",{children:t},r):t)}const kg=({songData:e,layoutSettings:t,transposeSteps:r})=>{const i=Q.useRef(null),[h,S]=Q.useState([]),s=()=>{if(!i.current)return;const n=Array.from(i.current.children),o=[];n.forEach((u,d)=>{const p=u.offsetTop;d>0&&p>n[0].offsetTop&&o.push(d)}),S(o)};Q.useEffect(()=>{s();const n=()=>s();return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[]),Q.useEffect(()=>{s()},[t]);const l=h.length>0;return A.jsxs("div",{className:te("flex w-full justify-between flex-wrap gap-4"),ref:i,children:[t.fitScreenMode==="fitXY"||t.twoColumns?A.jsxs("h1",{className:"self-center font-bold text-wrap mb-2",children:[e.artist,": ",e.title]}):A.jsxs("div",{className:te("flex flex-col flex-grow",l?"text-center":"justify-start mb-4"),children:[A.jsx("h2",{className:"font-semibold text-white/80 text-wrap uppercase",children:e.artist}),A.jsx("h2",{className:"font-bold text-wrap",children:e.title})]}),A.jsxs("div",{className:te("flex flex-col flex-grow",l?"text-center mb-4":"text-right"),children:[A.jsxs("h2",{className:"text-[0.75em] text-white/70 text-nowrap",children:["Capo: ",(e.capo-r+12)%12]}),A.jsx("h2",{className:"text-[0.75em] text-white/70 sub-sup-container",children:Hg(e.range.toString(r))})]})]})},Bg=({songData:e,id:t,className:r})=>A.jsx("div",{className:te("absolute top-0 left-0 min-h-lvh h-full w-full bg-image -z-20 blur-lg overflow-hidden transition-all duration-1000 ease-in-out",r),id:t,style:{backgroundImage:`url(${e.thumbnailURL()})`},children:A.jsx("div",{className:"w-full h-full bg-glass/60 dark:bg-glass/50"})}),zg=Q.forwardRef(({songData:e,parsedContent:t},r)=>{const{layout:i,chords:h,transpose:S,actions:s}=de(),l=Q.useCallback(o=>{s.setLayoutSettings({fontSize:o})},[s]),n=Q.useMemo(()=>({fitMode:i.fitScreenMode,minFontSizePx:4,maxFontSizePx:160,fontSize:i.fontSize,setFontSize:l}),[i.fitScreenMode,i.fontSize,l]);return A.jsxs(A.Fragment,{children:[A.jsx(Bg,{songData:e,className:"hidden",id:"inner-background-image"}),A.jsx("div",{id:"auto-text-size-wrapper",className:te("w-full z-10 lg:px-16 p-4 sm:p-8",i.fitScreenMode=="fitXY"?"h-full ":"h-fit ",i.fitScreenMode!=="fitXY"?"mb-10":""),children:A.jsxs(Fg,{...n,children:[A.jsx(kg,{songData:e,layoutSettings:i,transposeSteps:S.steps}),A.jsx("div",{ref:r,id:"song-content-wrapper",className:te("flex flex-col max-w-screen",h.inlineChords?"chords-inline":"",h.showChords?"":"chords-hidden",`fit-screen-${i.fitScreenMode}`,i.repeatPartsChords?"":"repeated-chords-hidden",i.twoColumns?"song-content-columns":""),dangerouslySetInnerHTML:{__html:t}})]})})]})});var gt={},Rn={},qe={},tr={},ai="Expected a function",rs=NaN,Gg="[object Symbol]",Ug=/^\s+|\s+$/g,Kg=/^[-+]0x[0-9a-f]+$/i,Wg=/^0b[01]+$/i,Vg=/^0o[0-7]+$/i,Yg=parseInt,Xg=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,Qg=typeof self=="object"&&self&&self.Object===Object&&self,Zg=Xg||Qg||Function("return this")(),Jg=Object.prototype,qg=Jg.toString,ty=Math.max,ey=Math.min,mn=function(){return Zg.Date.now()};function ry(e,t,r){var i,h,S,s,l,n,o=0,u=!1,d=!1,p=!0;if(typeof e!="function")throw new TypeError(ai);t=ns(t)||0,Pr(r)&&(u=!!r.leading,d="maxWait"in r,S=d?ty(ns(r.maxWait)||0,t):S,p="trailing"in r?!!r.trailing:p);function v(j){var G=i,O=h;return i=h=void 0,o=j,s=e.apply(O,G),s}function g(j){return o=j,l=setTimeout(E,t),u?v(j):s}function y(j){var G=j-n,O=j-o,B=t-G;return d?ey(B,S-O):B}function _(j){var G=j-n,O=j-o;return n===void 0||G>=t||G<0||d&&O>=S}function E(){var j=mn();if(_(j))return w(j);l=setTimeout(E,y(j))}function w(j){return l=void 0,p&&i?v(j):(i=h=void 0,s)}function I(){l!==void 0&&clearTimeout(l),o=0,i=n=h=l=void 0}function M(){return l===void 0?s:w(mn())}function D(){var j=mn(),G=_(j);if(i=arguments,h=this,n=j,G){if(l===void 0)return g(n);if(d)return l=setTimeout(E,t),v(n)}return l===void 0&&(l=setTimeout(E,t)),s}return D.cancel=I,D.flush=M,D}function ny(e,t,r){var i=!0,h=!0;if(typeof e!="function")throw new TypeError(ai);return Pr(r)&&(i="leading"in r?!!r.leading:i,h="trailing"in r?!!r.trailing:h),ry(e,t,{leading:i,maxWait:t,trailing:h})}function Pr(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function ay(e){return!!e&&typeof e=="object"}function sy(e){return typeof e=="symbol"||ay(e)&&qg.call(e)==Gg}function ns(e){if(typeof e=="number")return e;if(sy(e))return rs;if(Pr(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Pr(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Ug,"");var r=Wg.test(e);return r||Vg.test(e)?Yg(e.slice(2),r?2:8):Kg.test(e)?rs:+e}var iy=ny,er={};Object.defineProperty(er,"__esModule",{value:!0});er.addPassiveEventListener=function(t,r,i){var h=i.name;h||(h=r,console.warn("Listener must be a named function.")),Tr.has(r)||Tr.set(r,new Set);var S=Tr.get(r);if(!S.has(h)){var s=function(){var l=!1;try{var n=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("test",null,n)}catch{}return l}();t.addEventListener(r,i,s?{passive:!0}:!1),S.add(h)}};er.removePassiveEventListener=function(t,r,i){t.removeEventListener(r,i),Tr.get(r).delete(i.name||r)};var Tr=new Map;Object.defineProperty(tr,"__esModule",{value:!0});var oy=iy,uy=ly(oy),cy=er;function ly(e){return e&&e.__esModule?e:{default:e}}var fy=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66;return(0,uy.default)(t,r)},pt={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(t,r){if(t){var i=fy(function(h){pt.scrollHandler(t)},r);pt.scrollSpyContainers.push(t),(0,cy.addPassiveEventListener)(t,"scroll",i)}},isMounted:function(t){return pt.scrollSpyContainers.indexOf(t)!==-1},currentPositionX:function(t){if(t===document){var r=window.pageYOffset!==void 0,i=(document.compatMode||"")==="CSS1Compat";return r?window.pageXOffset:i?document.documentElement.scrollLeft:document.body.scrollLeft}else return t.scrollLeft},currentPositionY:function(t){if(t===document){var r=window.pageXOffset!==void 0,i=(document.compatMode||"")==="CSS1Compat";return r?window.pageYOffset:i?document.documentElement.scrollTop:document.body.scrollTop}else return t.scrollTop},scrollHandler:function(t){var r=pt.scrollSpyContainers[pt.scrollSpyContainers.indexOf(t)].spyCallbacks||[];r.forEach(function(i){return i(pt.currentPositionX(t),pt.currentPositionY(t))})},addStateHandler:function(t){pt.spySetState.push(t)},addSpyHandler:function(t,r){var i=pt.scrollSpyContainers[pt.scrollSpyContainers.indexOf(r)];i.spyCallbacks||(i.spyCallbacks=[]),i.spyCallbacks.push(t),t(pt.currentPositionX(r),pt.currentPositionY(r))},updateStates:function(){pt.spySetState.forEach(function(t){return t()})},unmount:function(t,r){pt.scrollSpyContainers.forEach(function(i){return i.spyCallbacks&&i.spyCallbacks.length&&i.spyCallbacks.indexOf(r)>-1&&i.spyCallbacks.splice(i.spyCallbacks.indexOf(r),1)}),pt.spySetState&&pt.spySetState.length&&pt.spySetState.indexOf(t)>-1&&pt.spySetState.splice(pt.spySetState.indexOf(t),1),document.removeEventListener("scroll",pt.scrollHandler)},update:function(){return pt.scrollSpyContainers.forEach(function(t){return pt.scrollHandler(t)})}};tr.default=pt;var $e={},rr={};Object.defineProperty(rr,"__esModule",{value:!0});var dy=function(t,r){var i=t.indexOf("#")===0?t.substring(1):t,h=i?"#"+i:"",S=window&&window.location,s=h?S.pathname+S.search+h:S.pathname+S.search;r?history.pushState(history.state,"",s):history.replaceState(history.state,"",s)},hy=function(){return window.location.hash.replace(/^#/,"")},py=function(t){return function(r){return t.contains?t!=r&&t.contains(r):!!(t.compareDocumentPosition(r)&16)}},my=function(t){return getComputedStyle(t).position!=="static"},vn=function(t,r){for(var i=t.offsetTop,h=t.offsetParent;h&&!r(h);)i+=h.offsetTop,h=h.offsetParent;return{offsetTop:i,offsetParent:h}},vy=function(t,r,i){if(i)return t===document?r.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):getComputedStyle(t).position!=="static"?r.offsetLeft:r.offsetLeft-t.offsetLeft;if(t===document)return r.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if(my(t)){if(r.offsetParent!==t){var h=function(u){return u===t||u===document},S=vn(r,h),s=S.offsetTop,l=S.offsetParent;if(l!==t)throw new Error("Seems containerElement is not an ancestor of the Element");return s}return r.offsetTop}if(r.offsetParent===t.offsetParent)return r.offsetTop-t.offsetTop;var n=function(u){return u===document};return vn(r,n).offsetTop-vn(t,n).offsetTop};rr.default={updateHash:dy,getHash:hy,filterElementInContainer:py,scrollOffset:vy};var Hr={},$n={};Object.defineProperty($n,"__esModule",{value:!0});$n.default={defaultEasing:function(t){return t<.5?Math.pow(t*2,2)/2:1-Math.pow((1-t)*2,2)/2},linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});var gy=er,yy=["mousedown","mousewheel","touchmove","keydown"];Fn.default={subscribe:function(t){return typeof document<"u"&&yy.forEach(function(r){return(0,gy.addPassiveEventListener)(document,r,t)})}};var nr={};Object.defineProperty(nr,"__esModule",{value:!0});var Mn={registered:{},scrollEvent:{register:function(t,r){Mn.registered[t]=r},remove:function(t){Mn.registered[t]=null}}};nr.default=Mn;Object.defineProperty(Hr,"__esModule",{value:!0});var by=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Sy=rr;kr(Sy);var _y=$n,as=kr(_y),xy=Fn,Ty=kr(xy),Ey=nr,Kt=kr(Ey);function kr(e){return e&&e.__esModule?e:{default:e}}var si=function(t){return as.default[t.smooth]||as.default.defaultEasing},wy=function(t){return typeof t=="function"?t:function(){return t}},Oy=function(){if(typeof window<"u")return window.requestAnimationFrame||window.webkitRequestAnimationFrame},jn=function(){return Oy()||function(e,t,r){window.setTimeout(e,r||1e3/60,new Date().getTime())}}(),ii=function(){return{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null}},oi=function(t){var r=t.data.containerElement;if(r&&r!==document&&r!==document.body)return r.scrollLeft;var i=window.pageXOffset!==void 0,h=(document.compatMode||"")==="CSS1Compat";return i?window.pageXOffset:h?document.documentElement.scrollLeft:document.body.scrollLeft},ui=function(t){var r=t.data.containerElement;if(r&&r!==document&&r!==document.body)return r.scrollTop;var i=window.pageXOffset!==void 0,h=(document.compatMode||"")==="CSS1Compat";return i?window.pageYOffset:h?document.documentElement.scrollTop:document.body.scrollTop},Ay=function(t){var r=t.data.containerElement;if(r&&r!==document&&r!==document.body)return r.scrollWidth-r.offsetWidth;var i=document.body,h=document.documentElement;return Math.max(i.scrollWidth,i.offsetWidth,h.clientWidth,h.scrollWidth,h.offsetWidth)},Cy=function(t){var r=t.data.containerElement;if(r&&r!==document&&r!==document.body)return r.scrollHeight-r.offsetHeight;var i=document.body,h=document.documentElement;return Math.max(i.scrollHeight,i.offsetHeight,h.clientHeight,h.scrollHeight,h.offsetHeight)},Iy=function e(t,r,i){var h=r.data;if(!r.ignoreCancelEvents&&h.cancel){Kt.default.registered.end&&Kt.default.registered.end(h.to,h.target,h.currentPositionY);return}if(h.delta=Math.round(h.targetPosition-h.startPosition),h.start===null&&(h.start=i),h.progress=i-h.start,h.percent=h.progress>=h.duration?1:t(h.progress/h.duration),h.currentPosition=h.startPosition+Math.ceil(h.delta*h.percent),h.containerElement&&h.containerElement!==document&&h.containerElement!==document.body?r.horizontal?h.containerElement.scrollLeft=h.currentPosition:h.containerElement.scrollTop=h.currentPosition:r.horizontal?window.scrollTo(h.currentPosition,0):window.scrollTo(0,h.currentPosition),h.percent<1){var S=e.bind(null,t,r);jn.call(window,S);return}Kt.default.registered.end&&Kt.default.registered.end(h.to,h.target,h.currentPosition)},Hn=function(t){t.data.containerElement=t?t.containerId?document.getElementById(t.containerId):t.container&&t.container.nodeType?t.container:document:null},ar=function(t,r,i,h){r.data=r.data||ii(),window.clearTimeout(r.data.delayTimeout);var S=function(){r.data.cancel=!0};if(Ty.default.subscribe(S),Hn(r),r.data.start=null,r.data.cancel=!1,r.data.startPosition=r.horizontal?oi(r):ui(r),r.data.targetPosition=r.absolute?t:t+r.data.startPosition,r.data.startPosition===r.data.targetPosition){Kt.default.registered.end&&Kt.default.registered.end(r.data.to,r.data.target,r.data.currentPosition);return}r.data.delta=Math.round(r.data.targetPosition-r.data.startPosition),r.data.duration=wy(r.duration)(r.data.delta),r.data.duration=isNaN(parseFloat(r.data.duration))?1e3:parseFloat(r.data.duration),r.data.to=i,r.data.target=h;var s=si(r),l=Iy.bind(null,s,r);if(r&&r.delay>0){r.data.delayTimeout=window.setTimeout(function(){Kt.default.registered.begin&&Kt.default.registered.begin(r.data.to,r.data.target),jn.call(window,l)},r.delay);return}Kt.default.registered.begin&&Kt.default.registered.begin(r.data.to,r.data.target),jn.call(window,l)},Br=function(t){return t=by({},t),t.data=t.data||ii(),t.absolute=!0,t},Py=function(t){ar(0,Br(t))},My=function(t,r){ar(t,Br(r))},jy=function(t){t=Br(t),Hn(t),ar(t.horizontal?Ay(t):Cy(t),t)},Dy=function(t,r){r=Br(r),Hn(r);var i=r.horizontal?oi(r):ui(r);ar(t+i,r)};Hr.default={animateTopScroll:ar,getAnimationType:si,scrollToTop:Py,scrollToBottom:jy,scrollTo:My,scrollMore:Dy};Object.defineProperty($e,"__esModule",{value:!0});var Ly=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ny=rr,Ry=kn(Ny),$y=Hr,Fy=kn($y),Hy=nr,vr=kn(Hy);function kn(e){return e&&e.__esModule?e:{default:e}}var gr={},ss=void 0;$e.default={unmount:function(){gr={}},register:function(t,r){gr[t]=r},unregister:function(t){delete gr[t]},get:function(t){return gr[t]||document.getElementById(t)||document.getElementsByName(t)[0]||document.getElementsByClassName(t)[0]},setActiveLink:function(t){return ss=t},getActiveLink:function(){return ss},scrollTo:function(t,r){var i=this.get(t);if(!i){console.warn("target Element not found");return}r=Ly({},r,{absolute:!1});var h=r.containerId,S=r.container,s=void 0;h?s=document.getElementById(h):S&&S.nodeType?s=S:s=document,r.absolute=!0;var l=r.horizontal,n=Ry.default.scrollOffset(s,i,l)+(r.offset||0);if(!r.smooth){vr.default.registered.begin&&vr.default.registered.begin(t,i),s===document?r.horizontal?window.scrollTo(n,0):window.scrollTo(0,n):s.scrollTop=n,vr.default.registered.end&&vr.default.registered.end(t,i);return}Fy.default.animateTopScroll(n,r,t,i)}};var ci={exports:{}},ky="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",By=ky,zy=By;function li(){}function fi(){}fi.resetWarningCache=li;var Gy=function(){function e(i,h,S,s,l,n){if(n!==zy){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:fi,resetWarningCache:li};return r.PropTypes=r,r};ci.exports=Gy();var zr=ci.exports,Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});var Uy=rr,gn=Ky(Uy);function Ky(e){return e&&e.__esModule?e:{default:e}}var Wy={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(t){this.scroller=t,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(t,r){this.containers[t]=r},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var t=this,r=this.getHash();r?window.setTimeout(function(){t.scrollTo(r,!0),t.initialized=!0},10):this.initialized=!0},scrollTo:function(t,r){var i=this.scroller,h=i.get(t);if(h&&(r||t!==i.getActiveLink())){var S=this.containers[t]||document;i.scrollTo(t,{container:S})}},getHash:function(){return gn.default.getHash()},changeHash:function(t,r){this.isInitialized()&&gn.default.getHash()!==t&&gn.default.updateHash(t,r)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};Gr.default=Wy;Object.defineProperty(qe,"__esModule",{value:!0});var yr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Vy=function(){function e(t,r){for(var i=0;i<r.length;i++){var h=r[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Yy=Q,is=sr(Yy),Xy=tr,br=sr(Xy),Qy=$e,Zy=sr(Qy),Jy=zr,ht=sr(Jy),qy=Gr,ce=sr(qy);function sr(e){return e&&e.__esModule?e:{default:e}}function tb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eb(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function rb(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var os={to:ht.default.string.isRequired,containerId:ht.default.string,container:ht.default.object,activeClass:ht.default.string,activeStyle:ht.default.object,spy:ht.default.bool,horizontal:ht.default.bool,smooth:ht.default.oneOfType([ht.default.bool,ht.default.string]),offset:ht.default.number,delay:ht.default.number,isDynamic:ht.default.bool,onClick:ht.default.func,duration:ht.default.oneOfType([ht.default.number,ht.default.func]),absolute:ht.default.bool,onSetActive:ht.default.func,onSetInactive:ht.default.func,ignoreCancelEvents:ht.default.bool,hashSpy:ht.default.bool,saveHashHistory:ht.default.bool,spyThrottle:ht.default.number};qe.default=function(e,t){var r=t||Zy.default,i=function(S){rb(s,S);function s(l){tb(this,s);var n=eb(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,l));return h.call(n),n.state={active:!1},n}return Vy(s,[{key:"getScrollSpyContainer",value:function(){var n=this.props.containerId,o=this.props.container;return n&&!o?document.getElementById(n):o&&o.nodeType?o:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var n=this.getScrollSpyContainer();br.default.isMounted(n)||br.default.mount(n,this.props.spyThrottle),this.props.hashSpy&&(ce.default.isMounted()||ce.default.mount(r),ce.default.mapContainer(this.props.to,n)),br.default.addSpyHandler(this.spyHandler,n),this.setState({container:n})}}},{key:"componentWillUnmount",value:function(){br.default.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var n="";this.state&&this.state.active?n=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():n=this.props.className;var o={};this.state&&this.state.active?o=yr({},this.props.style,this.props.activeStyle):o=yr({},this.props.style);var u=yr({},this.props);for(var d in os)u.hasOwnProperty(d)&&delete u[d];return u.className=n,u.style=o,u.onClick=this.handleClick,is.default.createElement(e,u)}}]),s}(is.default.PureComponent),h=function(){var s=this;this.scrollTo=function(l,n){r.scrollTo(l,yr({},s.state,n))},this.handleClick=function(l){s.props.onClick&&s.props.onClick(l),l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault(),s.scrollTo(s.props.to,s.props)},this.spyHandler=function(l,n){var o=s.getScrollSpyContainer();if(!(ce.default.isMounted()&&!ce.default.isInitialized())){var u=s.props.horizontal,d=s.props.to,p=null,v=void 0,g=void 0;if(u){var y=0,_=0,E=0;if(o.getBoundingClientRect){var w=o.getBoundingClientRect();E=w.left}if(!p||s.props.isDynamic){if(p=r.get(d),!p)return;var I=p.getBoundingClientRect();y=I.left-E+l,_=y+I.width}var M=l-s.props.offset;v=M>=Math.floor(y)&&M<Math.floor(_),g=M<Math.floor(y)||M>=Math.floor(_)}else{var D=0,j=0,G=0;if(o.getBoundingClientRect){var O=o.getBoundingClientRect();G=O.top}if(!p||s.props.isDynamic){if(p=r.get(d),!p)return;var B=p.getBoundingClientRect();D=B.top-G+n,j=D+B.height}var U=n-s.props.offset;v=U>=Math.floor(D)&&U<Math.floor(j),g=U<Math.floor(D)||U>=Math.floor(j)}var H=r.getActiveLink();if(g){if(d===H&&r.setActiveLink(void 0),s.props.hashSpy&&ce.default.getHash()===d){var K=s.props.saveHashHistory,W=K===void 0?!1:K;ce.default.changeHash("",W)}s.props.spy&&s.state.active&&(s.setState({active:!1}),s.props.onSetInactive&&s.props.onSetInactive(d,p))}if(v&&(H!==d||s.state.active===!1)){r.setActiveLink(d);var C=s.props.saveHashHistory,V=C===void 0?!1:C;s.props.hashSpy&&ce.default.changeHash(d,V),s.props.spy&&(s.setState({active:!0}),s.props.onSetActive&&s.props.onSetActive(d,p))}}}};return i.propTypes=os,i.defaultProps={offset:0},i};Object.defineProperty(Rn,"__esModule",{value:!0});var nb=Q,us=di(nb),ab=qe,sb=di(ab);function di(e){return e&&e.__esModule?e:{default:e}}function ib(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cs(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ob(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ub=function(e){ob(t,e);function t(){var r,i,h,S;ib(this,t);for(var s=arguments.length,l=Array(s),n=0;n<s;n++)l[n]=arguments[n];return S=(i=(h=cs(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(l))),h),h.render=function(){return us.default.createElement("a",h.props,h.props.children)},i),cs(h,S)}return t}(us.default.Component);Rn.default=(0,sb.default)(ub);var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});var cb=function(){function e(t,r){for(var i=0;i<r.length;i++){var h=r[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),lb=Q,ls=hi(lb),fb=qe,db=hi(fb);function hi(e){return e&&e.__esModule?e:{default:e}}function hb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pb(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function mb(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var vb=function(e){mb(t,e);function t(){return hb(this,t),pb(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return cb(t,[{key:"render",value:function(){return ls.default.createElement("button",this.props,this.props.children)}}]),t}(ls.default.Component);Bn.default=(0,db.default)(vb);var zn={},Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});var gb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},yb=function(){function e(t,r){for(var i=0;i<r.length;i++){var h=r[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),bb=Q,fs=Kr(bb),Sb=Vu;Kr(Sb);var _b=$e,ds=Kr(_b),xb=zr,hs=Kr(xb);function Kr(e){return e&&e.__esModule?e:{default:e}}function Tb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eb(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function wb(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Ur.default=function(e){var t=function(r){wb(i,r);function i(h){Tb(this,i);var S=Eb(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,h));return S.childBindings={domNode:null},S}return yb(i,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(S){this.props.name!==S.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;ds.default.unregister(this.props.name)}},{key:"registerElems",value:function(S){ds.default.register(S,this.childBindings.domNode)}},{key:"render",value:function(){return fs.default.createElement(e,gb({},this.props,{parentBindings:this.childBindings}))}}]),i}(fs.default.Component);return t.propTypes={name:hs.default.string,id:hs.default.string},t};Object.defineProperty(zn,"__esModule",{value:!0});var ps=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ob=function(){function e(t,r){for(var i=0;i<r.length;i++){var h=r[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Ab=Q,ms=Gn(Ab),Cb=Ur,Ib=Gn(Cb),Pb=zr,vs=Gn(Pb);function Gn(e){return e&&e.__esModule?e:{default:e}}function Mb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jb(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Db(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var pi=function(e){Db(t,e);function t(){return Mb(this,t),jb(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ob(t,[{key:"render",value:function(){var i=this,h=ps({},this.props);return delete h.name,h.parentBindings&&delete h.parentBindings,ms.default.createElement("div",ps({},h,{ref:function(s){i.props.parentBindings.domNode=s}}),this.props.children)}}]),t}(ms.default.Component);pi.propTypes={name:vs.default.string,id:vs.default.string};zn.default=(0,Ib.default)(pi);var yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},gs=function(){function e(t,r){for(var i=0;i<r.length;i++){var h=r[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function ys(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bs(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ss(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Sr=Q,ge=tr,bn=$e,mt=zr,le=Gr,_s={to:mt.string.isRequired,containerId:mt.string,container:mt.object,activeClass:mt.string,spy:mt.bool,smooth:mt.oneOfType([mt.bool,mt.string]),offset:mt.number,delay:mt.number,isDynamic:mt.bool,onClick:mt.func,duration:mt.oneOfType([mt.number,mt.func]),absolute:mt.bool,onSetActive:mt.func,onSetInactive:mt.func,ignoreCancelEvents:mt.bool,hashSpy:mt.bool,spyThrottle:mt.number},Lb={Scroll:function(t,r){console.warn("Helpers.Scroll is deprecated since v1.7.0");var i=r||bn,h=function(s){Ss(l,s);function l(n){ys(this,l);var o=bs(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,n));return S.call(o),o.state={active:!1},o}return gs(l,[{key:"getScrollSpyContainer",value:function(){var o=this.props.containerId,u=this.props.container;return o?document.getElementById(o):u&&u.nodeType?u:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var o=this.getScrollSpyContainer();ge.isMounted(o)||ge.mount(o,this.props.spyThrottle),this.props.hashSpy&&(le.isMounted()||le.mount(i),le.mapContainer(this.props.to,o)),this.props.spy&&ge.addStateHandler(this.stateHandler),ge.addSpyHandler(this.spyHandler,o),this.setState({container:o})}}},{key:"componentWillUnmount",value:function(){ge.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var o="";this.state&&this.state.active?o=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():o=this.props.className;var u=yn({},this.props);for(var d in _s)u.hasOwnProperty(d)&&delete u[d];return u.className=o,u.onClick=this.handleClick,Sr.createElement(t,u)}}]),l}(Sr.Component),S=function(){var l=this;this.scrollTo=function(n,o){i.scrollTo(n,yn({},l.state,o))},this.handleClick=function(n){l.props.onClick&&l.props.onClick(n),n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault(),l.scrollTo(l.props.to,l.props)},this.stateHandler=function(){i.getActiveLink()!==l.props.to&&(l.state!==null&&l.state.active&&l.props.onSetInactive&&l.props.onSetInactive(),l.setState({active:!1}))},this.spyHandler=function(n){var o=l.getScrollSpyContainer();if(!(le.isMounted()&&!le.isInitialized())){var u=l.props.to,d=null,p=0,v=0,g=0;if(o.getBoundingClientRect){var y=o.getBoundingClientRect();g=y.top}if(!d||l.props.isDynamic){if(d=i.get(u),!d)return;var _=d.getBoundingClientRect();p=_.top-g+n,v=p+_.height}var E=n-l.props.offset,w=E>=Math.floor(p)&&E<Math.floor(v),I=E<Math.floor(p)||E>=Math.floor(v),M=i.getActiveLink();if(I)return u===M&&i.setActiveLink(void 0),l.props.hashSpy&&le.getHash()===u&&le.changeHash(),l.props.spy&&l.state.active&&(l.setState({active:!1}),l.props.onSetInactive&&l.props.onSetInactive()),ge.updateStates();if(w&&M!==u)return i.setActiveLink(u),l.props.hashSpy&&le.changeHash(u),l.props.spy&&(l.setState({active:!0}),l.props.onSetActive&&l.props.onSetActive(u)),ge.updateStates()}}};return h.propTypes=_s,h.defaultProps={offset:0},h},Element:function(t){console.warn("Helpers.Element is deprecated since v1.7.0");var r=function(i){Ss(h,i);function h(S){ys(this,h);var s=bs(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,S));return s.childBindings={domNode:null},s}return gs(h,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(s){this.props.name!==s.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;bn.unregister(this.props.name)}},{key:"registerElems",value:function(s){bn.register(s,this.childBindings.domNode)}},{key:"render",value:function(){return Sr.createElement(t,yn({},this.props,{parentBindings:this.childBindings}))}}]),h}(Sr.Component);return r.propTypes={name:mt.string,id:mt.string},r}},Nb=Lb;Object.defineProperty(gt,"__esModule",{value:!0});gt.Helpers=gt.ScrollElement=gt.ScrollLink=Er=gt.animateScroll=gt.scrollSpy=gt.Events=gt.scroller=gt.Element=gt.Button=gt.Link=void 0;var Rb=Rn,mi=Vt(Rb),$b=Bn,vi=Vt($b),Fb=zn,gi=Vt(Fb),Hb=$e,yi=Vt(Hb),kb=nr,bi=Vt(kb),Bb=tr,Si=Vt(Bb),zb=Hr,_i=Vt(zb),Gb=qe,xi=Vt(Gb),Ub=Ur,Ti=Vt(Ub),Kb=Nb,Ei=Vt(Kb);function Vt(e){return e&&e.__esModule?e:{default:e}}gt.Link=mi.default;gt.Button=vi.default;gt.Element=gi.default;gt.scroller=yi.default;gt.Events=bi.default;gt.scrollSpy=Si.default;var Er=gt.animateScroll=_i.default;gt.ScrollLink=xi.default;gt.ScrollElement=Ti.default;gt.Helpers=Ei.default;gt.default={Link:mi.default,Button:vi.default,Element:gi.default,scroller:yi.default,Events:bi.default,scrollSpy:Si.default,animateScroll:_i.default,ScrollLink:xi.default,ScrollElement:Ti.default,Helpers:Ei.default};const Wb=({fitScreenMode:e,atBottom:t})=>{const[r,i]=Q.useState(!1);new ResizeObserver(()=>{i(document.body.scrollHeight>screen.height&&e!="fitXY")}).observe(document.body);const S=()=>{const l=document.body.scrollHeight-window.scrollY-screen.height,n=screen.height/2e3;if(l<0)return;if(l<.8*screen.height){Er.scrollToBottom({duration:l/n,onComplete:()=>{window.scrollBy(0,-1)}});return}const o=document.querySelectorAll(".section");for(const u of o){const d=u.getBoundingClientRect();if(d.bottom>=screen.height){const p=Math.max(100,.2*screen.height),v=d.top-p;Er.scrollTo(d.top+window.scrollY-p,{duration:v/n});break}}},s=()=>{Er.scrollTo(0,{duration:200})};return A.jsxs("div",{className:te("fixed bottom-10 right-10 z-50 h-24 ",r?"flex":"hidden"),children:[!t&&A.jsx(Wt,{size:"icon",variant:"circular",onClick:S,className:"absolute bottom-0 right-0",children:A.jsx(rc,{})}),t&&A.jsx(Wt,{size:"icon",variant:"circular",onClick:s,className:"absolute top-0 right-0",children:A.jsx(nc,{})})]})},Vb=(e,t)=>{const[r,i]=Q.useState(0),[h,S]=Q.useState(!1);return Q.useEffect(()=>{const s=()=>{const l=window.scrollY;if(l<0){t(!0);return}else l>r?e!=="fitXY"&&t(!1):l<r-10&&(t(!0),S(!1));i(l);const n=document.body.scrollHeight-window.scrollY-screen.height;S(n<=0)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[e,r,t]),{atBottom:h}},Zb=()=>{const{songDB:e,songData:t}=Yu(),r=Xu(),i=hc(),h=Q.useRef(null),S=Q.useRef(null),{layout:s,chords:l,transpose:n,actions:o}=de(),[u,d]=Q.useState(!0),[p,v]=Q.useState(""),{atBottom:g}=Vb(s.fitScreenMode,d);return Q.useEffect(()=>{t.key||(t.key=pg(t.content||"")),o.setOriginalKey(t.key||null)},[t,o]),Q.useEffect(()=>{o.resetTranspose()},[t.id,o]),Q.useEffect(()=>{const y=mg(t,n.steps,s.repeatParts,l.czechChordNames);v(y)},[n,s.repeatParts,t,l.czechChordNames,o]),Al({onPinch:({movement:[y],memo:_})=>{_||(_=s.fontSize);const E=Math.max(8,Math.min(_*y,50));return o.setLayoutSettings({fitScreenMode:"none",fontSize:E}),screen.height>50+document.body.scrollHeight?d(!0):screen.height<document.body.scrollHeight&&window.scrollY>0&&d(!1),_}},{target:h}),Q.useEffect(()=>{const y=_=>_.preventDefault();return document.addEventListener("gesturestart",y),document.addEventListener("gesturechange",y),()=>{document.removeEventListener("gesturestart",y),document.removeEventListener("gesturechange",y)}},[]),t.lyricsLength()<50?A.jsx(Rg,{pdfFilenames:t.pdfFilenames}):A.jsxs($g,{ref:h,children:[A.jsx(Ng,{visible:u,navigate:r,songDB:e,songData:t,fullScreenHandle:i}),A.jsxs(pc,{handle:i,className:te("w-full overflow-x-clip",s.fitScreenMode=="fitXY"?" h-full ":" h-fit overflow-y-scroll"),children:[A.jsx(Wb,{fitScreenMode:s.fitScreenMode,atBottom:g}),A.jsx(zg,{ref:S,songData:t,parsedContent:p})]})]})};export{Zb as SongView,Zb as default};
