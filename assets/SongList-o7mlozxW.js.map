{"version":3,"file":"SongList-o7mlozxW.js","sources":["../../node_modules/lucide-react/dist/esm/icons/arrow-down-0-1.js","../../node_modules/lucide-react/dist/esm/icons/arrow-down-1-0.js","../../node_modules/lucide-react/dist/esm/icons/arrow-down-a-z.js","../../node_modules/lucide-react/dist/esm/icons/arrow-down-up.js","../../node_modules/lucide-react/dist/esm/icons/arrow-down-z-a.js","../../node_modules/lucide-react/dist/esm/icons/audio-lines.js","../../node_modules/lucide-react/dist/esm/icons/calendar-plus.js","../../node_modules/lucide-react/dist/esm/icons/filter.js","../../node_modules/lucide-react/dist/esm/icons/flag-off.js","../../node_modules/lucide-react/dist/esm/icons/handshake.js","../../node_modules/lucide-react/dist/esm/icons/images.js","../../node_modules/lucide-react/dist/esm/icons/languages.js","../../node_modules/lucide-react/dist/esm/icons/mic-vocal.js","../../node_modules/lucide-react/dist/esm/icons/music.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../node_modules/@radix-ui/react-avatar/dist/index.mjs","../../src/components/ui/avatar.tsx","../../node_modules/@radix-ui/react-dialog/dist/index.mjs","../../src/components/ui/dialog-custom.tsx","../../src/components/IllustrationPopup.tsx","../../src/components/LanguageFlag.tsx","../../src/components/ui/circular-progress.tsx","../../src/routes/SongList/SongRow.tsx","../../node_modules/@uidotdev/usehooks/index.js","../../src/routes/SongList/Toolbar/filters/LanguageFilter.tsx","../../node_modules/@radix-ui/number/dist/index.mjs","../../node_modules/@radix-ui/react-use-previous/dist/index.mjs","../../node_modules/@radix-ui/react-slider/dist/index.mjs","../../src/components/ui/slider.tsx","../../src/routes/SongList/Toolbar/filters/VocalRangeFilter.tsx","../../src/routes/SongList/Toolbar/filters/Filters.tsx","../../src/components/ui/input.tsx","../../src/routes/SongList/Toolbar/SearchBar.tsx","../../src/routes/SongList/Toolbar/SortMenu.tsx","../../src/routes/SongList/Toolbar/Toolbar.tsx","../../node_modules/fuse.js/dist/fuse.mjs","../../src/routes/SongList/useFilteredSongs.ts","../../src/routes/SongList/SongList.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowDown01 = createLucideIcon(\"ArrowDown01\", [\n  [\"path\", { d: \"m3 16 4 4 4-4\", key: \"1co6wj\" }],\n  [\"path\", { d: \"M7 20V4\", key: \"1yoxec\" }],\n  [\"rect\", { x: \"15\", y: \"4\", width: \"4\", height: \"6\", ry: \"2\", key: \"1bwicg\" }],\n  [\"path\", { d: \"M17 20v-6h-2\", key: \"1qp1so\" }],\n  [\"path\", { d: \"M15 20h4\", key: \"1j968p\" }]\n]);\n\nexport { ArrowDown01 as default };\n//# sourceMappingURL=arrow-down-0-1.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowDown10 = createLucideIcon(\"ArrowDown10\", [\n  [\"path\", { d: \"m3 16 4 4 4-4\", key: \"1co6wj\" }],\n  [\"path\", { d: \"M7 20V4\", key: \"1yoxec\" }],\n  [\"path\", { d: \"M17 10V4h-2\", key: \"zcsr5x\" }],\n  [\"path\", { d: \"M15 10h4\", key: \"id2lce\" }],\n  [\"rect\", { x: \"15\", y: \"14\", width: \"4\", height: \"6\", ry: \"2\", key: \"33xykx\" }]\n]);\n\nexport { ArrowDown10 as default };\n//# sourceMappingURL=arrow-down-1-0.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowDownAZ = createLucideIcon(\"ArrowDownAZ\", [\n  [\"path\", { d: \"m3 16 4 4 4-4\", key: \"1co6wj\" }],\n  [\"path\", { d: \"M7 20V4\", key: \"1yoxec\" }],\n  [\"path\", { d: \"M20 8h-5\", key: \"1vsyxs\" }],\n  [\"path\", { d: \"M15 10V6.5a2.5 2.5 0 0 1 5 0V10\", key: \"ag13bf\" }],\n  [\"path\", { d: \"M15 14h5l-5 6h5\", key: \"ur5jdg\" }]\n]);\n\nexport { ArrowDownAZ as default };\n//# sourceMappingURL=arrow-down-a-z.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowDownUp = createLucideIcon(\"ArrowDownUp\", [\n  [\"path\", { d: \"m3 16 4 4 4-4\", key: \"1co6wj\" }],\n  [\"path\", { d: \"M7 20V4\", key: \"1yoxec\" }],\n  [\"path\", { d: \"m21 8-4-4-4 4\", key: \"1c9v7m\" }],\n  [\"path\", { d: \"M17 4v16\", key: \"7dpous\" }]\n]);\n\nexport { ArrowDownUp as default };\n//# sourceMappingURL=arrow-down-up.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowDownZA = createLucideIcon(\"ArrowDownZA\", [\n  [\"path\", { d: \"m3 16 4 4 4-4\", key: \"1co6wj\" }],\n  [\"path\", { d: \"M7 4v16\", key: \"1glfcx\" }],\n  [\"path\", { d: \"M15 4h5l-5 6h5\", key: \"8asdl1\" }],\n  [\"path\", { d: \"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20\", key: \"r6l5cz\" }],\n  [\"path\", { d: \"M20 18h-5\", key: \"18j1r2\" }]\n]);\n\nexport { ArrowDownZA as default };\n//# sourceMappingURL=arrow-down-z-a.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AudioLines = createLucideIcon(\"AudioLines\", [\n  [\"path\", { d: \"M2 10v3\", key: \"1fnikh\" }],\n  [\"path\", { d: \"M6 6v11\", key: \"11sgs0\" }],\n  [\"path\", { d: \"M10 3v18\", key: \"yhl04a\" }],\n  [\"path\", { d: \"M14 8v7\", key: \"3a1oy3\" }],\n  [\"path\", { d: \"M18 5v13\", key: \"123xd1\" }],\n  [\"path\", { d: \"M22 10v3\", key: \"154ddg\" }]\n]);\n\nexport { AudioLines as default };\n//# sourceMappingURL=audio-lines.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CalendarPlus = createLucideIcon(\"CalendarPlus\", [\n  [\"path\", { d: \"M8 2v4\", key: \"1cmpym\" }],\n  [\"path\", { d: \"M16 2v4\", key: \"4m81vk\" }],\n  [\"path\", { d: \"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8\", key: \"3spt84\" }],\n  [\"path\", { d: \"M3 10h18\", key: \"8toen8\" }],\n  [\"path\", { d: \"M16 19h6\", key: \"xwg31i\" }],\n  [\"path\", { d: \"M19 16v6\", key: \"tddt3s\" }]\n]);\n\nexport { CalendarPlus as default };\n//# sourceMappingURL=calendar-plus.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Filter = createLucideIcon(\"Filter\", [\n  [\"polygon\", { points: \"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\", key: \"1yg77f\" }]\n]);\n\nexport { Filter as default };\n//# sourceMappingURL=filter.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FlagOff = createLucideIcon(\"FlagOff\", [\n  [\"path\", { d: \"M8 2c3 0 5 2 8 2s4-1 4-1v11\", key: \"9rwyz9\" }],\n  [\"path\", { d: \"M4 22V4\", key: \"1plyxx\" }],\n  [\"path\", { d: \"M4 15s1-1 4-1 5 2 8 2\", key: \"1myooe\" }],\n  [\"line\", { x1: \"2\", x2: \"22\", y1: \"2\", y2: \"22\", key: \"a6p6uj\" }]\n]);\n\nexport { FlagOff as default };\n//# sourceMappingURL=flag-off.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Handshake = createLucideIcon(\"Handshake\", [\n  [\"path\", { d: \"m11 17 2 2a1 1 0 1 0 3-3\", key: \"efffak\" }],\n  [\n    \"path\",\n    {\n      d: \"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4\",\n      key: \"9pr0kb\"\n    }\n  ],\n  [\"path\", { d: \"m21 3 1 11h-2\", key: \"1tisrp\" }],\n  [\"path\", { d: \"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3\", key: \"1uvwmv\" }],\n  [\"path\", { d: \"M3 4h8\", key: \"1ep09j\" }]\n]);\n\nexport { Handshake as default };\n//# sourceMappingURL=handshake.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Images = createLucideIcon(\"Images\", [\n  [\"path\", { d: \"M18 22H4a2 2 0 0 1-2-2V6\", key: \"pblm9e\" }],\n  [\"path\", { d: \"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18\", key: \"nf6bnh\" }],\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"2\", key: \"1822b1\" }],\n  [\"rect\", { width: \"16\", height: \"16\", x: \"6\", y: \"2\", rx: \"2\", key: \"12espp\" }]\n]);\n\nexport { Images as default };\n//# sourceMappingURL=images.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Languages = createLucideIcon(\"Languages\", [\n  [\"path\", { d: \"m5 8 6 6\", key: \"1wu5hv\" }],\n  [\"path\", { d: \"m4 14 6-6 2-3\", key: \"1k1g8d\" }],\n  [\"path\", { d: \"M2 5h12\", key: \"or177f\" }],\n  [\"path\", { d: \"M7 2h1\", key: \"1t2jsx\" }],\n  [\"path\", { d: \"m22 22-5-10-5 10\", key: \"don7ne\" }],\n  [\"path\", { d: \"M14 18h6\", key: \"1m8k6r\" }]\n]);\n\nexport { Languages as default };\n//# sourceMappingURL=languages.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MicVocal = createLucideIcon(\"MicVocal\", [\n  [\n    \"path\",\n    {\n      d: \"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12\",\n      key: \"80a601\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5\",\n      key: \"j0ngtp\"\n    }\n  ],\n  [\"circle\", { cx: \"16\", cy: \"7\", r: \"5\", key: \"d08jfb\" }]\n]);\n\nexport { MicVocal as default };\n//# sourceMappingURL=mic-vocal.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Music = createLucideIcon(\"Music\", [\n  [\"path\", { d: \"M9 18V5l12-2v13\", key: \"1jmyc2\" }],\n  [\"circle\", { cx: \"6\", cy: \"18\", r: \"3\", key: \"fqmcym\" }],\n  [\"circle\", { cx: \"18\", cy: \"16\", r: \"3\", key: \"1hluhg\" }]\n]);\n\nexport { Music as default };\n//# sourceMappingURL=music.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","\"use client\";\n\n// packages/react/avatar/src/Avatar.tsx\nimport * as React from \"react\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useLayoutEffect } from \"@radix-ui/react-use-layout-effect\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar AVATAR_NAME = \"Avatar\";\nvar [createAvatarContext, createAvatarScope] = createContextScope(AVATAR_NAME);\nvar [AvatarProvider, useAvatarContext] = createAvatarContext(AVATAR_NAME);\nvar Avatar = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAvatar, ...avatarProps } = props;\n    const [imageLoadingStatus, setImageLoadingStatus] = React.useState(\"idle\");\n    return /* @__PURE__ */ jsx(\n      AvatarProvider,\n      {\n        scope: __scopeAvatar,\n        imageLoadingStatus,\n        onImageLoadingStatusChange: setImageLoadingStatus,\n        children: /* @__PURE__ */ jsx(Primitive.span, { ...avatarProps, ref: forwardedRef })\n      }\n    );\n  }\n);\nAvatar.displayName = AVATAR_NAME;\nvar IMAGE_NAME = \"AvatarImage\";\nvar AvatarImage = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAvatar, src, onLoadingStatusChange = () => {\n    }, ...imageProps } = props;\n    const context = useAvatarContext(IMAGE_NAME, __scopeAvatar);\n    const imageLoadingStatus = useImageLoadingStatus(src, imageProps.referrerPolicy);\n    const handleLoadingStatusChange = useCallbackRef((status) => {\n      onLoadingStatusChange(status);\n      context.onImageLoadingStatusChange(status);\n    });\n    useLayoutEffect(() => {\n      if (imageLoadingStatus !== \"idle\") {\n        handleLoadingStatusChange(imageLoadingStatus);\n      }\n    }, [imageLoadingStatus, handleLoadingStatusChange]);\n    return imageLoadingStatus === \"loaded\" ? /* @__PURE__ */ jsx(Primitive.img, { ...imageProps, ref: forwardedRef, src }) : null;\n  }\n);\nAvatarImage.displayName = IMAGE_NAME;\nvar FALLBACK_NAME = \"AvatarFallback\";\nvar AvatarFallback = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAvatar, delayMs, ...fallbackProps } = props;\n    const context = useAvatarContext(FALLBACK_NAME, __scopeAvatar);\n    const [canRender, setCanRender] = React.useState(delayMs === void 0);\n    React.useEffect(() => {\n      if (delayMs !== void 0) {\n        const timerId = window.setTimeout(() => setCanRender(true), delayMs);\n        return () => window.clearTimeout(timerId);\n      }\n    }, [delayMs]);\n    return canRender && context.imageLoadingStatus !== \"loaded\" ? /* @__PURE__ */ jsx(Primitive.span, { ...fallbackProps, ref: forwardedRef }) : null;\n  }\n);\nAvatarFallback.displayName = FALLBACK_NAME;\nfunction useImageLoadingStatus(src, referrerPolicy) {\n  const [loadingStatus, setLoadingStatus] = React.useState(\"idle\");\n  useLayoutEffect(() => {\n    if (!src) {\n      setLoadingStatus(\"error\");\n      return;\n    }\n    let isMounted = true;\n    const image = new window.Image();\n    const updateStatus = (status) => () => {\n      if (!isMounted) return;\n      setLoadingStatus(status);\n    };\n    setLoadingStatus(\"loading\");\n    image.onload = updateStatus(\"loaded\");\n    image.onerror = updateStatus(\"error\");\n    image.src = src;\n    if (referrerPolicy) {\n      image.referrerPolicy = referrerPolicy;\n    }\n    return () => {\n      isMounted = false;\n    };\n  }, [src, referrerPolicy]);\n  return loadingStatus;\n}\nvar Root = Avatar;\nvar Image = AvatarImage;\nvar Fallback = AvatarFallback;\nexport {\n  Avatar,\n  AvatarFallback,\n  AvatarImage,\n  Fallback,\n  Image,\n  Root,\n  createAvatarScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square flex object-cover w-full h-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","\"use client\";\n\n// packages/react/dialog/src/Dialog.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContext, createContextScope } from \"@radix-ui/react-context\";\nimport { useId } from \"@radix-ui/react-id\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { DismissableLayer } from \"@radix-ui/react-dismissable-layer\";\nimport { FocusScope } from \"@radix-ui/react-focus-scope\";\nimport { Portal as PortalPrimitive } from \"@radix-ui/react-portal\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useFocusGuards } from \"@radix-ui/react-focus-guards\";\nimport { RemoveScroll } from \"react-remove-scroll\";\nimport { hideOthers } from \"aria-hidden\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nvar DIALOG_NAME = \"Dialog\";\nvar [createDialogContext, createDialogScope] = createContextScope(DIALOG_NAME);\nvar [DialogProvider, useDialogContext] = createDialogContext(DIALOG_NAME);\nvar Dialog = (props) => {\n  const {\n    __scopeDialog,\n    children,\n    open: openProp,\n    defaultOpen,\n    onOpenChange,\n    modal = true\n  } = props;\n  const triggerRef = React.useRef(null);\n  const contentRef = React.useRef(null);\n  const [open = false, setOpen] = useControllableState({\n    prop: openProp,\n    defaultProp: defaultOpen,\n    onChange: onOpenChange\n  });\n  return /* @__PURE__ */ jsx(\n    DialogProvider,\n    {\n      scope: __scopeDialog,\n      triggerRef,\n      contentRef,\n      contentId: useId(),\n      titleId: useId(),\n      descriptionId: useId(),\n      open,\n      onOpenChange: setOpen,\n      onOpenToggle: React.useCallback(() => setOpen((prevOpen) => !prevOpen), [setOpen]),\n      modal,\n      children\n    }\n  );\n};\nDialog.displayName = DIALOG_NAME;\nvar TRIGGER_NAME = \"DialogTrigger\";\nvar DialogTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDialog, ...triggerProps } = props;\n    const context = useDialogContext(TRIGGER_NAME, __scopeDialog);\n    const composedTriggerRef = useComposedRefs(forwardedRef, context.triggerRef);\n    return /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        type: \"button\",\n        \"aria-haspopup\": \"dialog\",\n        \"aria-expanded\": context.open,\n        \"aria-controls\": context.contentId,\n        \"data-state\": getState(context.open),\n        ...triggerProps,\n        ref: composedTriggerRef,\n        onClick: composeEventHandlers(props.onClick, context.onOpenToggle)\n      }\n    );\n  }\n);\nDialogTrigger.displayName = TRIGGER_NAME;\nvar PORTAL_NAME = \"DialogPortal\";\nvar [PortalProvider, usePortalContext] = createDialogContext(PORTAL_NAME, {\n  forceMount: void 0\n});\nvar DialogPortal = (props) => {\n  const { __scopeDialog, forceMount, children, container } = props;\n  const context = useDialogContext(PORTAL_NAME, __scopeDialog);\n  return /* @__PURE__ */ jsx(PortalProvider, { scope: __scopeDialog, forceMount, children: React.Children.map(children, (child) => /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: /* @__PURE__ */ jsx(PortalPrimitive, { asChild: true, container, children: child }) })) });\n};\nDialogPortal.displayName = PORTAL_NAME;\nvar OVERLAY_NAME = \"DialogOverlay\";\nvar DialogOverlay = React.forwardRef(\n  (props, forwardedRef) => {\n    const portalContext = usePortalContext(OVERLAY_NAME, props.__scopeDialog);\n    const { forceMount = portalContext.forceMount, ...overlayProps } = props;\n    const context = useDialogContext(OVERLAY_NAME, props.__scopeDialog);\n    return context.modal ? /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: /* @__PURE__ */ jsx(DialogOverlayImpl, { ...overlayProps, ref: forwardedRef }) }) : null;\n  }\n);\nDialogOverlay.displayName = OVERLAY_NAME;\nvar DialogOverlayImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDialog, ...overlayProps } = props;\n    const context = useDialogContext(OVERLAY_NAME, __scopeDialog);\n    return (\n      // Make sure `Content` is scrollable even when it doesn't live inside `RemoveScroll`\n      // ie. when `Overlay` and `Content` are siblings\n      /* @__PURE__ */ jsx(RemoveScroll, { as: Slot, allowPinchZoom: true, shards: [context.contentRef], children: /* @__PURE__ */ jsx(\n        Primitive.div,\n        {\n          \"data-state\": getState(context.open),\n          ...overlayProps,\n          ref: forwardedRef,\n          style: { pointerEvents: \"auto\", ...overlayProps.style }\n        }\n      ) })\n    );\n  }\n);\nvar CONTENT_NAME = \"DialogContent\";\nvar DialogContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const portalContext = usePortalContext(CONTENT_NAME, props.__scopeDialog);\n    const { forceMount = portalContext.forceMount, ...contentProps } = props;\n    const context = useDialogContext(CONTENT_NAME, props.__scopeDialog);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: context.modal ? /* @__PURE__ */ jsx(DialogContentModal, { ...contentProps, ref: forwardedRef }) : /* @__PURE__ */ jsx(DialogContentNonModal, { ...contentProps, ref: forwardedRef }) });\n  }\n);\nDialogContent.displayName = CONTENT_NAME;\nvar DialogContentModal = React.forwardRef(\n  (props, forwardedRef) => {\n    const context = useDialogContext(CONTENT_NAME, props.__scopeDialog);\n    const contentRef = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, context.contentRef, contentRef);\n    React.useEffect(() => {\n      const content = contentRef.current;\n      if (content) return hideOthers(content);\n    }, []);\n    return /* @__PURE__ */ jsx(\n      DialogContentImpl,\n      {\n        ...props,\n        ref: composedRefs,\n        trapFocus: context.open,\n        disableOutsidePointerEvents: true,\n        onCloseAutoFocus: composeEventHandlers(props.onCloseAutoFocus, (event) => {\n          event.preventDefault();\n          context.triggerRef.current?.focus();\n        }),\n        onPointerDownOutside: composeEventHandlers(props.onPointerDownOutside, (event) => {\n          const originalEvent = event.detail.originalEvent;\n          const ctrlLeftClick = originalEvent.button === 0 && originalEvent.ctrlKey === true;\n          const isRightClick = originalEvent.button === 2 || ctrlLeftClick;\n          if (isRightClick) event.preventDefault();\n        }),\n        onFocusOutside: composeEventHandlers(\n          props.onFocusOutside,\n          (event) => event.preventDefault()\n        )\n      }\n    );\n  }\n);\nvar DialogContentNonModal = React.forwardRef(\n  (props, forwardedRef) => {\n    const context = useDialogContext(CONTENT_NAME, props.__scopeDialog);\n    const hasInteractedOutsideRef = React.useRef(false);\n    const hasPointerDownOutsideRef = React.useRef(false);\n    return /* @__PURE__ */ jsx(\n      DialogContentImpl,\n      {\n        ...props,\n        ref: forwardedRef,\n        trapFocus: false,\n        disableOutsidePointerEvents: false,\n        onCloseAutoFocus: (event) => {\n          props.onCloseAutoFocus?.(event);\n          if (!event.defaultPrevented) {\n            if (!hasInteractedOutsideRef.current) context.triggerRef.current?.focus();\n            event.preventDefault();\n          }\n          hasInteractedOutsideRef.current = false;\n          hasPointerDownOutsideRef.current = false;\n        },\n        onInteractOutside: (event) => {\n          props.onInteractOutside?.(event);\n          if (!event.defaultPrevented) {\n            hasInteractedOutsideRef.current = true;\n            if (event.detail.originalEvent.type === \"pointerdown\") {\n              hasPointerDownOutsideRef.current = true;\n            }\n          }\n          const target = event.target;\n          const targetIsTrigger = context.triggerRef.current?.contains(target);\n          if (targetIsTrigger) event.preventDefault();\n          if (event.detail.originalEvent.type === \"focusin\" && hasPointerDownOutsideRef.current) {\n            event.preventDefault();\n          }\n        }\n      }\n    );\n  }\n);\nvar DialogContentImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDialog, trapFocus, onOpenAutoFocus, onCloseAutoFocus, ...contentProps } = props;\n    const context = useDialogContext(CONTENT_NAME, __scopeDialog);\n    const contentRef = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, contentRef);\n    useFocusGuards();\n    return /* @__PURE__ */ jsxs(Fragment, { children: [\n      /* @__PURE__ */ jsx(\n        FocusScope,\n        {\n          asChild: true,\n          loop: true,\n          trapped: trapFocus,\n          onMountAutoFocus: onOpenAutoFocus,\n          onUnmountAutoFocus: onCloseAutoFocus,\n          children: /* @__PURE__ */ jsx(\n            DismissableLayer,\n            {\n              role: \"dialog\",\n              id: context.contentId,\n              \"aria-describedby\": context.descriptionId,\n              \"aria-labelledby\": context.titleId,\n              \"data-state\": getState(context.open),\n              ...contentProps,\n              ref: composedRefs,\n              onDismiss: () => context.onOpenChange(false)\n            }\n          )\n        }\n      ),\n      /* @__PURE__ */ jsxs(Fragment, { children: [\n        /* @__PURE__ */ jsx(TitleWarning, { titleId: context.titleId }),\n        /* @__PURE__ */ jsx(DescriptionWarning, { contentRef, descriptionId: context.descriptionId })\n      ] })\n    ] });\n  }\n);\nvar TITLE_NAME = \"DialogTitle\";\nvar DialogTitle = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDialog, ...titleProps } = props;\n    const context = useDialogContext(TITLE_NAME, __scopeDialog);\n    return /* @__PURE__ */ jsx(Primitive.h2, { id: context.titleId, ...titleProps, ref: forwardedRef });\n  }\n);\nDialogTitle.displayName = TITLE_NAME;\nvar DESCRIPTION_NAME = \"DialogDescription\";\nvar DialogDescription = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDialog, ...descriptionProps } = props;\n    const context = useDialogContext(DESCRIPTION_NAME, __scopeDialog);\n    return /* @__PURE__ */ jsx(Primitive.p, { id: context.descriptionId, ...descriptionProps, ref: forwardedRef });\n  }\n);\nDialogDescription.displayName = DESCRIPTION_NAME;\nvar CLOSE_NAME = \"DialogClose\";\nvar DialogClose = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDialog, ...closeProps } = props;\n    const context = useDialogContext(CLOSE_NAME, __scopeDialog);\n    return /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        type: \"button\",\n        ...closeProps,\n        ref: forwardedRef,\n        onClick: composeEventHandlers(props.onClick, () => context.onOpenChange(false))\n      }\n    );\n  }\n);\nDialogClose.displayName = CLOSE_NAME;\nfunction getState(open) {\n  return open ? \"open\" : \"closed\";\n}\nvar TITLE_WARNING_NAME = \"DialogTitleWarning\";\nvar [WarningProvider, useWarningContext] = createContext(TITLE_WARNING_NAME, {\n  contentName: CONTENT_NAME,\n  titleName: TITLE_NAME,\n  docsSlug: \"dialog\"\n});\nvar TitleWarning = ({ titleId }) => {\n  const titleWarningContext = useWarningContext(TITLE_WARNING_NAME);\n  const MESSAGE = `\\`${titleWarningContext.contentName}\\` requires a \\`${titleWarningContext.titleName}\\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \\`${titleWarningContext.titleName}\\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${titleWarningContext.docsSlug}`;\n  React.useEffect(() => {\n    if (titleId) {\n      const hasTitle = document.getElementById(titleId);\n      if (!hasTitle) console.error(MESSAGE);\n    }\n  }, [MESSAGE, titleId]);\n  return null;\n};\nvar DESCRIPTION_WARNING_NAME = \"DialogDescriptionWarning\";\nvar DescriptionWarning = ({ contentRef, descriptionId }) => {\n  const descriptionWarningContext = useWarningContext(DESCRIPTION_WARNING_NAME);\n  const MESSAGE = `Warning: Missing \\`Description\\` or \\`aria-describedby={undefined}\\` for {${descriptionWarningContext.contentName}}.`;\n  React.useEffect(() => {\n    const describedById = contentRef.current?.getAttribute(\"aria-describedby\");\n    if (descriptionId && describedById) {\n      const hasDescription = document.getElementById(descriptionId);\n      if (!hasDescription) console.warn(MESSAGE);\n    }\n  }, [MESSAGE, contentRef, descriptionId]);\n  return null;\n};\nvar Root = Dialog;\nvar Trigger = DialogTrigger;\nvar Portal = DialogPortal;\nvar Overlay = DialogOverlay;\nvar Content = DialogContent;\nvar Title = DialogTitle;\nvar Description = DialogDescription;\nvar Close = DialogClose;\nexport {\n  Close,\n  Content,\n  Description,\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n  Overlay,\n  Portal,\n  Root,\n  Title,\n  Trigger,\n  WarningProvider,\n  createDialogScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"./button\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-30 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 backdrop-blur-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, close, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay onClick={e => { close(); e.stopPropagation() }} />\n    <DialogPrimitive.Content onClick={e => e.stopPropagation()}\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogClose asChild>\n        <Button variant=\"circular\" size=\"icon\"\n          onClick={e => e.stopPropagation()}\n          className=\"absolute top-4 right-4 p-2\"\n          aria-label=\"Close full screen image\"\n        >\n          <X className=\"h-6 w-6\" />\n        </Button>\n\n      </DialogClose>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","\n\nimport { useState, useCallback, useRef, useEffect } from \"react\"\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\"\nimport { Dialog, DialogClose, DialogContent, DialogDescription, DialogOverlay, DialogPortal, DialogTitle } from \"@/components/ui/dialog-custom\"\nimport { Instagram, X } from 'lucide-react'\nimport { Button } from \"./ui/button\"\nimport { Description } from \"@radix-ui/react-dialog\"\nimport { IllustrationPrompt } from \"./IllustrationPrompt\"\nimport { SongData } from \"@/types/types\"\n\ninterface IllustrationPopupProps {\n  avatarClassName: string\n  song: SongData\n}\n\nexport function IllustrationPopup({ avatarClassName, song }: IllustrationPopupProps) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <>\n      <Avatar className={\"cursor-pointer \" + avatarClassName} onClick={(e) => { e.stopPropagation(); setIsOpen(true) }}>\n        <AvatarImage src={song.thumbnailURL()} alt={\"song illustration thumbnail\"} />\n        {/* <AvatarFallback><Instagram></AvatarFallback> */}\n      </Avatar>\n      <Dialog open={isOpen} onOpenChange={setIsOpen}>\n        <DialogTitle className=\"hidden\">Illustration image view</DialogTitle>\n        {/* DialogDescription is here just so that accessibility does not complain */}\n        <DialogDescription className=\"hidden\">Illustration</DialogDescription>\n        <DialogContent className=\" max-w-[512px] max-h-[calc(100vh)] h-fit rounded-lg backdrop-blur-sm p-0 avatar-modal-dialog overflow-clip content-radix bg-glass/50 gap-0 flex flex-col\"\n          close={() => setIsOpen(false)}\n        >\n          <div className=\"relative flex justify-center max-h-[512px] shadow-lg\">\n            <img\n              style={{ backgroundImage: `url(${song.thumbnailURL()})`, backgroundRepeat: \"no-repeat\", backgroundSize: \"cover\" }}\n              src={song.illustrationURL()}\n              width={512}\n              height={512}\n              className=\"object-scale-down z-50\"\n            />\n          </div>\n          <IllustrationPrompt song={song} show={isOpen} className={\"text-center text-white font-bold !items-center min-h-32 max-h-48 [@media(max-height:600px)]:!hidden\"} />\n        </DialogContent>\n      </Dialog>\n    </>\n  )\n}\n","\nimport { FlagOff } from 'lucide-react';\nimport { Avatar, AvatarFallback, AvatarImage } from './ui/avatar';\nconst language2iso = {\n    \"czech\": \"cz\",\n    \"english\": \"gb\",\n    \"german\": \"de\",\n    \"slovak\": \"sk\",\n    \"polish\": \"pl\",\n    \"spanish\": \"uy\",\n    \"romanian\": \"ro\",\n    \"finnish\": \"fi\",\n    \"estonian\": \"ee\",\n    \"french\": \"fr\",\n    \"italian\": \"it\",\n    \"portuguese\": \"br\",\n    \"icelandic\": \"is\",\n    \"all\": \"un\",\n    \"other\": \"un\",\n}\n\nfunction convert2flag(language: string): string {\n    language = language.toLowerCase()\n    if (language in language2iso) {\n        return \"https://flagcdn.com/\" + language2iso[language] + \".svg\";\n    } else if (language === \"russian\") {\n        return \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Flag_of_Mordor.svg/800px-Flag_of_Mordor.svg.png\"\n    }\n    return \"\";\n}\n\nfunction LanguageFlag({ language }) {\n    return (\n        <Avatar className='w-6 h-6 shadow-black'>\n            <AvatarImage alt={language} src={convert2flag(language)} />\n            <AvatarFallback><FlagOff /></AvatarFallback>\n        </Avatar>\n    )\n}\n\nexport default LanguageFlag;","export default function CircularProgress({ value, maxValue, color = \"hsl(var(--primary))\", strokeWidth = 10 }) {\n    return (\n        <div className=\"block relative items-center justify-center h-10 w-10\">\n            <svg className=\"w-full h-full relative overflow-visible\" viewBox=\"0 0 100 100\">\n                <circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"transparent\" stroke={\"#e5e7eb\"} strokeWidth={strokeWidth} />\n                <circle\n                    cx=\"50\"\n                    cy=\"50\"\n                    r=\"40\"\n                    className=\"transition-all !duration-500 progress\"\n                    fill=\"transparent\"\n                    transform=\"rotate(-90 50 50)\"\n                    stroke={color}\n                    strokeWidth={strokeWidth * 1.2}\n                    strokeDasharray=\"251.3\"\n                    strokeDashoffset={251.3 * (1 - value / maxValue)}\n                    strokeLinecap=\"round\"\n                    role=\"progressbar\" />\n            </svg>\n            <div className=\"absolute inset-0 flex items-center justify-center font-normal text-[0.65rem] text-muted-foreground\">\n                {value}\n            </div>\n        </div>\n    )\n}","import { IllustrationPopup } from \"@/components/IllustrationPopup\";\nimport LanguageFlag from \"@/components/LanguageFlag\";\nimport CircularProgress from \"@/components/ui/circular-progress\";\nimport {\n    useLinkClickHandler\n} from \"react-router-dom\";\nimport { SongData } from \"../../types/types\";\nimport { memo } from \"react\";\n\nconst MONTH_NAMES = [\n    'January', 'February', 'March', 'April', 'May', 'June',\n    'July', 'August', 'September', 'October', 'November', 'December'\n] as const;\n\ninterface VocalRangeIndicatorProps {\n    songRangeSemitones: number | undefined;\n    maxRange: number;\n}\n\nconst VocalRangeIndicator = memo(({ songRangeSemitones, maxRange }: VocalRangeIndicatorProps) => (\n    <CircularProgress value={songRangeSemitones || maxRange} maxValue={maxRange} />\n));\n\n\ninterface DateDisplayProps {\n    month: number;\n    year: number;\n}\n\nconst DateDisplay = memo(({ month, year }: DateDisplayProps) => (\n    <div className=\"basis-[13%] min-w-12 flex-col content-center justify-center hidden sm:flex text-center\">\n        <h3 className=\"text-xs opacity-70\">{MONTH_NAMES[month - 1]}</h3>\n        <h2 className=\"text-sm opacity-70\">{year}</h2>\n    </div>\n));\n\n\ninterface CapoDisplayProps {\n    capo: number;\n}\n\nconst CapoDisplay = memo(({ capo }: CapoDisplayProps) => (\n    <div className=\"basis-[13%] flex-shrink min-w-12 text-center content-center justify-center hidden lg:flex flex-col\">\n        <h2 className=\"text-xs opacity-70\">Capo</h2>\n        <h3 className=\"text-sm opacity-70\">{capo}</h3>\n    </div>\n));\n\ninterface SongInfoProps {\n    title: string;\n    artist: string;\n}\n\nconst SongInfo = memo(({ title, artist }: SongInfoProps) => (\n    <div className=\"flex-auto min-w-40 flex-col text-left content-center\">\n        <h2 className=\"text-sm font-bold truncate\">{title}</h2>\n        <h3 className=\"text-sm opacity-50 truncate\">{artist}</h3>\n    </div>\n));\n\n\ninterface SongRowProps {\n    song: SongData;\n    maxRange: number;\n}\n\n\nconst SongRow = memo(({ song, maxRange }: SongRowProps) => {\n    const handleClick = useLinkClickHandler(song.url(), {});\n\n    if (!song) {\n        console.error(\"Invalid song provided to SongRow\");\n        return (\n            <div className=\"h-[70px] flex items-center container max-w-2xl mx-auto px-2 sm:px-4 bg-white text-foreground\">\n                Invalid song\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"h-[70px] flex items-center container max-w-2xl mx-auto px-2 sm:px-4 song-row-wrapper\">\n            <div\n                className=\"flex h-14 min-w-72 w-full rounded-full song-row-bg-image\"\n                style={{ backgroundImage: `url(${song.thumbnailURL()})` }}\n                onClick={handleClick}\n            >\n                <div className=\"flex relative h-full w-full items-center rounded-full p-1 backdrop-blur-md song-row-bg-image shadow-black row-text-shadow\">\n                    <IllustrationPopup\n                        avatarClassName=\"absolute -left-0 top-0 bottom-0 m-auto song-avatar z-10 w-16 h-16 text-large\"\n                        song={song}\n                    />\n                    <div className=\"flex relative h-12 song-row w-full backdrop-blur-lg bg-glass/60 hover:bg-glass/90 rounded-full\">\n                        <div className=\"flex basis-[12%] min-w-[72px] rounded-l-full content-center justify-center relative\" />\n\n                        <SongInfo title={song.title} artist={song.artist} />\n\n                        <DateDisplay\n                            month={song.dateAdded.month}\n                            year={song.dateAdded.year}\n                        />\n\n                        <CapoDisplay capo={song.capo} />\n\n                        <div className=\"hidden basis-[13%] min-w-12 sm:flex content-center justify-center\">\n                            <div className=\"flex items-center\">\n                                <VocalRangeIndicator\n                                    songRangeSemitones={song.range.semitones}\n                                    maxRange={maxRange}\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"flex basis-1/12 min-w-12 items-center justify-end p-2\">\n                            <LanguageFlag language={song.language} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n});\n\n\nexport default SongRow;","import * as React from \"react\";\n\nfunction isShallowEqual(object1, object2) {\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (keys1.length !== keys2.length) {\n    return false;\n  }\n\n  for (let key of keys1) {\n    if (object1[key] !== object2[key]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isTouchEvent({ nativeEvent }) {\n  return window.TouchEvent\n    ? nativeEvent instanceof TouchEvent\n    : \"touches\" in nativeEvent;\n}\n\nfunction isMouseEvent(event) {\n  return event.nativeEvent instanceof MouseEvent;\n}\n\nfunction throttle(cb, ms) {\n  let lastTime = 0;\n  return () => {\n    const now = Date.now();\n    if (now - lastTime >= ms) {\n      cb();\n      lastTime = now;\n    }\n  };\n}\n\nfunction isPlainObject(value) {\n  return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n\nfunction dispatchStorageEvent(key, newValue) {\n  window.dispatchEvent(new StorageEvent(\"storage\", { key, newValue }));\n}\n\nexport function useBattery() {\n  const [state, setState] = React.useState({\n    supported: true,\n    loading: true,\n    level: null,\n    charging: null,\n    chargingTime: null,\n    dischargingTime: null,\n  });\n\n  React.useEffect(() => {\n    if (!navigator.getBattery) {\n      setState((s) => ({\n        ...s,\n        supported: false,\n        loading: false,\n      }));\n      return;\n    }\n\n    let battery = null;\n\n    const handleChange = () => {\n      setState({\n        supported: true,\n        loading: false,\n        level: battery.level,\n        charging: battery.charging,\n        chargingTime: battery.chargingTime,\n        dischargingTime: battery.dischargingTime,\n      });\n    };\n\n    navigator.getBattery().then((b) => {\n      battery = b;\n      handleChange();\n\n      b.addEventListener(\"levelchange\", handleChange);\n      b.addEventListener(\"chargingchange\", handleChange);\n      b.addEventListener(\"chargingtimechange\", handleChange);\n      b.addEventListener(\"dischargingtimechange\", handleChange);\n    });\n\n    return () => {\n      if (battery) {\n        battery.removeEventListener(\"levelchange\", handleChange);\n        battery.removeEventListener(\"chargingchange\", handleChange);\n        battery.removeEventListener(\"chargingtimechange\", handleChange);\n        battery.removeEventListener(\"dischargingtimechange\", handleChange);\n      }\n    };\n  }, []);\n\n  return state;\n}\n\nexport function useClickAway(cb) {\n  const ref = React.useRef(null);\n  const refCb = React.useRef(cb);\n\n  React.useLayoutEffect(() => {\n    refCb.current = cb;\n  });\n\n  React.useEffect(() => {\n    const handler = (e) => {\n      const element = ref.current;\n      if (element && !element.contains(e.target)) {\n        refCb.current(e);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handler);\n    document.addEventListener(\"touchstart\", handler);\n\n    return () => {\n      document.removeEventListener(\"mousedown\", handler);\n      document.removeEventListener(\"touchstart\", handler);\n    };\n  }, []);\n\n  return ref;\n}\n\nfunction oldSchoolCopy(text) {\n  const tempTextArea = document.createElement(\"textarea\");\n  tempTextArea.value = text;\n  document.body.appendChild(tempTextArea);\n  tempTextArea.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(tempTextArea);\n}\n\nexport function useCopyToClipboard() {\n  const [state, setState] = React.useState(null);\n\n  const copyToClipboard = React.useCallback((value) => {\n    const handleCopy = async () => {\n      try {\n        if (navigator?.clipboard?.writeText) {\n          await navigator.clipboard.writeText(value);\n          setState(value);\n        } else {\n          throw new Error(\"writeText not supported\");\n        }\n      } catch (e) {\n        oldSchoolCopy(value);\n        setState(value);\n      }\n    };\n\n    handleCopy();\n  }, []);\n\n  return [state, copyToClipboard];\n}\n\nexport function useCounter(startingValue = 0, options = {}) {\n  const { min, max } = options;\n\n  if (typeof min === \"number\" && startingValue < min) {\n    throw new Error(\n      `Your starting value of ${startingValue} is less than your min of ${min}.`\n    );\n  }\n\n  if (typeof max === \"number\" && startingValue > max) {\n    throw new Error(\n      `Your starting value of ${startingValue} is greater than your max of ${max}.`\n    );\n  }\n\n  const [count, setCount] = React.useState(startingValue);\n\n  const increment = React.useCallback(() => {\n    setCount((c) => {\n      const nextCount = c + 1;\n\n      if (typeof max === \"number\" && nextCount > max) {\n        return c;\n      }\n\n      return nextCount;\n    });\n  }, [max]);\n\n  const decrement = React.useCallback(() => {\n    setCount((c) => {\n      const nextCount = c - 1;\n\n      if (typeof min === \"number\" && nextCount < min) {\n        return c;\n      }\n\n      return nextCount;\n    });\n  }, [min]);\n\n  const set = React.useCallback(\n    (nextCount) => {\n      setCount((c) => {\n        if (typeof max === \"number\" && nextCount > max) {\n          return c;\n        }\n\n        if (typeof min === \"number\" && nextCount < min) {\n          return c;\n        }\n\n        return nextCount;\n      });\n    },\n    [max, min]\n  );\n\n  const reset = React.useCallback(() => {\n    setCount(startingValue);\n  }, [startingValue]);\n\n  return [\n    count,\n    {\n      increment,\n      decrement,\n      set,\n      reset,\n    },\n  ];\n}\n\nexport function useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = React.useState(value);\n\n  React.useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\nexport function useDefault(initialValue, defaultValue) {\n  const [state, setState] = React.useState(initialValue);\n\n  if (typeof state === \"undefined\" || state === null) {\n    return [defaultValue, setState];\n  }\n\n  return [state, setState];\n}\n\nexport function useDocumentTitle(title) {\n  React.useEffect(() => {\n    document.title = title;\n  }, [title]);\n}\n\nexport function useFavicon(url) {\n  React.useEffect(() => {\n    let link = document.querySelector(`link[rel~=\"icon\"]`);\n\n    if (!link) {\n      link = document.createElement(\"link\");\n      link.type = \"image/x-icon\";\n      link.rel = \"icon\";\n      link.href = url;\n      document.head.appendChild(link);\n    } else {\n      link.href = url;\n    }\n  }, [url]);\n}\n\nexport function useGeolocation(options = {}) {\n  const [state, setState] = React.useState({\n    loading: true,\n    accuracy: null,\n    altitude: null,\n    altitudeAccuracy: null,\n    heading: null,\n    latitude: null,\n    longitude: null,\n    speed: null,\n    timestamp: null,\n    error: null,\n  });\n\n  const optionsRef = React.useRef(options);\n\n  React.useEffect(() => {\n    const onEvent = ({ coords, timestamp }) => {\n      setState({\n        loading: false,\n        timestamp,\n        latitude: coords.latitude,\n        longitude: coords.longitude,\n        altitude: coords.altitude,\n        accuracy: coords.accuracy,\n        altitudeAccuracy: coords.altitudeAccuracy,\n        heading: coords.heading,\n        speed: coords.speed,\n      });\n    };\n\n    const onEventError = (error) => {\n      setState((s) => ({\n        ...s,\n        loading: false,\n        error,\n      }));\n    };\n\n    navigator.geolocation.getCurrentPosition(\n      onEvent,\n      onEventError,\n      optionsRef.current\n    );\n\n    const watchId = navigator.geolocation.watchPosition(\n      onEvent,\n      onEventError,\n      optionsRef.current\n    );\n\n    return () => {\n      navigator.geolocation.clearWatch(watchId);\n    };\n  }, []);\n\n  return state;\n}\n\nconst initialUseHistoryStateState = {\n  past: [],\n  present: null,\n  future: [],\n};\n\nconst useHistoryStateReducer = (state, action) => {\n  const { past, present, future } = state;\n\n  if (action.type === \"UNDO\") {\n    return {\n      past: past.slice(0, past.length - 1),\n      present: past[past.length - 1],\n      future: [present, ...future],\n    };\n  } else if (action.type === \"REDO\") {\n    return {\n      past: [...past, present],\n      present: future[0],\n      future: future.slice(1),\n    };\n  } else if (action.type === \"SET\") {\n    const { newPresent } = action;\n\n    if (action.newPresent === present) {\n      return state;\n    }\n\n    return {\n      past: [...past, present],\n      present: newPresent,\n      future: [],\n    };\n  } else if (action.type === \"CLEAR\") {\n    return {\n      ...initialUseHistoryStateState,\n      present: action.initialPresent,\n    };\n  } else {\n    throw new Error(\"Unsupported action type\");\n  }\n};\n\nexport function useHistoryState(initialPresent = {}) {\n  const initialPresentRef = React.useRef(initialPresent);\n\n  const [state, dispatch] = React.useReducer(useHistoryStateReducer, {\n    ...initialUseHistoryStateState,\n    present: initialPresentRef.current,\n  });\n\n  const canUndo = state.past.length !== 0;\n  const canRedo = state.future.length !== 0;\n\n  const undo = React.useCallback(() => {\n    if (canUndo) {\n      dispatch({ type: \"UNDO\" });\n    }\n  }, [canUndo]);\n\n  const redo = React.useCallback(() => {\n    if (canRedo) {\n      dispatch({ type: \"REDO\" });\n    }\n  }, [canRedo]);\n\n  const set = React.useCallback(\n    (newPresent) => dispatch({ type: \"SET\", newPresent }),\n    []\n  );\n\n  const clear = React.useCallback(\n    () =>\n      dispatch({ type: \"CLEAR\", initialPresent: initialPresentRef.current }),\n    []\n  );\n\n  return { state: state.present, set, undo, redo, clear, canUndo, canRedo };\n}\n\nexport function useHover() {\n  const [hovering, setHovering] = React.useState(false);\n  const previousNode = React.useRef(null);\n\n  const handleMouseEnter = React.useCallback(() => {\n    setHovering(true);\n  }, []);\n\n  const handleMouseLeave = React.useCallback(() => {\n    setHovering(false);\n  }, []);\n\n  const customRef = React.useCallback(\n    (node) => {\n      if (previousNode.current?.nodeType === Node.ELEMENT_NODE) {\n        previousNode.current.removeEventListener(\n          \"mouseenter\",\n          handleMouseEnter\n        );\n        previousNode.current.removeEventListener(\n          \"mouseleave\",\n          handleMouseLeave\n        );\n      }\n\n      if (node?.nodeType === Node.ELEMENT_NODE) {\n        node.addEventListener(\"mouseenter\", handleMouseEnter);\n        node.addEventListener(\"mouseleave\", handleMouseLeave);\n      }\n\n      previousNode.current = node;\n    },\n    [handleMouseEnter, handleMouseLeave]\n  );\n\n  return [customRef, hovering];\n}\n\nexport function useIdle(ms = 1000 * 60) {\n  const [idle, setIdle] = React.useState(false);\n\n  React.useEffect(() => {\n    let timeoutId;\n\n    const handleTimeout = () => {\n      setIdle(true);\n    };\n\n    const handleEvent = throttle((e) => {\n      setIdle(false);\n\n      window.clearTimeout(timeoutId);\n      timeoutId = window.setTimeout(handleTimeout, ms);\n    }, 500);\n\n    const handleVisibilityChange = () => {\n      if (!document.hidden) {\n        handleEvent();\n      }\n    };\n\n    timeoutId = window.setTimeout(handleTimeout, ms);\n\n    window.addEventListener(\"mousemove\", handleEvent);\n    window.addEventListener(\"mousedown\", handleEvent);\n    window.addEventListener(\"resize\", handleEvent);\n    window.addEventListener(\"keydown\", handleEvent);\n    window.addEventListener(\"touchstart\", handleEvent);\n    window.addEventListener(\"wheel\", handleEvent);\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n\n    return () => {\n      window.removeEventListener(\"mousemove\", handleEvent);\n      window.removeEventListener(\"mousedown\", handleEvent);\n      window.removeEventListener(\"resize\", handleEvent);\n      window.removeEventListener(\"keydown\", handleEvent);\n      window.removeEventListener(\"touchstart\", handleEvent);\n      window.removeEventListener(\"wheel\", handleEvent);\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n      window.clearTimeout(timeoutId);\n    };\n  }, [ms]);\n\n  return idle;\n}\n\nexport function useIntersectionObserver(options = {}) {\n  const { threshold = 1, root = null, rootMargin = \"0px\" } = options;\n  const [entry, setEntry] = React.useState(null);\n\n  const previousObserver = React.useRef(null);\n\n  const customRef = React.useCallback(\n    (node) => {\n      if (previousObserver.current) {\n        previousObserver.current.disconnect();\n        previousObserver.current = null;\n      }\n\n      if (node?.nodeType === Node.ELEMENT_NODE) {\n        const observer = new IntersectionObserver(\n          ([entry]) => {\n            setEntry(entry);\n          },\n          { threshold, root, rootMargin }\n        );\n\n        observer.observe(node);\n        previousObserver.current = observer;\n      }\n    },\n    [threshold, root, rootMargin]\n  );\n\n  return [customRef, entry];\n}\n\nexport function useIsClient() {\n  const [isClient, setIsClient] = React.useState(false);\n\n  React.useEffect(() => {\n    setIsClient(true);\n  }, []);\n\n  return isClient;\n}\n\nexport function useIsFirstRender() {\n  const renderRef = React.useRef(true);\n\n  if (renderRef.current === true) {\n    renderRef.current = false;\n    return true;\n  }\n\n  return renderRef.current;\n}\n\nexport function useList(defaultList = []) {\n  const [list, setList] = React.useState(defaultList);\n\n  const set = React.useCallback((l) => {\n    setList(l);\n  }, []);\n\n  const push = React.useCallback((element) => {\n    setList((l) => [...l, element]);\n  }, []);\n\n  const removeAt = React.useCallback((index) => {\n    setList((l) => [...l.slice(0, index), ...l.slice(index + 1)]);\n  }, []);\n\n  const insertAt = React.useCallback((index, element) => {\n    setList((l) => [...l.slice(0, index), element, ...l.slice(index)]);\n  }, []);\n\n  const updateAt = React.useCallback((index, element) => {\n    setList((l) => l.map((e, i) => (i === index ? element : e)));\n  }, []);\n\n  const clear = React.useCallback(() => setList([]), []);\n\n  return [list, { set, push, removeAt, insertAt, updateAt, clear }];\n}\n\nconst setLocalStorageItem = (key, value) => {\n  const stringifiedValue = JSON.stringify(value);\n  window.localStorage.setItem(key, stringifiedValue);\n  dispatchStorageEvent(key, stringifiedValue);\n};\n\nconst removeLocalStorageItem = (key) => {\n  window.localStorage.removeItem(key);\n  dispatchStorageEvent(key, null);\n};\n\nconst getLocalStorageItem = (key) => {\n  return window.localStorage.getItem(key);\n};\n\nconst useLocalStorageSubscribe = (callback) => {\n  window.addEventListener(\"storage\", callback);\n  return () => window.removeEventListener(\"storage\", callback);\n};\n\nconst getLocalStorageServerSnapshot = () => {\n  throw Error(\"useLocalStorage is a client-only hook\");\n};\n\nexport function useLocalStorage(key, initialValue) {\n  const getSnapshot = () => getLocalStorageItem(key);\n\n  const store = React.useSyncExternalStore(\n    useLocalStorageSubscribe,\n    getSnapshot,\n    getLocalStorageServerSnapshot\n  );\n\n  const setState = React.useCallback(\n    (v) => {\n      try {\n        const nextState = typeof v === \"function\" ? v(JSON.parse(store)) : v;\n\n        if (nextState === undefined || nextState === null) {\n          removeLocalStorageItem(key);\n        } else {\n          setLocalStorageItem(key, nextState);\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n    },\n    [key, store]\n  );\n\n  React.useEffect(() => {\n    if (\n      getLocalStorageItem(key) === null &&\n      typeof initialValue !== \"undefined\"\n    ) {\n      setLocalStorageItem(key, initialValue);\n    }\n  }, [key, initialValue]);\n\n  return [store ? JSON.parse(store) : initialValue, setState];\n}\n\nexport function useLockBodyScroll() {\n  React.useLayoutEffect(() => {\n    const originalStyle = window.getComputedStyle(document.body).overflow;\n    document.body.style.overflow = \"hidden\";\n    return () => {\n      document.body.style.overflow = originalStyle;\n    };\n  }, []);\n}\n\nexport function useLongPress(callback, options = {}) {\n  const { threshold = 400, onStart, onFinish, onCancel } = options;\n  const isLongPressActive = React.useRef(false);\n  const isPressed = React.useRef(false);\n  const timerId = React.useRef();\n\n  return React.useMemo(() => {\n    if (typeof callback !== \"function\") {\n      return {};\n    }\n\n    const start = (event) => {\n      if (!isMouseEvent(event) && !isTouchEvent(event)) return;\n\n      if (onStart) {\n        onStart(event);\n      }\n\n      isPressed.current = true;\n      timerId.current = setTimeout(() => {\n        callback(event);\n        isLongPressActive.current = true;\n      }, threshold);\n    };\n\n    const cancel = (event) => {\n      if (!isMouseEvent(event) && !isTouchEvent(event)) return;\n\n      if (isLongPressActive.current) {\n        if (onFinish) {\n          onFinish(event);\n        }\n      } else if (isPressed.current) {\n        if (onCancel) {\n          onCancel(event);\n        }\n      }\n\n      isLongPressActive.current = false;\n      isPressed.current = false;\n\n      if (timerId.current) {\n        window.clearTimeout(timerId.current);\n      }\n    };\n\n    const mouseHandlers = {\n      onMouseDown: start,\n      onMouseUp: cancel,\n      onMouseLeave: cancel,\n    };\n\n    const touchHandlers = {\n      onTouchStart: start,\n      onTouchEnd: cancel,\n    };\n\n    return {\n      ...mouseHandlers,\n      ...touchHandlers,\n    };\n  }, [callback, threshold, onCancel, onFinish, onStart]);\n}\n\nexport function useMap(initialState) {\n  const mapRef = React.useRef(new Map(initialState));\n  const [, reRender] = React.useReducer((x) => x + 1, 0);\n\n  mapRef.current.set = (...args) => {\n    Map.prototype.set.apply(mapRef.current, args);\n    reRender();\n    return mapRef.current;\n  };\n\n  mapRef.current.clear = (...args) => {\n    Map.prototype.clear.apply(mapRef.current, args);\n    reRender();\n  };\n\n  mapRef.current.delete = (...args) => {\n    const res = Map.prototype.delete.apply(mapRef.current, args);\n    reRender();\n\n    return res;\n  };\n\n  return mapRef.current;\n}\n\nexport function useMeasure() {\n  const [dimensions, setDimensions] = React.useState({\n    width: null,\n    height: null,\n  });\n\n  const previousObserver = React.useRef(null);\n\n  const customRef = React.useCallback((node) => {\n    if (previousObserver.current) {\n      previousObserver.current.disconnect();\n      previousObserver.current = null;\n    }\n\n    if (node?.nodeType === Node.ELEMENT_NODE) {\n      const observer = new ResizeObserver(([entry]) => {\n        if (entry && entry.borderBoxSize) {\n          const { inlineSize: width, blockSize: height } =\n            entry.borderBoxSize[0];\n\n          setDimensions({ width, height });\n        }\n      });\n\n      observer.observe(node);\n      previousObserver.current = observer;\n    }\n  }, []);\n\n  return [customRef, dimensions];\n}\n\nexport function useMediaQuery(query) {\n  const subscribe = React.useCallback(\n    (callback) => {\n      const matchMedia = window.matchMedia(query);\n\n      matchMedia.addEventListener(\"change\", callback);\n      return () => {\n        matchMedia.removeEventListener(\"change\", callback);\n      };\n    },\n    [query]\n  );\n\n  const getSnapshot = () => {\n    return window.matchMedia(query).matches;\n  };\n\n  const getServerSnapshot = () => {\n    throw Error(\"useMediaQuery is a client-only hook\");\n  };\n\n  return React.useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot);\n}\n\nexport function useMouse() {\n  const [state, setState] = React.useState({\n    x: 0,\n    y: 0,\n    elementX: 0,\n    elementY: 0,\n    elementPositionX: 0,\n    elementPositionY: 0,\n  });\n\n  const ref = React.useRef(null);\n\n  React.useLayoutEffect(() => {\n    const handleMouseMove = (event) => {\n      let newState = {\n        x: event.pageX,\n        y: event.pageY,\n      };\n\n      if (ref.current?.nodeType === Node.ELEMENT_NODE) {\n        const { left, top } = ref.current.getBoundingClientRect();\n        const elementPositionX = left + window.scrollX;\n        const elementPositionY = top + window.scrollY;\n        const elementX = event.pageX - elementPositionX;\n        const elementY = event.pageY - elementPositionY;\n\n        newState.elementX = elementX;\n        newState.elementY = elementY;\n        newState.elementPositionX = elementPositionX;\n        newState.elementPositionY = elementPositionY;\n      }\n\n      setState((s) => {\n        return {\n          ...s,\n          ...newState,\n        };\n      });\n    };\n\n    document.addEventListener(\"mousemove\", handleMouseMove);\n\n    return () => {\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n    };\n  }, []);\n\n  return [state, ref];\n}\n\nconst getConnection = () => {\n  return (\n    navigator?.connection ||\n    navigator?.mozConnection ||\n    navigator?.webkitConnection\n  );\n};\n\nconst useNetworkStateSubscribe = (callback) => {\n  window.addEventListener(\"online\", callback, { passive: true });\n  window.addEventListener(\"offline\", callback, { passive: true });\n\n  const connection = getConnection();\n\n  if (connection) {\n    connection.addEventListener(\"change\", callback, { passive: true });\n  }\n\n  return () => {\n    window.removeEventListener(\"online\", callback);\n    window.removeEventListener(\"offline\", callback);\n\n    if (connection) {\n      connection.removeEventListener(\"change\", callback);\n    }\n  };\n};\n\nconst getNetworkStateServerSnapshot = () => {\n  throw Error(\"useNetworkState is a client-only hook\");\n};\n\nexport function useNetworkState() {\n  const cache = React.useRef({});\n\n  const getSnapshot = () => {\n    const online = navigator.onLine;\n    const connection = getConnection();\n\n    const nextState = {\n      online,\n      downlink: connection?.downlink,\n      downlinkMax: connection?.downlinkMax,\n      effectiveType: connection?.effectiveType,\n      rtt: connection?.rtt,\n      saveData: connection?.saveData,\n      type: connection?.type,\n    };\n\n    if (isShallowEqual(cache.current, nextState)) {\n      return cache.current;\n    } else {\n      cache.current = nextState;\n      return nextState;\n    }\n  };\n\n  return React.useSyncExternalStore(\n    useNetworkStateSubscribe,\n    getSnapshot,\n    getNetworkStateServerSnapshot\n  );\n}\n\nexport function useObjectState(initialValue) {\n  const [state, setState] = React.useState(initialValue);\n\n  const handleUpdate = React.useCallback((arg) => {\n    if (typeof arg === \"function\") {\n      setState((s) => {\n        const newState = arg(s);\n\n        if (isPlainObject(newState)) {\n          return {\n            ...s,\n            ...newState,\n          };\n        }\n      });\n    }\n\n    if (isPlainObject(arg)) {\n      setState((s) => ({\n        ...s,\n        ...arg,\n      }));\n    }\n  }, []);\n\n  return [state, handleUpdate];\n}\n\nexport function useOrientation() {\n  const [orientation, setOrientation] = React.useState({\n    angle: 0,\n    type: \"landscape-primary\",\n  });\n\n  React.useLayoutEffect(() => {\n    const handleChange = () => {\n      const { angle, type } = window.screen.orientation;\n      setOrientation({\n        angle,\n        type,\n      });\n    };\n\n    const handle_orientationchange = () => {\n      setOrientation({\n        type: \"UNKNOWN\",\n        angle: window.orientation,\n      });\n    };\n\n    if (window.screen?.orientation) {\n      handleChange();\n      window.screen.orientation.addEventListener(\"change\", handleChange);\n    } else {\n      handle_orientationchange();\n      window.addEventListener(\"orientationchange\", handle_orientationchange);\n    }\n\n    return () => {\n      if (window.screen?.orientation) {\n        window.screen.orientation.removeEventListener(\"change\", handleChange);\n      } else {\n        window.removeEventListener(\n          \"orientationchange\",\n          handle_orientationchange\n        );\n      }\n    };\n  }, []);\n\n  return orientation;\n}\n\nconst usePreferredLanguageSubscribe = (cb) => {\n  window.addEventListener(\"languagechange\", cb);\n  return () => window.removeEventListener(\"languagechange\", cb);\n};\n\nconst getPreferredLanguageSnapshot = () => {\n  return navigator.language;\n};\n\nconst getPreferredLanguageServerSnapshot = () => {\n  throw Error(\"usePreferredLanguage is a client-only hook\");\n};\n\nexport function usePreferredLanguage() {\n  return React.useSyncExternalStore(\n    usePreferredLanguageSubscribe,\n    getPreferredLanguageSnapshot,\n    getPreferredLanguageServerSnapshot\n  );\n}\n\nexport function usePrevious(value) {\n  const [current, setCurrent] = React.useState(value);\n  const [previous, setPrevious] = React.useState(null);\n\n  if (value !== current) {\n    setPrevious(current);\n    setCurrent(value);\n  }\n\n  return previous;\n}\n\nexport function useQueue(initialValue = []) {\n  const [queue, setQueue] = React.useState(initialValue);\n\n  const add = React.useCallback((element) => {\n    setQueue((q) => [...q, element]);\n  }, []);\n\n  const remove = React.useCallback(() => {\n    let removedElement;\n\n    setQueue(([first, ...q]) => {\n      removedElement = first;\n      return q;\n    });\n\n    return removedElement;\n  }, []);\n\n  const clear = React.useCallback(() => {\n    setQueue([]);\n  }, []);\n\n  return {\n    add,\n    remove,\n    clear,\n    first: queue[0],\n    last: queue[queue.length - 1],\n    size: queue.length,\n    queue,\n  };\n}\n\nexport function useRenderCount() {\n  const count = React.useRef(0);\n\n  count.current++;\n\n  return count.current;\n}\n\nexport function useRenderInfo(name = \"Unknown\") {\n  const count = React.useRef(0);\n  const lastRender = React.useRef();\n  const now = Date.now();\n\n  count.current++;\n\n  React.useEffect(() => {\n    lastRender.current = Date.now();\n  });\n\n  const sinceLastRender = lastRender.current ? now - lastRender.current : 0;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    const info = {\n      name,\n      renders: count.current,\n      sinceLastRender,\n      timestamp: now,\n    };\n\n    console.log(info);\n\n    return info;\n  }\n}\n\nexport function useScript(src, options = {}) {\n  const [status, setStatus] = React.useState(\"loading\");\n  const optionsRef = React.useRef(options);\n\n  React.useEffect(() => {\n    let script = document.querySelector(`script[src=\"${src}\"]`);\n\n    const domStatus = script?.getAttribute(\"data-status\");\n    if (domStatus) {\n      setStatus(domStatus);\n      return;\n    }\n\n    if (script === null) {\n      script = document.createElement(\"script\");\n      script.src = src;\n      script.async = true;\n      script.setAttribute(\"data-status\", \"loading\");\n      document.body.appendChild(script);\n\n      const handleScriptLoad = () => {\n        script.setAttribute(\"data-status\", \"ready\");\n        setStatus(\"ready\");\n        removeEventListeners();\n      };\n\n      const handleScriptError = () => {\n        script.setAttribute(\"data-status\", \"error\");\n        setStatus(\"error\");\n        removeEventListeners();\n      };\n\n      const removeEventListeners = () => {\n        script.removeEventListener(\"load\", handleScriptLoad);\n        script.removeEventListener(\"error\", handleScriptError);\n      };\n\n      script.addEventListener(\"load\", handleScriptLoad);\n      script.addEventListener(\"error\", handleScriptError);\n\n      const removeOnUnmount = optionsRef.current.removeOnUnmount;\n\n      return () => {\n        if (removeOnUnmount === true) {\n          script.remove();\n          removeEventListeners();\n        }\n      };\n    } else {\n      setStatus(\"unknown\");\n    }\n  }, [src]);\n\n  return status;\n}\n\nconst setSessionStorageItem = (key, value) => {\n  const stringifiedValue = JSON.stringify(value);\n  window.sessionStorage.setItem(key, stringifiedValue);\n  dispatchStorageEvent(key, stringifiedValue);\n};\n\nconst removeSessionStorageItem = (key) => {\n  window.sessionStorage.removeItem(key);\n  dispatchStorageEvent(key, null);\n};\n\nconst getSessionStorageItem = (key) => {\n  return window.sessionStorage.getItem(key);\n};\n\nconst useSessionStorageSubscribe = (callback) => {\n  window.addEventListener(\"storage\", callback);\n  return () => window.removeEventListener(\"storage\", callback);\n};\n\nconst getSessionStorageServerSnapshot = () => {\n  throw Error(\"useSessionStorage is a client-only hook\");\n};\n\nexport function useSessionStorage(key, initialValue) {\n  const getSnapshot = () => getSessionStorageItem(key);\n\n  const store = React.useSyncExternalStore(\n    useSessionStorageSubscribe,\n    getSnapshot,\n    getSessionStorageServerSnapshot\n  );\n\n  const setState = React.useCallback(\n    (v) => {\n      try {\n        const nextState = typeof v === \"function\" ? v(JSON.parse(store)) : v;\n\n        if (nextState === undefined || nextState === null) {\n          removeSessionStorageItem(key);\n        } else {\n          setSessionStorageItem(key, nextState);\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n    },\n    [key, store]\n  );\n\n  React.useEffect(() => {\n    if (\n      getSessionStorageItem(key) === null &&\n      typeof initialValue !== \"undefined\"\n    ) {\n      setSessionStorageItem(key, initialValue);\n    }\n  }, [key, initialValue]);\n\n  return [store ? JSON.parse(store) : initialValue, setState];\n}\n\nexport function useSet(values) {\n  const setRef = React.useRef(new Set(values));\n  const [, reRender] = React.useReducer((x) => x + 1, 0);\n\n  setRef.current.add = (...args) => {\n    const res = Set.prototype.add.apply(setRef.current, args);\n    reRender();\n\n    return res;\n  };\n\n  setRef.current.clear = (...args) => {\n    Set.prototype.clear.apply(setRef.current, args);\n    reRender();\n  };\n\n  setRef.current.delete = (...args) => {\n    const res = Set.prototype.delete.apply(setRef.current, args);\n    reRender();\n\n    return res;\n  };\n\n  return setRef.current;\n}\n\nexport function useThrottle(value, interval = 500) {\n  const [throttledValue, setThrottledValue] = React.useState(value);\n  const lastUpdated = React.useRef(null);\n\n  React.useEffect(() => {\n    const now = Date.now();\n\n    if (lastUpdated.current && now >= lastUpdated.current + interval) {\n      lastUpdated.current = now;\n      setThrottledValue(value);\n    } else {\n      const id = window.setTimeout(() => {\n        lastUpdated.current = now;\n        setThrottledValue(value);\n      }, interval);\n\n      return () => window.clearTimeout(id);\n    }\n  }, [value, interval]);\n\n  return throttledValue;\n}\n\nexport function useToggle(initialValue) {\n  const [on, setOn] = React.useState(() => {\n    if (typeof initialValue === \"boolean\") {\n      return initialValue;\n    }\n\n    return Boolean(initialValue);\n  });\n\n  const handleToggle = React.useCallback((value) => {\n    if (typeof value === \"boolean\") {\n      return setOn(value);\n    }\n\n    return setOn((v) => !v);\n  }, []);\n\n  return [on, handleToggle];\n}\n\nconst useVisibilityChangeSubscribe = (callback) => {\n  document.addEventListener(\"visibilitychange\", callback);\n\n  return () => {\n    document.removeEventListener(\"visibilitychange\", callback);\n  };\n};\n\nconst getVisibilityChangeSnapshot = () => {\n  return document.visibilityState;\n};\n\nconst getVisibilityChangeServerSnapshot = () => {\n  throw Error(\"useVisibilityChange is a client-only hook\");\n};\n\nexport function useVisibilityChange() {\n  const visibilityState = React.useSyncExternalStore(\n    useVisibilityChangeSubscribe,\n    getVisibilityChangeSnapshot,\n    getVisibilityChangeServerSnapshot\n  );\n\n  return visibilityState === \"visible\";\n}\n\nexport function useWindowScroll() {\n  const [state, setState] = React.useState({\n    x: null,\n    y: null,\n  });\n\n  const scrollTo = React.useCallback((...args) => {\n    if (typeof args[0] === \"object\") {\n      window.scrollTo(args[0]);\n    } else if (typeof args[0] === \"number\" && typeof args[1] === \"number\") {\n      window.scrollTo(args[0], args[1]);\n    } else {\n      throw new Error(\n        `Invalid arguments passed to scrollTo. See here for more info. https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo`\n      );\n    }\n  }, []);\n\n  React.useLayoutEffect(() => {\n    const handleScroll = () => {\n      setState({ x: window.scrollX, y: window.scrollY });\n    };\n\n    handleScroll();\n    window.addEventListener(\"scroll\", handleScroll);\n\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, []);\n\n  return [state, scrollTo];\n}\n\nexport function useWindowSize() {\n  const [size, setSize] = React.useState({\n    width: null,\n    height: null,\n  });\n\n  React.useLayoutEffect(() => {\n    const handleResize = () => {\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    };\n\n    handleResize();\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  return size;\n}\n","import LanguageFlag from \"@/components/LanguageFlag\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n    DropdownIconStart,\n    DropdownMenu,\n    DropdownMenuCheckboxItem,\n    DropdownMenuContent,\n    DropdownMenuLabel,\n    DropdownMenuSeparator,\n    DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Languages } from \"lucide-react\";\n\nexport type SongLanguage = string;\n\ninterface LanguageChoice {\n    text: string;\n    value: string;\n}\n\ninterface LanguageFilterProps {\n    languages: SongLanguage[];\n    selectedLanguage: SongLanguage;\n    setSelectedLanguage: (language: SongLanguage) => void;\n    iconOnly: boolean;\n}\n\nconst capitalizeFirstLetter = (str: string): string => {\n    if (!str) return '';\n\n    const firstCodePoint = str.codePointAt(0);\n    if (!firstCodePoint) return str;\n\n    const index = firstCodePoint > 0xFFFF ? 2 : 1;\n    return String.fromCodePoint(firstCodePoint).toUpperCase() + str.slice(index);\n};\n\nconst createLanguageChoices = (\n    languages: SongLanguage[],\n    selectedLanguage: SongLanguage,\n    setSelectedLanguage: (language: SongLanguage) => void\n): JSX.Element[] => {\n    const languageChoices: LanguageChoice[] = Object.keys(languages)\n        .map((language) => ({\n            text: capitalizeFirstLetter(language),\n            value: language\n        }));\n\n    languageChoices.unshift({ text: \"All\", value: \"all\" });\n\n    return languageChoices.map((choice) => (\n        <DropdownMenuCheckboxItem\n            key={choice.value}\n            onSelect={(e) => e.preventDefault()}\n            checked={selectedLanguage === choice.value}\n            onClick={() => setSelectedLanguage(choice.value)}\n        >\n            <DropdownIconStart icon={<LanguageFlag language={choice.text} />} />\n            {choice.text}\n        </DropdownMenuCheckboxItem>\n    ));\n};\n\nexport const LanguageFilter = ({\n    languages,\n    selectedLanguage,\n    setSelectedLanguage,\n    iconOnly\n}: LanguageFilterProps): JSX.Element => {\n    const active = selectedLanguage === \"all\";\n\n    return (\n        <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n                <Button\n                    variant=\"circular\"\n                    isActive={active}\n                    className=\"outline-0 rounded-r-none font-bold\"\n                >\n                    <Languages />\n                    {!iconOnly && \"Languages\"}\n                </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent aria-label=\"Language Choices\" sideOffset={15}>\n                {createLanguageChoices(languages, selectedLanguage, setSelectedLanguage)}\n            </DropdownMenuContent>\n        </DropdownMenu>\n    );\n};\n\nexport const LanguageFilterDropdownSection = (\n    languages: SongLanguage[],\n    selectedLanguage: SongLanguage,\n    setSelectedLanguage: (language: SongLanguage) => void\n): JSX.Element => {\n    return (\n        <>\n            <DropdownMenuLabel>Select languages</DropdownMenuLabel>\n            <DropdownMenuSeparator />\n            {createLanguageChoices(languages, selectedLanguage, setSelectedLanguage)}\n        </>\n    );\n};","// packages/core/number/src/number.ts\nfunction clamp(value, [min, max]) {\n  return Math.min(max, Math.max(min, value));\n}\nexport {\n  clamp\n};\n//# sourceMappingURL=index.mjs.map\n","// packages/react/use-previous/src/usePrevious.tsx\nimport * as React from \"react\";\nfunction usePrevious(value) {\n  const ref = React.useRef({ value, previous: value });\n  return React.useMemo(() => {\n    if (ref.current.value !== value) {\n      ref.current.previous = ref.current.value;\n      ref.current.value = value;\n    }\n    return ref.current.previous;\n  }, [value]);\n}\nexport {\n  usePrevious\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// packages/react/slider/src/Slider.tsx\nimport * as React from \"react\";\nimport { clamp } from \"@radix-ui/number\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { createCollection } from \"@radix-ui/react-collection\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar PAGE_KEYS = [\"PageUp\", \"PageDown\"];\nvar ARROW_KEYS = [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"];\nvar BACK_KEYS = {\n  \"from-left\": [\"Home\", \"PageDown\", \"ArrowDown\", \"ArrowLeft\"],\n  \"from-right\": [\"Home\", \"PageDown\", \"ArrowDown\", \"ArrowRight\"],\n  \"from-bottom\": [\"Home\", \"PageDown\", \"ArrowDown\", \"ArrowLeft\"],\n  \"from-top\": [\"Home\", \"PageDown\", \"ArrowUp\", \"ArrowLeft\"]\n};\nvar SLIDER_NAME = \"Slider\";\nvar [Collection, useCollection, createCollectionScope] = createCollection(SLIDER_NAME);\nvar [createSliderContext, createSliderScope] = createContextScope(SLIDER_NAME, [\n  createCollectionScope\n]);\nvar [SliderProvider, useSliderContext] = createSliderContext(SLIDER_NAME);\nvar Slider = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      name,\n      min = 0,\n      max = 100,\n      step = 1,\n      orientation = \"horizontal\",\n      disabled = false,\n      minStepsBetweenThumbs = 0,\n      defaultValue = [min],\n      value,\n      onValueChange = () => {\n      },\n      onValueCommit = () => {\n      },\n      inverted = false,\n      form,\n      ...sliderProps\n    } = props;\n    const thumbRefs = React.useRef(/* @__PURE__ */ new Set());\n    const valueIndexToChangeRef = React.useRef(0);\n    const isHorizontal = orientation === \"horizontal\";\n    const SliderOrientation = isHorizontal ? SliderHorizontal : SliderVertical;\n    const [values = [], setValues] = useControllableState({\n      prop: value,\n      defaultProp: defaultValue,\n      onChange: (value2) => {\n        const thumbs = [...thumbRefs.current];\n        thumbs[valueIndexToChangeRef.current]?.focus();\n        onValueChange(value2);\n      }\n    });\n    const valuesBeforeSlideStartRef = React.useRef(values);\n    function handleSlideStart(value2) {\n      const closestIndex = getClosestValueIndex(values, value2);\n      updateValues(value2, closestIndex);\n    }\n    function handleSlideMove(value2) {\n      updateValues(value2, valueIndexToChangeRef.current);\n    }\n    function handleSlideEnd() {\n      const prevValue = valuesBeforeSlideStartRef.current[valueIndexToChangeRef.current];\n      const nextValue = values[valueIndexToChangeRef.current];\n      const hasChanged = nextValue !== prevValue;\n      if (hasChanged) onValueCommit(values);\n    }\n    function updateValues(value2, atIndex, { commit } = { commit: false }) {\n      const decimalCount = getDecimalCount(step);\n      const snapToStep = roundValue(Math.round((value2 - min) / step) * step + min, decimalCount);\n      const nextValue = clamp(snapToStep, [min, max]);\n      setValues((prevValues = []) => {\n        const nextValues = getNextSortedValues(prevValues, nextValue, atIndex);\n        if (hasMinStepsBetweenValues(nextValues, minStepsBetweenThumbs * step)) {\n          valueIndexToChangeRef.current = nextValues.indexOf(nextValue);\n          const hasChanged = String(nextValues) !== String(prevValues);\n          if (hasChanged && commit) onValueCommit(nextValues);\n          return hasChanged ? nextValues : prevValues;\n        } else {\n          return prevValues;\n        }\n      });\n    }\n    return /* @__PURE__ */ jsx(\n      SliderProvider,\n      {\n        scope: props.__scopeSlider,\n        name,\n        disabled,\n        min,\n        max,\n        valueIndexToChangeRef,\n        thumbs: thumbRefs.current,\n        values,\n        orientation,\n        form,\n        children: /* @__PURE__ */ jsx(Collection.Provider, { scope: props.__scopeSlider, children: /* @__PURE__ */ jsx(Collection.Slot, { scope: props.__scopeSlider, children: /* @__PURE__ */ jsx(\n          SliderOrientation,\n          {\n            \"aria-disabled\": disabled,\n            \"data-disabled\": disabled ? \"\" : void 0,\n            ...sliderProps,\n            ref: forwardedRef,\n            onPointerDown: composeEventHandlers(sliderProps.onPointerDown, () => {\n              if (!disabled) valuesBeforeSlideStartRef.current = values;\n            }),\n            min,\n            max,\n            inverted,\n            onSlideStart: disabled ? void 0 : handleSlideStart,\n            onSlideMove: disabled ? void 0 : handleSlideMove,\n            onSlideEnd: disabled ? void 0 : handleSlideEnd,\n            onHomeKeyDown: () => !disabled && updateValues(min, 0, { commit: true }),\n            onEndKeyDown: () => !disabled && updateValues(max, values.length - 1, { commit: true }),\n            onStepKeyDown: ({ event, direction: stepDirection }) => {\n              if (!disabled) {\n                const isPageKey = PAGE_KEYS.includes(event.key);\n                const isSkipKey = isPageKey || event.shiftKey && ARROW_KEYS.includes(event.key);\n                const multiplier = isSkipKey ? 10 : 1;\n                const atIndex = valueIndexToChangeRef.current;\n                const value2 = values[atIndex];\n                const stepInDirection = step * multiplier * stepDirection;\n                updateValues(value2 + stepInDirection, atIndex, { commit: true });\n              }\n            }\n          }\n        ) }) })\n      }\n    );\n  }\n);\nSlider.displayName = SLIDER_NAME;\nvar [SliderOrientationProvider, useSliderOrientationContext] = createSliderContext(SLIDER_NAME, {\n  startEdge: \"left\",\n  endEdge: \"right\",\n  size: \"width\",\n  direction: 1\n});\nvar SliderHorizontal = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      min,\n      max,\n      dir,\n      inverted,\n      onSlideStart,\n      onSlideMove,\n      onSlideEnd,\n      onStepKeyDown,\n      ...sliderProps\n    } = props;\n    const [slider, setSlider] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setSlider(node));\n    const rectRef = React.useRef();\n    const direction = useDirection(dir);\n    const isDirectionLTR = direction === \"ltr\";\n    const isSlidingFromLeft = isDirectionLTR && !inverted || !isDirectionLTR && inverted;\n    function getValueFromPointer(pointerPosition) {\n      const rect = rectRef.current || slider.getBoundingClientRect();\n      const input = [0, rect.width];\n      const output = isSlidingFromLeft ? [min, max] : [max, min];\n      const value = linearScale(input, output);\n      rectRef.current = rect;\n      return value(pointerPosition - rect.left);\n    }\n    return /* @__PURE__ */ jsx(\n      SliderOrientationProvider,\n      {\n        scope: props.__scopeSlider,\n        startEdge: isSlidingFromLeft ? \"left\" : \"right\",\n        endEdge: isSlidingFromLeft ? \"right\" : \"left\",\n        direction: isSlidingFromLeft ? 1 : -1,\n        size: \"width\",\n        children: /* @__PURE__ */ jsx(\n          SliderImpl,\n          {\n            dir: direction,\n            \"data-orientation\": \"horizontal\",\n            ...sliderProps,\n            ref: composedRefs,\n            style: {\n              ...sliderProps.style,\n              [\"--radix-slider-thumb-transform\"]: \"translateX(-50%)\"\n            },\n            onSlideStart: (event) => {\n              const value = getValueFromPointer(event.clientX);\n              onSlideStart?.(value);\n            },\n            onSlideMove: (event) => {\n              const value = getValueFromPointer(event.clientX);\n              onSlideMove?.(value);\n            },\n            onSlideEnd: () => {\n              rectRef.current = void 0;\n              onSlideEnd?.();\n            },\n            onStepKeyDown: (event) => {\n              const slideDirection = isSlidingFromLeft ? \"from-left\" : \"from-right\";\n              const isBackKey = BACK_KEYS[slideDirection].includes(event.key);\n              onStepKeyDown?.({ event, direction: isBackKey ? -1 : 1 });\n            }\n          }\n        )\n      }\n    );\n  }\n);\nvar SliderVertical = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      min,\n      max,\n      inverted,\n      onSlideStart,\n      onSlideMove,\n      onSlideEnd,\n      onStepKeyDown,\n      ...sliderProps\n    } = props;\n    const sliderRef = React.useRef(null);\n    const ref = useComposedRefs(forwardedRef, sliderRef);\n    const rectRef = React.useRef();\n    const isSlidingFromBottom = !inverted;\n    function getValueFromPointer(pointerPosition) {\n      const rect = rectRef.current || sliderRef.current.getBoundingClientRect();\n      const input = [0, rect.height];\n      const output = isSlidingFromBottom ? [max, min] : [min, max];\n      const value = linearScale(input, output);\n      rectRef.current = rect;\n      return value(pointerPosition - rect.top);\n    }\n    return /* @__PURE__ */ jsx(\n      SliderOrientationProvider,\n      {\n        scope: props.__scopeSlider,\n        startEdge: isSlidingFromBottom ? \"bottom\" : \"top\",\n        endEdge: isSlidingFromBottom ? \"top\" : \"bottom\",\n        size: \"height\",\n        direction: isSlidingFromBottom ? 1 : -1,\n        children: /* @__PURE__ */ jsx(\n          SliderImpl,\n          {\n            \"data-orientation\": \"vertical\",\n            ...sliderProps,\n            ref,\n            style: {\n              ...sliderProps.style,\n              [\"--radix-slider-thumb-transform\"]: \"translateY(50%)\"\n            },\n            onSlideStart: (event) => {\n              const value = getValueFromPointer(event.clientY);\n              onSlideStart?.(value);\n            },\n            onSlideMove: (event) => {\n              const value = getValueFromPointer(event.clientY);\n              onSlideMove?.(value);\n            },\n            onSlideEnd: () => {\n              rectRef.current = void 0;\n              onSlideEnd?.();\n            },\n            onStepKeyDown: (event) => {\n              const slideDirection = isSlidingFromBottom ? \"from-bottom\" : \"from-top\";\n              const isBackKey = BACK_KEYS[slideDirection].includes(event.key);\n              onStepKeyDown?.({ event, direction: isBackKey ? -1 : 1 });\n            }\n          }\n        )\n      }\n    );\n  }\n);\nvar SliderImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeSlider,\n      onSlideStart,\n      onSlideMove,\n      onSlideEnd,\n      onHomeKeyDown,\n      onEndKeyDown,\n      onStepKeyDown,\n      ...sliderProps\n    } = props;\n    const context = useSliderContext(SLIDER_NAME, __scopeSlider);\n    return /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        ...sliderProps,\n        ref: forwardedRef,\n        onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n          if (event.key === \"Home\") {\n            onHomeKeyDown(event);\n            event.preventDefault();\n          } else if (event.key === \"End\") {\n            onEndKeyDown(event);\n            event.preventDefault();\n          } else if (PAGE_KEYS.concat(ARROW_KEYS).includes(event.key)) {\n            onStepKeyDown(event);\n            event.preventDefault();\n          }\n        }),\n        onPointerDown: composeEventHandlers(props.onPointerDown, (event) => {\n          const target = event.target;\n          target.setPointerCapture(event.pointerId);\n          event.preventDefault();\n          if (context.thumbs.has(target)) {\n            target.focus();\n          } else {\n            onSlideStart(event);\n          }\n        }),\n        onPointerMove: composeEventHandlers(props.onPointerMove, (event) => {\n          const target = event.target;\n          if (target.hasPointerCapture(event.pointerId)) onSlideMove(event);\n        }),\n        onPointerUp: composeEventHandlers(props.onPointerUp, (event) => {\n          const target = event.target;\n          if (target.hasPointerCapture(event.pointerId)) {\n            target.releasePointerCapture(event.pointerId);\n            onSlideEnd(event);\n          }\n        })\n      }\n    );\n  }\n);\nvar TRACK_NAME = \"SliderTrack\";\nvar SliderTrack = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSlider, ...trackProps } = props;\n    const context = useSliderContext(TRACK_NAME, __scopeSlider);\n    return /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        \"data-orientation\": context.orientation,\n        ...trackProps,\n        ref: forwardedRef\n      }\n    );\n  }\n);\nSliderTrack.displayName = TRACK_NAME;\nvar RANGE_NAME = \"SliderRange\";\nvar SliderRange = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSlider, ...rangeProps } = props;\n    const context = useSliderContext(RANGE_NAME, __scopeSlider);\n    const orientation = useSliderOrientationContext(RANGE_NAME, __scopeSlider);\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    const valuesCount = context.values.length;\n    const percentages = context.values.map(\n      (value) => convertValueToPercentage(value, context.min, context.max)\n    );\n    const offsetStart = valuesCount > 1 ? Math.min(...percentages) : 0;\n    const offsetEnd = 100 - Math.max(...percentages);\n    return /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-orientation\": context.orientation,\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        ...rangeProps,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          [orientation.startEdge]: offsetStart + \"%\",\n          [orientation.endEdge]: offsetEnd + \"%\"\n        }\n      }\n    );\n  }\n);\nSliderRange.displayName = RANGE_NAME;\nvar THUMB_NAME = \"SliderThumb\";\nvar SliderThumb = React.forwardRef(\n  (props, forwardedRef) => {\n    const getItems = useCollection(props.__scopeSlider);\n    const [thumb, setThumb] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setThumb(node));\n    const index = React.useMemo(\n      () => thumb ? getItems().findIndex((item) => item.ref.current === thumb) : -1,\n      [getItems, thumb]\n    );\n    return /* @__PURE__ */ jsx(SliderThumbImpl, { ...props, ref: composedRefs, index });\n  }\n);\nvar SliderThumbImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSlider, index, name, ...thumbProps } = props;\n    const context = useSliderContext(THUMB_NAME, __scopeSlider);\n    const orientation = useSliderOrientationContext(THUMB_NAME, __scopeSlider);\n    const [thumb, setThumb] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setThumb(node));\n    const isFormControl = thumb ? context.form || !!thumb.closest(\"form\") : true;\n    const size = useSize(thumb);\n    const value = context.values[index];\n    const percent = value === void 0 ? 0 : convertValueToPercentage(value, context.min, context.max);\n    const label = getLabel(index, context.values.length);\n    const orientationSize = size?.[orientation.size];\n    const thumbInBoundsOffset = orientationSize ? getThumbInBoundsOffset(orientationSize, percent, orientation.direction) : 0;\n    React.useEffect(() => {\n      if (thumb) {\n        context.thumbs.add(thumb);\n        return () => {\n          context.thumbs.delete(thumb);\n        };\n      }\n    }, [thumb, context.thumbs]);\n    return /* @__PURE__ */ jsxs(\n      \"span\",\n      {\n        style: {\n          transform: \"var(--radix-slider-thumb-transform)\",\n          position: \"absolute\",\n          [orientation.startEdge]: `calc(${percent}% + ${thumbInBoundsOffset}px)`\n        },\n        children: [\n          /* @__PURE__ */ jsx(Collection.ItemSlot, { scope: props.__scopeSlider, children: /* @__PURE__ */ jsx(\n            Primitive.span,\n            {\n              role: \"slider\",\n              \"aria-label\": props[\"aria-label\"] || label,\n              \"aria-valuemin\": context.min,\n              \"aria-valuenow\": value,\n              \"aria-valuemax\": context.max,\n              \"aria-orientation\": context.orientation,\n              \"data-orientation\": context.orientation,\n              \"data-disabled\": context.disabled ? \"\" : void 0,\n              tabIndex: context.disabled ? void 0 : 0,\n              ...thumbProps,\n              ref: composedRefs,\n              style: value === void 0 ? { display: \"none\" } : props.style,\n              onFocus: composeEventHandlers(props.onFocus, () => {\n                context.valueIndexToChangeRef.current = index;\n              })\n            }\n          ) }),\n          isFormControl && /* @__PURE__ */ jsx(\n            BubbleInput,\n            {\n              name: name ?? (context.name ? context.name + (context.values.length > 1 ? \"[]\" : \"\") : void 0),\n              form: context.form,\n              value\n            },\n            index\n          )\n        ]\n      }\n    );\n  }\n);\nSliderThumb.displayName = THUMB_NAME;\nvar BubbleInput = (props) => {\n  const { value, ...inputProps } = props;\n  const ref = React.useRef(null);\n  const prevValue = usePrevious(value);\n  React.useEffect(() => {\n    const input = ref.current;\n    const inputProto = window.HTMLInputElement.prototype;\n    const descriptor = Object.getOwnPropertyDescriptor(inputProto, \"value\");\n    const setValue = descriptor.set;\n    if (prevValue !== value && setValue) {\n      const event = new Event(\"input\", { bubbles: true });\n      setValue.call(input, value);\n      input.dispatchEvent(event);\n    }\n  }, [prevValue, value]);\n  return /* @__PURE__ */ jsx(\"input\", { style: { display: \"none\" }, ...inputProps, ref, defaultValue: value });\n};\nfunction getNextSortedValues(prevValues = [], nextValue, atIndex) {\n  const nextValues = [...prevValues];\n  nextValues[atIndex] = nextValue;\n  return nextValues.sort((a, b) => a - b);\n}\nfunction convertValueToPercentage(value, min, max) {\n  const maxSteps = max - min;\n  const percentPerStep = 100 / maxSteps;\n  const percentage = percentPerStep * (value - min);\n  return clamp(percentage, [0, 100]);\n}\nfunction getLabel(index, totalValues) {\n  if (totalValues > 2) {\n    return `Value ${index + 1} of ${totalValues}`;\n  } else if (totalValues === 2) {\n    return [\"Minimum\", \"Maximum\"][index];\n  } else {\n    return void 0;\n  }\n}\nfunction getClosestValueIndex(values, nextValue) {\n  if (values.length === 1) return 0;\n  const distances = values.map((value) => Math.abs(value - nextValue));\n  const closestDistance = Math.min(...distances);\n  return distances.indexOf(closestDistance);\n}\nfunction getThumbInBoundsOffset(width, left, direction) {\n  const halfWidth = width / 2;\n  const halfPercent = 50;\n  const offset = linearScale([0, halfPercent], [0, halfWidth]);\n  return (halfWidth - offset(left) * direction) * direction;\n}\nfunction getStepsBetweenValues(values) {\n  return values.slice(0, -1).map((value, index) => values[index + 1] - value);\n}\nfunction hasMinStepsBetweenValues(values, minStepsBetweenValues) {\n  if (minStepsBetweenValues > 0) {\n    const stepsBetweenValues = getStepsBetweenValues(values);\n    const actualMinStepsBetweenValues = Math.min(...stepsBetweenValues);\n    return actualMinStepsBetweenValues >= minStepsBetweenValues;\n  }\n  return true;\n}\nfunction linearScale(input, output) {\n  return (value) => {\n    if (input[0] === input[1] || output[0] === output[1]) return output[0];\n    const ratio = (output[1] - output[0]) / (input[1] - input[0]);\n    return output[0] + ratio * (value - input[0]);\n  };\n}\nfunction getDecimalCount(value) {\n  return (String(value).split(\".\")[1] || \"\").length;\n}\nfunction roundValue(value, decimalCount) {\n  const rounder = Math.pow(10, decimalCount);\n  return Math.round(value * rounder) / rounder;\n}\nvar Root = Slider;\nvar Track = SliderTrack;\nvar Range = SliderRange;\nvar Thumb = SliderThumb;\nexport {\n  Range,\n  Root,\n  Slider,\n  SliderRange,\n  SliderThumb,\n  SliderTrack,\n  Thumb,\n  Track,\n  createSliderScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nconst labelEl = (label, value) => {\n  if (!label || !value) {\n    return <></>;\n  } else {\n    return (\n      <div className=\"flex justify-between\">\n        <div className=\"mt-2 text-muted-foreground\">{label}</div>\n        <div className=\"mt-2 text-muted-foreground\">{value[0]}-{value[1]}</div>\n      </div >)\n  }\n}\n\nconst RangeSlider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex flex-col w-full\">\n    <SliderPrimitive.Root\n      minStepsBetweenThumbs={1}\n      ref={ref}\n      className={cn(\n        \"relative flex w-full touch-none select-none items-center mt-2\",\n        className\n      )}\n      {...props}\n    >\n      <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n        <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n      </SliderPrimitive.Track>\n      <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n      <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n    </SliderPrimitive.Root>\n    {labelEl(props.label, props.value)}\n  </div >\n))\nRangeSlider.displayName = SliderPrimitive.Root.displayName\n\n\nexport { RangeSlider }\n","\nimport { Button } from \"@/components/ui/button\";\nimport {\n    DropdownMenu,\n    DropdownMenuContent,\n    DropdownMenuItem,\n    DropdownMenuLabel,\n    DropdownMenuSeparator,\n    DropdownMenuTrigger\n} from \"@/components/ui/dropdown-menu\";\nimport { RangeSlider } from \"@/components/ui/slider\";\nimport { Music } from \"lucide-react\";\n\nexport type VocalRangeValue = \"all\" | [number, number];\n\ninterface VocalRangeSliderProps {\n    maxRange: number;\n    vocalRangeFilter: VocalRangeValue;\n    setVocalRangeFilter: (range: VocalRangeValue) => void;\n}\n\ninterface VocalRangeFilterProps extends VocalRangeSliderProps {\n    iconOnly: boolean;\n}\n\nconst VocalRangeSlider = ({\n    maxRange,\n    vocalRangeFilter,\n    setVocalRangeFilter\n}: VocalRangeSliderProps): JSX.Element => {\n    const currentValue = vocalRangeFilter === \"all\" ? [0, maxRange] : vocalRangeFilter;\n\n    return (\n        <RangeSlider\n            label=\"Semitones\"\n            step={1}\n            min={0}\n            max={maxRange}\n            defaultValue={currentValue}\n            value={currentValue}\n            className=\"max-w-md\"\n            onValueChange={(value) => setVocalRangeFilter(value as [number, number])}\n        />\n    );\n};\n\nexport const VocalRangeFilter = ({\n    maxRange,\n    vocalRangeFilter,\n    setVocalRangeFilter,\n    iconOnly\n}: VocalRangeFilterProps): JSX.Element => {\n    return (\n        <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n                <Button\n                    variant=\"circular\"\n                    className=\"shadow-none outline-0 font-bold rounded-l-none\"\n                >\n                    <Music />\n                    {!iconOnly && \"Range\"}\n                </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent\n                aria-label=\"Vocal range filter slider\"\n                className=\"w-80\"\n                sideOffset={15}\n            >\n                <DropdownMenuItem\n                    key=\"slider\"\n                    onSelect={(e) => e.preventDefault()}\n                >\n                    <VocalRangeSlider\n                        maxRange={maxRange}\n                        vocalRangeFilter={vocalRangeFilter}\n                        setVocalRangeFilter={setVocalRangeFilter}\n                    />\n                </DropdownMenuItem>\n                <DropdownMenuItem\n                    key=\"reset\"\n                    onClick={() => setVocalRangeFilter(\"all\")}\n                >\n                    Reset\n                </DropdownMenuItem>\n            </DropdownMenuContent>\n        </DropdownMenu>\n    );\n};\n\nexport const VocalRangeDropdownSection = (\n    maxRange: number,\n    vocalRangeFilter: VocalRangeValue,\n    setVocalRangeFilter: (range: VocalRangeValue) => void\n): JSX.Element => {\n    return (\n        <>\n            <DropdownMenuLabel>Select song range</DropdownMenuLabel>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem\n                key=\"slider\"\n                onSelect={(e) => e.preventDefault()}\n            >\n                <VocalRangeSlider\n                    maxRange={maxRange}\n                    vocalRangeFilter={vocalRangeFilter}\n                    setVocalRangeFilter={setVocalRangeFilter}\n                />\n            </DropdownMenuItem>\n            <DropdownMenuItem\n                key=\"reset\"\n                onClick={() => setVocalRangeFilter(\"all\")}\n                onSelect={(e) => e.preventDefault()}\n            >\n                Reset\n            </DropdownMenuItem>\n        </>\n    );\n};","import { Filter, Handshake } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n    DropdownMenu,\n    DropdownMenuCheckboxItem,\n    DropdownMenuContent,\n    DropdownMenuTrigger\n} from \"@/components/ui/dropdown-menu\";\nimport { useMediaQuery } from \"@uidotdev/usehooks\";\nimport { LanguageFilter, LanguageFilterDropdownSection } from \"./LanguageFilter\";\nimport { VocalRangeDropdownSection, VocalRangeFilter } from \"./VocalRangeFilter\";\nimport { create } from 'zustand'\nimport { persist } from \"zustand/middleware\"\n\ntype VocalRangeType = \"all\" | [number, number];\n\ninterface FilterSettings {\n    language: string;\n    vocalRange: VocalRangeType;\n    capo: boolean;\n}\n\ninterface FilterProps {\n    languages: string[];\n    maxRange: number;\n}\n\ninterface FilterButtonsProps extends FilterProps {\n    iconOnly: boolean;\n}\n\ninterface FilterSettingsState extends FilterSettings {\n    setLanguage: (language: string) => void;\n    setVocalRange: (range: VocalRangeType) => void;\n    setCapo: (capo: boolean) => void;\n    toggleCapo: () => void;\n}\n\nexport const useFilterSettingsStore = create<FilterSettingsState>()(\n    persist(\n        (set) => ({\n            language: \"all\",\n            vocalRange: \"all\",\n            capo: true,\n            setLanguage: (language: string) => set({ language: language }),\n            setVocalRange: (range: VocalRangeType) => set({ vocalRange: range }),\n            setCapo: (capo: boolean) => set({ capo: capo }),\n            toggleCapo: () => set((state) => ({ capo: !state.capo }))\n        }),\n        {\n            name: 'filter-settings-store'\n        }\n    )\n)\n\nconst FilterButtons = ({\n    languages,\n    maxRange,\n    iconOnly\n}: FilterButtonsProps): JSX.Element => {\n    const { language, vocalRange, capo, setLanguage, setVocalRange, toggleCapo } = useFilterSettingsStore();\n\n    return (\n        <div className=\"flex outline outline-primary dark:outline-primary/30 rounded-full outline-2\">\n            <LanguageFilter\n                languages={languages}\n                selectedLanguage={language}\n                setSelectedLanguage={setLanguage}\n                iconOnly={iconOnly}\n            />\n            <Button\n                variant=\"circular\"\n                isActive={capo}\n                className=\"font-bold rounded-none outline-0 shadow-none\"\n                onClick={toggleCapo}\n            >\n                <Handshake />\n                {!iconOnly && \"Capo\"}\n            </Button>\n            <VocalRangeFilter\n                maxRange={maxRange}\n                vocalRangeFilter={vocalRange}\n                setVocalRangeFilter={setVocalRange}\n                iconOnly={iconOnly}\n            />\n        </div>\n    );\n};\n\nconst Filtering = ({\n    languages,\n    maxRange\n}: FilterProps): JSX.Element => {\n    const { language, vocalRange, capo, setLanguage, setVocalRange, toggleCapo } = useFilterSettingsStore();\n    const isLargeScreen = useMediaQuery(\"only screen and (min-width : 1000px)\");\n\n    const isFilterInactive = (\n        language === \"all\" &&\n        (vocalRange === \"all\" || (\n            Array.isArray(vocalRange) &&\n            vocalRange[0] === 0 &&\n            vocalRange[1] === maxRange\n        )) &&\n        capo\n    );\n\n    return (\n        <>\n            {/* Desktop View */}\n            <div className=\"hidden lg:flex\">\n                <FilterButtons\n                    languages={languages}\n                    maxRange={maxRange}\n                    iconOnly={isLargeScreen}\n                />\n            </div>\n\n            {/* Mobile View */}\n            <div className=\"lg:hidden\">\n                <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                        <Button\n                            size=\"icon\"\n                            variant=\"circular\"\n                            isActive={!isFilterInactive}\n                        >\n                            <Filter />\n                        </Button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent\n                        aria-label=\"Filtering\"\n                        className=\"dropdown-scroll no-scrollbar w-52 max-h-[80dvh] overflow-y-scroll\"\n                        sideOffset={15}\n                    >\n                        <DropdownMenuCheckboxItem\n                            onClick={toggleCapo}\n                            onSelect={e => e.preventDefault()}\n                            checked={capo}\n                        >\n                            Allow capo\n                        </DropdownMenuCheckboxItem>\n\n                        {VocalRangeDropdownSection(\n                            maxRange,\n                            vocalRange,\n                            setVocalRange\n                        )}\n                        {LanguageFilterDropdownSection(\n                            languages,\n                            language,\n                            setLanguage\n\n                        )}\n                    </DropdownMenuContent>\n                </DropdownMenu>\n            </div>\n        </>\n    );\n};\n\nexport default Filtering;","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-full w-full rounded-md bg-background text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    ) \n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","import { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { cn } from '@/lib/utils';\nimport { Search as SearchIcon, XIcon } from \"lucide-react\";\nimport { ChangeEvent, useEffect, useRef, useState } from 'react';\nimport { create } from 'zustand';\n\ninterface QueryState {\n    query: string;\n    setQuery: (query: string) => void;\n}\n\nexport const useQueryStore = create<QueryState>()(\n    (set) => ({\n        query: \"\",\n        setQuery: (query: string) => set({ query: query })\n    })\n)\n\nfunction SearchBar() {\n    const [isExpanded, setIsExpanded] = useState(false);\n    const [expandedWidth, setExpandedWidth] = useState(248);\n    const mobileInputRef = useRef<HTMLInputElement>(null);\n    const { query, setQuery } = useQueryStore();\n\n\n    const search = (e: ChangeEvent<HTMLInputElement>) => {\n        const newQuery = e.target.value;\n        setQuery(newQuery);\n    };\n\n    useEffect(() => {\n        if (isExpanded && mobileInputRef.current) {\n            mobileInputRef.current.focus();\n        }\n    }, [isExpanded]);\n\n    const handleToggle = () => {\n        const navbar = document.getElementById('navbar');\n        if (navbar) {\n            setExpandedWidth(navbar.offsetWidth);\n        }\n        setIsExpanded(!isExpanded);\n    };\n\n    const handleClear = () => {\n        setQuery(\"\");\n        setIsExpanded(false);\n    };\n\n    const ClearButton = () => (\n        <Button\n            type=\"button\"\n            variant=\"ghost\"\n            size=\"icon\"\n            className={cn(\"absolute right-1 top-1/2 transition-all duration-300 ease-in-out -translate-y-1/2 h-7 w-7 !bg-transparent !hover:bg-transparent hover:scale-125 hover:text-primary\", query ? \"scale-100\" : \"scale-0\")}\n            onClick={handleClear}\n        >\n            <XIcon className=\"h-4 w-4\" />\n            <span className=\"sr-only\">Clear</span>\n        </Button>\n    );\n\n    return (\n        <>\n            {/* Mobile Search */}\n            <div className=\"flex xs:hidden items-center gap-2\">\n                <div className={cn(\"relative flex transition-all duration-300 ease-in-out items-center z-50\", isExpanded ? \"-translate-x-12\" : \"\")}>\n                    <Button\n                        type=\"button\"\n                        variant=\"circular\"\n                        size=\"icon\"\n                        className={cn(\"relative z-10 transition-all duration-300 ease-in-out\", isExpanded ? 'bg-background rounded-r-none text-primary dark:outline-primary' : '', query ? \"bg-primary text-white dark:bg-background dark:text-primary\" : \"\")}\n                        onClick={handleToggle}\n                        aria-label={isExpanded ? \"Close search\" : \"Open search\"}\n                        aria-expanded={isExpanded}\n                    >\n                        <SearchIcon className={cn(\"h-4 w-4\", isExpanded ? \"scale-110\" : \"\")} />\n                    </Button>\n                    <div\n                        className={cn(\"absolute left-0 top-0 flex h-full items-center overflow-hidden transition-all duration-300 ease-in-out outline-primary outline outline-2\",\n                            isExpanded ? 'opacity-100 rounded-full' : 'opacity-0', query ? ' outline-primary' : '')}\n                        style={{ width: isExpanded ? `calc(${expandedWidth}px - 1rem)` : '0' }}\n                    >\n                        <Button\n                            type=\"button\"\n                            variant=\"circular\"\n                            size=\"icon\"\n                            className=\"opacity-0\"\n                            tabIndex={-1}\n                            aria-hidden=\"true\"\n                        >\n                            <SearchIcon className=\"h-4 w-4\" />\n                        </Button>\n                        <Input\n                            ref={mobileInputRef}\n                            onChange={search}\n                            value={query}\n                            placeholder=\"Search...\"\n                            className={cn(\"pl-10 pr-4 text-sm font-medium placeholder:font-normal border-none rounded-full rounded-l-none peer bg-background text-primary placeholder:text-primary dark:placeholder:text-primary/30\",\n                                query ? \"bg-background \" : \"\")}\n                        />\n                        <ClearButton />\n                    </div>\n                </div>\n            </div >\n\n            {/* Desktop Search */}\n            < div className={cn(\"relative hidden xs:flex items-center h-full text-primary dark:text-primary/30 transition-all duration-300 ease-in-out shadow-md rounded-full flex-1 outline-primary dark:outline-primary/30 outline outline-2\")}>\n                <Input\n                    onChange={search}\n                    value={query}\n                    placeholder=\"Search...\"\n                    className={cn(\"pl-10 pr-4 text-sm font-medium placeholder:font-normal border-none rounded-full peer hover:bg-background dark:bg-background focus:bg-background text-primary placeholder:text-primary dark:placeholder:text-primary/30\",\n                        query ? \"bg-background dark:bg-primary/30\" : \"bg-white dark:bg-background\")}\n                />\n                <ClearButton />\n                <div className={cn(\"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none peer-focus:scale-110 peer-focus:text-primary duration-300 ease-in-out transform\", query ? \"scale-110 text-primary\" : \"\")}>\n                    <SearchIcon className=\"w-5 h-5\" />\n                </div>\n            </div >\n        </>\n    );\n}\n\nexport default SearchBar;","import { Button } from \"@/components/ui/button\"\nimport {\n    DropdownIconStart,\n    DropdownMenu,\n    DropdownMenuCheckboxItem,\n    DropdownMenuContent,\n    DropdownMenuLabel,\n    DropdownMenuSeparator,\n    DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\"\nimport FancySwitch from \"@/components/ui/fancy-switch\"\nimport { SortField, SortOrder, SortSettings } from \"@/types/types\"\nimport {\n    ArrowDown01,\n    ArrowDown10,\n    ArrowDownAZ,\n    ArrowDownUp,\n    ArrowDownZA,\n    AudioLines,\n    CalendarPlus,\n    MicVocal,\n    Music\n} from \"lucide-react\"\nimport { ReactElement } from \"react\"\nimport { create } from 'zustand'\nimport { persist } from \"zustand/middleware\"\n\ninterface SortSettingsState extends SortSettings {\n    setSortOrder: (sortOrder: SortOrder) => void;\n    setSortField: (sortField: SortField) => void;\n}\n\nexport const useSortSettingsStore = create<SortSettingsState>()(\n    persist(\n        (set) => ({\n            order: \"ascending\" as SortOrder,\n            field: \"title\" as SortField,\n            setSortOrder: (sortOrder: SortOrder) => set({\n                order: sortOrder\n            }),\n            setSortField: (sortField: SortField) => set({\n                field: sortField\n            })\n\n        }),\n        {\n            name: 'sort-settings-store'\n        }\n    )\n)\n\ninterface SortingIcons {\n    ascending: ReactElement;\n    descending: ReactElement;\n}\n\ninterface SortingLabels {\n    ascending: string;\n    descending: string;\n}\n\ninterface Category {\n    field: SortField;\n    title: string;\n    icon: ReactElement;\n    sorting_icons: SortingIcons;\n    sorting_labels: SortingLabels;\n}\n\ninterface SwitchOption {\n    label: string;\n    value: SortField;\n}\n\nconst letterSortingIcons: SortingIcons = {\n    ascending: <ArrowDownAZ />,\n    descending: <ArrowDownZA />\n};\n\nconst numberSortingIcons: SortingIcons = {\n    ascending: <ArrowDown01 />,\n    descending: <ArrowDown10 />\n};\n\nconst categories: Category[] = [\n    {\n        field: \"title\",\n        title: \"Title\",\n        icon: <AudioLines />,\n        sorting_icons: letterSortingIcons,\n        sorting_labels: {\n            ascending: \"Ascending\",\n            descending: \"Descending\"\n        }\n    },\n    {\n        field: \"artist\",\n        title: \"Artist\",\n        icon: <MicVocal />,\n        sorting_icons: letterSortingIcons,\n        sorting_labels: {\n            ascending: \"Ascending\",\n            descending: \"Descending\"\n        }\n    },\n    {\n        field: \"dateAdded\",\n        title: \"Date Added\",\n        icon: <CalendarPlus />,\n        sorting_icons: numberSortingIcons,\n        sorting_labels: {\n            ascending: \"Vivaldi → Lucie Bílá\",\n            descending: \"Lucie Bílá → Vivaldi\",\n        }\n    },\n    {\n        field: \"range\",\n        title: \"Range\",\n        icon: <Music />,\n        sorting_icons: numberSortingIcons,\n        sorting_labels: {\n            ascending: \"Me → Freddie\",\n            descending: \"Freddie → Me\"\n        }\n    },\n];\n\nconst isActive = (sortingField: SortField, buttonField: SortField): boolean => {\n    return sortingField === buttonField;\n};\n\nconst toggleSortOrder = (sortOrder: SortOrder): SortOrder => {\n    return sortOrder === \"descending\" ? \"ascending\" : \"descending\";\n};\n\nconst getActiveCategory = (sortingField: SortField): Category => {\n    const category = categories.find((cat) => cat.field === sortingField);\n    if (!category) {\n        throw new Error(`Invalid sorting field: ${sortingField}`);\n    }\n    return category;\n};\n\nconst SortMenu = (): JSX.Element => {\n    const { field: sortByField, order: sortOrder, setSortField, setSortOrder } = useSortSettingsStore();\n\n    const switchOptions: SwitchOption[] = categories.map(c => ({\n        label: c.title,\n        value: c.field\n    }));\n\n    const activeCategory = getActiveCategory(sortByField);\n\n    return (\n        <>\n            {/* Mobile View */}\n            <div className=\"flex md:hidden\">\n                <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                        <Button\n                            size=\"icon\"\n                            variant=\"circular\"\n                        >\n                            <ArrowDownUp size={32} />\n                        </Button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent className=\"w-56\"\n                        sideOffset={15}>\n                        <DropdownMenuLabel>Sorting method</DropdownMenuLabel>\n                        <DropdownMenuSeparator />\n                        {categories.map(category => (\n                            <DropdownMenuCheckboxItem\n                                key={category.field}\n                                onSelect={(e) => e.preventDefault()}\n                                checked={isActive(sortByField, category.field)}\n                                onCheckedChange={() => setSortField(category.field)}\n                            >\n                                <DropdownIconStart icon={category.icon} />\n                                {category.title}\n                            </DropdownMenuCheckboxItem>\n                        ))}\n                        <DropdownMenuLabel>Direction</DropdownMenuLabel>\n                        <DropdownMenuSeparator />\n                        {(['ascending', 'descending'] as const).map((direction) => (\n                            <DropdownMenuCheckboxItem\n                                key={`${direction}_sort`}\n                                checked={sortOrder === direction}\n                                onSelect={(e) => e.preventDefault()}\n                                onCheckedChange={() => setSortOrder(direction)}\n                            >\n                                <DropdownIconStart\n                                    icon={activeCategory.sorting_icons[direction]}\n                                />\n                                {activeCategory.sorting_labels[direction]}\n                            </DropdownMenuCheckboxItem>\n                        ))}\n                    </DropdownMenuContent>\n                </DropdownMenu>\n            </div>\n\n            {/* Desktop View */}\n            <div className=\"hidden md:flex h-full w-fit\">\n                <FancySwitch\n                    options={switchOptions}\n                    setSelectedOption={setSortField}\n                    selectedOption={sortByField}\n                    roundedClass=\"rounded-l-full\"\n                >\n                    <Button\n                        className=\"rounded-r-full\"\n                        onClick={() => setSortOrder(toggleSortOrder(sortOrder))}\n                    >\n                        {activeCategory.sorting_icons[sortOrder]}\n                    </Button>\n                </FancySwitch>\n            </div>\n        </>\n    );\n};\n\nexport default SortMenu;","import { ModeToggle } from \"@/components/mode-toggle\";\nimport RandomSong from \"@/components/RandomSong\";\nimport { Button } from \"@/components/ui/button\";\nimport ToolbarBase from \"@/components/ui/toolbar-base\";\nimport { SongData } from \"@/types/types\";\nimport { ImagesIcon } from \"lucide-react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Filtering from \"./filters/Filters\";\nimport SearchBar from './SearchBar';\nimport SortMenu from \"./SortMenu\";\n\ninterface ToolbarProps {\n    songs: SongData[];\n    showToolbar: boolean;\n    scrollOffset: number;\n    fakeScroll?: boolean;\n    maxRange: number;\n    languages: string[];\n}\n\nfunction Toolbar({\n    songs,\n    showToolbar,\n    scrollOffset,\n    fakeScroll = false,\n    maxRange,\n    languages\n}: ToolbarProps) {\n\n    const navigate = useNavigate();\n\n    return (\n        <ToolbarBase showToolbar={showToolbar} scrollOffset={scrollOffset} fakeScroll={fakeScroll}>\n            <SortMenu />\n            <SearchBar />\n            <Filtering\n                languages={languages}\n                maxRange={maxRange}\n            />\n            <div className=\"hidden h-full w-fit sm:flex\">\n                <ModeToggle />\n            </div>\n            <Button\n                size=\"icon\"\n                variant=\"circular\"\n                onClick={() => navigate(\"gallery\")}\n            >\n                <ImagesIcon />\n            </Button>\n            <RandomSong songs={songs} />\n        </ToolbarBase>\n    );\n}\n\nexport default Toolbar;","/**\n * Fuse.js v7.0.0 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2023 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n  let getFn = null;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n    getFn = key.getFn;\n  }\n\n  return { path, id, weight, src, getFn }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false,\n  // The weight to determine how much field length norm effects scoring.\n  fieldNormWeight: 1\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(weight = 1, mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      // Default function is 1/sqrt(x), weight makes that variable\n      const norm = 1 / Math.pow(numTokens, 0.5 * weight);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({\n    getFn = Config.getFn,\n    fieldNormWeight = Config.fieldNormWeight\n  } = {}) {\n    this.norm = norm(fieldNormWeight, 3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      let value = key.getFn ? key.getFn(doc) : this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          } else ;\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (isString(value) && !isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(\n  keys,\n  docs,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(\n  data,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore$1(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore$1(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore$1(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore$1(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore$1(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreLocation\n    };\n\n    this.pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, includeMatches } = this.options;\n\n    if (!isCaseSensitive) {\n      text = text.toLowerCase();\n    }\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nclass BaseMatch {\n  constructor(pattern) {\n    this.pattern = pattern;\n  }\n  static isMultiMatch(pattern) {\n    return getMatch(pattern, this.multiRegex)\n  }\n  static isSingleMatch(pattern) {\n    return getMatch(pattern, this.singleRegex)\n  }\n  search(/*text*/) {}\n}\n\nfunction getMatch(pattern, exp) {\n  const matches = pattern.match(exp);\n  return matches ? matches[1] : null\n}\n\n// Token: 'file\n\nclass ExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'exact'\n  }\n  static get multiRegex() {\n    return /^=\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^=(.*)$/\n  }\n  search(text) {\n    const isMatch = text === this.pattern;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !fire\n\nclass InverseExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!(.*)$/\n  }\n  search(text) {\n    const index = text.indexOf(this.pattern);\n    const isMatch = index === -1;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: ^file\n\nclass PrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'prefix-exact'\n  }\n  static get multiRegex() {\n    return /^\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !^fire\n\nclass InversePrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-prefix-exact'\n  }\n  static get multiRegex() {\n    return /^!\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = !text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: .file$\n\nclass SuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'suffix-exact'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = text.endsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [text.length - this.pattern.length, text.length - 1]\n    }\n  }\n}\n\n// Token: !.file$\n\nclass InverseSuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-suffix-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^!(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = !text.endsWith(this.pattern);\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\nclass FuzzyMatch extends BaseMatch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    super(pattern);\n    this._bitapSearch = new BitapSearch(pattern, {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreLocation\n    });\n  }\n  static get type() {\n    return 'fuzzy'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^(.*)$/\n  }\n  search(text) {\n    return this._bitapSearch.searchIn(text)\n  }\n}\n\n// Token: 'file\n\nclass IncludeMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'include'\n  }\n  static get multiRegex() {\n    return /^'\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^'(.*)$/\n  }\n  search(text) {\n    let location = 0;\n    let index;\n\n    const indices = [];\n    const patternLen = this.pattern.length;\n\n    // Get all exact matches\n    while ((index = text.indexOf(this.pattern, location)) > -1) {\n      location = index + patternLen;\n      indices.push([index, location - 1]);\n    }\n\n    const isMatch = !!indices.length;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices\n    }\n  }\n}\n\n// ❗Order is important. DO NOT CHANGE.\nconst searchers = [\n  ExactMatch,\n  IncludeMatch,\n  PrefixExactMatch,\n  InversePrefixExactMatch,\n  InverseSuffixExactMatch,\n  SuffixExactMatch,\n  InverseExactMatch,\n  FuzzyMatch\n];\n\nconst searchersLen = searchers.length;\n\n// Regex to split by spaces, but keep anything in quotes together\nconst SPACE_RE = / +(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)/;\nconst OR_TOKEN = '|';\n\n// Return a 2D array representation of the query, for simpler parsing.\n// Example:\n// \"^core go$ | rb$ | py$ xy$\" => [[\"^core\", \"go$\"], [\"rb$\"], [\"py$\", \"xy$\"]]\nfunction parseQuery(pattern, options = {}) {\n  return pattern.split(OR_TOKEN).map((item) => {\n    let query = item\n      .trim()\n      .split(SPACE_RE)\n      .filter((item) => item && !!item.trim());\n\n    let results = [];\n    for (let i = 0, len = query.length; i < len; i += 1) {\n      const queryItem = query[i];\n\n      // 1. Handle multiple query match (i.e, once that are quoted, like `\"hello world\"`)\n      let found = false;\n      let idx = -1;\n      while (!found && ++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isMultiMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          found = true;\n        }\n      }\n\n      if (found) {\n        continue\n      }\n\n      // 2. Handle single query matches (i.e, once that are *not* quoted)\n      idx = -1;\n      while (++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isSingleMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          break\n        }\n      }\n    }\n\n    return results\n  })\n}\n\n// These extended matchers can return an array of matches, as opposed\n// to a singl match\nconst MultiMatchSet = new Set([FuzzyMatch.type, IncludeMatch.type]);\n\n/**\n * Command-like searching\n * ======================\n *\n * Given multiple search terms delimited by spaces.e.g. `^jscript .python$ ruby !java`,\n * search in a given text.\n *\n * Search syntax:\n *\n * | Token       | Match type                 | Description                            |\n * | ----------- | -------------------------- | -------------------------------------- |\n * | `jscript`   | fuzzy-match                | Items that fuzzy match `jscript`       |\n * | `=scheme`   | exact-match                | Items that are `scheme`                |\n * | `'python`   | include-match              | Items that include `python`            |\n * | `!ruby`     | inverse-exact-match        | Items that do not include `ruby`       |\n * | `^java`     | prefix-exact-match         | Items that start with `java`           |\n * | `!^earlang` | inverse-prefix-exact-match | Items that do not start with `earlang` |\n * | `.js$`      | suffix-exact-match         | Items that end with `.js`              |\n * | `!.go$`     | inverse-suffix-exact-match | Items that do not end with `.go`       |\n *\n * A single pipe character acts as an OR operator. For example, the following\n * query matches entries that start with `core` and end with either`go`, `rb`,\n * or`py`.\n *\n * ```\n * ^core go$ | rb$ | py$\n * ```\n */\nclass ExtendedSearch {\n  constructor(\n    pattern,\n    {\n      isCaseSensitive = Config.isCaseSensitive,\n      includeMatches = Config.includeMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      ignoreLocation = Config.ignoreLocation,\n      findAllMatches = Config.findAllMatches,\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance\n    } = {}\n  ) {\n    this.query = null;\n    this.options = {\n      isCaseSensitive,\n      includeMatches,\n      minMatchCharLength,\n      findAllMatches,\n      ignoreLocation,\n      location,\n      threshold,\n      distance\n    };\n\n    this.pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    this.query = parseQuery(this.pattern, this.options);\n  }\n\n  static condition(_, options) {\n    return options.useExtendedSearch\n  }\n\n  searchIn(text) {\n    const query = this.query;\n\n    if (!query) {\n      return {\n        isMatch: false,\n        score: 1\n      }\n    }\n\n    const { includeMatches, isCaseSensitive } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n\n    let numMatches = 0;\n    let allIndices = [];\n    let totalScore = 0;\n\n    // ORs\n    for (let i = 0, qLen = query.length; i < qLen; i += 1) {\n      const searchers = query[i];\n\n      // Reset indices\n      allIndices.length = 0;\n      numMatches = 0;\n\n      // ANDs\n      for (let j = 0, pLen = searchers.length; j < pLen; j += 1) {\n        const searcher = searchers[j];\n        const { isMatch, indices, score } = searcher.search(text);\n\n        if (isMatch) {\n          numMatches += 1;\n          totalScore += score;\n          if (includeMatches) {\n            const type = searcher.constructor.type;\n            if (MultiMatchSet.has(type)) {\n              allIndices = [...allIndices, ...indices];\n            } else {\n              allIndices.push(indices);\n            }\n          }\n        } else {\n          totalScore = 0;\n          numMatches = 0;\n          allIndices.length = 0;\n          break\n        }\n      }\n\n      // OR condition, so if TRUE, return\n      if (numMatches) {\n        let result = {\n          isMatch: true,\n          score: totalScore / numMatches\n        };\n\n        if (includeMatches) {\n          result.indices = allIndices;\n        }\n\n        return result\n      }\n    }\n\n    // Nothing was matched\n    return {\n      isMatch: false,\n      score: 1\n    }\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction register(...args) {\n  registeredSearchers.push(...args);\n}\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !true\n    ) {\n      throw new Error(EXTENDED_SEARCH_UNAVAILABLE)\n    }\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn,\n        fieldNormWeight: this.options.fieldNormWeight\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n\n    const expression = parse(query, this.options);\n\n    const evaluate = (node, item, idx) => {\n      if (!node.children) {\n        const { keyId, searcher } = node;\n\n        const matches = this._findMatches({\n          key: this._keyStore.get(keyId),\n          value: this._myIndex.getValueForItemAtKeyId(item, keyId),\n          searcher\n        });\n\n        if (matches && matches.length) {\n          return [\n            {\n              idx,\n              item,\n              matches\n            }\n          ]\n        }\n\n        return []\n      }\n\n      const res = [];\n      for (let i = 0, len = node.children.length; i < len; i += 1) {\n        const child = node.children[i];\n        const result = evaluate(child, item, idx);\n        if (result.length) {\n          res.push(...result);\n        } else if (node.operator === LogicalOperator.AND) {\n          return []\n        }\n      }\n      return res\n    };\n\n    const records = this._myIndex.records;\n    const resultMap = {};\n    const results = [];\n\n    records.forEach(({ $: item, i: idx }) => {\n      if (isDefined(item)) {\n        let expResults = evaluate(expression, item, idx);\n\n        if (expResults.length) {\n          // Dedupe when adding\n          if (!resultMap[idx]) {\n            resultMap[idx] = { idx, item, matches: [] };\n            results.push(resultMap[idx]);\n          }\n          expResults.forEach(({ matches }) => {\n            resultMap[idx].matches.push(...matches);\n          });\n        }\n      }\n    });\n\n    return results\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '7.0.0';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n{\n  register(ExtendedSearch);\n}\n\nexport { Fuse as default };\n","\nimport { SongData, SortField, SortOrder } from '@/types/types';\nimport Fuse from 'fuse.js';\nimport { useEffect, useMemo } from 'react';\nimport { useFilterSettingsStore } from './Toolbar/filters/Filters';\nimport { useQueryStore } from './Toolbar/SearchBar';\nimport { useSortSettingsStore } from './Toolbar/SortMenu';\n\nconst filterLanguage = (songs: SongData[], selectedLanguage: string): SongData[] => {\n    if (selectedLanguage !== \"all\") {\n        return songs.filter((song) => song.language === selectedLanguage);\n    }\n    return songs;\n};\n\nconst filterCapo = (songs: SongData[], allowCapo: boolean): SongData[] => {\n    if (allowCapo) {\n        return songs;\n    }\n    return songs.filter((song) => song.capo === 0);\n};\n\nconst filterVocalRange = (songs: SongData[], vocalRange: \"all\" | [number, number]): SongData[] => {\n    if (vocalRange === \"all\") {\n        return songs;\n    }\n    return songs.filter(song =>\n        song.range?.semitones !== undefined &&\n        song.range.semitones >= vocalRange[0] &&\n        song.range.semitones <= vocalRange[1]\n    );\n};\n\nconst getSortCompareFunction = (sortByField: SortField, sortOrder: SortOrder) => {\n    return (a: SongData, b: SongData): number => {\n        let comparison: number;\n\n        if (sortByField === \"range\") {\n            const aSemi = a.range?.semitones ?? -Infinity;\n            const bSemi = b.range?.semitones ?? -Infinity;\n            comparison = aSemi === bSemi ? a.title.localeCompare(b.title) : aSemi - bSemi;\n        } else if (sortByField === \"dateAdded\") {\n            const aDate = (a.dateAdded?.year ?? 0) * 12 + (a.dateAdded?.month ?? 0);\n            const bDate = (b.dateAdded?.year ?? 0) * 12 + (b.dateAdded?.month ?? 0);\n            comparison = aDate === bDate ? a.title.localeCompare(b.title) : aDate - bDate;\n        } else {\n            comparison = (a[sortByField] ?? \"\").localeCompare(b[sortByField] ?? \"\");\n        }\n\n        return sortOrder === \"ascending\" ? comparison : -comparison;\n    };\n};\n\nexport function useFilteredSongs(\n    songs: SongData[]\n) {\n    const { field: sortByField, order: sortOrder } = useSortSettingsStore();\n    const { query, setQuery } = useQueryStore();\n    const { language, vocalRange, capo } = useFilterSettingsStore();\n    // Reset search when sort settings change\n    useEffect(() => {\n        setQuery(\"\");\n    }, [sortByField, sortOrder, setQuery]);\n\n    const fuse = useMemo(() => {\n        const options = {\n            includeScore: true,\n            keys: [\"artist\", \"title\", \"ascii_title\", \"ascii_artist\"],\n            ignoreLocation: true,\n            threshold: 0.4,\n        };\n        return new Fuse(songs, options)\n    }, [songs]);\n\n    const searchResults = useMemo(() => query === \"\" ? songs : fuse.search(query).map((r) => r.item), [fuse, songs, query]);\n\n    // Apply filters\n    let results = filterCapo(searchResults, capo);\n    results = filterVocalRange(results, vocalRange);\n    results = filterLanguage(results, language);\n\n    // Only sort if there's no search query\n    if (!query) {\n        results = [...results].sort(getSortCompareFunction(\n            sortByField,\n            sortOrder\n        ));\n    }\n    return { songs: results };\n}","import { SongData, SongDB } from '@/types/types';\nimport { memo, useEffect, useRef, useState } from 'react';\nimport { useLoaderData } from 'react-router-dom';\nimport './SongList.css';\nimport SongRow from './SongRow';\nimport Toolbar from './Toolbar/Toolbar';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { useFilteredSongs } from './useFilteredSongs';\n\nconst SCROLL_OFFSET_KEY = 'scrollOffset';\nconst INITIAL_LOAD_COUNT = 30;\nconst LOAD_MORE_COUNT = 20;\n\nfunction SongList() {\n    const songDB = useLoaderData() as SongDB;\n    const { songs } = useFilteredSongs(songDB.songs);\n    const listRef = useRef<HTMLDivElement>(null);\n    const [showToolbar, setShowToolbar] = useState(true);\n    const [scrollOffset, setScrollOffset] = useLocalStorageState<number>(SCROLL_OFFSET_KEY, { defaultValue: 0, storageSync: false });\n    const [visibleSongs, setVisibleSongs] = useState(() => songs.slice(0, INITIAL_LOAD_COUNT));\n    const observerRef = useRef<IntersectionObserver | null>(null);\n    \n    useEffect(() => {\n        if (listRef.current) {\n            requestAnimationFrame(() => {\n                listRef.current!.scrollTop = scrollOffset;\n            });\n        }\n    }, [scrollOffset]);\n\n    useEffect(() => {\n        if (!songs.length) return;\n        \n        observerRef.current = new IntersectionObserver((entries) => {\n            const lastEntry = entries[0];\n            if (lastEntry.isIntersecting) {\n                setVisibleSongs((prev) => songs.slice(0, prev.length + LOAD_MORE_COUNT));\n            }\n        }, { root: listRef.current, threshold: 1.0 });\n        \n        const lastSongElement = document.querySelector('.song-row:last-child');\n        if (lastSongElement) {\n            observerRef.current.observe(lastSongElement);\n        }\n        \n        return () => observerRef.current?.disconnect();\n    }, [songs, visibleSongs]);\n\n    const handleScroll = () => {\n        if (!listRef.current) return;\n        const offset = listRef.current.scrollTop;\n        setScrollOffset(offset);\n        setShowToolbar(offset === 0 || offset < scrollOffset);\n    };\n\n    return (\n        <div className=\"h-dvh w-full no-scrollbar block\">\n            <Toolbar\n                songs={songs}\n                showToolbar={showToolbar}\n                scrollOffset={scrollOffset}\n                fakeScroll={true}\n                maxRange={songDB.maxRange}\n                languages={songDB.languages}\n            />\n            <div\n                ref={listRef}\n                className=\"sm:pt-20 pt-[72px] pb-4 overflow-auto h-full\"\n                onScroll={handleScroll}\n            >\n                {visibleSongs.map((song) => (\n                    <SongRow key={song.id} song={song} maxRange={songDB.maxRange} />\n                ))}\n            </div>\n        </div>\n    );\n}\n\nexport default SongList;\n"],"names":["ArrowDown01","createLucideIcon","ArrowDown10","ArrowDownAZ","ArrowDownUp","ArrowDownZA","AudioLines","CalendarPlus","Filter","FlagOff","Handshake","Images","Languages","MicVocal","Music","Search","X","AVATAR_NAME","createAvatarContext","createAvatarScope","createContextScope","AvatarProvider","useAvatarContext","Avatar","React.forwardRef","props","forwardedRef","__scopeAvatar","avatarProps","imageLoadingStatus","setImageLoadingStatus","React.useState","jsx","Primitive","IMAGE_NAME","AvatarImage","src","onLoadingStatusChange","imageProps","context","useImageLoadingStatus","handleLoadingStatusChange","useCallbackRef","status","useLayoutEffect","FALLBACK_NAME","AvatarFallback","delayMs","fallbackProps","canRender","setCanRender","React.useEffect","timerId","referrerPolicy","loadingStatus","setLoadingStatus","isMounted","image","updateStatus","Root","Image","Fallback","className","ref","AvatarPrimitive.Root","cn","AvatarPrimitive.Image","AvatarPrimitive.Fallback","DIALOG_NAME","createDialogContext","createDialogScope","DialogProvider","useDialogContext","Dialog","__scopeDialog","children","openProp","defaultOpen","onOpenChange","modal","triggerRef","React.useRef","contentRef","open","setOpen","useControllableState","useId","React.useCallback","prevOpen","TRIGGER_NAME","DialogTrigger","triggerProps","composedTriggerRef","useComposedRefs","getState","composeEventHandlers","PORTAL_NAME","PortalProvider","usePortalContext","DialogPortal","forceMount","container","React.Children","child","Presence","PortalPrimitive","OVERLAY_NAME","DialogOverlay","portalContext","overlayProps","DialogOverlayImpl","RemoveScroll","Slot","CONTENT_NAME","DialogContent","contentProps","DialogContentModal","DialogContentNonModal","composedRefs","content","hideOthers","DialogContentImpl","event","_a","originalEvent","ctrlLeftClick","hasInteractedOutsideRef","hasPointerDownOutsideRef","_b","target","trapFocus","onOpenAutoFocus","onCloseAutoFocus","useFocusGuards","jsxs","Fragment","FocusScope","DismissableLayer","TitleWarning","DescriptionWarning","TITLE_NAME","DialogTitle","titleProps","DESCRIPTION_NAME","DialogDescription","descriptionProps","CLOSE_NAME","DialogClose","closeProps","TITLE_WARNING_NAME","WarningProvider","useWarningContext","createContext","titleId","titleWarningContext","MESSAGE","DESCRIPTION_WARNING_NAME","descriptionId","describedById","Portal","Overlay","Content","Title","Description","Close","DialogPrimitive.Root","DialogPrimitive.Portal","DialogPrimitive.Close","DialogPrimitive.Overlay","close","e","DialogPrimitive.Content","Button","DialogPrimitive.Title","DialogPrimitive.Description","IllustrationPopup","avatarClassName","song","isOpen","setIsOpen","useState","IllustrationPrompt","language2iso","convert2flag","language","LanguageFlag","CircularProgress","value","maxValue","color","strokeWidth","MONTH_NAMES","VocalRangeIndicator","memo","songRangeSemitones","maxRange","DateDisplay","month","year","CapoDisplay","capo","SongInfo","title","artist","SongRow","handleClick","useLinkClickHandler","useMediaQuery","query","subscribe","callback","matchMedia","getSnapshot","getServerSnapshot","React.useSyncExternalStore","capitalizeFirstLetter","str","firstCodePoint","index","createLanguageChoices","languages","selectedLanguage","setSelectedLanguage","languageChoices","choice","DropdownMenuCheckboxItem","DropdownIconStart","LanguageFilter","iconOnly","active","DropdownMenu","DropdownMenuTrigger","DropdownMenuContent","LanguageFilterDropdownSection","DropdownMenuLabel","DropdownMenuSeparator","clamp","min","max","usePrevious","React.useMemo","PAGE_KEYS","ARROW_KEYS","BACK_KEYS","SLIDER_NAME","Collection","useCollection","createCollectionScope","createCollection","createSliderContext","createSliderScope","SliderProvider","useSliderContext","Slider","name","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","onValueChange","onValueCommit","inverted","form","sliderProps","thumbRefs","valueIndexToChangeRef","SliderOrientation","SliderHorizontal","SliderVertical","values","setValues","value2","valuesBeforeSlideStartRef","handleSlideStart","closestIndex","getClosestValueIndex","updateValues","handleSlideMove","handleSlideEnd","prevValue","atIndex","commit","decimalCount","getDecimalCount","snapToStep","roundValue","nextValue","prevValues","nextValues","getNextSortedValues","hasMinStepsBetweenValues","hasChanged","stepDirection","multiplier","stepInDirection","SliderOrientationProvider","useSliderOrientationContext","dir","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown","slider","setSlider","node","rectRef","direction","useDirection","isDirectionLTR","isSlidingFromLeft","getValueFromPointer","pointerPosition","rect","input","linearScale","SliderImpl","isBackKey","sliderRef","isSlidingFromBottom","__scopeSlider","onHomeKeyDown","onEndKeyDown","TRACK_NAME","SliderTrack","trackProps","RANGE_NAME","SliderRange","rangeProps","valuesCount","percentages","convertValueToPercentage","offsetStart","offsetEnd","THUMB_NAME","SliderThumb","getItems","thumb","setThumb","item","SliderThumbImpl","thumbProps","isFormControl","size","useSize","percent","label","getLabel","orientationSize","thumbInBoundsOffset","getThumbInBoundsOffset","BubbleInput","inputProps","inputProto","setValue","a","b","percentage","totalValues","distances","closestDistance","width","left","halfWidth","offset","getStepsBetweenValues","minStepsBetweenValues","stepsBetweenValues","output","ratio","rounder","Track","Range","Thumb","SliderPrimitive.Root","SliderPrimitive.Track","SliderPrimitive.Range","SliderPrimitive.Thumb","labelEl","RangeSlider","VocalRangeSlider","vocalRangeFilter","setVocalRangeFilter","currentValue","VocalRangeFilter","DropdownMenuItem","VocalRangeDropdownSection","useFilterSettingsStore","create","persist","set","range","state","FilterButtons","vocalRange","setLanguage","setVocalRange","toggleCapo","Filtering","isLargeScreen","isFilterInactive","Input","type","useQueryStore","SearchBar","isExpanded","setIsExpanded","expandedWidth","setExpandedWidth","mobileInputRef","useRef","setQuery","search","newQuery","useEffect","handleToggle","navbar","handleClear","ClearButton","XIcon","SearchIcon","useSortSettingsStore","sortOrder","sortField","letterSortingIcons","numberSortingIcons","categories","isActive","sortingField","buttonField","toggleSortOrder","getActiveCategory","category","cat","SortMenu","sortByField","setSortField","setSortOrder","switchOptions","c","activeCategory","FancySwitch","Toolbar","songs","showToolbar","scrollOffset","fakeScroll","navigate","useNavigate","ToolbarBase","ModeToggle","ImagesIcon","RandomSong","isArray","getTag","INFINITY","baseToString","result","toString","isString","isNumber","isBoolean","isObjectLike","isObject","isDefined","isBlank","INCORRECT_INDEX_TYPE","LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY","key","PATTERN_LENGTH_TOO_LARGE","MISSING_KEY_PROPERTY","INVALID_KEY_WEIGHT_VALUE","hasOwn","KeyStore","keys","totalWeight","obj","createKey","keyId","path","id","weight","getFn","createKeyPath","createKeyId","get","list","arr","deepGet","i","len","MatchOptions","BasicOptions","FuzzyOptions","AdvancedOptions","Config","SPACE","norm","mantissa","cache","m","numTokens","n","FuseIndex","fieldNormWeight","docs","records","idx","doc","docIndex","record","keyIndex","subRecords","stack","nestedArrIndex","subRecord","k","createIndex","myIndex","parseIndex","data","computeScore$1","pattern","errors","currentLocation","expectedLocation","distance","ignoreLocation","accuracy","proximity","convertMaskToIndices","matchmask","minMatchCharLength","indices","start","end","match","MAX_BITS","text","patternAlphabet","location","threshold","findAllMatches","includeMatches","patternLen","textLen","currentThreshold","bestLocation","computeMatches","matchMask","score","lastBitArr","finalScore","binMax","mask","binMin","binMid","finish","bitArr","j","charMatch","createPatternAlphabet","char","BitapSearch","isCaseSensitive","addChunk","startIndex","remainder","allIndices","totalScore","hasMatches","alphabet","isMatch","BaseMatch","getMatch","exp","matches","ExactMatch","InverseExactMatch","PrefixExactMatch","InversePrefixExactMatch","SuffixExactMatch","InverseSuffixExactMatch","FuzzyMatch","IncludeMatch","searchers","searchersLen","SPACE_RE","OR_TOKEN","parseQuery","options","results","queryItem","found","searcher","token","MultiMatchSet","ExtendedSearch","_","numMatches","qLen","pLen","registeredSearchers","register","args","createSearcher","searcherClass","LogicalOperator","KeyType","isExpression","isPath","isLeaf","convertToExplicit","parse","auto","next","isQueryPath","computeScore","ignoreFieldNorm","transformMatches","transformScore","format","includeScore","transformers","transformer","Fuse","predicate","limit","shouldSort","sortFn","expression","evaluate","res","resultMap","expResults","filterLanguage","filterCapo","allowCapo","filterVocalRange","getSortCompareFunction","comparison","aSemi","bSemi","aDate","_c","_d","bDate","_e","_f","useFilteredSongs","fuse","useMemo","searchResults","r","SCROLL_OFFSET_KEY","INITIAL_LOAD_COUNT","LOAD_MORE_COUNT","SongList","songDB","useLoaderData","listRef","setShowToolbar","setScrollOffset","useLocalStorageState","visibleSongs","setVisibleSongs","observerRef","entries","prev","lastSongElement","handleScroll"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,24,26,27,28,36]}