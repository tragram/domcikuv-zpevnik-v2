import{c as N,a as Ce,r as f,j as r,u as un,b as Qe,d as S,e as hn,f as Xe,g as ue,h as fn,i as gn,k as pn,l as mn}from"./main-PPz4eQmZ.js";import{P as E,c as D,a as Re,R as xn,h as yn,u as vn,F as bn,D as wn,b as jn,d as ee,e as te,f as ne,g as ge,i as ae,j as ie,k as ce,l as Sn,m as kn,n as se,o as Ae,p as Je,q as Mn,T as Nn,M as Cn,r as Rn,s as An}from"./useLocalStorageState-CK2rSEpx.js";import{u as B,S as _n,B as I}from"./button-CTd_ggci.js";import{I as En}from"./IllustrationPrompt-Zru4Z7U0.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=N("ArrowDown01",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["rect",{x:"15",y:"4",width:"4",height:"6",ry:"2",key:"1bwicg"}],["path",{d:"M17 20v-6h-2",key:"1qp1so"}],["path",{d:"M15 20h4",key:"1j968p"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=N("ArrowDown10",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M17 10V4h-2",key:"zcsr5x"}],["path",{d:"M15 10h4",key:"id2lce"}],["rect",{x:"15",y:"14",width:"4",height:"6",ry:"2",key:"33xykx"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=N("ArrowDownAZ",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=N("ArrowDownUp",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=N("ArrowDownZA",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M15 4h5l-5 6h5",key:"8asdl1"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20",key:"r6l5cz"}],["path",{d:"M20 18h-5",key:"18j1r2"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=N("AudioLines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=N("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=N("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=N("FlagOff",[["path",{d:"M8 2c3 0 5 2 8 2s4-1 4-1v11",key:"9rwyz9"}],["path",{d:"M4 22V4",key:"1plyxx"}],["path",{d:"M4 15s1-1 4-1 5 2 8 2",key:"1myooe"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=N("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=N("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=N("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=N("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=N("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=N("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=N("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var _e="Avatar",[Hn,Yr]=Ce(_e),[Un,et]=Hn(_e),tt=f.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[o,a]=f.useState("idle");return r.jsx(Un,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:r.jsx(E.span,{...s,ref:t})})});tt.displayName=_e;var nt="AvatarImage",st=f.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:o=()=>{},...a}=e,i=et(nt,n),c=Gn(s,a.referrerPolicy),l=un(u=>{o(u),i.onImageLoadingStatusChange(u)});return Qe(()=>{c!=="idle"&&l(c)},[c,l]),c==="loaded"?r.jsx(E.img,{...a,ref:t,src:s}):null});st.displayName=nt;var rt="AvatarFallback",ot=f.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...o}=e,a=et(rt,n),[i,c]=f.useState(s===void 0);return f.useEffect(()=>{if(s!==void 0){const l=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(l)}},[s]),i&&a.imageLoadingStatus!=="loaded"?r.jsx(E.span,{...o,ref:t}):null});ot.displayName=rt;function Gn(e,t){const[n,s]=f.useState("idle");return Qe(()=>{if(!e){s("error");return}let o=!0;const a=new window.Image,i=c=>()=>{o&&s(c)};return s("loading"),a.onload=i("loaded"),a.onerror=i("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{o=!1}},[e,t]),n}var at=tt,it=st,ct=ot;const Ee=f.forwardRef(({className:e,...t},n)=>r.jsx(at,{ref:n,className:S("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Ee.displayName=at.displayName;const De=f.forwardRef(({className:e,...t},n)=>r.jsx(it,{ref:n,className:S("aspect-square flex object-cover w-full h-full",e),...t}));De.displayName=it.displayName;const lt=f.forwardRef(({className:e,...t},n)=>r.jsx(ct,{ref:n,className:S("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));lt.displayName=ct.displayName;var Ie="Dialog",[dt,Qr]=Ce(Ie),[Yn,L]=dt(Ie),ut=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,c=f.useRef(null),l=f.useRef(null),[u=!1,h]=Xe({prop:s,defaultProp:o,onChange:a});return r.jsx(Yn,{scope:t,triggerRef:c,contentRef:l,contentId:ue(),titleId:ue(),descriptionId:ue(),open:u,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(d=>!d),[h]),modal:i,children:n})};ut.displayName=Ie;var ht="DialogTrigger",Qn=f.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,o=L(ht,n),a=B(t,o.triggerRef);return r.jsx(E.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Oe(o.open),...s,ref:a,onClick:D(e.onClick,o.onOpenToggle)})});Qn.displayName=ht;var Le="DialogPortal",[Xn,ft]=dt(Le,{forceMount:void 0}),gt=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:o}=e,a=L(Le,t);return r.jsx(Xn,{scope:t,forceMount:n,children:f.Children.map(s,i=>r.jsx(Re,{present:n||a.open,children:r.jsx(jn,{asChild:!0,container:o,children:i})}))})};gt.displayName=Le;var re="DialogOverlay",pt=f.forwardRef((e,t)=>{const n=ft(re,e.__scopeDialog),{forceMount:s=n.forceMount,...o}=e,a=L(re,e.__scopeDialog);return a.modal?r.jsx(Re,{present:s||a.open,children:r.jsx(Jn,{...o,ref:t})}):null});pt.displayName=re;var Jn=f.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,o=L(re,n);return r.jsx(xn,{as:_n,allowPinchZoom:!0,shards:[o.contentRef],children:r.jsx(E.div,{"data-state":Oe(o.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Q="DialogContent",mt=f.forwardRef((e,t)=>{const n=ft(Q,e.__scopeDialog),{forceMount:s=n.forceMount,...o}=e,a=L(Q,e.__scopeDialog);return r.jsx(Re,{present:s||a.open,children:a.modal?r.jsx(Zn,{...o,ref:t}):r.jsx(qn,{...o,ref:t})})});mt.displayName=Q;var Zn=f.forwardRef((e,t)=>{const n=L(Q,e.__scopeDialog),s=f.useRef(null),o=B(t,n.contentRef,s);return f.useEffect(()=>{const a=s.current;if(a)return yn(a)},[]),r.jsx(xt,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:D(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:D(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0;(i.button===2||c)&&a.preventDefault()}),onFocusOutside:D(e.onFocusOutside,a=>a.preventDefault())})}),qn=f.forwardRef((e,t)=>{const n=L(Q,e.__scopeDialog),s=f.useRef(!1),o=f.useRef(!1);return r.jsx(xt,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,c;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(s.current||(c=n.triggerRef.current)==null||c.focus(),a.preventDefault()),s.current=!1,o.current=!1},onInteractOutside:a=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),xt=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,...i}=e,c=L(Q,n),l=f.useRef(null),u=B(t,l);return vn(),r.jsxs(r.Fragment,{children:[r.jsx(bn,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:o,onUnmountAutoFocus:a,children:r.jsx(wn,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Oe(c.open),...i,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(es,{titleId:c.titleId}),r.jsx(ns,{contentRef:l,descriptionId:c.descriptionId})]})]})}),Pe="DialogTitle",yt=f.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,o=L(Pe,n);return r.jsx(E.h2,{id:o.titleId,...s,ref:t})});yt.displayName=Pe;var vt="DialogDescription",bt=f.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,o=L(vt,n);return r.jsx(E.p,{id:o.descriptionId,...s,ref:t})});bt.displayName=vt;var wt="DialogClose",jt=f.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,o=L(wt,n);return r.jsx(E.button,{type:"button",...s,ref:t,onClick:D(e.onClick,()=>o.onOpenChange(!1))})});jt.displayName=wt;function Oe(e){return e?"open":"closed"}var St="DialogTitleWarning",[Xr,kt]=hn(St,{contentName:Q,titleName:Pe,docsSlug:"dialog"}),es=({titleId:e})=>{const t=kt(St),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},ts="DialogDescriptionWarning",ns=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${kt(ts).contentName}}.`;return f.useEffect(()=>{var a;const o=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},ss=ut,rs=gt,Mt=pt,Nt=mt,Ct=yt,Rt=bt,os=jt;const as=ss,is=rs,cs=os,At=f.forwardRef(({className:e,...t},n)=>r.jsx(Mt,{ref:n,className:S("fixed inset-0 z-30 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 backdrop-blur-sm",e),...t}));At.displayName=Mt.displayName;const _t=f.forwardRef(({className:e,close:t,children:n,...s},o)=>r.jsxs(is,{children:[r.jsx(At,{onClick:a=>{t(),a.stopPropagation()}}),r.jsxs(Nt,{onClick:a=>a.stopPropagation(),ref:o,className:S("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[n,r.jsx(cs,{asChild:!0,children:r.jsx(I,{variant:"circular",size:"icon",onClick:a=>a.stopPropagation(),className:"absolute top-4 right-4 p-2","aria-label":"Close full screen image",children:r.jsx(qe,{className:"h-6 w-6"})})})]})]}));_t.displayName=Nt.displayName;const Et=f.forwardRef(({className:e,...t},n)=>r.jsx(Ct,{ref:n,className:S("text-lg font-semibold leading-none tracking-tight",e),...t}));Et.displayName=Ct.displayName;const Dt=f.forwardRef(({className:e,...t},n)=>r.jsx(Rt,{ref:n,className:S("text-sm text-muted-foreground",e),...t}));Dt.displayName=Rt.displayName;function ls({avatarClassName:e,song:t}){const[n,s]=f.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx(Ee,{className:"cursor-pointer "+e,onClick:o=>{o.stopPropagation(),s(!0)},children:r.jsx(De,{src:t.thumbnailURL(),alt:"song illustration thumbnail"})}),r.jsxs(as,{open:n,onOpenChange:s,children:[r.jsx(Et,{className:"hidden",children:"Illustration image view"}),r.jsx(Dt,{className:"hidden",children:"Illustration"}),r.jsxs(_t,{className:" max-w-[512px] max-h-[calc(100vh)] h-fit rounded-lg backdrop-blur-sm p-0 avatar-modal-dialog overflow-clip content-radix bg-glass/50 gap-0 flex flex-col",close:()=>s(!1),children:[r.jsx("div",{className:"relative flex justify-center max-h-[512px] shadow-lg",children:r.jsx("img",{style:{backgroundImage:`url(${t.thumbnailURL()})`,backgroundRepeat:"no-repeat",backgroundSize:"cover"},src:t.illustrationURL(),width:512,height:512,className:"object-scale-down z-50"})}),r.jsx(En,{song:t,show:n,className:"text-center text-white font-bold !items-center min-h-32 max-h-48 [@media(max-height:600px)]:!hidden"})]})]})]})}const ze={czech:"cz",english:"gb",german:"de",slovak:"sk",polish:"pl",spanish:"uy",romanian:"ro",finnish:"fi",estonian:"ee",french:"fr",italian:"it",portuguese:"br",icelandic:"is",all:"un",other:"un"};function ds(e){return e=e.toLowerCase(),e in ze?"https://flagcdn.com/"+ze[e]+".svg":e==="russian"?"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Flag_of_Mordor.svg/800px-Flag_of_Mordor.svg.png":""}function It({language:e}){return r.jsxs(Ee,{className:"w-6 h-6 shadow-black",children:[r.jsx(De,{alt:e,src:ds(e)}),r.jsx(lt,{children:r.jsx(Vn,{})})]})}function us({value:e,maxValue:t,color:n="hsl(var(--primary))",strokeWidth:s=10}){return r.jsxs("div",{className:"block relative items-center justify-center h-10 w-10",children:[r.jsxs("svg",{className:"w-full h-full relative overflow-visible",viewBox:"0 0 100 100",children:[r.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"transparent",stroke:"#e5e7eb",strokeWidth:s}),r.jsx("circle",{cx:"50",cy:"50",r:"40",className:"transition-all !duration-500 progress",fill:"transparent",transform:"rotate(-90 50 50)",stroke:n,strokeWidth:s*1.2,strokeDasharray:"251.3",strokeDashoffset:251.3*(1-e/t),strokeLinecap:"round",role:"progressbar"})]}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-normal text-[0.65rem] text-muted-foreground",children:e})]})}const hs=["January","February","March","April","May","June","July","August","September","October","November","December"],fs=f.memo(({songRangeSemitones:e,maxRange:t})=>r.jsx(us,{value:e||t,maxValue:t})),gs=f.memo(({month:e,year:t})=>r.jsxs("div",{className:"basis-[13%] min-w-12 flex-col content-center justify-center hidden sm:flex text-center",children:[r.jsx("h3",{className:"text-xs opacity-70",children:hs[e-1]}),r.jsx("h2",{className:"text-sm opacity-70",children:t})]})),ps=f.memo(({capo:e})=>r.jsxs("div",{className:"basis-[13%] flex-shrink min-w-12 text-center content-center justify-center hidden lg:flex flex-col",children:[r.jsx("h2",{className:"text-xs opacity-70",children:"Capo"}),r.jsx("h3",{className:"text-sm opacity-70",children:e})]})),ms=f.memo(({title:e,artist:t})=>r.jsxs("div",{className:"flex-auto min-w-40 flex-col text-left content-center",children:[r.jsx("h2",{className:"text-sm font-bold truncate",children:e}),r.jsx("h3",{className:"text-sm opacity-50 truncate",children:t})]})),xs=f.memo(({song:e,maxRange:t})=>{const n=fn(e.url(),{});return e?r.jsx("div",{className:"h-[70px] flex items-center container max-w-2xl mx-auto px-2 sm:px-4 song-row-wrapper",children:r.jsx("div",{className:"flex h-14 min-w-72 w-full rounded-full song-row-bg-image",style:{backgroundImage:`url(${e.thumbnailURL()})`},onClick:n,children:r.jsxs("div",{className:"flex relative h-full w-full items-center rounded-full p-1 backdrop-blur-md song-row-bg-image shadow-black row-text-shadow",children:[r.jsx(ls,{avatarClassName:"absolute -left-0 top-0 bottom-0 m-auto song-avatar z-10 w-16 h-16 text-large",song:e}),r.jsxs("div",{className:"flex relative h-12 song-row w-full backdrop-blur-lg bg-glass/60 hover:bg-glass/90 rounded-full",children:[r.jsx("div",{className:"flex basis-[12%] min-w-[72px] rounded-l-full content-center justify-center relative"}),r.jsx(ms,{title:e.title,artist:e.artist}),r.jsx(gs,{month:e.dateAdded.month,year:e.dateAdded.year}),r.jsx(ps,{capo:e.capo}),r.jsx("div",{className:"hidden basis-[13%] min-w-12 sm:flex content-center justify-center",children:r.jsx("div",{className:"flex items-center",children:r.jsx(fs,{songRangeSemitones:e.range.semitones,maxRange:t})})}),r.jsx("div",{className:"flex basis-1/12 min-w-12 items-center justify-end p-2",children:r.jsx(It,{language:e.language})})]})]})})}):(console.error("Invalid song provided to SongRow"),r.jsx("div",{className:"h-[70px] flex items-center container max-w-2xl mx-auto px-2 sm:px-4 bg-white text-foreground",children:"Invalid song"}))});function ys(e){const t=f.useCallback(o=>{const a=window.matchMedia(e);return a.addEventListener("change",o),()=>{a.removeEventListener("change",o)}},[e]),n=()=>window.matchMedia(e).matches,s=()=>{throw Error("useMediaQuery is a client-only hook")};return f.useSyncExternalStore(t,n,s)}const vs=e=>{if(!e)return"";const t=e.codePointAt(0);if(!t)return e;const n=t>65535?2:1;return String.fromCodePoint(t).toUpperCase()+e.slice(n)},Lt=(e,t,n)=>{const s=Object.keys(e).map(o=>({text:vs(o),value:o}));return s.unshift({text:"All",value:"all"}),s.map(o=>r.jsxs(ne,{onSelect:a=>a.preventDefault(),checked:t===o.value,onClick:()=>n(o.value),children:[r.jsx(ge,{icon:r.jsx(It,{language:o.text})}),o.text]},o.value))},bs=({languages:e,selectedLanguage:t,setSelectedLanguage:n,iconOnly:s})=>{const o=t==="all";return r.jsxs(ae,{children:[r.jsx(ie,{asChild:!0,children:r.jsxs(I,{variant:"circular",isActive:o,className:"outline-0 rounded-r-none font-bold",children:[r.jsx(Kn,{}),!s&&"Languages"]})}),r.jsx(ce,{"aria-label":"Language Choices",sideOffset:15,children:Lt(e,t,n)})]})},ws=(e,t,n)=>r.jsxs(r.Fragment,{children:[r.jsx(ee,{children:"Select languages"}),r.jsx(te,{}),Lt(e,t,n)]});function Pt(e,[t,n]){return Math.min(n,Math.max(t,e))}function js(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Ot=["PageUp","PageDown"],Tt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ft={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},J="Slider",[pe,Ss,ks]=Sn(J),[$t,Jr]=Ce(J,[ks]),[Ms,le]=$t(J),Vt=f.forwardRef((e,t)=>{const{name:n,min:s=0,max:o=100,step:a=1,orientation:i="horizontal",disabled:c=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[s],value:h,onValueChange:d=()=>{},onValueCommit:g=()=>{},inverted:m=!1,form:x,...y}=e,b=f.useRef(new Set),v=f.useRef(0),w=i==="horizontal"?Ns:Cs,[j=[],W]=Xe({prop:h,defaultProp:u,onChange:k=>{var U;(U=[...b.current][v.current])==null||U.focus(),d(k)}}),H=f.useRef(j);function M(k){const C=Ds(j,k);$(k,C)}function P(k){$(k,v.current)}function O(){const k=H.current[v.current];j[v.current]!==k&&g(j)}function $(k,C,{commit:U}={commit:!1}){const R=Os(a),V=Ts(Math.round((k-s)/a)*a+s,R),z=Pt(V,[s,o]);W((X=[])=>{const G=_s(X,z,C);if(Ps(G,l*a)){v.current=G.indexOf(z);const Ve=String(G)!==String(X);return Ve&&U&&g(G),Ve?G:X}else return X})}return r.jsx(Ms,{scope:e.__scopeSlider,name:n,disabled:c,min:s,max:o,valueIndexToChangeRef:v,thumbs:b.current,values:j,orientation:i,form:x,children:r.jsx(pe.Provider,{scope:e.__scopeSlider,children:r.jsx(pe.Slot,{scope:e.__scopeSlider,children:r.jsx(w,{"aria-disabled":c,"data-disabled":c?"":void 0,...y,ref:t,onPointerDown:D(y.onPointerDown,()=>{c||(H.current=j)}),min:s,max:o,inverted:m,onSlideStart:c?void 0:M,onSlideMove:c?void 0:P,onSlideEnd:c?void 0:O,onHomeKeyDown:()=>!c&&$(s,0,{commit:!0}),onEndKeyDown:()=>!c&&$(o,j.length-1,{commit:!0}),onStepKeyDown:({event:k,direction:C})=>{if(!c){const V=Ot.includes(k.key)||k.shiftKey&&Tt.includes(k.key)?10:1,z=v.current,X=j[z],G=a*V*C;$(X+G,z,{commit:!0})}}})})})})});Vt.displayName=J;var[zt,Bt]=$t(J,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ns=f.forwardRef((e,t)=>{const{min:n,max:s,dir:o,inverted:a,onSlideStart:i,onSlideMove:c,onSlideEnd:l,onStepKeyDown:u,...h}=e,[d,g]=f.useState(null),m=B(t,w=>g(w)),x=f.useRef(),y=gn(o),b=y==="ltr",v=b&&!a||!b&&a;function A(w){const j=x.current||d.getBoundingClientRect(),W=[0,j.width],M=Te(W,v?[n,s]:[s,n]);return x.current=j,M(w-j.left)}return r.jsx(zt,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:r.jsx(Kt,{dir:y,"data-orientation":"horizontal",...h,ref:m,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const j=A(w.clientX);i==null||i(j)},onSlideMove:w=>{const j=A(w.clientX);c==null||c(j)},onSlideEnd:()=>{x.current=void 0,l==null||l()},onStepKeyDown:w=>{const W=Ft[v?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:W?-1:1})}})})}),Cs=f.forwardRef((e,t)=>{const{min:n,max:s,inverted:o,onSlideStart:a,onSlideMove:i,onSlideEnd:c,onStepKeyDown:l,...u}=e,h=f.useRef(null),d=B(t,h),g=f.useRef(),m=!o;function x(y){const b=g.current||h.current.getBoundingClientRect(),v=[0,b.height],w=Te(v,m?[s,n]:[n,s]);return g.current=b,w(y-b.top)}return r.jsx(zt,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:r.jsx(Kt,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const b=x(y.clientY);a==null||a(b)},onSlideMove:y=>{const b=x(y.clientY);i==null||i(b)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:y=>{const v=Ft[m?"from-bottom":"from-top"].includes(y.key);l==null||l({event:y,direction:v?-1:1})}})})}),Kt=f.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:c,onStepKeyDown:l,...u}=e,h=le(J,n);return r.jsx(E.span,{...u,ref:t,onKeyDown:D(e.onKeyDown,d=>{d.key==="Home"?(i(d),d.preventDefault()):d.key==="End"?(c(d),d.preventDefault()):Ot.concat(Tt).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:D(e.onPointerDown,d=>{const g=d.target;g.setPointerCapture(d.pointerId),d.preventDefault(),h.thumbs.has(g)?g.focus():s(d)}),onPointerMove:D(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&o(d)}),onPointerUp:D(e.onPointerUp,d=>{const g=d.target;g.hasPointerCapture(d.pointerId)&&(g.releasePointerCapture(d.pointerId),a(d))})})}),Wt="SliderTrack",Ht=f.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,o=le(Wt,n);return r.jsx(E.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...s,ref:t})});Ht.displayName=Wt;var me="SliderRange",Ut=f.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,o=le(me,n),a=Bt(me,n),i=f.useRef(null),c=B(t,i),l=o.values.length,u=o.values.map(g=>Yt(g,o.min,o.max)),h=l>1?Math.min(...u):0,d=100-Math.max(...u);return r.jsx(E.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...s,ref:c,style:{...e.style,[a.startEdge]:h+"%",[a.endEdge]:d+"%"}})});Ut.displayName=me;var xe="SliderThumb",Gt=f.forwardRef((e,t)=>{const n=Ss(e.__scopeSlider),[s,o]=f.useState(null),a=B(t,c=>o(c)),i=f.useMemo(()=>s?n().findIndex(c=>c.ref.current===s):-1,[n,s]);return r.jsx(Rs,{...e,ref:a,index:i})}),Rs=f.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:o,...a}=e,i=le(xe,n),c=Bt(xe,n),[l,u]=f.useState(null),h=B(t,A=>u(A)),d=l?i.form||!!l.closest("form"):!0,g=kn(l),m=i.values[s],x=m===void 0?0:Yt(m,i.min,i.max),y=Es(s,i.values.length),b=g==null?void 0:g[c.size],v=b?Is(b,x,c.direction):0;return f.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${x}% + ${v}px)`},children:[r.jsx(pe.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(E.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":i.min,"aria-valuenow":m,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...a,ref:h,style:m===void 0?{display:"none"}:e.style,onFocus:D(e.onFocus,()=>{i.valueIndexToChangeRef.current=s})})}),d&&r.jsx(As,{name:o??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:m},s)]})});Gt.displayName=xe;var As=e=>{const{value:t,...n}=e,s=f.useRef(null),o=js(t);return f.useEffect(()=>{const a=s.current,i=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(i,"value").set;if(o!==t&&l){const u=new Event("input",{bubbles:!0});l.call(a,t),a.dispatchEvent(u)}},[o,t]),r.jsx("input",{style:{display:"none"},...n,ref:s,defaultValue:t})};function _s(e=[],t,n){const s=[...e];return s[n]=t,s.sort((o,a)=>o-a)}function Yt(e,t,n){const a=100/(n-t)*(e-t);return Pt(a,[0,100])}function Es(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Ds(e,t){if(e.length===1)return 0;const n=e.map(o=>Math.abs(o-t)),s=Math.min(...n);return n.indexOf(s)}function Is(e,t,n){const s=e/2,a=Te([0,50],[0,s]);return(s-a(t)*n)*n}function Ls(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Ps(e,t){if(t>0){const n=Ls(e);return Math.min(...n)>=t}return!0}function Te(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function Os(e){return(String(e).split(".")[1]||"").length}function Ts(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var de=Vt,Qt=Ht,Xt=Ut,ye=Gt;const Fs=f.forwardRef(({className:e,...t},n)=>r.jsxs(de,{ref:n,className:S("relative flex w-full touch-none select-none items-center",e),...t,children:[r.jsx(Qt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(Xt,{className:"absolute h-full bg-primary"})}),r.jsx(ye,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Fs.displayName=de.displayName;const $s=(e,t)=>!e||!t?r.jsx(r.Fragment,{}):r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"mt-2 text-muted-foreground",children:e}),r.jsxs("div",{className:"mt-2 text-muted-foreground",children:[t[0],"-",t[1]]})]}),Jt=f.forwardRef(({className:e,...t},n)=>r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsxs(de,{minStepsBetweenThumbs:1,ref:n,className:S("relative flex w-full touch-none select-none items-center mt-2",e),...t,children:[r.jsx(Qt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(Xt,{className:"absolute h-full bg-primary"})}),r.jsx(ye,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}),r.jsx(ye,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}),$s(t.label,t.value)]}));Jt.displayName=de.displayName;const Zt=({maxRange:e,vocalRangeFilter:t,setVocalRangeFilter:n})=>{const s=t==="all"?[0,e]:t;return r.jsx(Jt,{label:"Semitones",step:1,min:0,max:e,defaultValue:s,value:s,className:"max-w-md",onValueChange:o=>n(o)})},Vs=({maxRange:e,vocalRangeFilter:t,setVocalRangeFilter:n,iconOnly:s})=>r.jsxs(ae,{children:[r.jsx(ie,{asChild:!0,children:r.jsxs(I,{variant:"circular",className:"shadow-none outline-0 font-bold rounded-l-none",children:[r.jsx(Ze,{}),!s&&"Range"]})}),r.jsxs(ce,{"aria-label":"Vocal range filter slider",className:"w-80",sideOffset:15,children:[r.jsx(se,{onSelect:o=>o.preventDefault(),children:r.jsx(Zt,{maxRange:e,vocalRangeFilter:t,setVocalRangeFilter:n})},"slider"),r.jsx(se,{onClick:()=>n("all"),children:"Reset"},"reset")]})]}),zs=(e,t,n)=>r.jsxs(r.Fragment,{children:[r.jsx(ee,{children:"Select song range"}),r.jsx(te,{}),r.jsx(se,{onSelect:s=>s.preventDefault(),children:r.jsx(Zt,{maxRange:e,vocalRangeFilter:t,setVocalRangeFilter:n})},"slider"),r.jsx(se,{onClick:()=>n("all"),onSelect:s=>s.preventDefault(),children:"Reset"},"reset")]}),Fe=Ae()(Je(e=>({language:"all",vocalRange:"all",capo:!0,setLanguage:t=>e({language:t}),setVocalRange:t=>e({vocalRange:t}),setCapo:t=>e({capo:t}),toggleCapo:()=>e(t=>({capo:!t.capo}))}),{name:"filter-settings-store"})),Bs=({languages:e,maxRange:t,iconOnly:n})=>{const{language:s,vocalRange:o,capo:a,setLanguage:i,setVocalRange:c,toggleCapo:l}=Fe();return r.jsxs("div",{className:"flex outline outline-primary dark:outline-primary/30 rounded-full outline-2",children:[r.jsx(bs,{languages:e,selectedLanguage:s,setSelectedLanguage:i,iconOnly:n}),r.jsxs(I,{variant:"circular",isActive:a,className:"font-bold rounded-none outline-0 shadow-none",onClick:l,children:[r.jsx(zn,{}),!n&&"Capo"]}),r.jsx(Vs,{maxRange:t,vocalRangeFilter:o,setVocalRangeFilter:c,iconOnly:n})]})},Ks=({languages:e,maxRange:t})=>{const{language:n,vocalRange:s,capo:o,setLanguage:a,setVocalRange:i,toggleCapo:c}=Fe(),l=ys("only screen and (min-width : 1000px)"),u=n==="all"&&(s==="all"||Array.isArray(s)&&s[0]===0&&s[1]===t)&&o;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden lg:flex",children:r.jsx(Bs,{languages:e,maxRange:t,iconOnly:l})}),r.jsx("div",{className:"lg:hidden",children:r.jsxs(ae,{children:[r.jsx(ie,{asChild:!0,children:r.jsx(I,{size:"icon",variant:"circular",isActive:!u,children:r.jsx($n,{})})}),r.jsxs(ce,{"aria-label":"Filtering",className:"dropdown-scroll no-scrollbar w-52 max-h-[80dvh] overflow-y-scroll",sideOffset:15,children:[r.jsx(ne,{onClick:c,onSelect:h=>h.preventDefault(),checked:o,children:"Allow capo"}),zs(t,s,i),ws(e,n,a)]})]})})]})},ve=f.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:S("flex h-full w-full rounded-md bg-background text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...n}));ve.displayName="Input";const qt=Ae()(e=>({query:"",setQuery:t=>e({query:t})}));function Ws(){const[e,t]=f.useState(!1),[n,s]=f.useState(248),o=f.useRef(null),{query:a,setQuery:i}=qt(),c=d=>{const g=d.target.value;i(g)};f.useEffect(()=>{e&&o.current&&o.current.focus()},[e]);const l=()=>{const d=document.getElementById("navbar");d&&s(d.offsetWidth),t(!e)},u=()=>{i(""),t(!1)},h=()=>r.jsxs(I,{type:"button",variant:"ghost",size:"icon",className:S("absolute right-1 top-1/2 transition-all duration-300 ease-in-out -translate-y-1/2 h-7 w-7 !bg-transparent !hover:bg-transparent hover:scale-125 hover:text-primary",a?"scale-100":"scale-0"),onClick:u,children:[r.jsx(qe,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Clear"})]});return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex xs:hidden items-center gap-2",children:r.jsxs("div",{className:S("relative flex transition-all duration-300 ease-in-out items-center z-50",e?"-translate-x-12":""),children:[r.jsx(I,{type:"button",variant:"circular",size:"icon",className:S("relative z-10 transition-all duration-300 ease-in-out",e?"bg-background rounded-r-none text-primary dark:outline-primary":"",a?"bg-primary text-white dark:bg-background dark:text-primary":""),onClick:l,"aria-label":e?"Close search":"Open search","aria-expanded":e,children:r.jsx(he,{className:S("h-4 w-4",e?"scale-110":"")})}),r.jsxs("div",{className:S("absolute left-0 top-0 flex h-full items-center overflow-hidden transition-all duration-300 ease-in-out outline-primary outline outline-2",e?"opacity-100 rounded-full":"opacity-0",a?" outline-primary":""),style:{width:e?`calc(${n}px - 1rem)`:"0"},children:[r.jsx(I,{type:"button",variant:"circular",size:"icon",className:"opacity-0",tabIndex:-1,"aria-hidden":"true",children:r.jsx(he,{className:"h-4 w-4"})}),r.jsx(ve,{ref:o,onChange:c,value:a,placeholder:"Search...",className:S("pl-10 pr-4 text-sm font-medium placeholder:font-normal border-none rounded-full rounded-l-none peer bg-background text-primary placeholder:text-primary dark:placeholder:text-primary/30",a?"bg-background ":"")}),r.jsx(h,{})]})]})}),r.jsxs("div",{className:S("relative hidden xs:flex items-center h-full text-primary dark:text-primary/30 transition-all duration-300 ease-in-out shadow-md rounded-full flex-1 outline-primary dark:outline-primary/30 outline outline-2"),children:[r.jsx(ve,{onChange:c,value:a,placeholder:"Search...",className:S("pl-10 pr-4 text-sm font-medium placeholder:font-normal border-none rounded-full peer hover:bg-background dark:bg-background focus:bg-background text-primary placeholder:text-primary dark:placeholder:text-primary/30",a?"bg-background dark:bg-primary/30":"bg-white dark:bg-background")}),r.jsx(h,{}),r.jsx("div",{className:S("absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none peer-focus:scale-110 peer-focus:text-primary duration-300 ease-in-out transform",a?"scale-110 text-primary":""),children:r.jsx(he,{className:"w-5 h-5"})})]})]})}const en=Ae()(Je(e=>({order:"ascending",field:"title",setSortOrder:t=>e({order:t}),setSortField:t=>e({field:t})}),{name:"sort-settings-store"})),Be={ascending:r.jsx(Ln,{}),descending:r.jsx(On,{})},Ke={ascending:r.jsx(Dn,{}),descending:r.jsx(In,{})},be=[{field:"title",title:"Title",icon:r.jsx(Tn,{}),sorting_icons:Be,sorting_labels:{ascending:"Ascending",descending:"Descending"}},{field:"artist",title:"Artist",icon:r.jsx(Wn,{}),sorting_icons:Be,sorting_labels:{ascending:"Ascending",descending:"Descending"}},{field:"dateAdded",title:"Date Added",icon:r.jsx(Fn,{}),sorting_icons:Ke,sorting_labels:{ascending:"Vivaldi → Lucie Bílá",descending:"Lucie Bílá → Vivaldi"}},{field:"range",title:"Range",icon:r.jsx(Ze,{}),sorting_icons:Ke,sorting_labels:{ascending:"Me → Freddie",descending:"Freddie → Me"}}],Hs=(e,t)=>e===t,Us=e=>e==="descending"?"ascending":"descending",Gs=e=>{const t=be.find(n=>n.field===e);if(!t)throw new Error(`Invalid sorting field: ${e}`);return t},Ys=()=>{const{field:e,order:t,setSortField:n,setSortOrder:s}=en(),o=be.map(i=>({label:i.title,value:i.field})),a=Gs(e);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex md:hidden",children:r.jsxs(ae,{children:[r.jsx(ie,{asChild:!0,children:r.jsx(I,{size:"icon",variant:"circular",children:r.jsx(Pn,{size:32})})}),r.jsxs(ce,{className:"w-56",sideOffset:15,children:[r.jsx(ee,{children:"Sorting method"}),r.jsx(te,{}),be.map(i=>r.jsxs(ne,{onSelect:c=>c.preventDefault(),checked:Hs(e,i.field),onCheckedChange:()=>n(i.field),children:[r.jsx(ge,{icon:i.icon}),i.title]},i.field)),r.jsx(ee,{children:"Direction"}),r.jsx(te,{}),["ascending","descending"].map(i=>r.jsxs(ne,{checked:t===i,onSelect:c=>c.preventDefault(),onCheckedChange:()=>s(i),children:[r.jsx(ge,{icon:a.sorting_icons[i]}),a.sorting_labels[i]]},`${i}_sort`))]})]})}),r.jsx("div",{className:"hidden md:flex h-full w-fit",children:r.jsx(Mn,{options:o,setSelectedOption:n,selectedOption:e,roundedClass:"rounded-l-full",children:r.jsx(I,{className:"rounded-r-full",onClick:()=>s(Us(t)),children:a.sorting_icons[t]})})})]})};function Qs({songs:e,showToolbar:t,scrollOffset:n,fakeScroll:s=!1,maxRange:o,languages:a}){const i=pn();return r.jsxs(Nn,{showToolbar:t,scrollOffset:n,fakeScroll:s,children:[r.jsx(Ys,{}),r.jsx(Ws,{}),r.jsx(Ks,{languages:a,maxRange:o}),r.jsx("div",{className:"hidden h-full w-fit sm:flex",children:r.jsx(Cn,{})}),r.jsx(I,{size:"icon",variant:"circular",onClick:()=>i("gallery"),children:r.jsx(Bn,{})}),r.jsx(Rn,{songs:e})]})}function F(e){return Array.isArray?Array.isArray(e):sn(e)==="[object Array]"}const Xs=1/0;function Js(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Xs?"-0":t}function Zs(e){return e==null?"":Js(e)}function T(e){return typeof e=="string"}function tn(e){return typeof e=="number"}function qs(e){return e===!0||e===!1||er(e)&&sn(e)=="[object Boolean]"}function nn(e){return typeof e=="object"}function er(e){return nn(e)&&e!==null}function _(e){return e!=null}function fe(e){return!e.trim().length}function sn(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const tr="Incorrect 'index' type",nr=e=>`Invalid value for key ${e}`,sr=e=>`Pattern length exceeds max of ${e}.`,rr=e=>`Missing ${e} property in key`,or=e=>`Property 'weight' in key '${e}' must be a positive integer`,We=Object.prototype.hasOwnProperty;class ar{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(s=>{let o=rn(s);this._keys.push(o),this._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(s=>{s.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function rn(e){let t=null,n=null,s=null,o=1,a=null;if(T(e)||F(e))s=e,t=He(e),n=we(e);else{if(!We.call(e,"name"))throw new Error(rr("name"));const i=e.name;if(s=i,We.call(e,"weight")&&(o=e.weight,o<=0))throw new Error(or(i));t=He(i),n=we(i),a=e.getFn}return{path:t,id:n,weight:o,src:s,getFn:a}}function He(e){return F(e)?e:e.split(".")}function we(e){return F(e)?e.join("."):e}function ir(e,t){let n=[],s=!1;const o=(a,i,c)=>{if(_(a))if(!i[c])n.push(a);else{let l=i[c];const u=a[l];if(!_(u))return;if(c===i.length-1&&(T(u)||tn(u)||qs(u)))n.push(Zs(u));else if(F(u)){s=!0;for(let h=0,d=u.length;h<d;h+=1)o(u[h],i,c+1)}else i.length&&o(u,i,c+1)}};return o(e,T(t)?t.split("."):t,0),s?n:n[0]}const cr={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},lr={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},dr={location:0,threshold:.6,distance:100},ur={useExtendedSearch:!1,getFn:ir,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var p={...lr,...cr,...dr,...ur};const hr=/[^ ]+/g;function fr(e=1,t=3){const n=new Map,s=Math.pow(10,t);return{get(o){const a=o.match(hr).length;if(n.has(a))return n.get(a);const i=1/Math.pow(a,.5*e),c=parseFloat(Math.round(i*s)/s);return n.set(a,c),c},clear(){n.clear()}}}class $e{constructor({getFn:t=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){this.norm=fr(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,T(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();T(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!_(t)||fe(t))return;let s={v:t,i:n,n:this.norm.get(t)};this.records.push(s)}_addObject(t,n){let s={i:n,$:{}};this.keys.forEach((o,a)=>{let i=o.getFn?o.getFn(t):this.getFn(t,o.path);if(_(i)){if(F(i)){let c=[];const l=[{nestedArrIndex:-1,value:i}];for(;l.length;){const{nestedArrIndex:u,value:h}=l.pop();if(_(h))if(T(h)&&!fe(h)){let d={v:h,i:u,n:this.norm.get(h)};c.push(d)}else F(h)&&h.forEach((d,g)=>{l.push({nestedArrIndex:g,value:d})})}s.$[a]=c}else if(T(i)&&!fe(i)){let c={v:i,n:this.norm.get(i)};s.$[a]=c}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function on(e,t,{getFn:n=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){const o=new $e({getFn:n,fieldNormWeight:s});return o.setKeys(e.map(rn)),o.setSources(t),o.create(),o}function gr(e,{getFn:t=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){const{keys:s,records:o}=e,a=new $e({getFn:t,fieldNormWeight:n});return a.setKeys(s),a.setIndexRecords(o),a}function q(e,{errors:t=0,currentLocation:n=0,expectedLocation:s=0,distance:o=p.distance,ignoreLocation:a=p.ignoreLocation}={}){const i=t/e.length;if(a)return i;const c=Math.abs(s-n);return o?i+c/o:c?1:i}function pr(e=[],t=p.minMatchCharLength){let n=[],s=-1,o=-1,a=0;for(let i=e.length;a<i;a+=1){let c=e[a];c&&s===-1?s=a:!c&&s!==-1&&(o=a-1,o-s+1>=t&&n.push([s,o]),s=-1)}return e[a-1]&&a-s>=t&&n.push([s,a-1]),n}const Y=32;function mr(e,t,n,{location:s=p.location,distance:o=p.distance,threshold:a=p.threshold,findAllMatches:i=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,includeMatches:l=p.includeMatches,ignoreLocation:u=p.ignoreLocation}={}){if(t.length>Y)throw new Error(sr(Y));const h=t.length,d=e.length,g=Math.max(0,Math.min(s,d));let m=a,x=g;const y=c>1||l,b=y?Array(d):[];let v;for(;(v=e.indexOf(t,x))>-1;){let M=q(t,{currentLocation:v,expectedLocation:g,distance:o,ignoreLocation:u});if(m=Math.min(M,m),x=v+h,y){let P=0;for(;P<h;)b[v+P]=1,P+=1}}x=-1;let A=[],w=1,j=h+d;const W=1<<h-1;for(let M=0;M<h;M+=1){let P=0,O=j;for(;P<O;)q(t,{errors:M,currentLocation:g+O,expectedLocation:g,distance:o,ignoreLocation:u})<=m?P=O:j=O,O=Math.floor((j-P)/2+P);j=O;let $=Math.max(1,g-O+1),k=i?d:Math.min(g+O,d)+h,C=Array(k+2);C[k+1]=(1<<M)-1;for(let R=k;R>=$;R-=1){let V=R-1,z=n[e.charAt(V)];if(y&&(b[V]=+!!z),C[R]=(C[R+1]<<1|1)&z,M&&(C[R]|=(A[R+1]|A[R])<<1|1|A[R+1]),C[R]&W&&(w=q(t,{errors:M,currentLocation:V,expectedLocation:g,distance:o,ignoreLocation:u}),w<=m)){if(m=w,x=V,x<=g)break;$=Math.max(1,2*g-x)}}if(q(t,{errors:M+1,currentLocation:g,expectedLocation:g,distance:o,ignoreLocation:u})>m)break;A=C}const H={isMatch:x>=0,score:Math.max(.001,w)};if(y){const M=pr(b,c);M.length?l&&(H.indices=M):H.isMatch=!1}return H}function xr(e){let t={};for(let n=0,s=e.length;n<s;n+=1){const o=e.charAt(n);t[o]=(t[o]||0)|1<<s-n-1}return t}class an{constructor(t,{location:n=p.location,threshold:s=p.threshold,distance:o=p.distance,includeMatches:a=p.includeMatches,findAllMatches:i=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,isCaseSensitive:l=p.isCaseSensitive,ignoreLocation:u=p.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:o,includeMatches:a,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(g,m)=>{this.chunks.push({pattern:g,alphabet:xr(g),startIndex:m})},d=this.pattern.length;if(d>Y){let g=0;const m=d%Y,x=d-m;for(;g<x;)h(this.pattern.substr(g,Y),g),g+=Y;if(m){const y=d-Y;h(this.pattern.substr(y),y)}}else h(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:s}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let x={isMatch:!0,score:0};return s&&(x.indices=[[0,t.length-1]]),x}const{location:o,distance:a,threshold:i,findAllMatches:c,minMatchCharLength:l,ignoreLocation:u}=this.options;let h=[],d=0,g=!1;this.chunks.forEach(({pattern:x,alphabet:y,startIndex:b})=>{const{isMatch:v,score:A,indices:w}=mr(t,x,y,{location:o+b,distance:a,threshold:i,findAllMatches:c,minMatchCharLength:l,includeMatches:s,ignoreLocation:u});v&&(g=!0),d+=A,v&&w&&(h=[...h,...w])});let m={isMatch:g,score:g?d/this.chunks.length:1};return g&&s&&(m.indices=h),m}}class K{constructor(t){this.pattern=t}static isMultiMatch(t){return Ue(t,this.multiRegex)}static isSingleMatch(t){return Ue(t,this.singleRegex)}search(){}}function Ue(e,t){const n=e.match(t);return n?n[1]:null}class yr extends K{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class vr extends K{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class br extends K{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class wr extends K{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class jr extends K{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Sr extends K{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class cn extends K{constructor(t,{location:n=p.location,threshold:s=p.threshold,distance:o=p.distance,includeMatches:a=p.includeMatches,findAllMatches:i=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,isCaseSensitive:l=p.isCaseSensitive,ignoreLocation:u=p.ignoreLocation}={}){super(t),this._bitapSearch=new an(t,{location:n,threshold:s,distance:o,includeMatches:a,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class ln extends K{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,s;const o=[],a=this.pattern.length;for(;(s=t.indexOf(this.pattern,n))>-1;)n=s+a,o.push([s,n-1]);const i=!!o.length;return{isMatch:i,score:i?0:1,indices:o}}}const je=[yr,ln,br,wr,Sr,jr,vr,cn],Ge=je.length,kr=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Mr="|";function Nr(e,t={}){return e.split(Mr).map(n=>{let s=n.trim().split(kr).filter(a=>a&&!!a.trim()),o=[];for(let a=0,i=s.length;a<i;a+=1){const c=s[a];let l=!1,u=-1;for(;!l&&++u<Ge;){const h=je[u];let d=h.isMultiMatch(c);d&&(o.push(new h(d,t)),l=!0)}if(!l)for(u=-1;++u<Ge;){const h=je[u];let d=h.isSingleMatch(c);if(d){o.push(new h(d,t));break}}}return o})}const Cr=new Set([cn.type,ln.type]);class Rr{constructor(t,{isCaseSensitive:n=p.isCaseSensitive,includeMatches:s=p.includeMatches,minMatchCharLength:o=p.minMatchCharLength,ignoreLocation:a=p.ignoreLocation,findAllMatches:i=p.findAllMatches,location:c=p.location,threshold:l=p.threshold,distance:u=p.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:s,minMatchCharLength:o,findAllMatches:i,ignoreLocation:a,location:c,threshold:l,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=Nr(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:o}=this.options;t=o?t:t.toLowerCase();let a=0,i=[],c=0;for(let l=0,u=n.length;l<u;l+=1){const h=n[l];i.length=0,a=0;for(let d=0,g=h.length;d<g;d+=1){const m=h[d],{isMatch:x,indices:y,score:b}=m.search(t);if(x){if(a+=1,c+=b,s){const v=m.constructor.type;Cr.has(v)?i=[...i,...y]:i.push(y)}}else{c=0,a=0,i.length=0;break}}if(a){let d={isMatch:!0,score:c/a};return s&&(d.indices=i),d}}return{isMatch:!1,score:1}}}const Se=[];function Ar(...e){Se.push(...e)}function ke(e,t){for(let n=0,s=Se.length;n<s;n+=1){let o=Se[n];if(o.condition(e,t))return new o(e,t)}return new an(e,t)}const oe={AND:"$and",OR:"$or"},Me={PATH:"$path",PATTERN:"$val"},Ne=e=>!!(e[oe.AND]||e[oe.OR]),_r=e=>!!e[Me.PATH],Er=e=>!F(e)&&nn(e)&&!Ne(e),Ye=e=>({[oe.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function dn(e,t,{auto:n=!0}={}){const s=o=>{let a=Object.keys(o);const i=_r(o);if(!i&&a.length>1&&!Ne(o))return s(Ye(o));if(Er(o)){const l=i?o[Me.PATH]:a[0],u=i?o[Me.PATTERN]:o[l];if(!T(u))throw new Error(nr(l));const h={keyId:we(l),pattern:u};return n&&(h.searcher=ke(u,t)),h}let c={children:[],operator:a[0]};return a.forEach(l=>{const u=o[l];F(u)&&u.forEach(h=>{c.children.push(s(h))})}),c};return Ne(e)||(e=Ye(e)),s(e)}function Dr(e,{ignoreFieldNorm:t=p.ignoreFieldNorm}){e.forEach(n=>{let s=1;n.matches.forEach(({key:o,norm:a,score:i})=>{const c=o?o.weight:null;s*=Math.pow(i===0&&c?Number.EPSILON:i,(c||1)*(t?1:a))}),n.score=s})}function Ir(e,t){const n=e.matches;t.matches=[],_(n)&&n.forEach(s=>{if(!_(s.indices)||!s.indices.length)return;const{indices:o,value:a}=s;let i={indices:o,value:a};s.key&&(i.key=s.key.src),s.idx>-1&&(i.refIndex=s.idx),t.matches.push(i)})}function Lr(e,t){t.score=e.score}function Pr(e,t,{includeMatches:n=p.includeMatches,includeScore:s=p.includeScore}={}){const o=[];return n&&o.push(Ir),s&&o.push(Lr),e.map(a=>{const{idx:i}=a,c={item:t[i],refIndex:i};return o.length&&o.forEach(l=>{l(a,c)}),c})}class Z{constructor(t,n={},s){this.options={...p,...n},this.options.useExtendedSearch,this._keyStore=new ar(this.options.keys),this.setCollection(t,s)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof $e))throw new Error(tr);this._myIndex=n||on(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){_(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let s=0,o=this._docs.length;s<o;s+=1){const a=this._docs[s];t(a,s)&&(this.removeAt(s),s-=1,o-=1,n.push(a))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:s,includeScore:o,shouldSort:a,sortFn:i,ignoreFieldNorm:c}=this.options;let l=T(t)?T(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Dr(l,{ignoreFieldNorm:c}),a&&l.sort(i),tn(n)&&n>-1&&(l=l.slice(0,n)),Pr(l,this._docs,{includeMatches:s,includeScore:o})}_searchStringList(t){const n=ke(t,this.options),{records:s}=this._myIndex,o=[];return s.forEach(({v:a,i,n:c})=>{if(!_(a))return;const{isMatch:l,score:u,indices:h}=n.searchIn(a);l&&o.push({item:a,idx:i,matches:[{score:u,value:a,norm:c,indices:h}]})}),o}_searchLogical(t){const n=dn(t,this.options),s=(c,l,u)=>{if(!c.children){const{keyId:d,searcher:g}=c,m=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(l,d),searcher:g});return m&&m.length?[{idx:u,item:l,matches:m}]:[]}const h=[];for(let d=0,g=c.children.length;d<g;d+=1){const m=c.children[d],x=s(m,l,u);if(x.length)h.push(...x);else if(c.operator===oe.AND)return[]}return h},o=this._myIndex.records,a={},i=[];return o.forEach(({$:c,i:l})=>{if(_(c)){let u=s(n,c,l);u.length&&(a[l]||(a[l]={idx:l,item:c,matches:[]},i.push(a[l])),u.forEach(({matches:h})=>{a[l].matches.push(...h)}))}}),i}_searchObjectList(t){const n=ke(t,this.options),{keys:s,records:o}=this._myIndex,a=[];return o.forEach(({$:i,i:c})=>{if(!_(i))return;let l=[];s.forEach((u,h)=>{l.push(...this._findMatches({key:u,value:i[h],searcher:n}))}),l.length&&a.push({idx:c,item:i,matches:l})}),a}_findMatches({key:t,value:n,searcher:s}){if(!_(n))return[];let o=[];if(F(n))n.forEach(({v:a,i,n:c})=>{if(!_(a))return;const{isMatch:l,score:u,indices:h}=s.searchIn(a);l&&o.push({score:u,key:t,value:a,idx:i,norm:c,indices:h})});else{const{v:a,n:i}=n,{isMatch:c,score:l,indices:u}=s.searchIn(a);c&&o.push({score:l,key:t,value:a,norm:i,indices:u})}return o}}Z.version="7.0.0";Z.createIndex=on;Z.parseIndex=gr;Z.config=p;Z.parseQuery=dn;Ar(Rr);const Or=(e,t)=>t!=="all"?e.filter(n=>n.language===t):e,Tr=(e,t)=>t?e:e.filter(n=>n.capo===0),Fr=(e,t)=>t==="all"?e:e.filter(n=>{var s;return((s=n.range)==null?void 0:s.semitones)!==void 0&&n.range.semitones>=t[0]&&n.range.semitones<=t[1]}),$r=(e,t)=>(n,s)=>{var a,i,c,l,u,h;let o;if(e==="range"){const d=((a=n.range)==null?void 0:a.semitones)??-1/0,g=((i=s.range)==null?void 0:i.semitones)??-1/0;o=d===g?n.title.localeCompare(s.title):d-g}else if(e==="dateAdded"){const d=(((c=n.dateAdded)==null?void 0:c.year)??0)*12+(((l=n.dateAdded)==null?void 0:l.month)??0),g=(((u=s.dateAdded)==null?void 0:u.year)??0)*12+(((h=s.dateAdded)==null?void 0:h.month)??0);o=d===g?n.title.localeCompare(s.title):d-g}else o=(n[e]??"").localeCompare(s[e]??"");return t==="ascending"?o:-o};function Vr(e){const{field:t,order:n}=en(),{query:s,setQuery:o}=qt(),{language:a,vocalRange:i,capo:c}=Fe();f.useEffect(()=>{o("")},[t,n,o]);const l=f.useMemo(()=>{const d={includeScore:!0,keys:["artist","title","ascii_title","ascii_artist"],ignoreLocation:!0,threshold:.4};return new Z(e,d)},[e]),u=f.useMemo(()=>s===""?e:l.search(s).map(d=>d.item),[l,e,s]);let h=Tr(u,c);return h=Fr(h,i),h=Or(h,a),s||(h=[...h].sort($r(t,n))),{songs:h}}const zr="scrollOffset",Br=30,Kr=20;function Zr(){const e=mn(),{songs:t}=Vr(e.songs),n=f.useRef(null),[s,o]=f.useState(!0),[a,i]=An(zr,{defaultValue:0,storageSync:!1}),[c,l]=f.useState(()=>t.slice(0,Br)),u=f.useRef(null);f.useEffect(()=>{n.current&&requestAnimationFrame(()=>{n.current.scrollTop=a})},[a]),f.useEffect(()=>{if(!t.length)return;u.current=new IntersectionObserver(g=>{g[0].isIntersecting&&l(x=>t.slice(0,x.length+Kr))},{root:n.current,threshold:1});const d=document.querySelector(".song-row:last-child");return d&&u.current.observe(d),()=>{var g;return(g=u.current)==null?void 0:g.disconnect()}},[t,c]);const h=()=>{if(!n.current)return;const d=n.current.scrollTop;i(d),o(d===0||d<a)};return r.jsxs("div",{className:"h-dvh w-full no-scrollbar block",children:[r.jsx(Qs,{songs:t,showToolbar:s,scrollOffset:a,fakeScroll:!0,maxRange:e.maxRange,languages:e.languages}),r.jsx("div",{ref:n,className:"sm:pt-20 pt-[72px] pb-4 overflow-auto h-full",onScroll:h,children:c.map(d=>r.jsx(xs,{song:d,maxRange:e.maxRange},d.id))})]})}export{Zr as default};
//# sourceMappingURL=SongList-Bxvn6cbj.js.map
