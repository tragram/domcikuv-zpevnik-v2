import{c as Ie,r as h,R as ke,x as Oe,ab as je,ac as Ne,j as b,w as We,B as He}from"./main-B4J8Jduv.js";import{I as Ae}from"./IllustrationPrompt-Ba7e-yn7.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=Ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),P=0,y=1,ze=2,_e=0,Z=1;function Fe(t,e,n){let o=t.list,s;for(;o;){if(o.index===n)return!1;if(e>o.high)break;s=o,o=o.next}return s||(t.list={index:n,high:e,next:o}),s&&(s.next={index:n,high:e,next:s.next}),!0}function Ue(t,e){let n=t.list;if(n.index===e)return n.next===null?_e:(t.list=n.next,Z);let o=n;for(n=n.next;n!==null;){if(n.index===e)return o.next=n.next,Z;o=n,n=n.next}}const g={low:0,max:0,high:0,C:ze,P:void 0,R:void 0,L:void 0,list:void 0};g.P=g;g.L=g;g.R=g;function S(t){const e=t.high;t.L===g&&t.R===g?t.max=e:t.L===g?t.max=Math.max(t.R.max,e):t.R===g?t.max=Math.max(t.L.max,e):t.max=Math.max(Math.max(t.L.max,t.R.max),e)}function _(t){let e=t;for(;e.P!==g;)S(e.P),e=e.P}function j(t,e){if(e.R===g)return;const n=e.R;e.R=n.L,n.L!==g&&(n.L.P=e),n.P=e.P,e.P===g?t.root=n:e===e.P.L?e.P.L=n:e.P.R=n,n.L=e,e.P=n,S(e),S(n)}function N(t,e){if(e.L===g)return;const n=e.L;e.L=n.R,n.R!==g&&(n.R.P=e),n.P=e.P,e.P===g?t.root=n:e===e.P.R?e.P.R=n:e.P.L=n,n.R=e,e.P=n,S(e),S(n)}function F(t,e,n){e.P===g?t.root=n:e===e.P.L?e.P.L=n:e.P.R=n,n.P=e.P}function $e(t,e){let n;for(;e!==g&&e.C===y;)e===e.P.L?(n=e.P.R,n.C===P&&(n.C=y,e.P.C=P,j(t,e.P),n=e.P.R),n.L.C===y&&n.R.C===y?(n.C=P,e=e.P):(n.R.C===y&&(n.L.C=y,n.C=P,N(t,n),n=e.P.R),n.C=e.P.C,e.P.C=y,n.R.C=y,j(t,e.P),e=t.root)):(n=e.P.L,n.C===P&&(n.C=y,e.P.C=P,N(t,e.P),n=e.P.L),n.R.C===y&&n.L.C===y?(n.C=P,e=e.P):(n.L.C===y&&(n.R.C=y,n.C=P,j(t,n),n=e.P.L),n.C=e.P.C,e.P.C=y,n.L.C=y,N(t,e.P),e=t.root));e.C=y}function Be(t){for(;t.L!==g;)t=t.L;return t}function qe(t,e){let n;for(;e.P.C===P;)e.P===e.P.P.L?(n=e.P.P.R,n.C===P?(e.P.C=y,n.C=y,e.P.P.C=P,e=e.P.P):(e===e.P.R&&(e=e.P,j(t,e)),e.P.C=y,e.P.P.C=P,N(t,e.P.P))):(n=e.P.P.L,n.C===P?(e.P.C=y,n.C=y,e.P.P.C=P,e=e.P.P):(e===e.P.L&&(e=e.P,N(t,e)),e.P.C=y,e.P.P.C=P,j(t,e.P.P)));t.root.C=y}function Ke(){const t={root:g,size:0},e={};return{insert(n,o,s){let i=t.root,r=g;for(;i!==g&&(r=i,n!==r.low);)n<i.low?i=i.L:i=i.R;if(n===r.low&&r!==g){if(!Fe(r,o,s))return;r.high=Math.max(r.high,o),S(r),_(r),e[s]=r,t.size++;return}const c={low:n,high:o,max:o,C:P,P:r,L:g,R:g,list:{index:s,high:o,next:null}};r===g?t.root=c:(c.low<r.low?r.L=c:r.R=c,_(c)),qe(t,c),e[s]=c,t.size++},remove(n){const o=e[n];if(o===void 0)return;delete e[n];const s=Ue(o,n);if(s===void 0)return;if(s===Z){o.high=o.list.high,S(o),_(o),t.size--;return}let i=o,r=i.C,c;o.L===g?(c=o.R,F(t,o,o.R)):o.R===g?(c=o.L,F(t,o,o.L)):(i=Be(o.R),r=i.C,c=i.R,i.P===o?c.P=i:(F(t,i,i.R),i.R=o.R,i.R.P=i),F(t,o,i),i.L=o.L,i.L.P=i,i.C=o.C),S(c),_(c),r===y&&$e(t,c),t.size--},search(n,o,s){const i=[t.root];for(;i.length!==0;){const r=i.pop();if(!(r===g||n>r.max)&&(r.L!==g&&i.push(r.L),r.R!==g&&i.push(r.R),r.low<=o&&r.high>=n)){let c=r.list;for(;c!==null;)c.high>=n&&s(c.index,r.low),c=c.next}}},get size(){return t.size}}}const B=t=>{const e=h.useRef(t);return h.useEffect(()=>{e.current=t}),e},Ye=(t,e=100,n=!1)=>{const o=B(t),s=h.useRef(),i=[e,n,o];function r(){s.current&&clearTimeout(s.current),s.current=void 0}h.useEffect(()=>r,i);function c(){s.current=void 0}return h.useCallback(function(){const f=arguments,{current:l}=s;if(l===void 0&&n)return s.current=setTimeout(c,e),o.current.apply(null,f);l&&clearTimeout(l),s.current=setTimeout(()=>{s.current=void 0,o.current.apply(null,f)},e)},i)},Ve=(t,e,n)=>{const o=h.useState(t);return[o[0],Ye(o[1],e,n)]};function W(t,e,n,o){const s=h.useRef(n),i=h.useRef(o);h.useEffect(()=>{s.current=n,i.current=o}),h.useEffect(()=>{const r=t&&"current"in t?t.current:t;if(!r)return;let c=0;function f(...a){c||s.current.apply(this,a)}r.addEventListener(e,f);const l=i.current;return()=>{c=1,r.removeEventListener(e,f),l&&l()}},[t,e])}const Je={},H=typeof window>"u"?null:window,Xe=H&&typeof H.visualViewport<"u"?H.visualViewport:null,ae=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],Ge=function(t){t===void 0&&(t=Je);const{wait:e,leading:n,initialWidth:o=0,initialHeight:s=0}=t,[i,r]=Ve(typeof document>"u"?[o,s]:ae,e,n),c=()=>r(ae);return W(H,"resize",c),W(Xe,"resize",c),W(H,"orientationchange",c),i},q=(t,e)=>{const n=e||Qe;let o,s;return function(){return o&&n(arguments,o)?s:s=t.apply(null,o=arguments)}},Qe=(t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3];class ue{constructor(){this.set=void 0,this.get=void 0;let e,n;this.get=o=>o===e?n:void 0,this.set=(o,s)=>{e=o,n=s}}}const Q=t=>{try{return new t}catch{const n={};return{set(o,s){n[o]=s},get(o){return n[o]}}}},Ze=t=>{const e=t.length,n=Q(t[0]);let o,s,i,r;const c=e===1,f=u=>(o=n.get(u[0]))===void 0||c?o:o.get(u[1]),l=(u,d)=>(c?n.set(u[0],d):(o=n.get(u[0]))===void 0?(s=Q(t[1]),s.set(u[1],d),n.set(u[0],s)):o.set(u[1],d),d),a=u=>{for(r=n,i=0;i<e;i++)if((r=r.get(u[i]))===void 0)return;return r},m=(u,d)=>{for(r=n,i=0;i<e-1;i++)(s=r.get(u[i]))===void 0&&(s=Q(t[i+1]),r.set(u[i],s)),r=s;return r.set(u[e-1],d),d};return e<3?{g:f,s:l}:{g:a,s:m}},ye=(t,e)=>{let n;const{g:o,s}=Ze(t);return function(){return(n=o(arguments))===void 0?s(arguments,e.apply(null,arguments)):n}},ee=new WeakMap;function we(){const t=h.useState(et)[1];return h.useRef(()=>t({})).current}const et={},U=h.createElement;function tt(t){let{positioner:e,resizeObserver:n,items:o,as:s="div",id:i,className:r,style:c,role:f="grid",tabIndex:l=0,containerRef:a,itemAs:m="div",itemStyle:u,itemHeightEstimate:d=300,itemKey:p=st,overscanBy:v=2,scrollTop:C,isScrolling:w,height:R,render:E,onRender:K}=t,I=0,T;const xe=we(),oe=rt(e,n),Y=o.length,{columnWidth:A,columnCount:Le,range:Se,estimateHeight:Te,size:Me,shortestColumn:Ee}=e,D=Me(),se=Ee(),V=[],ie=f==="list"?"listitem":f==="grid"?"gridcell":void 0,J=B(K);v=R*v;const re=C+v,X=se<re&&D<Y;if(Se(Math.max(0,C-v/2),re,(x,L,z)=>{const k=o[x],G=p(k,x),le={top:z,left:L,width:A,writingMode:"horizontal-tb",position:"absolute"};typeof process<"u",V.push(U(m,{key:G,ref:oe(x),role:ie,style:typeof u=="object"&&u!==null?Object.assign({},le,u):le},de(E,x,k,A))),T===void 0?(I=x,T=x):(I=Math.min(I,x),T=Math.max(T,x))}),X){const x=Math.min(Y-D,Math.ceil((C+v-se)/d*Le));let L=D;const z=it(A);for(;L<D+x;L++){const k=o[L],G=p(k,L);typeof process<"u",V.push(U(m,{key:G,ref:oe(L),role:ie,style:typeof u=="object"?Object.assign({},z,u):z},de(E,L,k,A)))}}h.useEffect(()=>{typeof J.current=="function"&&T!==void 0&&J.current(I,T,o),fe="1"},[I,T,o,J]),h.useEffect(()=>{X&&xe()},[X,e]);const ce=nt(w,Te(Y,d));return U(s,{ref:a,key:fe,id:i,role:f,className:r,tabIndex:l,style:typeof c=="object"?ot(ce,c):ce,children:V})}let fe="0";const de=ye([ue,{},WeakMap,ue],(t,e,n,o)=>U(t,{index:e,data:n,width:o})),nt=q((t,e)=>({position:"relative",width:"100%",maxWidth:"100%",height:Math.ceil(e),maxHeight:Math.ceil(e),willChange:t?"contents":void 0,pointerEvents:t?"none":void 0})),Pe=(t,e)=>t[0]===e[0]&&t[1]===e[1],ot=q((t,e)=>Object.assign({},t,e),Pe);function st(t,e){return e}const it=q(t=>({width:t,zIndex:-1e3,visibility:"hidden",position:"absolute",writingMode:"horizontal-tb"}),(t,e)=>t[0]===e[0]),rt=q((t,e)=>n=>o=>{o!==null&&(e&&(e.observe(o),ee.set(o,n)),t.get(n)===void 0&&t.set(n,o.offsetHeight))},Pe);let Ce="undefined",M=typeof window!==Ce?window:{},ct=typeof performance!==Ce?performance:Date,te=()=>ct.now(),Re="AnimationFrame",he="cancel"+Re,me="request"+Re,$=M[me]&&M[me].bind(M),ne=M[he]&&M[he].bind(M);function lt(t){return clearTimeout(t)}if(!$||!ne){let t=0;$=e=>{let n=te(),o=Math.max(t+1e3/60,n);return setTimeout(()=>{e(t=o)},o-n)},ne=lt}const at=t=>{ne(t.v||-1)},ut=(t,e)=>{const n=te(),o={},s=()=>{te()-n>=e?t.call(null):o.v=$(s)};return o.v=$(s),o},ft=typeof performance<"u"?performance:Date,dt=()=>ft.now();function be(t,e=30,n=!1){const o=B(t),s=1e3/e,i=h.useRef(0),r=h.useRef(),c=()=>r.current&&clearTimeout(r.current),f=[e,n,o];function l(){i.current=0,c()}return h.useEffect(()=>l,f),h.useCallback(function(){const a=arguments,m=dt(),u=()=>{i.current=m,c(),o.current.apply(null,a)},d=i.current;if(n&&d===0)return u();if(m-d>s){if(d>0)return u();i.current=m}c(),r.current=setTimeout(()=>{u(),i.current=0},s)},f)}function ht(t,e,n){const o=h.useState(t);return[o[0],be(o[1],e,n)]}const O=typeof window>"u"?null:window,ge=()=>O.scrollY!==void 0?O.scrollY:O.pageYOffset===void 0?0:O.pageYOffset,mt=(t=30)=>{const e=ht(typeof window>"u"?0:ge,t,!0);return W(O,"scroll",()=>e[1](ge())),e[0]};function gt(t,e){t===void 0&&(t=0),e===void 0&&(e=12);const n=mt(e),[o,s]=h.useState(!1),i=h.useRef(0);return h.useEffect(()=>{i.current===1&&s(!0);let r=!1;const c=ut(()=>{r||s(!1)},40+1e3/e);return i.current=1,()=>{r=!0,at(c)}},[e,n]),{scrollTop:Math.max(0,n-t),isScrolling:o}}function pt(t){const{scrollTop:e,isScrolling:n}=gt(t.offset,t.scrollFps);return tt({scrollTop:e,isScrolling:n,positioner:t.positioner,resizeObserver:t.resizeObserver,items:t.items,onRender:t.onRender,as:t.as,id:t.id,className:t.className,style:t.style,role:t.role,tabIndex:t.tabIndex,containerRef:t.containerRef,itemAs:t.itemAs,itemStyle:t.itemStyle,itemHeightEstimate:t.itemHeightEstimate,itemKey:t.itemKey,overscanBy:t.overscanBy,height:t.height,render:t.render})}const vt=ke[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"];function yt(t,e){e===void 0&&(e=wt);const[n,o]=h.useState({offset:0,width:0});return vt(()=>{const{current:s}=t;if(s!==null){let i=0,r=s;do i+=r.offsetTop||0,r=r.offsetParent;while(r);(i!==n.offset||s.offsetWidth!==n.width)&&o({offset:i,width:s.offsetWidth})}},e),n}const wt=[];function Pt(t,e){let{width:n,columnWidth:o=200,columnGutter:s=0,rowGutter:i,columnCount:r,maxColumnCount:c}=t;e===void 0&&(e=xt);const f=()=>{const[p,v]=bt(n,o,s,r,c);return Ct(v,p,s,i??s)},l=h.useRef();l.current===void 0&&(l.current=f());const a=h.useRef(e),m=[n,o,s,i,r,c],u=h.useRef(m),d=!m.every((p,v)=>u.current[v]===p);if(typeof process<"u",d||!e.every((p,v)=>a.current[v]===p)){const p=l.current,v=f();if(a.current=e,u.current=m,d){const C=p.size();for(let w=0;w<C;w++){const R=p.get(w);v.set(w,R!==void 0?R.height:0)}}l.current=v}return l.current}const Ct=function(t,e,n,o){n===void 0&&(n=0),o===void 0&&(o=n);const s=Ke(),i=new Array(t),r=[],c=new Array(t);for(let f=0;f<t;f++)i[f]=0,c[f]=[];return{columnCount:t,columnWidth:e,set:function(f,l){l===void 0&&(l=0);let a=0;for(let u=1;u<i.length;u++)i[u]<i[a]&&(a=u);const m=i[a]||0;i[a]=m+l+o,c[a].push(f),r[f]={left:a*(e+n),top:m,height:l,column:a},s.insert(m,m+l,f)},get:f=>r[f],update:f=>{const l=new Array(t);let a=0,m=0;for(;a<f.length-1;a++){const u=f[a],d=r[u];d.height=f[++a],s.remove(u),s.insert(d.top,d.top+d.height,u),l[d.column]=l[d.column]===void 0?u:Math.min(u,l[d.column])}for(a=0;a<l.length;a++){if(l[a]===void 0)continue;const u=c[a],d=Rt(u,l[a]),p=c[a][d],v=r[p];for(i[a]=v.top+v.height+o,m=d+1;m<u.length;m++){const C=u[m],w=r[C];w.top=i[a],i[a]=w.top+w.height+o,s.remove(C),s.insert(w.top,w.top+w.height,C)}}},range:(f,l,a)=>s.search(f,l,(m,u)=>a(m,r[m].left,u)),estimateHeight:(f,l)=>{const a=Math.max(0,Math.max.apply(null,i));return f===s.size?a:a+Math.ceil((f-s.size)/t)*l},shortestColumn:()=>i.length>1?Math.min.apply(null,i):i[0]||0,size(){return s.size},all(){return r}}},Rt=(t,e)=>{let n=0,o=t.length-1;for(;n<=o;){const s=n+o>>>1,i=t[s];if(i===e)return s;i<=e?n=s+1:o=s-1}return-1},bt=function(t,e,n,o,s){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=8),o=o||Math.min(Math.floor((t+n)/(e+n)),s||1/0)||1,[Math.floor((t-n*(o-1))/o),o]},xt=[];var pe=function(e){var n=[],o=null,s=function(){for(var r=arguments.length,c=new Array(r),f=0;f<r;f++)c[f]=arguments[f];n=c,!o&&(o=requestAnimationFrame(function(){o=null,e.apply(void 0,n)}))};return s.cancel=function(){o&&(cancelAnimationFrame(o),o=null)},s};function Lt(t){const e=we(),n=Tt(t,e);function o(){return n.disconnect()}return h.useEffect(()=>o,[n]),n}function St(t){t.cancel()}const Tt=ye([WeakMap],(t,e)=>{const n=[],o=pe(()=>{n.length>0&&(t.update(n),e(n)),n.length=0}),s=l=>{const a=l.offsetHeight;if(a>0){const m=ee.get(l);if(m!==void 0){const u=t.get(m);u!==void 0&&a!==u.height&&n.push(m,a)}}o()},i=new Map,r=l=>{let a=0;for(;a<l.length;a++){const m=l[a],u=ee.get(m.target);if(u===void 0)continue;let d=i.get(u);d||(d=pe(s),i.set(u,d)),d(m.target)}},c=new ResizeObserver(r),f=c.disconnect.bind(c);return c.disconnect=()=>{f(),i.forEach(St)},c});function Mt(t,e){var n;const{align:o="top",element:s=typeof window<"u"&&window,offset:i=0,height:r=typeof window<"u"?window.innerHeight:0}=e,c=B({positioner:t,element:s,align:o,offset:i,height:r}),f=h.useRef(()=>{const d=c.current.element;return d&&"current"in d?d.current:d}).current,[l,a]=h.useReducer((d,p)=>{const v={position:d.position,index:d.index,prevTop:d.prevTop};if(p.type==="scrollToIndex"){var C;return{position:c.current.positioner.get((C=p.value)!==null&&C!==void 0?C:-1),index:p.value,prevTop:void 0}}else if(p.type==="setPosition")v.position=p.value;else if(p.type==="setPrevTop")v.prevTop=p.value;else if(p.type==="reset")return ve;return v},ve),m=be(a,15);W(f(),"scroll",()=>{if(!l.position&&l.index){const d=c.current.positioner.get(l.index);d&&a({type:"setPosition",value:d})}});const u=l.index!==void 0&&((n=c.current.positioner.get(l.index))===null||n===void 0?void 0:n.top);return h.useEffect(()=>{const d=f();if(!d)return;const{height:p,align:v,offset:C,positioner:w}=c.current;if(l.position){let R=l.position.top;v==="bottom"?R=R-p+l.position.height:v==="center"&&(R-=(p-l.position.height)/2),d.scrollTo(0,Math.max(0,R+=C));let E=!1;const K=setTimeout(()=>!E&&a({type:"reset"}),400);return()=>{E=!0,clearTimeout(K)}}else if(l.index!==void 0){let R=w.shortestColumn()/w.size()*l.index;l.prevTop&&(R=Math.max(R,l.prevTop+p)),d.scrollTo(0,R),m({type:"setPrevTop",value:R})}},[u,l,c,f,m]),h.useRef(d=>{a({type:"scrollToIndex",value:d})}).current}const ve={index:void 0,position:void 0,prevTop:void 0},Et=h.createElement;function It(t){const e=h.useRef(null),n=Ge({initialWidth:t.ssrWidth,initialHeight:t.ssrHeight}),o=yt(e,n),s=Object.assign({offset:o.offset,width:o.width||n[0],height:n[1],containerRef:e},t);s.positioner=Pt(s),s.resizeObserver=Lt(s.positioner);const i=Mt(s.positioner,{height:s.height,offset:o.offset,align:typeof t.scrollToIndex=="object"?t.scrollToIndex.align:void 0}),r=t.scrollToIndex&&(typeof t.scrollToIndex=="number"?t.scrollToIndex:t.scrollToIndex.index);return h.useEffect(()=>{r!==void 0&&i(r)},[r,i]),Et(pt,s)}const kt=t=>{const e=t.slice();for(let n=e.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[e[n],e[o]]=[e[o],e[n]]}return e},Ot=(t,e)=>t*(1-e+e*Math.random());function jt({song:t}){const e=We(),[n,o]=h.useState(!1),[s,i]=h.useState(!1),r=()=>{console.log("Error showing image in gallery!"),o(!0)},[c,f]=h.useState(null),[l,a]=h.useState(0);return h.useEffect(()=>{f(Ot(512,.3))},[]),b.jsx(b.Fragment,{children:b.jsxs("div",{className:"w-full relative "+(n?"hidden":"flex"),style:{height:c},children:[b.jsx("div",{className:"background-image flex w-full rounded-lg",onError:r,style:{backgroundImage:`url("${t.illustrationURL()}")`}}),b.jsx("div",{className:"image-overlay absolute overflow-hidden rounded-lg z-10 border border-1 border-glass/30 backdrop-blur-lg bg-primary/30 "+("opacity-"+l),onMouseOver:()=>a(100),onMouseOut:()=>a(0),onMouseEnter:()=>i(!0),onClick:()=>i(!0),children:b.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-start pt-4 overflow-hidden ",children:[b.jsx(De,{className:"absolute top-4 right-4 w-8 h-8 text-white/80 hover:text-white",onClick:()=>a(0)}),b.jsx("h2",{className:"text-tiny text-white/90 font-bold uppercase text-shadow",children:t.artist}),b.jsx("h2",{className:"text-white font-bold text-shadow",children:t.title}),b.jsx(Ae,{song:t,show:s,className:"text-white h-32"}),b.jsx(He,{onClick:()=>e(t.url()),className:"w-full rounded-t-none bg-primary text-white text-md backdrop-blur-sm hover:bg-background hover:text-primary"+(s?"":" hidden"),children:"View"})]})})]})})}const Ht=h.memo(()=>{const t=Oe(),e=je(),n=h.useMemo(()=>{const i=e.key||"default",r=sessionStorage.getItem(`shuffled-songs-${i}`);if(r)return JSON.parse(r).map(f=>Ne.fromJSON(f));const c=kt(t.songs);return sessionStorage.setItem(`shuffled-songs-${i}`,JSON.stringify(c)),c},[t.songs,e.key]),o=h.useMemo(()=>()=>{const i=[700,1200,1800],r=window.innerWidth;for(const c of Array(3).keys())if(r<i[c])return r/(c+2);return r/5},[]),s=h.useMemo(()=>({index:i,data:r,width:c})=>b.jsx(jt,{song:r}),[]);return b.jsx("div",{className:"max-w-full m-[10px]",children:b.jsx(It,{items:n,render:s,columnGutter:10,rowGutter:10,columnWidth:o()})})});export{Ht as default};
//# sourceMappingURL=SongGallery-DWiRA-iH.js.map
